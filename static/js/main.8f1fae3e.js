/*! For license information please see main.8f1fae3e.js.LICENSE.txt */
(()=>{var e={3542:(e,t,n)=>{"use strict";function r(e){a!==e&&(a=e)}function o(){return void 0===a&&(a="undefined"!==typeof document&&!!document.documentElement&&"rtl"===document.documentElement.getAttribute("dir")),a}var a;function i(){return{rtl:o()}}n.d(t,{DU:()=>r,Iy:()=>i}),a=o()},3722:(e,t,n)=>{"use strict";n.d(t,{n:()=>d});var r,o=n(6326),a=0,i=1,s=2,l="__stylesheet__",c="undefined"!==typeof navigator&&/rv:11.0/.test(navigator.userAgent),u={};try{u=window||{}}catch(p){}var d=function(){function e(e,t){var n,r,s,l,c,u;this._rules=[],this._preservedRules=[],this._counter=0,this._keyToClassName={},this._onInsertRuleCallbacks=[],this._onResetCallbacks=[],this._classNameToArgs={},this._config=(0,o.Cl)({injectionMode:"undefined"===typeof document?a:i,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._classNameToArgs=null!==(n=null===t||void 0===t?void 0:t.classNameToArgs)&&void 0!==n?n:this._classNameToArgs,this._counter=null!==(r=null===t||void 0===t?void 0:t.counter)&&void 0!==r?r:this._counter,this._keyToClassName=null!==(l=null!==(s=this._config.classNameCache)&&void 0!==s?s:null===t||void 0===t?void 0:t.keyToClassName)&&void 0!==l?l:this._keyToClassName,this._preservedRules=null!==(c=null===t||void 0===t?void 0:t.preservedRules)&&void 0!==c?c:this._preservedRules,this._rules=null!==(u=null===t||void 0===t?void 0:t.rules)&&void 0!==u?u:this._rules}return e.getInstance=function(){if(!(r=u[l])||r._lastStyleElement&&r._lastStyleElement.ownerDocument!==document){var t=(null===u||void 0===u?void 0:u.FabricConfig)||{},n=new e(t.mergeStyles,t.serializedStylesheet);r=n,u[l]=n}return r},e.prototype.serialize=function(){return JSON.stringify({classNameToArgs:this._classNameToArgs,counter:this._counter,keyToClassName:this._keyToClassName,preservedRules:this._preservedRules,rules:this._rules})},e.prototype.setConfig=function(e){this._config=(0,o.Cl)((0,o.Cl)({},this._config),e)},e.prototype.onReset=function(e){var t=this;return this._onResetCallbacks.push(e),function(){t._onResetCallbacks=t._onResetCallbacks.filter((function(t){return t!==e}))}},e.prototype.onInsertRule=function(e){var t=this;return this._onInsertRuleCallbacks.push(e),function(){t._onInsertRuleCallbacks=t._onInsertRuleCallbacks.filter((function(t){return t!==e}))}},e.prototype.getClassName=function(e){var t=this._config.namespace,n=e||this._config.defaultPrefix;return"".concat(t?t+"-":"").concat(n,"-").concat(this._counter++)},e.prototype.cacheClassName=function(e,t,n,r){this._keyToClassName[t]=e,this._classNameToArgs[e]={args:n,rules:r}},e.prototype.classNameFromKey=function(e){return this._keyToClassName[e]},e.prototype.getClassNameCache=function(){return this._keyToClassName},e.prototype.argsFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.args},e.prototype.insertedRulesFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.rules},e.prototype.insertRule=function(e,t){var n=this._config.injectionMode,r=n!==a?this._getStyleElement():void 0;if(t&&this._preservedRules.push(e),r)switch(n){case i:var o=r.sheet;try{o.insertRule(e,o.cssRules.length)}catch(l){}break;case s:r.appendChild(document.createTextNode(e))}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e),this._onInsertRuleCallbacks.forEach((function(e){return e()}))},e.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")},e.prototype.reset=function(){this._rules=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach((function(e){return e()}))},e.prototype.resetKeys=function(){this._keyToClassName={}},e.prototype._getStyleElement=function(){var e=this;return this._styleElement||"undefined"===typeof document||(this._styleElement=this._createStyleElement(),c||window.requestAnimationFrame((function(){e._styleElement=void 0}))),this._styleElement},e.prototype._createStyleElement=function(){var e=document.head,t=document.createElement("style"),n=null;t.setAttribute("data-merge-styles","true");var r=this._config.cspSettings;if(r&&r.nonce&&t.setAttribute("nonce",r.nonce),this._lastStyleElement)n=this._lastStyleElement.nextElementSibling;else{var o=this._findPlaceholderStyleTag();n=o?o.nextElementSibling:e.childNodes[0]}return e.insertBefore(t,e.contains(n)?n:null),this._lastStyleElement=t,t},e.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},e}()},9044:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(6326);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&1===e.length&&e[0]&&!e[0].subComponentStyles)return e[0];for(var n={},a={},i=0,s=e;i<s.length;i++){var l=s[i];if(l)for(var c in l)if(l.hasOwnProperty(c)){if("subComponentStyles"===c&&void 0!==l.subComponentStyles){var u=l.subComponentStyles;for(var d in u)u.hasOwnProperty(d)&&(a.hasOwnProperty(d)?a[d].push(u[d]):a[d]=[u[d]]);continue}var p=n[c],h=l[c];n[c]=void 0===p?h:(0,r.fX)((0,r.fX)([],Array.isArray(p)?p:[p],!0),Array.isArray(h)?h:[h],!0)}}if(Object.keys(a).length>0){n.subComponentStyles={};var f=n.subComponentStyles,C=function(e){if(a.hasOwnProperty(e)){var t=a[e];f[e]=function(e){return o.apply(void 0,t.map((function(t){return"function"===typeof t?t(e):t})))}}};for(var d in a)C(d)}return n}},8680:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(9044);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=[],a=0,i=t;a<i.length;a++){var s=i[a];s&&o.push("function"===typeof s?s(e):s)}return 1===o.length?o[0]:o.length?r.T.apply(void 0,o):{}}},3684:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(3722);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[],o=[],a=r.n.getInstance();return function e(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s)if("string"===typeof s)if(s.indexOf(" ")>=0)e(s.split(" "));else{var l=a.argsFromClassName(s);l?e(l):-1===n.indexOf(s)&&n.push(s)}else Array.isArray(s)?e(s):"object"===typeof s&&o.push(s)}}(e),{classes:n,objects:o}}},9466:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(3542),o=n(3722),a=n(8205);function i(e){var t=o.n.getInstance(),n=(0,a.bz)((0,r.Iy)(),e);if(!t.classNameFromKey(n)){var i=t.getClassName();t.insertRule("@font-face{".concat(n,"}"),!0),t.cacheClassName(i,n,[],["font-face",n])}}},7666:(e,t,n)=>{"use strict";n.d(t,{L:()=>l,l:()=>s});var r=n(9044),o=n(3684),a=n(3542),i=n(8205);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l(e,(0,a.Iy)())}function l(e,t){var n={subComponentStyles:{}};if(!e[0]&&e.length<=1)return{subComponentStyles:{}};var a=r.T.apply(void 0,e),s=[];for(var l in a)if(a.hasOwnProperty(l)){if("subComponentStyles"===l){n.subComponentStyles=a.subComponentStyles||{};continue}var c=a[l],u=(0,o.h)(c),d=u.classes,p=u.objects;if(null===p||void 0===p?void 0:p.length)(C=(0,i.GJ)(t||{},{displayName:l},p))&&(s.push(C),n[l]=d.concat([C.className]).join(" "));else n[l]=d.join(" ")}for(var h=0,f=s;h<f.length;h++){var C;(C=f[h])&&(0,i.Ae)(C,null===t||void 0===t?void 0:t.specificityMultiplier)}return n}},7002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,e:()=>s});var r=n(3684),o=n(3542),a=n(8205);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e,(0,o.Iy)())}function s(e,t){var n=e instanceof Array?e:[e],o=(0,r.h)(n),i=o.classes,s=o.objects;return s.length&&i.push((0,a.kG)(t||{},s)),i.join(" ")}},8205:(e,t,n)=>{"use strict";n.d(t,{Ae:()=>_,bz:()=>k,kG:()=>S,GJ:()=>I});var r,o=n(6326),a=n(3722),i={};function s(e,t){var n=e[t];"-"!==n.charAt(0)&&(e[t]=i[n]=i[n]||n.replace(/([A-Z])/g,"-$1").toLowerCase())}var l={"user-select":1};function c(e,t){var n=function(){var e;if(!r){var t="undefined"!==typeof document?document:void 0,n="undefined"!==typeof navigator?navigator:void 0,o=null===(e=null===n||void 0===n?void 0:n.userAgent)||void 0===e?void 0:e.toLowerCase();r=t?{isWebkit:!(!t||!("WebkitAppearance"in t.documentElement.style)),isMoz:!!(o&&o.indexOf("firefox")>-1),isOpera:!!(o&&o.indexOf("opera")>-1),isMs:!(!n||!/rv:11.0/i.test(n.userAgent)&&!/Edge\/\d./i.test(navigator.userAgent))}:{isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return r}(),o=e[t];if(l[o]){var a=e[t+1];l[o]&&(n.isWebkit&&e.push("-webkit-"+o,a),n.isMoz&&e.push("-moz-"+o,a),n.isMs&&e.push("-ms-"+o,a),n.isOpera&&e.push("-o-"+o,a))}}var u,d=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function p(e,t){var n=e[t],r=e[t+1];if("number"===typeof r){var o=d.indexOf(n)>-1,a=n.indexOf("--")>-1,i=o||a?"":"px";e[t+1]="".concat(r).concat(i)}}var h="left",f="right",C="@noflip",G=((u={})[h]=f,u[f]=h,u),m={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function A(e,t,n){if(e.rtl){var r=t[n];if(!r)return;var o=t[n+1];if("string"===typeof o&&o.indexOf(C)>=0)t[n+1]=o.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(r.indexOf(h)>=0)t[n]=r.replace(h,f);else if(r.indexOf(f)>=0)t[n]=r.replace(f,h);else if(String(o).indexOf(h)>=0)t[n+1]=o.replace(h,f);else if(String(o).indexOf(f)>=0)t[n+1]=o.replace(f,h);else if(G[r])t[n]=G[r];else if(m[o])t[n+1]=m[o];else switch(r){case"margin":case"padding":t[n+1]=function(e){if("string"===typeof e){var t=e.split(" ");if(4===t.length)return"".concat(t[0]," ").concat(t[3]," ").concat(t[2]," ").concat(t[1])}return e}(o);break;case"box-shadow":t[n+1]=function(e,t){var n=e.split(" "),r=parseInt(n[t],10);return n[0]=n[0].replace(String(r),String(-1*r)),n.join(" ")}(o,0)}}}var T="displayName";var g=/\:global\((.+?)\)/g;function y(e,t){return e.indexOf(":global(")>=0?e.replace(g,"$1"):0===e.indexOf(":")?t+e:e.indexOf("&")<0?t+" "+e:e}function v(e,t,n,r){void 0===t&&(t={__order:[]}),0===n.indexOf("@")?b([r],t,n=n+"{"+e):n.indexOf(",")>-1?function(e){if(!g.test(e))return e;for(var t=[],n=/\:global\((.+?)\)/g,r=null;r=n.exec(e);)r[1].indexOf(",")>-1&&t.push([r.index,r.index+r[0].length,r[1].split(",").map((function(e){return":global(".concat(e.trim(),")")})).join(", ")]);return t.reverse().reduce((function(e,t){var n=t[0],r=t[1],o=t[2];return e.slice(0,n)+o+e.slice(r)}),e)}(n).split(",").map((function(e){return e.trim()})).forEach((function(n){return b([r],t,y(n,e))})):b([r],t,y(n,e))}function b(e,t,n){void 0===t&&(t={__order:[]}),void 0===n&&(n="&");var r=a.n.getInstance(),o=t[n];o||(o={},t[n]=o,t.__order.push(n));for(var i=0,s=e;i<s.length;i++){var l=s[i];if("string"===typeof l){var c=r.argsFromClassName(l);c&&b(c,t,n)}else if(Array.isArray(l))b(l,t,n);else for(var u in l)if(l.hasOwnProperty(u)){var d=l[u];if("selectors"===u){var p=l.selectors;for(var h in p)p.hasOwnProperty(h)&&v(n,t,h,p[h])}else"object"===typeof d?null!==d&&v(n,t,u,d):void 0!==d&&("margin"===u||"padding"===u?x(o,u,d):o[u]=d)}}return t}function x(e,t,n){var r="string"===typeof n?function(e){for(var t=[],n=0,r=0,o=0;o<e.length;o++)switch(e[o]){case"(":r++;break;case")":r&&r--;break;case"\t":case" ":r||(o>n&&t.push(e.substring(n,o)),n=o+1)}return n<e.length&&t.push(e.substring(n)),t}(n):[n];0===r.length&&r.push(n),"!important"===r[r.length-1]&&(r=r.slice(0,-1).map((function(e){return e+" !important"}))),e[t+"Top"]=r[0],e[t+"Right"]=r[1]||r[0],e[t+"Bottom"]=r[2]||r[0],e[t+"Left"]=r[3]||r[1]||r[0]}function w(e,t){return t<=0?"":1===t?e:e+w(e,t-1)}function k(e,t){if(!t)return"";var n=[];for(var r in t)t.hasOwnProperty(r)&&r!==T&&void 0!==t[r]&&n.push(r,t[r]);for(var o=0;o<n.length;o+=2)s(n,o),p(n,o),A(e,n,o),c(n,o);for(o=1;o<n.length;o+=4)n.splice(o,1,":",n[o],";");return n.join("")}function I(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=b(t),o=function(e,t){for(var n=[e.rtl?"rtl":"ltr"],r=!1,o=0,a=t.__order;o<a.length;o++){var i=a[o];n.push(i);var s=t[i];for(var l in s)s.hasOwnProperty(l)&&void 0!==s[l]&&(r=!0,n.push(l,s[l]))}return r?n.join(""):void 0}(e,r);if(o){var i=a.n.getInstance(),s={className:i.classNameFromKey(o),key:o,args:t};if(!s.className){s.className=i.getClassName(function(e){var t=e&&e["&"];return t?t.displayName:void 0}(r));for(var l=[],c=0,u=r.__order;c<u.length;c++){var d=u[c];l.push(d,k(e,r[d]))}s.rulesToInsert=l}return s}}function _(e,t){void 0===t&&(t=1);var n=a.n.getInstance(),r=e.className,o=e.key,i=e.args,s=e.rulesToInsert;if(s){for(var l=0;l<s.length;l+=2){var c=s[l+1];if(c){var u=s[l];u=u.replace(/&/g,w(".".concat(e.className),t));var d="".concat(u,"{").concat(c,"}").concat(0===u.indexOf("@")?"}":"");n.insertRule(d)}}n.cacheClassName(r,o,i,s)}}function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=I.apply(void 0,(0,o.fX)([e],t,!1));return r?(_(r,e.specificityMultiplier),r.className):""}},2520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChartHoverCard:()=>d});var r=n(9773),o=n(6326),a=n(5043),i=n(9379),s=n(5070),l=(0,i.Z)(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.color,n=e.Legend,r=e.XValue,o=e.YValue,i=e.styles,c=e.theme,u=e.ratio,d=e.descriptionMessage,p=e.culture;return this._classNames=l(i,{theme:c,color:t,XValue:r,isRatioPresent:!!u}),a.createElement("div",{className:this._classNames.calloutContentRoot},a.createElement("div",{className:this._classNames.calloutDateTimeContainer},a.createElement("div",{className:this._classNames.calloutContentX},r," ")),a.createElement("div",{className:this._classNames.calloutInfoContainer},a.createElement("div",{className:this._classNames.calloutBlockContainer},a.createElement("div",{className:this._classNames.calloutlegendText},(0,s.Uw)(n,p)),a.createElement("div",{className:this._classNames.calloutContentY},(0,s.Uw)(o,p))),!!u&&a.createElement("div",{className:this._classNames.ratio},a.createElement(a.Fragment,null,a.createElement("span",{className:this._classNames.numerator},(0,s.Uw)(u[0],p)),"/",a.createElement("span",{className:this._classNames.denominator},(0,s.Uw)(u[1],p))))),!!d&&a.createElement("div",{className:this._classNames.descriptionMessage},d))},t}(a.Component),u=n(835),d=(0,r.I)(c,(function(e){var t=e.color,n=e.XValue,r=e.theme,o=e.isRatioPresent,a=void 0!==o&&o;return{calloutContentRoot:[{display:"grid",overflow:"hidden",padding:"11px 16px 10px 16px",backgroundColor:r.semanticColors.bodyBackground,backgroundBlendMode:"normal, luminosity"}],calloutDateTimeContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},calloutContentX:[r.fonts.small,{lineHeight:"16px",opacity:"0.8",color:r.semanticColors.bodySubtext}],calloutBlockContainer:[r.fonts.xxLarge,{marginTop:n?"13px":"unset",paddingLeft:"8px",lineHeight:"22px",color:r.semanticColors.bodyText,borderLeft:"4px solid ".concat(t)}],calloutlegendText:[r.fonts.small,{lineHeight:"16px",color:r.semanticColors.bodyText}],calloutContentY:[r.fonts.xxLarge,{color:t||r.semanticColors.bodyText,fontWeight:"bold",lineHeight:"36px"}],calloutInfoContainer:[a&&{display:"flex",alignItems:"flex-end"}],ratio:[r.fonts.small,{marginLeft:"6px",color:r.semanticColors.bodyText}],numerator:{fontWeight:u.BO.bold},denominator:{fontWeight:u.BO.semibold},descriptionMessage:[r.fonts.small,{color:r.semanticColors.bodyText,marginTop:"10px",paddingTop:"10px",borderTop:"1px solid ".concat(r.semanticColors.menuDivider)}]}}))},5070:(e,t,n)=>{"use strict";n.d(t,{wx:()=>y,TL:()=>ne,ON:()=>te,ph:()=>v,lQ:()=>b,XX:()=>J,Uw:()=>ie,ev:()=>H,k9:()=>B,l:()=>W,yN:()=>j,$0:()=>X,do:()=>U,yn:()=>Y,Pw:()=>le,Qs:()=>ae,sQ:()=>$,o6:()=>ee,Gl:()=>re,Ay:()=>oe,qO:()=>se,bX:()=>Q,Ak:()=>Z});var r=n(6326),o=Array.prototype.slice;function a(e){return e}var i=1,s=2,l=3,c=4,u=1e-6;function d(e){return"translate("+(e+.5)+",0)"}function p(e){return"translate(0,"+(e+.5)+")"}function h(e){return function(t){return+e(t)}}function f(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function C(){return!this.__axis}function G(e,t){var n=[],r=null,G=null,m=6,A=6,T=3,g=e===i||e===c?-1:1,y=e===c||e===s?"x":"y",v=e===i||e===l?d:p;function b(o){var d=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==G?t.tickFormat?t.tickFormat.apply(t,n):a:G,b=Math.max(m,0)+T,x=t.range(),w=+x[0]+.5,k=+x[x.length-1]+.5,I=(t.bandwidth?f:h)(t.copy()),_=o.selection?o.selection():o,S=_.selectAll(".domain").data([null]),N=_.selectAll(".tick").data(d,t).order(),E=N.exit(),R=N.enter().append("g").attr("class","tick"),D=N.select("line"),F=N.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),N=N.merge(R),D=D.merge(R.append("line").attr("stroke","#000").attr(y+"2",g*m)),F=F.merge(R.append("text").attr("fill","#000").attr(y,g*b).attr("dy",e===i?"0em":e===l?"0.71em":"0.32em")),o!==_&&(S=S.transition(o),N=N.transition(o),D=D.transition(o),F=F.transition(o),E=E.transition(o).attr("opacity",u).attr("transform",(function(e){return isFinite(e=I(e))?v(e):this.getAttribute("transform")})),R.attr("opacity",u).attr("transform",(function(e){var t=this.parentNode.__axis;return v(t&&isFinite(t=t(e))?t:I(e))}))),E.remove(),S.attr("d",e===c||e==s?"M"+g*A+","+w+"H0.5V"+k+"H"+g*A:"M"+w+","+g*A+"V0.5H"+k+"V"+g*A),N.attr("opacity",1).attr("transform",(function(e){return v(I(e))})),D.attr(y+"2",g*m),F.attr(y,g*b).text(p),_.filter(C).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===s?"start":e===c?"end":"middle"),_.each((function(){this.__axis=I}))}return b.scale=function(e){return arguments.length?(t=e,b):t},b.ticks=function(){return n=o.call(arguments),b},b.tickArguments=function(e){return arguments.length?(n=null==e?[]:o.call(e),b):n.slice()},b.tickValues=function(e){return arguments.length?(r=null==e?null:o.call(e),b):r&&r.slice()},b.tickFormat=function(e){return arguments.length?(G=e,b):G},b.tickSize=function(e){return arguments.length?(m=A=+e,b):m},b.tickSizeInner=function(e){return arguments.length?(m=+e,b):m},b.tickSizeOuter=function(e){return arguments.length?(A=+e,b):A},b.tickPadding=function(e){return arguments.length?(T=+e,b):T},b}function m(e){return G(s,e)}function A(e){return G(l,e)}function T(e){return G(c,e)}var g,y,v,b,x=n(0),w=n(3694),k=n(5056),I=n(5665),_=n(1751),S=n(1544),N=n(6555),E=n(7305),R=n(9438),D=n(4102),F=n(6594),M=n(4260),O=n(8966),L=n(3238),P=n(5038),z=n(6883);function B(e,t,n){var r=e.domainNRangeValues,o=e.showRoundOffXTickValues,a=void 0!==o&&o,i=e.xAxistickSize,s=void 0===i?6:i,l=e.tickPadding,c=void 0===l?10:l,u=e.xAxisCount,d=void 0===u?6:u,p=e.xAxisElement,h=(0,k.A)().domain([r.dStartValue,r.dEndValue]).range([r.rStartValue,r.rEndValue]);a&&h.nice();var f=A(h).tickSize(s).tickPadding(c).ticks(d).tickFormat((function(e,t){var r="number"===typeof e?e:e.valueOf();return ie(r,n)}));t===y.HorizontalBarChartWithAxis&&f.tickSizeInner(-(e.containerHeight-e.margins.top)),p&&(0,S.Lt)(p).call(f).selectAll("text").attr("aria-hidden","true");var C=h.ticks(d).map(f.tickFormat());return{xScale:h,tickValues:C}}function V(e,t){var n=t?t.format:E.DC,r=n(".%L"),o=n(":%S"),a=n("%I:%M"),i=n("%I %p"),s=n("%a %d"),l=n("%b %d"),c=n("%B"),u=n("%Y");return((0,D.A)(e)<e?r:(0,F.A)(e)<e?o:(0,M.A)(e)<e?a:(0,O.A)(e)<e?i:(0,L.A)(e)<e?(0,P.fz)(e)<e?s:l:(0,z.A)(e)<e?c:u)(e)}function H(e,t,n,r,o,a){var i,s=e.domainNRangeValues,l=e.xAxisElement,c=e.tickPadding,u=void 0===c?6:c,d=e.xAxistickSize,p=void 0===d?6:d,h=e.xAxisCount,f=void 0===h?6:h,C=(0,I.A)().domain([s.dStartValue,s.dEndValue]).range([s.rStartValue,s.rEndValue]),G=A(C).tickSize(p).tickPadding(u).ticks(f);if(a)G.tickFormat((function(e,t){return a(e)}));else if(n&&r)G.tickFormat((function(e,t){return e.toLocaleString(n,r)}));else if(o){var m=(0,R.A)(o);G.tickFormat((function(e,t){return V(e,m)}))}t.tickValues&&G.tickValues(t.tickValues),void 0===n&&t.tickFormat&&G.tickFormat((0,E.DC)(t.tickFormat)),l&&(0,S.Lt)(l).call(G).selectAll("text").attr("aria-hidden","true");var T=(null!==(i=t.tickValues)&&void 0!==i?i:C.ticks(f)).map((function(e,t){var n=G.tickFormat();return n?n(e,t):V(e)}));return{xScale:C,tickValues:T}}function W(e,t,n,r){var o=e.domainNRangeValues,a=e.xAxisCount,i=void 0===a?6:a,s=e.xAxistickSize,l=void 0===s?6:s,c=e.tickPadding,u=void 0===c?10:c,d=e.xAxisPadding,p=void 0===d?.1:d,h=e.xAxisInnerPadding,f=e.xAxisOuterPadding,C=(0,_.A)().domain(n).range([o.rStartValue,o.rEndValue]).paddingInner("undefined"!==typeof h?h:p).paddingOuter("undefined"!==typeof f?f:p),G=A(C).tickSize(l).tickPadding(u).ticks(i).tickFormat((function(e,t){return ie(n[t],r)}));return e.xAxisElement&&(0,S.Lt)(e.xAxisElement).call(G).selectAll("text").attr("aria-hidden","true"),{xScale:C,tickValues:n.map(G.tickFormat())}}function U(e,t,n,r,o,a,i){return void 0===i&&(i=!1),r===y.HorizontalBarChartWithAxis?function(e,t,n,r){var o=e.yMinMaxValues,a=void 0===o?{startValue:0,endValue:0}:o,i=e.yAxisElement,s=void 0===i?null:i,l=e.yMaxValue,c=void 0===l?0:l,u=e.yMinValue,d=void 0===u?0:u,p=e.containerHeight,h=e.margins,f=e.tickPadding,C=void 0===f?12:f,G=e.maxOfYVal,A=void 0===G?0:G,g=e.yAxisTickFormat,y=e.yAxisTickCount,v=void 0===y?4:y,b=A||a.endValue,x=b>c?b:c,w=a.startValue<d?0:d,I=(0,k.A)().domain([w,x]).range([p-h.bottom,h.top]),_=t?m(I):T(I),E=_.tickPadding(C).ticks(v);return g?E.tickFormat(g):E.tickFormat((0,N.GP)(".2~s")),s&&(0,S.Lt)(s).call(E).selectAll("text").attr("aria-hidden","true"),I}(e,t):function(e,t,n,r,o){void 0===o&&(o=!1);var a=e.yMinMaxValues,i=void 0===a?{startValue:0,endValue:0}:a,s=e.yAxisElement,l=void 0===s?null:s,c=e.yMaxValue,u=void 0===c?0:c,d=e.yMinValue,p=void 0===d?0:d,h=e.containerHeight,f=e.containerWidth,C=e.margins,G=e.tickPadding,A=void 0===G?12:G,g=e.maxOfYVal,y=void 0===g?0:g,v=e.yAxisTickFormat,b=e.yAxisTickCount,x=void 0===b?4:b,w=e.eventAnnotationProps,I=e.eventLabelHeight,_=y||i.endValue,E=_>u?_:u,R=i.startValue<p?0:p,D=function(e,t,n,r){for(var o=r||(e-t)/n>=1?Math.ceil((e-t)/n):(e-t)/n,a=[t,t+o];a[a.length-1]<e;)a.push(a[a.length-1]+o);return a}(E,R,x,r),F=(0,k.A)().domain([R,D[D.length-1]]).range([h-C.bottom,C.top+(w?I:0)]),M=!t&&o||t&&!o?m(F):T(F),O=M.tickPadding(A).tickValues(D).tickSizeInner(-(f-C.left-C.right));return v?O.tickFormat(v):O.tickFormat((0,N.GP)(".2~s")),l&&(0,S.Lt)(l).call(O).selectAll("text").attr("aria-hidden","true"),n.yAxisDomainValues=D,F}(e,t,n,a,i)}!function(e){e[e.AreaChart=0]="AreaChart",e[e.LineChart=1]="LineChart",e[e.VerticalBarChart=2]="VerticalBarChart",e[e.VerticalStackedBarChart=3]="VerticalStackedBarChart",e[e.GroupedVerticalBarChart=4]="GroupedVerticalBarChart",e[e.HeatMapChart=5]="HeatMapChart",e[e.HorizontalBarChartWithAxis=6]="HorizontalBarChartWithAxis"}(y||(y={})),function(e){e[e.NumericAxis=0]="NumericAxis",e[e.DateAxis=1]="DateAxis",e[e.StringAxis=2]="StringAxis"}(v||(v={})),function(e){e[e.NumericAxis=0]="NumericAxis",e[e.DateAxis=1]="DateAxis",e[e.StringAxis=2]="StringAxis"}(b||(b={}));var j=function(e,t,n,r,o,a){return r===y.HorizontalBarChartWithAxis?K(e,t,n,o,a):q(e,t,n)},K=function(e,t,n,r,o){var a=e.containerHeight,i=e.tickPadding,s=void 0===i?12:i,l=e.margins,c=e.yAxisTickFormat,u=e.yAxisElement,d=(0,_.A)().domain(t).range([a-l.bottom-r/2,l.top+r/2]),p=(n?m(d):T(d)).tickPadding(s).ticks(t);return c&&p.tickFormat(c),u&&(0,S.Lt)(u).call(p).selectAll("text"),d},q=function(e,t,n){var r=e.containerHeight,o=e.tickPadding,a=void 0===o?12:o,i=e.margins,s=e.yAxisTickFormat,l=e.yAxisElement,c=e.yAxisPadding,u=void 0===c?0:c,d=(0,_.A)().domain(t).range([r-i.bottom,i.top]).padding(u),p=(n?m(d):T(d)).tickPadding(a).tickValues(t).tickSize(0);return s&&p.tickFormat(s),l&&(0,S.Lt)(l).call(p).selectAll("text"),d};function X(e){var t=e.node,n=e.xAxis,r=e.noOfCharsToTruncate,o=e.showXAxisLablesTooltip;if(null!==t){var a=(0,S.Lt)(t).call(n),i=0,s=[];return a.selectAll(".tick text").each((function(){var e=(0,S.Lt)(this),t=e.text(),n="".concat(e.text().slice(0,r),"..."),l=e.text().length,c=e.text().split(/\s+/).reverse();s.push(c.length);var u="",d=[],p=0,h=e.attr("y"),f=parseFloat(e.attr("dy")),C=e.text(null).append("tspan").attr("x",0).attr("y",h).attr("id","BaseSpan").attr("dy",f+"em").attr("data-",t);if(o&&l>r)C=e.append("tspan").attr("id","showDots").attr("x",0).attr("y",h).attr("dy",1.1*++p+f+"em").text(n);else if(o&&l<=r)C=e.append("tspan").attr("id","LessLength").attr("x",0).attr("y",h).attr("dy",1.1*++p+f+"em").text(t);else{for(;u=c.pop();)d.push(u),C.text(d.join(" ")),C.node().getComputedTextLength()>10&&d.length>1&&(d.pop(),C.text(d.join(" ")),d=[u],C=e.append("tspan").attr("id","WordBreakId").attr("x",0).attr("y",h).attr("dy",1.1*++p+f+"em").text(u));var G=Math.max.apply(Math,s),m=12;a.selectAll("text").each((function(){var e=document.getElementById("WordBreakId"),t=e&&e.getBoundingClientRect(),n=t&&t.height;n>m&&(m=n)}));var A=4;G<=2?A=1:G>2&&G<=6?A=2:G>6&&G<=9&&(A=3),i=(G-A)*m}})),i>0?i:0}}function Y(e,t,n,r,o,a){null!==e&&(0,S.Lt)(e).call(t).selectAll(".tick text").each((function(){var e=(0,S.Lt)(this),t=e.text(),o=a?"...".concat(e.text().slice(0,n)):"".concat(e.text().slice(0,n),"..."),i=e.text().length,s=r?1.5:1,l=e.attr("y"),c=e.attr("x"),u=parseFloat(e.attr("dy"));e.text(null).append("tspan").attr("x",c).attr("y",l).attr("id","BaseSpan").attr("dy",u+"em").attr("data-",t),r&&i>n?e.append("tspan").attr("id","showDots").attr("x",a?0:c).attr("y",l).attr("dy",u).attr("dx",s+0+"em").text(o):e.attr("text-align","start").append("tspan").attr("id","LessLength").attr("x",a?0:c).attr("y",l).attr("dx",s+0+"em").text(t)}))}var Z=function(e,t,n){var r=(0,S.Lt)("#".concat(t));if(r.text(e),!r.node())return!1;for(var o=!1,a=r.node().getComputedTextLength();a>n&&e.length>0;)e=e.slice(0,-1),r.text(e+"..."),o=!0,a=r.node().getComputedTextLength();return o},J=function(e,t){void 0===t&&(t="none");var n=0,r=document.createElement("canvas").getContext("2d");if(r){var o=document.querySelector(t);if(o){var a=window.getComputedStyle(o,null),i=a.getPropertyValue("font-weight"),s=a.getPropertyValue("font-size"),l=a.getPropertyValue("font-family");r.font="".concat(i," ").concat(s," ").concat(l)}else r.font='600 10px "Segoe UI"';e.forEach((function(e){n=Math.max(r.measureText(e.toString()).width,n)}))}return n};function Q(e){var t=e.tooltipCls,n=e.xAxis,r=e.id;if(null===n)return null;for(var o=(0,S.Lt)("body").append("div").attr("id",r).attr("class",t).style("opacity",0),a=n.selectAll("#BaseSpan")._groups[0],i=a&&Object.keys(a).length,s=[],l=0;l<i;l++){var c=a[l].dataset&&Object.values(a[l].dataset)[0];s.push(c)}var u=n.selectAll(".tick")._groups[0],d=u&&Object.keys(u).length,p=function(e){var t=u[e];(0,S.Lt)(t).on("mouseover",(function(t){o.style("opacity",.9),o.html(s[e]).style("left",S.f0.pageX+"px").style("top",S.f0.pageY-28+"px")})).on("mouseout",(function(e){o.style("opacity",0)}))};for(l=0;l<d;l++)p(l)}function $(e,t,n,o,a,i,s,l,c){var u;if(i===v.NumericAxis)switch(o){case y.AreaChart:case y.LineChart:u=function(e,t,n,r){var o=(0,x.A)(e,(function(e){return(0,x.A)(e.data,(function(e){return e.x}))})),a=(0,w.A)(e,(function(e){return(0,w.A)(e.data,(function(e){return e.x}))})),i=t.left,s=n-t.right;return r?{dStartValue:a,dEndValue:o,rStartValue:i,rEndValue:s}:{dStartValue:o,dEndValue:a,rStartValue:i,rEndValue:s}}(e,t,n,a);break;case y.VerticalStackedBarChart:u=function(e,t,n,r,o){var a=(0,x.A)(e,(function(e){return e.x})),i=(0,w.A)(e,(function(e){return e.x})),s=t.left+o/2,l=n-t.right-o/2;return r?{dStartValue:i,dEndValue:a,rStartValue:s,rEndValue:l}:{dStartValue:a,dEndValue:i,rStartValue:s,rEndValue:l}}(e,t,n,a,s);break;case y.VerticalBarChart:u=function(e,t,n,r,o){var a=(0,w.A)(e,(function(e){return e.x})),i=(0,x.A)(e,(function(e){return e.x})),s=t.left+o/2,l=n-t.right-o/2;return r?{dStartValue:a,dEndValue:i,rStartValue:s,rEndValue:l}:{dStartValue:i,dEndValue:a,rStartValue:s,rEndValue:l}}(e,t,n,a,s);break;case y.HorizontalBarChartWithAxis:u=function(e,t,n,r,o){var a=(0,w.A)(e,(function(e){return e.x})),i=r?t.left:t.left+o,s=r?n-t.right-o:n-t.right;return r?{dStartValue:a,dEndValue:0,rStartValue:i,rEndValue:s}:{dStartValue:0,dEndValue:a,rStartValue:i,rEndValue:s}}(e,t,n,a,c);break;default:u={dStartValue:0,dEndValue:0,rStartValue:0,rEndValue:0}}else if(i===v.DateAxis)switch(o){case y.AreaChart:case y.LineChart:case y.VerticalBarChart:case y.VerticalStackedBarChart:u=function(e,t,n,o,a,i,s){var l,c;void 0===a&&(a=[]),i===y.AreaChart||i===y.LineChart?(l=(0,x.A)(e,(function(e){return(0,x.A)(e.data,(function(e){return e.x}))})),c=(0,w.A)(e,(function(e){return(0,w.A)(e.data,(function(e){return e.x}))})),l=(0,x.A)((0,r.fX)((0,r.fX)([],a,!0),[l],!1)),c=(0,w.A)((0,r.fX)((0,r.fX)([],a,!0),[c],!1))):(l=(0,x.A)(e,(function(e){return e.x})),c=(0,w.A)(e,(function(e){return e.x})));var u=t.left+(s?s/2:0),d=n-t.right-(s?s/2:0);return o?{dStartValue:c,dEndValue:l,rStartValue:u,rEndValue:d}:{dStartValue:l,dEndValue:c,rStartValue:u,rEndValue:d}}(e,t,n,a,l,o,s);break;default:u={dStartValue:0,dEndValue:0,rStartValue:0,rEndValue:0}}else switch(o){case y.VerticalStackedBarChart:case y.GroupedVerticalBarChart:case y.VerticalBarChart:case y.HeatMapChart:u=function(e,t,n){var r=e.left,o=t-e.right;return n?{dStartValue:0,dEndValue:0,rStartValue:o,rEndValue:r}:{dStartValue:0,dEndValue:0,rStartValue:r,rEndValue:o}}(t,n,a);break;default:u={dStartValue:0,dEndValue:0,rStartValue:0,rEndValue:0}}return u}function ee(e,t,n){var r;switch(void 0===n&&(n=b.NumericAxis),t){case y.AreaChart:case y.LineChart:r=function(e){var t=(0,w.A)(e,(function(e){return(0,w.A)(e.data,(function(e){return e.y}))}));return{startValue:(0,x.A)(e,(function(e){return(0,x.A)(e.data,(function(e){return e.y}))})),endValue:t}}(e);break;case y.VerticalStackedBarChart:r=function(e){var t=(0,w.A)(e,(function(e){return e.y}));return{startValue:(0,x.A)(e,(function(e){return e.y})),endValue:t}}(e);break;case y.VerticalBarChart:r=function(e){var t=(0,w.A)(e,(function(e){return void 0!==e.lineData?e.y>e.lineData.y?e.y:e.lineData.y:e.y}));return{startValue:(0,x.A)(e,(function(e){return void 0!==e.lineData?e.y<e.lineData.y?e.y:e.lineData.y:e.y})),endValue:t}}(e);break;case y.HorizontalBarChartWithAxis:r=function(e,t){if(void 0!==t&&t===b.NumericAxis){var n=(0,w.A)(e,(function(e){return e.y}));return{startValue:(0,x.A)(e,(function(e){return e.y})),endValue:n}}return{startValue:0,endValue:0}}(e,n);break;default:r={startValue:0,endValue:0}}return r}var te,ne,re=function(e,t){if(t)switch(typeof e){case"string":return v.StringAxis;case"number":return v.NumericAxis;default:return v.DateAxis}else switch(typeof e){case"string":return b.StringAxis;case"number":return b.NumericAxis;default:return b.DateAxis}};!function(e){e[e.circle=0]="circle",e[e.square=1]="square",e[e.triangle=2]="triangle",e[e.diamond=3]="diamond",e[e.pyramid=4]="pyramid",e[e.hexagon=5]="hexagon",e[e.pentagon=6]="pentagon",e[e.octagon=7]="octagon"}(te||(te={})),function(e){e[e.dottedLine=0]="dottedLine"}(ne||(ne={}));var oe=((g={})[te.circle]={widthRatio:1},g[te.square]={widthRatio:1},g[te.triangle]={widthRatio:1},g[te.diamond]={widthRatio:1},g[te.pyramid]={widthRatio:1},g[te.hexagon]={widthRatio:2},g[te.pentagon]={widthRatio:1.168},g[te.octagon]={widthRatio:2.414},g),ae=function(e,t,n){return void 0===t&&(t="text"),void 0===n&&(n=!0),{role:t,"data-is-focusable":n,"aria-label":(e=null!==e&&void 0!==e?e:{}).ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy}},ie=function(e,t){return e?(t=t||void 0,"number"===typeof e?e.toLocaleString(t):"string"!==typeof e||window.isNaN(Number(e))?e instanceof Date?e.toLocaleDateString(t):e:Number(e).toLocaleString(t)):e};function se(e){var t=e.node,n=e.xAxis;if(null!==t&&null!==n){var r=0,o=[];(0,S.Lt)(t).call(n).selectAll(".tick").each((function(){var e=this.getAttribute("transform");if(-1===(null===e||void 0===e?void 0:e.indexOf("rotate"))){var t=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");2===t.length&&(o.push(t[0]),this.setAttribute("transform","translate(".concat(t[0],",0)rotate(-45)")))}var n=this.getBoundingClientRect(),a=n&&n.height;a>r&&(r=a)}));var a=0;return(0,S.Lt)(t).call(n).selectAll(".tick").each((function(){o.length>a&&(this.setAttribute("transform","translate(".concat(o[a],",").concat(r/2,")rotate(-45)")),a+=1)})),Math.floor(r/1.414)}}function le(e){var t;return t=e<1e3?".2~":".1",(0,N.s)(t,e)(e)}},835:(e,t,n)=>{"use strict";n.d(t,{lw:()=>$,Dm:()=>q,cs:()=>K,s:()=>ee.s,BO:()=>ee.BO,up:()=>te,NK:()=>ne,fF:()=>ee.fF,mm:()=>re,nA:()=>ie,TW:()=>Pe.T,pB:()=>ze.p,QN:()=>ue,gm:()=>le,Km:()=>fe,Qg:()=>ae,sW:()=>Fe,Sq:()=>de,CX:()=>ke,L6:()=>oe,O4:()=>xe,dX:()=>pe,i7:()=>s,l8:()=>Be.l,Zq:()=>r.Z,S8:()=>we,K1:()=>De});var r=n(7002);var o=n(3542),a=n(3722),i=n(8205);function s(e){var t=a.n.getInstance(),n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r,"{",(0,i.bz)((0,o.Iy)(),e[r]),"}");var s=n.join(""),l=t.classNameFromKey(s);if(l)return l;var c=t.getClassName();return t.insertRule("@keyframes ".concat(c,"{").concat(s,"}"),!0),t.cacheClassName(c,s,[],["keyframes",s]),c}var l="cubic-bezier(.1,.9,.2,1)",c="cubic-bezier(.1,.25,.75,.9)",u="0.167s",d="0.267s",p="0.367s",h="0.467s",f=s({from:{opacity:0},to:{opacity:1}}),C=s({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),G=Y(-10),m=Y(-20),A=Y(-40),T=Y(-400),g=Y(10),y=Y(20),v=Y(40),b=Y(400),x=Z(10),w=Z(20),k=Z(-10),I=Z(-20),_=J(10),S=J(20),N=J(40),E=J(400),R=J(-10),D=J(-20),F=J(-40),M=J(-400),O=Q(-10),L=Q(-20),P=Q(10),z=Q(20),B=s({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),V=s({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),H=s({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),W=s({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),U=s({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),j=s({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}}),K={easeFunction1:l,easeFunction2:c,durationValue1:u,durationValue2:d,durationValue3:p,durationValue4:h},q={slideRightIn10:X("".concat(f,",").concat(G),p,l),slideRightIn20:X("".concat(f,",").concat(m),p,l),slideRightIn40:X("".concat(f,",").concat(A),p,l),slideRightIn400:X("".concat(f,",").concat(T),p,l),slideLeftIn10:X("".concat(f,",").concat(g),p,l),slideLeftIn20:X("".concat(f,",").concat(y),p,l),slideLeftIn40:X("".concat(f,",").concat(v),p,l),slideLeftIn400:X("".concat(f,",").concat(b),p,l),slideUpIn10:X("".concat(f,",").concat(x),p,l),slideUpIn20:X("".concat(f,",").concat(w),p,l),slideDownIn10:X("".concat(f,",").concat(k),p,l),slideDownIn20:X("".concat(f,",").concat(I),p,l),slideRightOut10:X("".concat(C,",").concat(_),p,l),slideRightOut20:X("".concat(C,",").concat(S),p,l),slideRightOut40:X("".concat(C,",").concat(N),p,l),slideRightOut400:X("".concat(C,",").concat(E),p,l),slideLeftOut10:X("".concat(C,",").concat(R),p,l),slideLeftOut20:X("".concat(C,",").concat(D),p,l),slideLeftOut40:X("".concat(C,",").concat(F),p,l),slideLeftOut400:X("".concat(C,",").concat(M),p,l),slideUpOut10:X("".concat(C,",").concat(O),p,l),slideUpOut20:X("".concat(C,",").concat(L),p,l),slideDownOut10:X("".concat(C,",").concat(P),p,l),slideDownOut20:X("".concat(C,",").concat(z),p,l),scaleUpIn100:X("".concat(f,",").concat(B),p,l),scaleDownIn100:X("".concat(f,",").concat(H),p,l),scaleUpOut103:X("".concat(C,",").concat(W),u,c),scaleDownOut98:X("".concat(C,",").concat(V),u,c),fadeIn100:X(f,u,c),fadeIn200:X(f,d,c),fadeIn400:X(f,p,c),fadeIn500:X(f,h,c),fadeOut100:X(C,u,c),fadeOut200:X(C,d,c),fadeOut400:X(C,p,c),fadeOut500:X(C,h,c),rotate90deg:X(U,"0.1s",c),rotateN90deg:X(j,"0.1s",c)};function X(e,t,n){return{animationName:e,animationDuration:t,animationTimingFunction:n,animationFillMode:"both"}}function Y(e){return s({from:{transform:"translate3d(".concat(e,"px,0,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function Z(e){return s({from:{transform:"translate3d(0,".concat(e,"px,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function J(e){return s({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(".concat(e,"px,0,0)")}})}function Q(e){return s({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,".concat(e,"px,0)")}})}var $=function(e){var t={},n=function(n){var o;e.hasOwnProperty(n)&&Object.defineProperty(t,n,{get:function(){return void 0===o&&(o=(0,r.Z)(e[n]).toString()),o},enumerable:!0,configurable:!0})};for(var o in e)n(o);return t}(q),ee=n(3815),te="@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)",ne="@media screen and (-ms-high-contrast: white-on-black), screen and (forced-colors: active) and (prefers-color-scheme: dark)",re=639;function oe(e,t){var n="number"===typeof e?" and (min-width: ".concat(e,"px)"):"",r="number"===typeof t?" and (max-width: ".concat(t,"px)"):"";return"@media only screen".concat(n).concat(r)}function ae(){return{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}}var ie,se=n(2815);function le(e,t,n,r,o,a,i,s){return ce(e,"number"!==typeof t&&t?t:{inset:t,position:n,highContrastStyle:r,borderColor:o,outlineColor:a,isFocusedOnly:i,borderRadius:s})}function ce(e,t){var n,r;void 0===t&&(t={});var o=t.borderRadius,a=t.inset,i=void 0===a?0:a,s=t.width,l=void 0===s?1:s,c=t.position,u=void 0===c?"relative":c,d=t.highContrastStyle,p=t.borderColor,h=void 0===p?e.palette.white:p,f=t.outlineColor,C=void 0===f?e.palette.neutralSecondary:f,G=t.isFocusedOnly,m=void 0===G||G,A=t.pointerEvents;return{outline:"transparent",position:u,selectors:(n={"::-moz-focus-inner":{border:"0"}},n[".".concat(se.Y2," &").concat(m?":focus":"",":after")]={content:'""',position:"absolute",pointerEvents:A,left:i+1,top:i+1,bottom:i+1,right:i+1,border:"".concat(l,"px solid ").concat(h),outline:"".concat(l,"px solid ").concat(C),zIndex:ie.FocusStyle,borderRadius:o,selectors:(r={},r[te]=d,r)},n)}}function ue(){return{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}}}!function(e){e.Nav=1,e.ScrollablePane=1,e.FocusStyle=1,e.Coachmark=1e3,e.Layer=1e6,e.KeytipLayer=1000001}(ie||(ie={}));var de=function(e,t,n,r){var o,a,i;void 0===n&&(n="border"),void 0===r&&(r=-1);var s="borderBottom"===n;return{borderColor:e,selectors:{":after":(o={pointerEvents:"none",content:"''",position:"absolute",left:s?0:r,top:r,bottom:r,right:s?0:r},o[n]="2px solid ".concat(e),o.borderRadius=t,o.width="borderBottom"===n?"100%":void 0,o.selectors=(a={},a[te]=(i={},i["border"===n?"borderColor":"borderBottomColor"]="Highlight",i),a),o)}}},pe={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},he=(0,n(6783).J9)((function(e,t){var n=a.n.getInstance();return t?Object.keys(e).reduce((function(t,r){return t[r]=n.getClassName(e[r]),t}),{}):e}));function fe(e,t,n){return he(e,void 0!==n?n:t.disableGlobalClassNames)}var Ce=n(6326),Ge=n(4828),me=n(7142),Ae=n(5255),Te=n(9425),ge=(0,Te.a)({}),ye=[],ve="theme";function be(){var e,t,n,r=(0,Ge.z)();(null===(t=null===r||void 0===r?void 0:r.FabricConfig)||void 0===t?void 0:t.legacyTheme)?function(e,t){var n;void 0===t&&(t=!1);ge=(0,Te.a)(e,t),(0,Ae.EQ)((0,Ce.Cl)((0,Ce.Cl)((0,Ce.Cl)((0,Ce.Cl)({},ge.palette),ge.semanticColors),ge.effects),function(e){for(var t={},n=0,r=Object.keys(e.fonts);n<r.length;n++)for(var o=r[n],a=e.fonts[o],i=0,s=Object.keys(a);i<s.length;i++){var l=s[i],c=o+l.charAt(0).toUpperCase()+l.slice(1),u=a[l];"fontSize"===l&&"number"===typeof u&&(u+="px"),t[c]=u}return t}(ge))),me.X.applySettings((n={},n[ve]=ge,n)),ye.forEach((function(e){try{e(ge)}catch(t){}}))}(r.FabricConfig.legacyTheme):me.X.getSettings([ve]).theme||((null===(n=null===r||void 0===r?void 0:r.FabricConfig)||void 0===n?void 0:n.theme)&&(ge=(0,Te.a)(r.FabricConfig.theme)),me.X.applySettings(((e={})[ve]=ge,e)))}function xe(e){return void 0===e&&(e=!1),!0===e&&(ge=(0,Te.a)({},e)),ge}be();var we={boxShadow:"none",margin:0,padding:0,boxSizing:"border-box"};function ke(e){return{selectors:{"::placeholder":e,":-ms-input-placeholder":e,"::-ms-input-placeholder":e}}}var Ie=n(9233),_e=n(7178),Se=n(9466),Ne=Ie.h.getValue("icons",{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),Ee=a.n.getInstance();Ee&&Ee.onReset&&Ee.onReset((function(){for(var e in Ne)Ne.hasOwnProperty(e)&&Ne[e].subset&&(Ne[e].subset.className=void 0)}));var Re=function(e){return e.toLowerCase()};function De(e,t){var n=(0,Ce.Cl)((0,Ce.Cl)({},e),{isRegistered:!1,className:void 0}),r=e.icons;for(var o in t=t?(0,Ce.Cl)((0,Ce.Cl)({},Ne.__options),t):Ne.__options,r)if(r.hasOwnProperty(o)){var a=r[o],i=Re(o);Ne[i]?Le(o):Ne[i]={code:a,subset:n}}}function Fe(e){var t=void 0,n=Ne.__options;if(e=e?Re(e):"",e=Ne.__remapped[e]||e)if(t=Ne[e]){var o=t.subset;o&&o.fontFace&&(o.isRegistered||((0,Se.n)(o.fontFace),o.isRegistered=!0),o.className||(o.className=(0,r.Z)(o.style,{fontFamily:o.fontFace.fontFamily,fontWeight:o.fontFace.fontWeight||"normal",fontStyle:o.fontFace.fontStyle||"normal"})))}else!n.disableWarnings&&n.warnOnMissingIcons&&(0,_e.R)('The icon "'.concat(e,'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.'));return t}var Me=[],Oe=void 0;function Le(e){var t=Ne.__options;t.disableWarnings||(Me.push(e),void 0===Oe&&(Oe=setTimeout((function(){(0,_e.R)("Some icons were re-registered. Applications should only call registerIcons for any given icon once. Redefining what an icon is may have unintended consequences. Duplicates include: \n"+Me.slice(0,10).join(", ")+(Me.length>10?" (+ ".concat(Me.length-10," more)"):"")),Oe=void 0,Me=[]}),2e3)))}var Pe=n(9044),ze=n(8680),Be=n(7666),Ve={},He=void 0;try{He=window}catch(Ue){}function We(e,t){if("undefined"!==typeof He){var n=He.__packages__=He.__packages__||{};if(!n[e]||!Ve[e])Ve[e]=t,(n[e]=n[e]||[]).push(t)}}We("@fluentui/set-version","6.0.0"),We("@fluentui/style-utilities","8.10.3"),be()},9425:(e,t,n)=>{"use strict";n.d(t,{a:()=>k});var r,o={themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"};!function(e){e.depth0="0 0 0 0 transparent",e.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",e.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",e.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",e.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"}(r||(r={}));var a={elevation4:r.depth4,elevation8:r.depth8,elevation16:r.depth16,elevation64:r.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"},i=n(9466),s=n(3815),l="'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif",c="'Segoe UI', '".concat(s.Dn.WestEuropean,"'"),u={ar:s.bi.Arabic,bg:s.bi.Cyrillic,cs:s.bi.EastEuropean,el:s.bi.Greek,et:s.bi.EastEuropean,he:s.bi.Hebrew,hi:s.bi.Hindi,hr:s.bi.EastEuropean,hu:s.bi.EastEuropean,ja:s.bi.Japanese,kk:s.bi.EastEuropean,ko:s.bi.Korean,lt:s.bi.EastEuropean,lv:s.bi.EastEuropean,pl:s.bi.EastEuropean,ru:s.bi.Cyrillic,sk:s.bi.EastEuropean,"sr-latn":s.bi.EastEuropean,th:s.bi.Thai,tr:s.bi.EastEuropean,uk:s.bi.Cyrillic,vi:s.bi.Vietnamese,"zh-hans":s.bi.ChineseSimplified,"zh-hant":s.bi.ChineseTraditional,hy:s.bi.Armenian,ka:s.bi.Georgian};function d(e,t,n){return{fontFamily:n,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:e,fontWeight:t}}var p=n(8717),h=n(4828);var f,C=n(3290),G="language";var m=function(e){var t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&e&&0===t.indexOf(e))return u[t];return c}(e),n="".concat(t,", ").concat(l);return{tiny:d(s.s.mini,s.BO.regular,n),xSmall:d(s.s.xSmall,s.BO.regular,n),small:d(s.s.small,s.BO.regular,n),smallPlus:d(s.s.smallPlus,s.BO.regular,n),medium:d(s.s.medium,s.BO.regular,n),mediumPlus:d(s.s.mediumPlus,s.BO.regular,n),large:d(s.s.large,s.BO.regular,n),xLarge:d(s.s.xLarge,s.BO.semibold,n),xLargePlus:d(s.s.xLargePlus,s.BO.semibold,n),xxLarge:d(s.s.xxLarge,s.BO.semibold,n),xxLargePlus:d(s.s.xxLargePlus,s.BO.semibold,n),superLarge:d(s.s.superLarge,s.BO.semibold,n),mega:d(s.s.mega,s.BO.semibold,n)}}(function(e){if(void 0===e&&(e="sessionStorage"),void 0===f){var t=(0,p.Y)(),n="localStorage"===e?function(e){var t=null;try{var n=(0,h.z)();t=n?n.localStorage.getItem(e):null}catch(r){}return t}(G):"sessionStorage"===e?C.G(G):void 0;n&&(f=n),void 0===f&&t&&(f=t.documentElement.getAttribute("lang")),void 0===f&&(f="en")}return f}());function A(e,t,n,r){e="'".concat(e,"'");var o=void 0!==r?"local('".concat(r,"'),"):"";(0,i.n)({fontFamily:e,src:o+"url('".concat(t,".woff2') format('woff2'),")+"url('".concat(t,".woff') format('woff')"),fontWeight:n,fontStyle:"normal",fontDisplay:"swap"})}function T(e,t,n,r,o){void 0===r&&(r="segoeui");var a="".concat(e,"/").concat(n,"/").concat(r);A(t,a+"-light",s.BO.light,o&&o+" Light"),A(t,a+"-semilight",s.BO.semilight,o&&o+" SemiLight"),A(t,a+"-regular",s.BO.regular,o),A(t,a+"-semibold",s.BO.semibold,o&&o+" SemiBold"),A(t,a+"-bold",s.BO.bold,o&&o+" Bold")}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t;r<o.length;r++){y(e||{},o[r])}return e}function y(e,t,n){for(var r in void 0===n&&(n=[]),n.push(t),t)if(t.hasOwnProperty(r)&&"__proto__"!==r&&"constructor"!==r&&"prototype"!==r){var o=t[r];if("object"!==typeof o||null===o||Array.isArray(o))e[r]=o;else{var a=n.indexOf(o)>-1;e[r]=a?o:y(e[r]||{},o,n)}}return n.pop(),e}!function(e){if(e){var t="".concat(e,"/fonts");T(t,s.Dn.Thai,"leelawadeeui-thai","leelawadeeui"),T(t,s.Dn.Arabic,"segoeui-arabic"),T(t,s.Dn.Cyrillic,"segoeui-cyrillic"),T(t,s.Dn.EastEuropean,"segoeui-easteuropean"),T(t,s.Dn.Greek,"segoeui-greek"),T(t,s.Dn.Hebrew,"segoeui-hebrew"),T(t,s.Dn.Vietnamese,"segoeui-vietnamese"),T(t,s.Dn.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),T(t,s.bi.Selawik,"selawik","selawik"),T(t,s.Dn.Armenian,"segoeui-armenian"),T(t,s.Dn.Georgian,"segoeui-georgian"),A("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-semilight"),s.BO.light),A("Leelawadee UI Web","".concat(t,"/leelawadeeui-thai/leelawadeeui-bold"),s.BO.semibold)}}(function(){var e,t,n=null===(e=(0,h.z)())||void 0===e?void 0:e.FabricConfig;return null!==(t=null===n||void 0===n?void 0:n.fontBaseUrl)&&void 0!==t?t:"https://res-1.cdn.office.net/files/fabric-cdn-prod_20230815.002/assets"}());var v=n(6326);function b(e,t,n,r,o){return void 0===o&&(o=!1),function(e,t){var n="";!0===t&&(n=" /* @deprecated */");return e.listTextColor=e.listText+n,e.menuItemBackgroundChecked+=n,e.warningHighlight+=n,e.warningText=e.messageText+n,e.successText+=n,e}(x(e,t,(0,v.Cl)({primaryButtonBorder:"transparent",errorText:r?"#F1707B":"#a4262c",messageText:r?"#F3F2F1":"#323130",messageLink:r?"#6CB8F6":"#005A9E",messageLinkHovered:r?"#82C7FF":"#004578",infoIcon:r?"#C8C6C4":"#605e5c",errorIcon:r?"#F1707B":"#A80000",blockingIcon:r?"#442726":"#FDE7E9",warningIcon:r?"#C8C6C4":"#797775",severeWarningIcon:r?"#FCE100":"#D83B01",successIcon:r?"#92C353":"#107C10",infoBackground:r?"#323130":"#f3f2f1",errorBackground:r?"#442726":"#FDE7E9",blockingBackground:r?"#442726":"#FDE7E9",warningBackground:r?"#433519":"#FFF4CE",severeWarningBackground:r?"#4F2A0F":"#FED9CC",successBackground:r?"#393D1B":"#DFF6DD",warningHighlight:r?"#fff100":"#ffb900",successText:r?"#92c353":"#107C10"},n),r),o)}function x(e,t,n,r,o){void 0===o&&(o=!1);var a={},i=e||{},s=i.white,l=i.black,c=i.themePrimary,u=i.themeDark,d=i.themeDarker,p=i.themeDarkAlt,h=i.themeLighter,f=i.neutralLight,C=i.neutralLighter,G=i.neutralDark,m=i.neutralQuaternary,A=i.neutralQuaternaryAlt,T=i.neutralPrimary,g=i.neutralSecondary,y=i.neutralSecondaryAlt,b=i.neutralTertiary,x=i.neutralTertiaryAlt,w=i.neutralLighterAlt,k=i.accent;return s&&(a.bodyBackground=s,a.bodyFrameBackground=s,a.accentButtonText=s,a.buttonBackground=s,a.primaryButtonText=s,a.primaryButtonTextHovered=s,a.primaryButtonTextPressed=s,a.inputBackground=s,a.inputForegroundChecked=s,a.listBackground=s,a.menuBackground=s,a.cardStandoutBackground=s),l&&(a.bodyTextChecked=l,a.buttonTextCheckedHovered=l),c&&(a.link=c,a.primaryButtonBackground=c,a.inputBackgroundChecked=c,a.inputIcon=c,a.inputFocusBorderAlt=c,a.menuIcon=c,a.menuHeader=c,a.accentButtonBackground=c),u&&(a.primaryButtonBackgroundPressed=u,a.inputBackgroundCheckedHovered=u,a.inputIconHovered=u),d&&(a.linkHovered=d),p&&(a.primaryButtonBackgroundHovered=p),h&&(a.inputPlaceholderBackgroundChecked=h),f&&(a.bodyBackgroundChecked=f,a.bodyFrameDivider=f,a.bodyDivider=f,a.variantBorder=f,a.buttonBackgroundCheckedHovered=f,a.buttonBackgroundPressed=f,a.listItemBackgroundChecked=f,a.listHeaderBackgroundPressed=f,a.menuItemBackgroundPressed=f,a.menuItemBackgroundChecked=f),C&&(a.bodyBackgroundHovered=C,a.buttonBackgroundHovered=C,a.buttonBackgroundDisabled=C,a.buttonBorderDisabled=C,a.primaryButtonBackgroundDisabled=C,a.disabledBackground=C,a.listItemBackgroundHovered=C,a.listHeaderBackgroundHovered=C,a.menuItemBackgroundHovered=C),m&&(a.primaryButtonTextDisabled=m,a.disabledSubtext=m),A&&(a.listItemBackgroundCheckedHovered=A),b&&(a.disabledBodyText=b,a.variantBorderHovered=(null===n||void 0===n?void 0:n.variantBorderHovered)||b,a.buttonTextDisabled=b,a.inputIconDisabled=b,a.disabledText=b),T&&(a.bodyText=T,a.actionLink=T,a.buttonText=T,a.inputBorderHovered=T,a.inputText=T,a.listText=T,a.menuItemText=T),w&&(a.bodyStandoutBackground=w,a.defaultStateBackground=w),G&&(a.actionLinkHovered=G,a.buttonTextHovered=G,a.buttonTextChecked=G,a.buttonTextPressed=G,a.inputTextHovered=G,a.menuItemTextHovered=G),g&&(a.bodySubtext=g,a.focusBorder=g,a.inputBorder=g,a.smallInputBorder=g,a.inputPlaceholderText=g),y&&(a.buttonBorder=y),x&&(a.disabledBodySubtext=x,a.disabledBorder=x,a.buttonBackgroundChecked=x,a.menuDivider=x),k&&(a.accentButtonBackground=k),(null===t||void 0===t?void 0:t.elevation4)&&(a.cardShadow=t.elevation4),!r&&(null===t||void 0===t?void 0:t.elevation8)?a.cardShadowHovered=t.elevation8:a.variantBorderHovered&&(a.cardShadowHovered="0 0 1px "+a.variantBorderHovered),a=(0,v.Cl)((0,v.Cl)({},a),n)}var w={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"};function k(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n=!!e.isInverted;return function(e,t){var n,r,o;void 0===t&&(t={});var a=g({},e,t,{semanticColors:x(t.palette,t.effects,t.semanticColors,void 0===t.isInverted?e.isInverted:t.isInverted)});if((null===(n=t.palette)||void 0===n?void 0:n.themePrimary)&&!(null===(r=t.palette)||void 0===r?void 0:r.accent)&&(a.palette.accent=t.palette.themePrimary),t.defaultFontStyle)for(var i=0,s=Object.keys(a.fonts);i<s.length;i++){var l=s[i];a.fonts[l]=g(a.fonts[l],t.defaultFontStyle,null===(o=null===t||void 0===t?void 0:t.fonts)||void 0===o?void 0:o[l])}return a}({palette:o,effects:a,fonts:m,spacing:w,isInverted:n,disableGlobalClassNames:!1,semanticColors:b(o,a,void 0,n,t),rtl:void 0},e)}},3815:(e,t,n)=>{"use strict";var r,o,a,i,s;n.d(t,{BO:()=>i,Dn:()=>r,bi:()=>o,fF:()=>s,s:()=>a}),function(e){e.Arabic="Segoe UI Web (Arabic)",e.Cyrillic="Segoe UI Web (Cyrillic)",e.EastEuropean="Segoe UI Web (East European)",e.Greek="Segoe UI Web (Greek)",e.Hebrew="Segoe UI Web (Hebrew)",e.Thai="Leelawadee UI Web",e.Vietnamese="Segoe UI Web (Vietnamese)",e.WestEuropean="Segoe UI Web (West European)",e.Selawik="Selawik Web",e.Armenian="Segoe UI Web (Armenian)",e.Georgian="Segoe UI Web (Georgian)"}(r||(r={})),function(e){e.Arabic="'".concat(r.Arabic,"'"),e.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",e.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",e.Cyrillic="'".concat(r.Cyrillic,"'"),e.EastEuropean="'".concat(r.EastEuropean,"'"),e.Greek="'".concat(r.Greek,"'"),e.Hebrew="'".concat(r.Hebrew,"'"),e.Hindi="'Nirmala UI'",e.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",e.Korean="'Malgun Gothic', Gulim",e.Selawik="'".concat(r.Selawik,"'"),e.Thai="'Leelawadee UI Web', 'Kmer UI'",e.Vietnamese="'".concat(r.Vietnamese,"'"),e.WestEuropean="'".concat(r.WestEuropean,"'"),e.Armenian="'".concat(r.Armenian,"'"),e.Georgian="'".concat(r.Georgian,"'")}(o||(o={})),function(e){e.size10="10px",e.size12="12px",e.size14="14px",e.size16="16px",e.size18="18px",e.size20="20px",e.size24="24px",e.size28="28px",e.size32="32px",e.size42="42px",e.size68="68px",e.mini="10px",e.xSmall="10px",e.small="12px",e.smallPlus="12px",e.medium="14px",e.mediumPlus="16px",e.icon="16px",e.large="18px",e.xLarge="20px",e.xLargePlus="24px",e.xxLarge="28px",e.xxLargePlus="32px",e.superLarge="42px",e.mega="68px"}(a||(a={})),function(e){e.light=100,e.semilight=300,e.regular=400,e.semibold=600,e.bold=700}(i||(i={})),function(e){e.xSmall="10px",e.small="12px",e.medium="16px",e.large="20px"}(s||(s={}))},9233:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(4828),o="__globalSettings__",a="__callbacks__",i=0,s=function(){function e(){}return e.getValue=function(e,t){var n=l();return void 0===n[e]&&(n[e]="function"===typeof t?t():t),n[e]},e.setValue=function(e,t){var n=l(),r=n[a],o=n[e];if(t!==o){n[e]=t;var i={oldValue:o,value:t,key:e};for(var s in r)r.hasOwnProperty(s)&&r[s](i)}return t},e.addChangeListener=function(e){var t=e.__id__,n=c();t||(t=e.__id__=String(i++)),n[t]=e},e.removeChangeListener=function(e){delete c()[e.__id__]},e}();function l(){var e,t=(0,r.z)()||{};return t[o]||(t[o]=((e={})[a]={},e)),t[o]}function c(){return l()[a]}},7480:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capslock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindow:92,select:93,zero_numpad:96,one_numpad:97,two_numpad:98,three_numpad:99,four_numpad:100,five_numpad:101,six_numpad:102,seven_numpad:103,eight_numpad:104,nine_numpad:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrollLock:145,semicolon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222}},9379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(3722),o=n(7666),a=n(605),i=n(4828),s=50,l=5,c=0,u=r.n.getInstance();u&&u.onReset&&u.onReset((function(){return c++}));var d="__retval__";function p(e){void 0===e&&(e={});var t=new Map,n=0,r=0,u=c;return function(p,h){var C;if(void 0===h&&(h={}),e.useStaticStyles&&"function"===typeof p&&p.__noStyleOverride__)return p(h);r++;var G=t,m=h.theme,A=m&&void 0!==m.rtl?m.rtl:(0,a.jI)(),T=e.disableCaching;if(u!==c&&(u=c,t=new Map,n=0),e.disableCaching||(G=f(t,p),G=f(G,h)),!T&&G[d]||(G[d]=void 0===p?{}:(0,o.L)(["function"===typeof p?p(h):p],{rtl:!!A,specificityMultiplier:e.useStaticStyles?l:void 0}),T||n++),n>(e.cacheSize||s)){var g=(0,i.z)();(null===(C=null===g||void 0===g?void 0:g.FabricConfig)||void 0===C?void 0:C.enableClassNameCacheFullWarning)&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is ".concat(n,"/").concat(r,".")),console.trace()),t.clear(),n=0,e.disableCaching=!0}return G[d]}}function h(e,t){return t=function(e){switch(e){case void 0:return"__undefined__";case null:return"__null__";default:return e}}(t),e.has(t)||e.set(t,new Map),e.get(t)}function f(e,t){if("function"===typeof t)if(t.__cachedInputs__)for(var n=0,r=t.__cachedInputs__;n<r.length;n++){e=h(e,r[n])}else e=h(e,t);else if("object"===typeof t)for(var o in t)t.hasOwnProperty(o)&&(e=h(e,t[o]));return e}},7142:(e,t,n)=>{"use strict";n.d(t,{X:()=>l});var r=n(6326),o=n(9233),a={settings:{},scopedSettings:{},inCustomizerContext:!1},i=o.h.getValue("customizations",{settings:{},scopedSettings:{},inCustomizerContext:!1}),s=[],l=function(){function e(){}return e.reset=function(){i.settings={},i.scopedSettings={}},e.applySettings=function(t){i.settings=(0,r.Cl)((0,r.Cl)({},i.settings),t),e._raiseChange()},e.applyScopedSettings=function(t,n){i.scopedSettings[t]=(0,r.Cl)((0,r.Cl)({},i.scopedSettings[t]),n),e._raiseChange()},e.getSettings=function(e,t,n){void 0===n&&(n=a);for(var r={},o=t&&n.scopedSettings[t]||{},s=t&&i.scopedSettings[t]||{},l=0,c=e;l<c.length;l++){var u=c[l];r[u]=o[u]||n.settings[u]||s[u]||i.settings[u]}return r},e.applyBatchedUpdates=function(t,n){e._suppressUpdates=!0;try{t()}catch(r){}e._suppressUpdates=!1,n||e._raiseChange()},e.observe=function(e){s.push(e)},e.unobserve=function(e){s=s.filter((function(t){return t!==e}))},e._raiseChange=function(){e._suppressUpdates||s.forEach((function(e){return e()}))},e}()},3956:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=n(5043).createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}})},3895:(e,t,n)=>{"use strict";function r(){return"undefined"!==typeof window&&!(!window.document||!window.document.createElement)}n.d(t,{S:()=>r})},8717:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(3895);function o(e){if((0,r.S)()&&"undefined"!==typeof document){var t=e;return t&&t.ownerDocument?t.ownerDocument:document}}},4828:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(3895),o=void 0;try{o=window}catch(i){}function a(e){if((0,r.S)()&&"undefined"!==typeof o){var t=e;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:o}}},6783:(e,t,n)=>{"use strict";n.d(t,{J5:()=>d,J9:()=>u});var r=n(3722),o=!1,a=0,i={empty:!0},s={},l="undefined"===typeof WeakMap?null:WeakMap;function c(){a++}function u(e,t,n){if(void 0===t&&(t=100),void 0===n&&(n=!1),!l)return e;if(!o){var i=r.n.getInstance();i&&i.onReset&&r.n.getInstance().onReset(c),o=!0}var s,u=0,d=a;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=s;(void 0===s||d!==a||t>0&&u>t)&&(s=h(),u=0,d=a),i=s;for(var l=0;l<r.length;l++){var c=p(r[l]);i.map.has(c)||i.map.set(c,h()),i=i.map.get(c)}return i.hasOwnProperty("value")||(i.value=e.apply(void 0,r),u++),!n||null!==i.value&&void 0!==i.value||(i.value=e.apply(void 0,r)),i.value}}function d(e){if(!l)return e;var t=new l;return function(n){if(!n||"function"!==typeof n&&"object"!==typeof n)return e(n);if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}}function p(e){return e?"object"===typeof e||"function"===typeof e?e:(s[e]||(s[e]={val:e}),s[e]):i}function h(){return{map:l?new l:null}}},605:(e,t,n)=>{"use strict";n.d(t,{SM:()=>u,jI:()=>c});var r,o=n(7480),a=n(8717),i=n(3290),s=n(3542),l="isRTL";function c(e){if(void 0===e&&(e={}),void 0!==e.rtl)return e.rtl;if(void 0===r){var t=(0,i.G)(l);null!==t&&function(e,t){void 0===t&&(t=!1);var n=(0,a.Y)();n&&n.documentElement.setAttribute("dir",e?"rtl":"ltr");t&&(0,i.S)(l,e?"1":"0");r=e,(0,s.DU)(r)}(r="1"===t);var n=(0,a.Y)();void 0===r&&n&&(r="rtl"===(n.body&&n.body.getAttribute("dir")||n.documentElement.getAttribute("dir")),(0,s.DU)(r))}return!!r}function u(e,t){return void 0===t&&(t={}),c(t)&&(e===o.c.left?e=o.c.right:e===o.c.right&&(e=o.c.left)),e}},3290:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,S:()=>a});var r=n(4828);function o(e){var t=null;try{var n=(0,r.z)();t=n?n.sessionStorage.getItem(e):null}catch(o){}return t}function a(e,t){var n;try{null===(n=(0,r.z)())||void 0===n||n.sessionStorage.setItem(e,t)}catch(o){}}},2815:(e,t,n)=>{"use strict";n.d(t,{Fy:()=>s,Y2:()=>o});var r=n(4828),o="ms-Fabric--isFocusVisible",a="ms-Fabric--isFocusHidden";function i(e,t){e&&(e.classList.add(t?o:a),e.classList.remove(t?a:o))}function s(e,t,n){var o;n?n.forEach((function(t){return i(t.current,e)})):i(null===(o=(0,r.z)(t))||void 0===o?void 0:o.document.body,e)}},9773:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(6326),o=n(5043),a=n(8680),i=n(7142),s=n(3956);function l(e,t){var n=function(){var e=o.useState(0)[1];return function(){return e((function(e){return++e}))}}(),r=o.useContext(s.z).customizations,a=r.inCustomizerContext;return o.useEffect((function(){return a||i.X.observe(n),function(){a||i.X.unobserve(n)}}),[a]),i.X.getSettings(e,t,r)}var c=["theme","styles"];function u(e,t,n,i,s){var u=(i=i||{scope:"",fields:void 0}).scope,d=i.fields,p=void 0===d?c:d,h=o.forwardRef((function(i,s){var c=o.useRef(),d=l(p,u),h=d.styles,f=(d.dir,(0,r.Tt)(d,["styles","dir"])),C=n?n(i):void 0,G=c.current&&c.current.__cachedInputs__||[],m=i.styles;if(!c.current||h!==G[1]||m!==G[2]){var A=function(e){return(0,a.p)(e,t,h,m)};A.__cachedInputs__=[t,h,m],A.__noStyleOverride__=!h&&!m,c.current=A}return o.createElement(e,(0,r.Cl)({ref:s},f,C,i,{styles:c.current}))}));h.displayName="Styled".concat(e.displayName||e.name);var f=s?o.memo(h):h;return h.displayName&&(f.displayName=h.displayName),f}},7178:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});function r(e){console&&console.warn&&console.warn(e)}},5255:(e,t,n)=>{"use strict";n.d(t,{EQ:()=>p,hN:()=>u});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o="undefined"===typeof window?n.g:window,a=o&&o.CSPSettings&&o.CSPSettings.nonce,i=function(){var e=o.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};e.runState||(e=r(r({},e),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}}));e.registeredThemableStyles||(e=r(r({},e),{registeredThemableStyles:[]}));return o.__themeState__=e,e}(),s=/[\'\"]\[theme:\s*(\w+)\s*(?:\,\s*default:\s*([\\"\']?[\.\,\(\)\#\-\s\w]*[\.\,\(\)\#\-\w][\"\']?))?\s*\][\'\"]/g,l=function(){return"undefined"!==typeof performance&&performance.now?performance.now():Date.now()};function c(e){var t=l();e();var n=l();i.perf.duration+=n-t}function u(e,t){void 0===t&&(t=!1),c((function(){var n=Array.isArray(e)?e:C(e),r=i.runState,o=r.mode,a=r.buffer,s=r.flushTimer;t||1===o?(a.push(n),s||(i.runState.flushTimer=setTimeout((function(){i.runState.flushTimer=0,c((function(){var e=i.runState.buffer.slice();i.runState.buffer=[];var t=[].concat.apply([],e);t.length>0&&d(t)}))}),0))):d(n)}))}function d(e,t){i.loadStyles?i.loadStyles(f(e).styleString,e):function(e){if("undefined"===typeof document)return;var t=document.getElementsByTagName("head")[0],n=document.createElement("style"),r=f(e),o=r.styleString,s=r.themable;n.setAttribute("data-load-themed-styles","true"),a&&n.setAttribute("nonce",a);n.appendChild(document.createTextNode(o)),i.perf.count++,t.appendChild(n);var l=document.createEvent("HTMLEvents");l.initEvent("styleinsert",!0,!1),l.args={newStyle:n},document.dispatchEvent(l);var c={styleElement:n,themableStyle:e};s?i.registeredThemableStyles.push(c):i.registeredStyles.push(c)}(e)}function p(e){i.theme=e,function(){if(i.theme){for(var e=[],t=0,n=i.registeredThemableStyles;t<n.length;t++){var r=n[t];e.push(r.themableStyle)}e.length>0&&(!function(e){void 0===e&&(e=3);3!==e&&2!==e||(h(i.registeredStyles),i.registeredStyles=[]);3!==e&&1!==e||(h(i.registeredThemableStyles),i.registeredThemableStyles=[])}(1),d([].concat.apply([],e)))}}()}function h(e){e.forEach((function(e){var t=e&&e.styleElement;t&&t.parentElement&&t.parentElement.removeChild(t)}))}function f(e){var t=i.theme,n=!1;return{styleString:(e||[]).map((function(e){var r=e.theme;if(r){n=!0;var o=t?t[r]:void 0,a=e.defaultValue||"inherit";return t&&!o&&console&&!(r in t)&&"undefined"!==typeof DEBUG&&DEBUG&&console.warn('Theming value not provided for "'.concat(r,'". Falling back to "').concat(a,'".')),o||a}return e.rawString})).join(""),themable:n}}function C(e){var t=[];if(e){for(var n=0,r=void 0;r=s.exec(e);){var o=r.index;o>n&&t.push({rawString:e.substring(n,o)}),t.push({theme:r[1],defaultValue:r[2]}),n=s.lastIndex}t.push({rawString:e.substring(n)})}return t}},454:(e,t,n)=>{"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{A:()=>r})},9221:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(454);function o(e){let t=e,n=e;function o(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const a=r+o>>>1;n(e[a],t)<0?r=a+1:o=a}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>(0,r.A)(e(t),n)}(e)),{left:o,center:function(e,n,r,a){null==r&&(r=0),null==a&&(a=e.length);const i=o(e,n,r,a-1);return i>r&&t(e[i-1],n)>-t(e[i],n)?i-1:i},right:function(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const a=r+o>>>1;n(e[a],t)>0?o=a:r=a+1}return r}}}},3694:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}n.d(t,{A:()=>r})},0:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}n.d(t,{A:()=>r})},1522:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>i,lq:()=>s,sG:()=>l});var r=Math.sqrt(50),o=Math.sqrt(10),a=Math.sqrt(2);function i(e,t,n){var r,o,a,i,l=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),0===(i=s(e,t,n))||!isFinite(i))return[];if(i>0){let n=Math.round(e/i),r=Math.round(t/i);for(n*i<e&&++n,r*i>t&&--r,a=new Array(o=r-n+1);++l<o;)a[l]=(n+l)*i}else{i=-i;let n=Math.round(e*i),r=Math.round(t*i);for(n/i<e&&++n,r/i>t&&--r,a=new Array(o=r-n+1);++l<o;)a[l]=(n+l)/i}return r&&a.reverse(),a}function s(e,t,n){var i=(t-e)/Math.max(0,n),s=Math.floor(Math.log(i)/Math.LN10),l=i/Math.pow(10,s);return s>=0?(l>=r?10:l>=o?5:l>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=r?10:l>=o?5:l>=a?2:1)}function l(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),l=i/s;return l>=r?s*=10:l>=o?s*=5:l>=a&&(s*=2),t<e?-s:s}},6555:(e,t,n)=>{"use strict";n.d(t,{GP:()=>d,s:()=>p});var r=n(7715);var o=n(7903);var a,i=n(2452);function s(e,t){var n=(0,i.f)(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const l={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:i.A,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return s(100*e,t)},r:s,s:function(e,t){var n=(0,i.f)(e,t);if(!n)return e+"";var r=n[0],o=n[1],s=o-(a=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+(0,i.f)(e,Math.max(0,t+s-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function c(e){return e}var u,d,p,h=Array.prototype.map,f=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function C(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?c:(t=h.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var o=e.length,a=[],i=0,s=t[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(o-=s,o+s)),!((l+=s+1)>r));)s=t[i=(i+1)%t.length];return a.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",u=void 0===e.currency?"":e.currency[1]+"",d=void 0===e.decimal?".":e.decimal+"",p=void 0===e.numerals?c:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(h.call(e.numerals,String)),C=void 0===e.percent?"%":e.percent+"",G=void 0===e.minus?"-":e.minus+"",m=void 0===e.nan?"NaN":e.nan+"";function A(e){var t=(e=(0,o.A)(e)).fill,n=e.align,r=e.sign,c=e.symbol,h=e.zero,A=e.width,T=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(T=!0,v="g"):l[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===c?s:"#"===c&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===c?u:/[%p]/.test(v)?C:"",w=l[v],k=/[defgprs%]/.test(v);function I(e){var o,s,l,c=b,u=x;if("c"===v)u=w(e)+u,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?m:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(!+e[r])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==r&&(C=!1),c=(C?"("===r?r:G:"-"===r||"("===r?"":r)+c,u=("s"===v?f[8+a/3]:"")+u+(C&&"("===r?")":""),k)for(o=-1,s=e.length;++o<s;)if(48>(l=e.charCodeAt(o))||l>57){u=(46===l?d+e.slice(o+1):e.slice(o))+u,e=e.slice(0,o);break}}T&&!h&&(e=i(e,1/0));var I=c.length+e.length+u.length,_=I<A?new Array(A-I+1).join(t):"";switch(T&&h&&(e=i(_+e,_.length?A-u.length:1/0),_=""),n){case"<":e=c+e+u+_;break;case"=":e=c+_+e+u;break;case"^":e=_.slice(0,I=_.length>>1)+c+e+u+_.slice(I);break;default:e=_+c+e+u}return p(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),I.toString=function(){return e+""},I}return{format:A,formatPrefix:function(e,t){var n=A(((e=(0,o.A)(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor((0,r.A)(t)/3))),i=Math.pow(10,-a),s=f[8+a/3];return function(e){return n(i*e)+s}}}}u=C({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),d=u.format,p=u.formatPrefix},7715:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2452);function o(e){return(e=(0,r.f)(Math.abs(e)))?e[1]:NaN}},2452:(e,t,n)=>{"use strict";function r(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function o(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{A:()=>r,f:()=>o})},7903:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new a({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function a(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},1544:(e,t,n)=>{"use strict";n.d(t,{f0:()=>ne,Lt:()=>he});var r="http://www.w3.org/1999/xhtml";const o={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function i(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function l(e){var t=a(e);return(t.local?s:i)(t)}function c(){}function u(e){return null==e?c:function(){return this.querySelector(e)}}function d(){return[]}var p=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var h=document.documentElement;if(!h.matches){var f=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;p=function(e){return function(){return f.call(this,e)}}}}const C=p;function G(e){return new Array(e.length)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var A="$";function T(e,t,n,r,o,a){for(var i,s=0,l=t.length,c=a.length;s<c;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new m(e,a[s]);for(;s<l;++s)(i=t[s])&&(o[s]=i)}function g(e,t,n,r,o,a,i){var s,l,c,u={},d=t.length,p=a.length,h=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=c=A+i.call(l,l.__data__,s,t),c in u?o[s]=l:u[c]=l);for(s=0;s<p;++s)(l=u[c=A+i.call(e,a[s],s,a)])?(r[s]=l,l.__data__=a[s],u[c]=null):n[s]=new m(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u[h[s]]===l&&(o[s]=l)}function y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v(e){return function(){this.removeAttribute(e)}}function b(e){return function(){this.removeAttributeNS(e.space,e.local)}}function x(e,t){return function(){this.setAttribute(e,t)}}function w(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function k(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function I(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function S(e){return function(){this.style.removeProperty(e)}}function N(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function R(e){return function(){delete this[e]}}function D(e,t){return function(){this[e]=t}}function F(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function M(e){return e.trim().split(/^|\s+/)}function O(e){return e.classList||new L(e)}function L(e){this._node=e,this._names=M(e.getAttribute("class")||"")}function P(e,t){for(var n=O(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function z(e,t){for(var n=O(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function B(e){return function(){P(this,e)}}function V(e){return function(){z(this,e)}}function H(e,t){return function(){(t.apply(this,arguments)?P:z)(this,e)}}function W(){this.textContent=""}function U(e){return function(){this.textContent=e}}function j(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function K(){this.innerHTML=""}function q(e){return function(){this.innerHTML=e}}function X(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Y(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(){return null}function Q(){var e=this.parentNode;e&&e.removeChild(this)}function $(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ee(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}L.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var te={},ne=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(te={mouseenter:"mouseover",mouseleave:"mouseout"}));function re(e,t,n){return e=oe(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function oe(e,t,n){return function(r){var o=ne;ne=r;try{e.call(this,this.__data__,t,n)}finally{ne=o}}}function ae(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function ie(e,t,n){var r=te.hasOwnProperty(e.type)?re:oe;return function(o,a,i){var s,l=this.__on,c=r(t,a,i);if(l)for(var u=0,d=l.length;u<d;++u)if((s=l[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function se(e,t,n){var r=_(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function le(e,t){return function(){return se(this,e,t)}}function ce(e,t){return function(){return se(this,e,t.apply(this,arguments))}}var ue=[null];function de(e,t){this._groups=e,this._parents=t}function pe(){return new de([[document.documentElement]],ue)}de.prototype=pe.prototype={constructor:de,select:function(e){"function"!==typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,s=t[o],l=s.length,c=r[o]=new Array(l),d=0;d<l;++d)(a=s[d])&&(i=e.call(a,a.__data__,d,s))&&("__data__"in a&&(i.__data__=a.__data__),c[d]=i);return new de(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=function(e){return null==e?d:function(){return this.querySelectorAll(e)}}(e));for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,s=t[a],l=s.length,c=0;c<l;++c)(i=s[c])&&(r.push(e.call(i,i.__data__,c,s)),o.push(i));return new de(r,o)},filter:function(e){"function"!==typeof e&&(e=C(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new de(r,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),u=-1,this.each((function(e){f[++u]=e})),f;var n,r=t?g:T,o=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var i=a.length,s=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var d=o[u],p=a[u],h=p.length,f=e.call(d,d&&d.__data__,u,o),C=f.length,G=l[u]=new Array(C),m=s[u]=new Array(C);r(d,p,G,m,c[u]=new Array(h),f,t);for(var A,y,v=0,b=0;v<C;++v)if(A=G[v]){for(v>=b&&(b=v+1);!(y=m[b])&&++b<C;);A._next=y||null}}return(s=new de(s,o))._enter=l,s._exit=c,s},enter:function(){return new de(this._enter||this._groups.map(G),this._parents)},exit:function(){return new de(this._exit||this._groups.map(G),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],d=c.length,p=i[s]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(p[h]=l);for(;s<r;++s)i[s]=t[s];return new de(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=y);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,s=n[a],l=s.length,c=o[a]=new Array(l),u=0;u<l;++u)(i=s[u])&&(c[u]=i);c.sort(t)}return new de(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,s=a.length;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?b:v:"function"===typeof t?n.local?I:k:n.local?w:x)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?S:"function"===typeof t?E:N)(e,t,null==n?"":n)):function(e,t){return e.style.getPropertyValue(t)||_(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?R:"function"===typeof t?F:D)(e,t)):this.node()[e]},classed:function(e,t){var n=M(e+"");if(arguments.length<2){for(var r=O(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?H:t?B:V)(n,t))},text:function(e){return arguments.length?this.each(null==e?W:("function"===typeof e?j:U)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?K:("function"===typeof e?X:q)(e)):this.node().innerHTML},raise:function(){return this.each(Y)},lower:function(){return this.each(Z)},append:function(e){var t="function"===typeof e?e:l(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:l(e),r=null==t?J:"function"===typeof t?t:u(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Q)},clone:function(e){return this.select(e?ee:$)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),i=a.length;if(!(arguments.length<2)){for(s=t?ie:ae,null==n&&(n=!1),r=0;r<i;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<i;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?ce:le)(e,t))}};function he(e){return"string"===typeof e?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],ue)}var fe=0;function Ce(){this._="@"+(++fe).toString(36)}Ce.prototype=function(){return new Ce}.prototype={constructor:Ce,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},7305:(e,t,n)=>{"use strict";n.d(t,{DC:()=>o,aL:()=>a});var r,o,a,i,s=n(9438);i={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},r=(0,s.A)(i),o=r.format,r.parse,a=r.utcFormat,r.utcParse},9438:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(5838),o=n(7558),a=n(5038),i=n(8966),s=n(6883),l=n(2915);function c(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function u(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function d(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function p(e){var t=e.dateTime,n=e.date,s=e.time,l=e.periods,p=e.days,f=e.shortDays,C=e.months,G=e.shortMonths,m=T(l),A=g(l),Q=T(p),Ae=g(p),Ne=T(f),Ee=g(f),Re=T(C),De=g(C),Fe=T(G),Me=g(G),Oe={a:function(e){return f[e.getDay()]},A:function(e){return p[e.getDay()]},b:function(e){return G[e.getMonth()]},B:function(e){return C[e.getMonth()]},c:null,d:V,e:V,f:K,g:re,G:ae,H:H,I:W,j:U,L:j,m:q,M:X,p:function(e){return l[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:_e,s:Se,S:Y,u:Z,U:J,V:$,w:ee,W:te,x:null,X:null,y:ne,Y:oe,Z:ie,"%":Ie},Le={a:function(e){return f[e.getUTCDay()]},A:function(e){return p[e.getUTCDay()]},b:function(e){return G[e.getUTCMonth()]},B:function(e){return C[e.getUTCMonth()]},c:null,d:se,e:se,f:pe,g:be,G:we,H:le,I:ce,j:ue,L:de,m:he,M:fe,p:function(e){return l[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:_e,s:Se,S:Ce,u:Ge,U:me,V:Te,w:ge,W:ye,x:null,X:null,y:ve,Y:xe,Z:ke,"%":Ie},Pe={a:function(e,t,n){var r=Ne.exec(t.slice(n));return r?(e.w=Ee.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=Q.exec(t.slice(n));return r?(e.w=Ae.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=Fe.exec(t.slice(n));return r?(e.m=Me.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=Re.exec(t.slice(n));return r?(e.m=De.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return Ve(e,t,n,r)},d:E,e:E,f:L,g:I,G:k,H:D,I:D,j:R,L:O,m:N,M:F,p:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.p=A.get(r[0].toLowerCase()),n+r[0].length):-1},q:S,Q:z,s:B,S:M,u:v,U:b,V:x,w:y,W:w,x:function(e,t,r){return Ve(e,n,t,r)},X:function(e,t,n){return Ve(e,s,t,n)},y:I,Y:k,Z:_,"%":P};function ze(e,t){return function(n){var r,o,a,i=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(i.push(e.slice(l,s)),null!=(o=h[r=e.charAt(++s)])?r=e.charAt(++s):o="e"===r?" ":"0",(a=t[r])&&(r=a(n,o)),i.push(r),l=s+1);return i.push(e.slice(l,s)),i.join("")}}function Be(e,t){return function(n){var s,l,p=d(1900,void 0,1);if(Ve(p,e,n+="",0)!=n.length)return null;if("Q"in p)return new Date(p.Q);if("s"in p)return new Date(1e3*p.s+("L"in p?p.L:0));if(t&&!("Z"in p)&&(p.Z=0),"p"in p&&(p.H=p.H%12+12*p.p),void 0===p.m&&(p.m="q"in p?p.q:0),"V"in p){if(p.V<1||p.V>53)return null;"w"in p||(p.w=1),"Z"in p?(l=(s=u(d(p.y,0,1))).getUTCDay(),s=l>4||0===l?r.rt.ceil(s):(0,r.rt)(s),s=o.A.offset(s,7*(p.V-1)),p.y=s.getUTCFullYear(),p.m=s.getUTCMonth(),p.d=s.getUTCDate()+(p.w+6)%7):(l=(s=c(d(p.y,0,1))).getDay(),s=l>4||0===l?a.By.ceil(s):(0,a.By)(s),s=i.A.offset(s,7*(p.V-1)),p.y=s.getFullYear(),p.m=s.getMonth(),p.d=s.getDate()+(p.w+6)%7)}else("W"in p||"U"in p)&&("w"in p||(p.w="u"in p?p.u%7:"W"in p?1:0),l="Z"in p?u(d(p.y,0,1)).getUTCDay():c(d(p.y,0,1)).getDay(),p.m=0,p.d="W"in p?(p.w+6)%7+7*p.W-(l+5)%7:p.w+7*p.U-(l+6)%7);return"Z"in p?(p.H+=p.Z/100|0,p.M+=p.Z%100,u(p)):c(p)}}function Ve(e,t,n,r){for(var o,a,i=0,s=t.length,l=n.length;i<s;){if(r>=l)return-1;if(37===(o=t.charCodeAt(i++))){if(o=t.charAt(i++),!(a=Pe[o in h?t.charAt(i++):o])||(r=a(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return Oe.x=ze(n,Oe),Oe.X=ze(s,Oe),Oe.c=ze(t,Oe),Le.x=ze(n,Le),Le.X=ze(s,Le),Le.c=ze(t,Le),{format:function(e){var t=ze(e+="",Oe);return t.toString=function(){return e},t},parse:function(e){var t=Be(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=ze(e+="",Le);return t.toString=function(){return e},t},utcParse:function(e){var t=Be(e+="",!0);return t.toString=function(){return e},t}}}var h={"-":"",_:" ",0:"0"},f=/^\s*\d+/,C=/^%/,G=/[\\^$*+?|[\]().{}]/g;function m(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function A(e){return e.replace(G,"\\$&")}function T(e){return new RegExp("^(?:"+e.map(A).join("|")+")","i")}function g(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function y(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function v(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function b(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function x(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function w(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function k(e,t,n){var r=f.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function I(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function S(e,t,n){var r=f.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function N(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function E(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function R(e,t,n){var r=f.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function D(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function F(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function M(e,t,n){var r=f.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function O(e,t,n){var r=f.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function L(e,t,n){var r=f.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function P(e,t,n){var r=C.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function z(e,t,n){var r=f.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function B(e,t,n){var r=f.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function V(e,t){return m(e.getDate(),t,2)}function H(e,t){return m(e.getHours(),t,2)}function W(e,t){return m(e.getHours()%12||12,t,2)}function U(e,t){return m(1+i.A.count((0,s.A)(e),e),t,3)}function j(e,t){return m(e.getMilliseconds(),t,3)}function K(e,t){return j(e,t)+"000"}function q(e,t){return m(e.getMonth()+1,t,2)}function X(e,t){return m(e.getMinutes(),t,2)}function Y(e,t){return m(e.getSeconds(),t,2)}function Z(e){var t=e.getDay();return 0===t?7:t}function J(e,t){return m(a.fz.count((0,s.A)(e)-1,e),t,2)}function Q(e){var t=e.getDay();return t>=4||0===t?(0,a.dt)(e):a.dt.ceil(e)}function $(e,t){return e=Q(e),m(a.dt.count((0,s.A)(e),e)+(4===(0,s.A)(e).getDay()),t,2)}function ee(e){return e.getDay()}function te(e,t){return m(a.By.count((0,s.A)(e)-1,e),t,2)}function ne(e,t){return m(e.getFullYear()%100,t,2)}function re(e,t){return m((e=Q(e)).getFullYear()%100,t,2)}function oe(e,t){return m(e.getFullYear()%1e4,t,4)}function ae(e,t){var n=e.getDay();return m((e=n>=4||0===n?(0,a.dt)(e):a.dt.ceil(e)).getFullYear()%1e4,t,4)}function ie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+m(t/60|0,"0",2)+m(t%60,"0",2)}function se(e,t){return m(e.getUTCDate(),t,2)}function le(e,t){return m(e.getUTCHours(),t,2)}function ce(e,t){return m(e.getUTCHours()%12||12,t,2)}function ue(e,t){return m(1+o.A.count((0,l.A)(e),e),t,3)}function de(e,t){return m(e.getUTCMilliseconds(),t,3)}function pe(e,t){return de(e,t)+"000"}function he(e,t){return m(e.getUTCMonth()+1,t,2)}function fe(e,t){return m(e.getUTCMinutes(),t,2)}function Ce(e,t){return m(e.getUTCSeconds(),t,2)}function Ge(e){var t=e.getUTCDay();return 0===t?7:t}function me(e,t){return m(r.Hl.count((0,l.A)(e)-1,e),t,2)}function Ae(e){var t=e.getUTCDay();return t>=4||0===t?(0,r.pT)(e):r.pT.ceil(e)}function Te(e,t){return e=Ae(e),m(r.pT.count((0,l.A)(e),e)+(4===(0,l.A)(e).getUTCDay()),t,2)}function ge(e){return e.getUTCDay()}function ye(e,t){return m(r.rt.count((0,l.A)(e)-1,e),t,2)}function ve(e,t){return m(e.getUTCFullYear()%100,t,2)}function be(e,t){return m((e=Ae(e)).getUTCFullYear()%100,t,2)}function xe(e,t){return m(e.getUTCFullYear()%1e4,t,4)}function we(e,t){var n=e.getUTCDay();return m((e=n>=4||0===n?(0,r.pT)(e):r.pT.ceil(e)).getUTCFullYear()%1e4,t,4)}function ke(){return"+0000"}function Ie(){return"%"}function _e(e){return+e}function Se(e){return Math.floor(+e/1e3)}},8966:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9063),o=n(3758),a=(0,r.A)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.rR)/o.Nm),(e=>e.getDate()-1));const i=a;a.range},3758:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>s,JJ:()=>a,MP:()=>c,Nm:()=>i,Pv:()=>l,Tt:()=>r,rR:()=>o});const r=1e3,o=60*r,a=60*o,i=24*a,s=7*i,l=30*i,c=365*i},4260:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9063),o=n(3758),a=(0,r.A)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.Tt-e.getMinutes()*o.rR)}),(function(e,t){e.setTime(+e+t*o.JJ)}),(function(e,t){return(t-e)/o.JJ}),(function(e){return e.getHours()}));const i=a;a.range},9063:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=new Date,o=new Date;function a(e,t,n,i){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,o){var a,i=[];if(n=s.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return i;do{i.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return i},s.filter=function(n){return a((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,a){return r.setTime(+t),o.setTime(+a),e(r),e(o),Math.floor(n(r,o))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(i?function(t){return i(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}},6594:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9063),o=n(3758),a=(0,r.A)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.Tt)}),(function(e,t){e.setTime(+e+t*o.rR)}),(function(e,t){return(t-e)/o.rR}),(function(e){return e.getMinutes()}));const i=a;a.range},3238:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=(0,n(9063).A)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const o=r;r.range},4102:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9063),o=n(3758),a=(0,r.A)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*o.Tt)}),(function(e,t){return(t-e)/o.Tt}),(function(e){return e.getUTCSeconds()}));const i=a;a.range},7558:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9063),o=n(3758),a=(0,r.A)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/o.Nm}),(function(e){return e.getUTCDate()-1}));const i=a;a.range},5838:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>i,pT:()=>u,rt:()=>s});var r=n(9063),o=n(3758);function a(e){return(0,r.A)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/o.Fq}))}var i=a(0),s=a(1),l=a(2),c=a(3),u=a(4),d=a(5),p=a(6);i.range,s.range,l.range,c.range,u.range,d.range,p.range},2915:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9063),o=(0,r.A)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.A)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const a=o;o.range},5038:(e,t,n)=>{"use strict";n.d(t,{By:()=>s,dt:()=>u,fz:()=>i});var r=n(9063),o=n(3758);function a(e){return(0,r.A)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.rR)/o.Fq}))}var i=a(0),s=a(1),l=a(2),c=a(3),u=a(4),d=a(5),p=a(6);i.range,s.range,l.range,c.range,u.range,d.range,p.range},6883:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9063),o=(0,r.A)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.A)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const a=o;o.range},7353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(w){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},a={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function s(e,t){if(isNaN(e))return t?m:G;if(t){if(e<0)return m;if(e>=h)return v}else{if(e<=-f)return b;if(e+1>=f)return y}return e<0?s(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return G;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var o=s(c(n,8)),a=G,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+l),n);if(l<8){var p=s(c(n,l));a=a.mul(p).add(s(d))}else a=(a=a.mul(o)).add(s(d))}return a.unsigned=t,a}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=d;var p=4294967296,h=p*p,f=h/2,C=i(1<<24),G=i(0);n.ZERO=G;var m=i(0,!0);n.UZERO=m;var A=i(1);n.ONE=A;var T=i(1,!0);n.UONE=T;var g=i(-1);n.NEG_ONE=g;var y=l(-1,2147483647,!1);n.MAX_VALUE=y;var v=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=v;var b=l(0,-2147483648,!1);n.MIN_VALUE=b;var x=n.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(c(e,6),this.unsigned),a=this,i="";;){var l=a.div(o),u=(a.sub(l.mul(o)).toInt()>>>0).toString(e);if((a=l).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return this.comp(e)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return this.comp(e)<=0},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(A)},x.neg=x.negate,x.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,i=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,p=0,h=0,f=0;return h+=(f+=a+(65535&e.low))>>>16,p+=(h+=o+c)>>>16,u+=(p+=n+s)>>>16,u+=t+i,l((h&=65535)<<16|(f&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},x.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return G;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return G;if(this.eq(b))return e.isOdd()?b:G;if(e.eq(b))return this.isOdd()?b:G;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(C)&&e.lt(C))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,a=this.low>>>16,i=65535&this.low,c=e.high>>>16,u=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,m=0,A=0,T=0;return A+=(T+=i*h)>>>16,m+=(A+=a*h)>>>16,A&=65535,m+=(A+=i*p)>>>16,f+=(m+=o*h)>>>16,m&=65535,f+=(m+=a*p)>>>16,m&=65535,f+=(m+=i*u)>>>16,f+=n*h+o*p+a*u+i*c,l((A&=65535)<<16|(T&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,o,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:G;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return T;a=m}else{if(this.eq(b))return e.eq(A)||e.eq(g)?b:e.eq(b)?A:(n=this.shr(1).div(e).shl(1)).eq(G)?e.isNegative()?A:g:(o=this.sub(e.mul(n)),a=n.add(o.div(e)));if(e.eq(b))return this.unsigned?m:G;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=G}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:c(2,i-48),p=s(n),h=p.mul(e);h.isNegative()||h.gt(o);)h=(p=s(n-=u,this.unsigned)).mul(e);p.isZero()&&(p=A),a=a.add(p),o=o.sub(h)}return a},x.div=x.divide,x.modulo=function(e){return r(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return l(~this.low,~this.high,this.unsigned)},x.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var a,i,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(s[c]=a[c]);if(t){i=t(a);for(var u=0;u<i.length;u++)r.call(a,i[u])&&(s[i[u]]=a[i[u]])}}return s}},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(2123),a=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var s=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,f={},C={};function G(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new G(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new G(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new G(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new G(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new G(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new G(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new G(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new G(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new G(e,5,!1,e.toLowerCase(),null,!1,!1)}));var A=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}function g(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!h.call(C,e)||!h.call(f,e)&&(p.test(e)?C[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(A,T);m[t]=new G(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(A,T);m[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(A,T);m[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new G(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new G(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=60103,b=60106,x=60107,w=60108,k=60114,I=60109,_=60110,S=60112,N=60113,E=60120,R=60115,D=60116,F=60121,M=60128,O=60129,L=60130,P=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;v=z("react.element"),b=z("react.portal"),x=z("react.fragment"),w=z("react.strict_mode"),k=z("react.profiler"),I=z("react.provider"),_=z("react.context"),S=z("react.forward_ref"),N=z("react.suspense"),E=z("react.suspense_list"),R=z("react.memo"),D=z("react.lazy"),F=z("react.block"),z("react.scope"),M=z("react.opaque.id"),O=z("react.debug_trace_mode"),L=z("react.offscreen"),P=z("react.legacy_hidden")}var B,V="function"===typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function W(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s])return"\n"+o[i].replace(" at new "," at ")}while(1<=i&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?W(e):""}function K(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 22:return e=j(e.type._render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case k:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return q(e.type);case F:return q(e._render);case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&g(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function ce(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,Ce,Ge=(Ce=function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ce(e,t)}))}:Ce);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ae={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Te=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ae.hasOwnProperty(e)&&Ae[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(Ae).forEach((function(e){Te.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ae[t]=Ae[e]}))}));var ve=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ie=null,_e=null;function Se(e){if(e=no(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=oo(t),ke(e.stateNode,e.type,t))}}function Ne(e){Ie?_e?_e.push(e):_e=[e]:Ie=e}function Ee(){if(Ie){var e=Ie,t=_e;if(_e=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,o){return e(t,n,r,o)}function Fe(){}var Me=Re,Oe=!1,Le=!1;function Pe(){null===Ie&&null===_e||(Fe(),Ee())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=oo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Be=!1;if(d)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(Ce){Be=!1}function He(e,t,n,r,o,a,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var We=!1,Ue=null,je=!1,Ke=null,qe={onError:function(e){We=!0,Ue=e}};function Xe(e,t,n,r,o,a,i,s,l){We=!1,Ue=null,He.apply(qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(i(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Je(o),e;if(a===r)return Je(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $e(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,ot=!1,at=[],it=null,st=null,lt=null,ct=new Map,ut=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function Ct(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e=ht(t,n,r,o,a),null!==t&&(null!==(t=no(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Gt(e){var t=to(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=no(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function At(e,t,n){mt(e)&&n.delete(t)}function Tt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=no(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==it&&mt(it)&&(it=null),null!==st&&mt(st)&&(st=null),null!==lt&&mt(lt)&&(lt=null),ct.forEach(At),ut.forEach(At)}function gt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Tt)))}function yt(e){function t(t){return gt(t,e)}if(0<at.length){gt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==it&&gt(it,e),null!==st&&gt(st,e),null!==lt&&gt(lt,e),ct.forEach(t),ut.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)Gt(n),null===n.blockedOn&&dt.shift()}function vt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bt={animationend:vt("Animation","AnimationEnd"),animationiteration:vt("Animation","AnimationIteration"),animationstart:vt("Animation","AnimationStart"),transitionend:vt("Transition","TransitionEnd")},xt={},wt={};function kt(e){if(xt[e])return xt[e];if(!bt[e])return e;var t,n=bt[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return xt[e]=n[t];return e}d&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete bt.animationend.animation,delete bt.animationiteration.animation,delete bt.animationstart.animation),"TransitionEvent"in window||delete bt.transitionend.transition);var It=kt("animationend"),_t=kt("animationiteration"),St=kt("animationstart"),Nt=kt("transitionend"),Et=new Map,Rt=new Map,Dt=["abort","abort",It,"animationEnd",_t,"animationIteration",St,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Rt.set(r,t),Et.set(r,o),c(o,[r])}}(0,a.unstable_now)();var Mt=8;function Ot(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,o=0,a=e.expiredLanes,i=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,o=Mt=15;else if(0!==(a=134217727&n)){var l=a&~i;0!==l?(r=Ot(l),o=Mt):0!==(s&=a)&&(r=Ot(s),o=Mt)}else 0!==(a=n&~i)?(r=Ot(a),o=Mt):0!==s&&(r=Ot(s),o=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&i)){if(Ot(t),o<=Mt)return t;Mt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-Wt(t)),r|=e[n],t&=~o;return r}function Pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?zt(10,t):e;case 10:return 0===(e=Bt(192&~t))?zt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Bt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ut(e)/jt|0)|0},Ut=Math.log,jt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,qt=a.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Oe||Fe();var o=Jt,a=Oe;Oe=!0;try{De(o,e,t,n,r)}finally{(Oe=a)||Pe()}}function Zt(e,t,n,r){qt(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var o;if(Xt)if((o=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),at.push(e);else{var a=Qt(e,t,n,r);if(null===a)o&&ft(e,r);else{if(o){if(-1<pt.indexOf(e))return e=ht(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return it=Ct(it,e,t,n,r,o),!0;case"dragenter":return st=Ct(st,e,t,n,r,o),!0;case"mouseover":return lt=Ct(lt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return ct.set(a,Ct(ct.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,ut.set(a,Ct(ut.get(a)||null,e,t,n,r,o)),!0}return!1}(a,e,t,n,r))return;ft(e,r)}Fr(e,t,r,null,n)}}}function Qt(e,t,n,r){var o=we(r);if(null!==(o=to(o))){var a=Ye(o);if(null===a)o=null;else{var i=a.tag;if(13===i){if(null!==(o=Ze(a)))return o;o=null}else if(3===i){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return Fr(e,t,r,o,n),null}var $t=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,o="value"in $t?$t.value:$t.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return tn=o.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?on:an,this.isPropagationStopped=an,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,un,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=sn(dn),hn=o({},dn,{view:0,detail:0}),fn=sn(hn),Cn=o({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),Gn=sn(Cn),mn=sn(o({},Cn,{dataTransfer:0})),An=sn(o({},hn,{relatedTarget:0})),Tn=sn(o({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=o({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(gn),vn=sn(o({},dn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function In(){return kn}var _n=o({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(_n),Nn=sn(o({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(o({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Rn=sn(o({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=o({},Cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=sn(Dn),Mn=[9,13,27,32],On=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Pn=d&&"TextEvent"in window&&!Ln,zn=d&&(!On||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),Vn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=Or(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Zn(e){_r(e,0)}function Jn(e){if(J(ro(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(d){var er;if(d){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;$n=er&&(!document.documentMode||9<document.documentMode)}function rr(){Xn&&(Xn.detachEvent("onpropertychange",or),Yn=Xn=null)}function or(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(qn(t,Yn,e,we(e)),e=Zn,Oe)e(t);else{Oe=!0;try{Re(e,t)}finally{Oe=!1,Pe()}}}}function ar(e,t,n){"focusin"===e?(rr(),Yn=n,(Xn=t).attachEvent("onpropertychange",or)):"focusout"===e&&rr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function sr(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function dr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Cr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=d&&"documentMode"in document&&11>=document.documentMode,Ar=null,Tr=null,gr=null,yr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==Ar||Ar!==Q(r)||("selectionStart"in(r=Ar)&&Gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&dr(gr,r)||(gr=r,0<(r=Or(Tr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(Dt,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xr=0;xr<br.length;xr++)Rt.set(br[xr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Xe.apply(this,arguments),We){if(!We)throw Error(i(198));var u=Ue;We=!1,Ue=null,je||(je=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Ir(o,s,c),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Ir(o,s,c),a=l}}}if(je)throw e=Ke,je=!1,Ke=null,e}function Sr(e,t){var n=ao(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Er(e){e[Nr]||(e[Nr]=!0,s.forEach((function(t){kr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;o|=2,a=r}var i=ao(a),s=e+"__"+(t?"capture":"bubble");i.has(s)||(t&&(o|=4),Dr(a,e,o,t),i.add(s))}function Dr(e,t,n,r){var o=Rt.get(t);switch(void 0===o?2:o){case 0:o=Yt;break;case 1:o=Zt;break;default:o=Jt}n=o.bind(null,t,n,e),o=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Fr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=to(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{return Me(e,t,n)}finally{Le=!1,Pe()}}((function(){var r=a,o=we(n),i=[];e:{var s=Et.get(e);if(void 0!==s){var l=pn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=An;break;case"focusout":c="blur",l=An;break;case"beforeblur":case"afterblur":l=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case It:case _t:case St:l=Tn;break;case Nt:l=Rn;break;case"scroll":l=fn;break;case"wheel":l=Fn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=r;null!==f;){var C=(h=f).stateNode;if(5===h.tag&&null!==C&&(h=C,null!==p&&(null!=(C=ze(f,p))&&u.push(Mr(f,C,h)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,o),i.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!to(c)&&!c[$r])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?to(c):null)&&(c!==(d=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=Gn,C="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,C="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==l?s:ro(l),h=null==c?s:ro(c),(s=new u(C,f+"leave",l,n,o)).target=d,s.relatedTarget=h,C=null,to(o)===r&&((u=new u(p,f+"enter",c,n,o)).target=h,u.relatedTarget=d,C=u),d=C,l&&c)e:{for(p=c,f=0,h=u=l;h;h=Lr(h))f++;for(h=0,C=p;C;C=Lr(C))h++;for(;0<f-h;)u=Lr(u),f--;for(;0<h-f;)p=Lr(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Lr(u),p=Lr(p)}u=null}else u=null;null!==l&&Pr(i,s,l,u,!1),null!==c&&null!==d&&Pr(i,d,c,u,!0)}if("select"===(l=(s=r?ro(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var G=Qn;else if(Kn(s))if($n)G=lr;else{G=ir;var m=ar}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(G=sr);switch(G&&(G=G(e,r))?qn(i,G,n,o):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&oe(s,"number",s.value)),m=r?ro(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(Ar=m,Tr=r,gr=null);break;case"focusout":gr=Tr=Ar=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,vr(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":vr(i,n,o)}var A;if(On)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Un?Hn(e,n)&&(T="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(T="onCompositionStart");T&&(zn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==T?"onCompositionEnd"===T&&Un&&(A=nn()):(en="value"in($t=o)?$t.value:$t.textContent,Un=!0)),0<(m=Or(r,T)).length&&(T=new vn(T,e,null,n,o),i.push({event:T,listeners:m}),A?T.data=A:null!==(A=Wn(n))&&(T.data=A))),(A=Pn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!On&&Hn(e,t)?(e=nn(),tn=en=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Or(r,"onBeforeInput")).length&&(o=new vn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=A))}_r(i,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Or(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=ze(e,n))&&r.unshift(Mr(e,a,o)),null!=(a=ze(e,t))&&r.push(Mr(e,a,o))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Pr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=ze(n,a))&&i.unshift(Mr(n,l,s)):o||null!=(l=ze(n,a))&&i.push(Mr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function zr(){}var Br=null,Vr=null;function Hr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ur="function"===typeof setTimeout?setTimeout:void 0,jr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Zr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Zr,Qr="__reactProps$"+Zr,$r="__reactContainer$"+Zr,eo="__reactEvents$"+Zr;function to(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$r]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Jr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function no(e){return!(e=e[Jr]||e[$r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ro(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function oo(e){return e[Qr]||null}function ao(e){var t=e[eo];return void 0===t&&(t=e[eo]=new Set),t}var io=[],so=-1;function lo(e){return{current:e}}function co(e){0>so||(e.current=io[so],io[so]=null,so--)}function uo(e,t){so++,io[so]=e.current,e.current=t}var po={},ho=lo(po),fo=lo(!1),Co=po;function Go(e,t){var n=e.type.contextTypes;if(!n)return po;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ao(){co(fo),co(ho)}function To(e,t,n){if(ho.current!==po)throw Error(i(168));uo(ho,t),uo(fo,n)}function go(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(i(108,q(t)||"Unknown",a));return o({},n,r)}function yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||po,Co=ho.current,uo(ho,e),uo(fo,fo.current),!0}function vo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=go(e,t,Co),r.__reactInternalMemoizedMergedChildContext=e,co(fo),co(ho),uo(ho,e)):co(fo),uo(fo,n)}var bo=null,xo=null,wo=a.unstable_runWithPriority,ko=a.unstable_scheduleCallback,Io=a.unstable_cancelCallback,_o=a.unstable_shouldYield,So=a.unstable_requestPaint,No=a.unstable_now,Eo=a.unstable_getCurrentPriorityLevel,Ro=a.unstable_ImmediatePriority,Do=a.unstable_UserBlockingPriority,Fo=a.unstable_NormalPriority,Mo=a.unstable_LowPriority,Oo=a.unstable_IdlePriority,Lo={},Po=void 0!==So?So:function(){},zo=null,Bo=null,Vo=!1,Ho=No(),Wo=1e4>Ho?No:function(){return No()-Ho};function Uo(){switch(Eo()){case Ro:return 99;case Do:return 98;case Fo:return 97;case Mo:return 96;case Oo:return 95;default:throw Error(i(332))}}function jo(e){switch(e){case 99:return Ro;case 98:return Do;case 97:return Fo;case 96:return Mo;case 95:return Oo;default:throw Error(i(332))}}function Ko(e,t){return e=jo(e),wo(e,t)}function qo(e,t,n){return e=jo(e),ko(e,t,n)}function Xo(){if(null!==Bo){var e=Bo;Bo=null,Io(e)}Yo()}function Yo(){if(!Vo&&null!==zo){Vo=!0;var e=0;try{var t=zo;Ko(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zo=null}catch(n){throw null!==zo&&(zo=zo.slice(e+1)),ko(Ro,Xo),n}finally{Vo=!1}}}var Zo=y.ReactCurrentBatchConfig;function Jo(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qo=lo(null),$o=null,ea=null,ta=null;function na(){ta=ea=$o=null}function ra(e){var t=Qo.current;co(Qo),e.type._context._currentValue=t}function oa(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$o=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oi=!0),e.firstContext=null)}function ia(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$o)throw Error(i(308));ea=t,$o.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function la(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function da(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function pa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var a=e.updateQueue;sa=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?i=u:s.next=u,s=c;var d=e.alternate;if(null!==d){var p=(d=d.updateQueue).lastBaseUpdate;p!==s&&(null===p?d.firstBaseUpdate=u:p.next=u,d.lastBaseUpdate=c)}}if(null!==i){for(p=a.baseState,s=0,d=u=c=null;;){l=i.lane;var h=i.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,C=i;switch(l=t,h=n,C.tag){case 1:if("function"===typeof(f=C.payload)){p=f.call(h,p,l);break e}p=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=C.payload)?f.call(h,p,l):f)||void 0===l)break e;p=o({},p,l);break e;case 2:sa=!0}}null!==i.callback&&(e.flags|=32,null===(l=a.effects)?a.effects=[i]:l.push(i))}else h={eventTime:h,lane:l,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(u=d=h,c=p):d=d.next=h,s|=l;if(null===(i=i.next)){if(null===(l=a.shared.pending))break;i=l.next,l.next=null,a.lastBaseUpdate=l,a.shared.pending=null}}null===d&&(c=p),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,Vs|=s,e.lanes=s,e.memoizedState=p}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Ca=(new r.Component).refs;function Ga(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pl(),o=hl(e),a=ua(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),da(e,a),fl(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pl(),o=hl(e),a=ua(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),da(e,a),fl(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pl(),r=hl(e),o=ua(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),da(e,o),fl(e,r,n)}};function Aa(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(o,a))}function Ta(e,t,n){var r=!1,o=po,a=t.contextType;return"object"===typeof a&&null!==a?a=ia(a):(o=mo(t)?Co:ho.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Go(e,o):po),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Ca,la(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=ia(a):(a=mo(t)?Co:ho.current,o.context=Go(e,a)),ha(e,n,o,r),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ga(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ma.enqueueReplaceState(o,o.state,null),ha(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4)}var va=Array.isArray;function ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ca&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Kl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Zl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=ba(e,t,n),r.return=e,r):((r=ql(n.type,n.key,n.props,null,e.mode,r)).ref=ba(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Xl(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Zl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=ql(t.type,t.key,t.props,null,e.mode,n)).ref=ba(e,null,t),n.return=e,n;case b:return(t=Jl(t,e.mode,n)).return=e,t}if(va(t)||H(t))return(t=Xl(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===o?n.type===x?d(e,t,n.props.children,r,o):c(e,t,n,r):null;case b:return n.key===o?u(e,t,n,r):null}if(va(n)||H(n))return null!==o?null:d(e,t,n,r,null);xa(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return e=e.get(null===r.key?n:r.key)||null,r.type===x?d(t,e,r.props.children,o,r.key):c(t,e,r,o);case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(va(r)||H(r))return d(t,e=e.get(n)||null,r,o,null);xa(t,r)}return null}function C(o,i,s,l){for(var c=null,u=null,d=i,C=i=0,G=null;null!==d&&C<s.length;C++){d.index>C?(G=d,d=null):G=d.sibling;var m=h(o,d,s[C],l);if(null===m){null===d&&(d=G);break}e&&d&&null===m.alternate&&t(o,d),i=a(m,i,C),null===u?c=m:u.sibling=m,u=m,d=G}if(C===s.length)return n(o,d),c;if(null===d){for(;C<s.length;C++)null!==(d=p(o,s[C],l))&&(i=a(d,i,C),null===u?c=d:u.sibling=d,u=d);return c}for(d=r(o,d);C<s.length;C++)null!==(G=f(d,o,C,s[C],l))&&(e&&null!==G.alternate&&d.delete(null===G.key?C:G.key),i=a(G,i,C),null===u?c=G:u.sibling=G,u=G);return e&&d.forEach((function(e){return t(o,e)})),c}function G(o,s,l,c){var u=H(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,C=s,G=s=0,m=null,A=l.next();null!==C&&!A.done;G++,A=l.next()){C.index>G?(m=C,C=null):m=C.sibling;var T=h(o,C,A.value,c);if(null===T){null===C&&(C=m);break}e&&C&&null===T.alternate&&t(o,C),s=a(T,s,G),null===d?u=T:d.sibling=T,d=T,C=m}if(A.done)return n(o,C),u;if(null===C){for(;!A.done;G++,A=l.next())null!==(A=p(o,A.value,c))&&(s=a(A,s,G),null===d?u=A:d.sibling=A,d=A);return u}for(C=r(o,C);!A.done;G++,A=l.next())null!==(A=f(C,o,G,A.value,c))&&(e&&null!==A.alternate&&C.delete(null===A.key?G:A.key),s=a(A,s,G),null===d?u=A:d.sibling=A,d=A);return e&&C.forEach((function(e){return t(o,e)})),u}return function(e,r,a,l){var c="object"===typeof a&&null!==a&&a.type===x&&null===a.key;c&&(a=a.props.children);var u="object"===typeof a&&null!==a;if(u)switch(a.$$typeof){case v:e:{for(u=a.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(a.type===x){n(e,c.sibling),(r=o(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=o(c,a.props)).ref=ba(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===x?((r=Xl(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=ql(a.type,a.key,a.props,null,e.mode,l)).ref=ba(e,r,a),l.return=e,e=l)}return s(e);case b:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=o(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jl(a,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,a)).return=e,e=r):(n(e,r),(r=Zl(a,e.mode,l)).return=e,e=r),s(e);if(va(a))return C(e,r,a,l);if(H(a))return G(e,r,a,l);if(u&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,q(e.type)||"Component"))}return n(e,r)}}var ka=wa(!0),Ia=wa(!1),_a={},Sa=lo(_a),Na=lo(_a),Ea=lo(_a);function Ra(e){if(e===_a)throw Error(i(174));return e}function Da(e,t){switch(uo(Ea,t),uo(Na,e),uo(Sa,_a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}co(Sa),uo(Sa,t)}function Fa(){co(Sa),co(Na),co(Ea)}function Ma(e){Ra(Ea.current);var t=Ra(Sa.current),n=he(t,e.type);t!==n&&(uo(Na,e),uo(Sa,n))}function Oa(e){Na.current===e&&(co(Sa),co(Na))}var La=lo(0);function Pa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=null,Ba=null,Va=!1;function Ha(e,t){var n=Ul(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Wa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ua(e){if(Va){var t=Ba;if(t){var n=t;if(!Wa(e,t)){if(!(t=qr(n.nextSibling))||!Wa(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(za=e);Ha(za,n)}za=e,Ba=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,za=e}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;za=e}function Ka(e){if(e!==za)return!1;if(!Va)return ja(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Ba;t;)Ha(e,t),t=qr(t.nextSibling);if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=za?qr(e.stateNode.nextSibling):null;return!0}function qa(){Ba=za=null,Va=!1}var Xa=[];function Ya(){for(var e=0;e<Xa.length;e++)Xa[e]._workInProgressVersionPrimary=null;Xa.length=0}var Za=y.ReactCurrentDispatcher,Ja=y.ReactCurrentBatchConfig,Qa=0,$a=null,ei=null,ti=null,ni=!1,ri=!1;function oi(){throw Error(i(321))}function ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ii(e,t,n,r,o,a){if(Qa=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Za.current=null===e||null===e.memoizedState?Ri:Di,e=n(r,o),ri){a=0;do{if(ri=!1,!(25>a))throw Error(i(301));a+=1,ti=ei=null,t.updateQueue=null,Za.current=Fi,e=n(r,o)}while(ri)}if(Za.current=Ei,t=null!==ei&&null!==ei.next,Qa=0,ti=ei=$a=null,ni=!1,t)throw Error(i(300));return e}function si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ti?$a.memoizedState=ti=e:ti=ti.next=e,ti}function li(){if(null===ei){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=ei.next;var t=null===ti?$a.memoizedState:ti.next;if(null!==t)ti=t,ei=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ei=e).memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},null===ti?$a.memoizedState=ti=e:ti=ti.next=e}return ti}function ci(e,t){return"function"===typeof t?t(e):t}function ui(e){var t=li(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ei,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var l=s=a=null,c=o;do{var u=c.lane;if((Qa&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,$a.lanes|=u,Vs|=u}c=c.next}while(null!==c&&c!==o);null===l?a=r:l.next=s,cr(r,t.memoizedState)||(Oi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function di(e){var t=li(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);cr(a,t.memoizedState)||(Oi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function pi(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Qa&e)===e)&&(t._workInProgressVersionPrimary=r,Xa.push(t))),e)return n(t._source);throw Xa.push(t),Error(i(350))}function hi(e,t,n,r){var o=Ds;if(null===o)throw Error(i(349));var a=t._getVersion,s=a(t._source),l=Za.current,c=l.useState((function(){return pi(o,t,n)})),u=c[1],d=c[0];c=ti;var p=e.memoizedState,h=p.refs,f=h.getSnapshot,C=p.source;p=p.subscribe;var G=$a;return e.memoizedState={refs:h,source:t,subscribe:r},l.useEffect((function(){h.getSnapshot=n,h.setSnapshot=u;var e=a(t._source);if(!cr(s,e)){e=n(t._source),cr(d,e)||(u(e),e=hl(G),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,i=e;0<i;){var l=31-Wt(i),c=1<<l;r[l]|=e,i&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=hl(G);o.mutableReadLanes|=r&o.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(f,n)&&cr(C,t)&&cr(p,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:d}).dispatch=u=Ni.bind(null,$a,e),c.queue=e,c.baseQueue=null,d=pi(o,t,n),c.memoizedState=c.baseState=d),d}function fi(e,t,n){return hi(li(),e,t,n)}function Ci(e){var t=si();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e}).dispatch=Ni.bind(null,$a,e),[t.memoizedState,e]}function Gi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(e){return e={current:e},si().memoizedState=e}function Ai(){return li().memoizedState}function Ti(e,t,n,r){var o=si();$a.flags|=e,o.memoizedState=Gi(1|t,n,void 0,void 0===r?null:r)}function gi(e,t,n,r){var o=li();r=void 0===r?null:r;var a=void 0;if(null!==ei){var i=ei.memoizedState;if(a=i.destroy,null!==r&&ai(r,i.deps))return void Gi(t,n,a,r)}$a.flags|=e,o.memoizedState=Gi(1|t,n,a,r)}function yi(e,t){return Ti(516,4,e,t)}function vi(e,t){return gi(516,4,e,t)}function bi(e,t){return gi(4,2,e,t)}function xi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,gi(4,2,xi.bind(null,t,e),n)}function ki(){}function Ii(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _i(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Si(e,t){var n=Uo();Ko(98>n?98:n,(function(){e(!0)})),Ko(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Ni(e,t,n){var r=pl(),o=hl(e),a={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?a.next=a:(a.next=i.next,i.next=a),t.pending=a,i=e.alternate,e===$a||null!==i&&i===$a)ri=ni=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=i(s,n);if(a.eagerReducer=i,a.eagerState=l,cr(l,s))return}catch(c){}fl(e,o,r)}}var Ei={readContext:ia,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useOpaqueIdentifier:oi,unstable_isNewReconciler:!1},Ri={readContext:ia,useCallback:function(e,t){return si().memoizedState=[e,void 0===t?null:t],e},useContext:ia,useEffect:yi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4,2,xi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=si();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=si();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ni.bind(null,$a,e),[r.memoizedState,e]},useRef:mi,useState:Ci,useDebugValue:ki,useDeferredValue:function(e){var t=Ci(e),n=t[0],r=t[1];return yi((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=Ci(!1),t=e[0];return mi(e=Si.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=si();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hi(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(i(355))})),n=Ci(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,Gi(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return Ci(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Di={readContext:ia,useCallback:Ii,useContext:ia,useEffect:vi,useImperativeHandle:wi,useLayoutEffect:bi,useMemo:_i,useReducer:ui,useRef:Ai,useState:function(){return ui(ci)},useDebugValue:ki,useDeferredValue:function(e){var t=ui(ci),n=t[0],r=t[1];return vi((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=ui(ci)[0];return[Ai().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return ui(ci)[0]},unstable_isNewReconciler:!1},Fi={readContext:ia,useCallback:Ii,useContext:ia,useEffect:vi,useImperativeHandle:wi,useLayoutEffect:bi,useMemo:_i,useReducer:di,useRef:Ai,useState:function(){return di(ci)},useDebugValue:ki,useDeferredValue:function(e){var t=di(ci),n=t[0],r=t[1];return vi((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=di(ci)[0];return[Ai().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return di(ci)[0]},unstable_isNewReconciler:!1},Mi=y.ReactCurrentOwner,Oi=!1;function Li(e,t,n,r){t.child=null===e?Ia(t,null,n,r):ka(t,e.child,n,r)}function Pi(e,t,n,r,o){n=n.render;var a=t.ref;return aa(t,o),r=ii(e,t,n,r,a,o),null===e||Oi?(t.flags|=1,Li(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,as(e,t,o))}function zi(e,t,n,r,o,a){if(null===e){var i=n.type;return"function"!==typeof i||jl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ql(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Bi(e,t,i,r,o,a))}return i=e.child,0===(o&a)&&(o=i.memoizedProps,(n=null!==(n=n.compare)?n:dr)(o,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Kl(i,r)).ref=t.ref,e.return=t,t.child=e)}function Bi(e,t,n,r,o,a){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Oi=!1,0===(a&o))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Oi=!0)}return Wi(e,t,n,r,a)}function Vi(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},vl(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},vl(t,e),null;t.memoizedState={baseLanes:0},vl(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,vl(t,r);return Li(e,t,o,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wi(e,t,n,r,o){var a=mo(n)?Co:ho.current;return a=Go(t,a),aa(t,o),n=ii(e,t,n,r,a,o),null===e||Oi?(t.flags|=1,Li(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,as(e,t,o))}function Ui(e,t,n,r,o){if(mo(n)){var a=!0;yo(t)}else a=!1;if(aa(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Ta(t,n,r),ya(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=ia(c):c=Go(t,c=mo(n)?Co:ho.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ga(t,i,r,c),sa=!1;var p=t.memoizedState;i.state=p,ha(t,r,i,o),l=t.memoizedState,s!==r||p!==l||fo.current||sa?("function"===typeof u&&(Ga(t,n,u,r),l=t.memoizedState),(s=sa||Aa(t,n,s,r,p,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4)):("function"===typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Jo(t.type,s),i.props=c,d=t.pendingProps,p=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=ia(l):l=Go(t,l=mo(n)?Co:ho.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||p!==l)&&ga(t,i,r,l),sa=!1,p=t.memoizedState,i.state=p,ha(t,r,i,o);var f=t.memoizedState;s!==d||p!==f||fo.current||sa?("function"===typeof h&&(Ga(t,n,h,r),f=t.memoizedState),(c=sa||Aa(t,n,c,r,p,f,l))?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),r=!1)}return ji(e,t,n,r,a,o)}function ji(e,t,n,r,o,a){Hi(e,t);var i=0!==(64&t.flags);if(!r&&!i)return o&&vo(t,n,!1),as(e,t,a);r=t.stateNode,Mi.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,s,a)):Li(e,t,s,a),t.memoizedState=r.state,o&&vo(t,n,!0),t.child}function Ki(e){var t=e.stateNode;t.pendingContext?To(0,t.pendingContext,t.pendingContext!==t.context):t.context&&To(0,t.context,!1),Da(e,t.containerInfo)}var qi,Xi,Yi,Zi,Ji={dehydrated:null,retryLane:0};function Qi(e,t,n){var r,o=t.pendingProps,a=La.current,i=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),uo(La,1&a),null===e?(void 0!==o.fallback&&Ua(t),e=o.children,a=o.fallback,i?(e=$i(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ji,e):"number"===typeof o.unstable_expectedLoadTime?(e=$i(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ji,t.lanes=33554432,e):((n=Yl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(o=ts(e,t,o.children,o.fallback,n),i=t.child,a=e.child.memoizedState,i.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Ji,o):(n=es(e,t,o.children,n),t.memoizedState=null,n))}function $i(e,t,n,r){var o=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&o)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yl(t,o,0,null),n=Xl(n,o,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var o=e.child;return e=o.sibling,n=Kl(o,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,o){var a=t.mode,i=e.child;e=i.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=s,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Kl(i,s),null!==e?r=Kl(e,r):(r=Xl(r,a,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),oa(e.return,t)}function rs(e,t,n,r,o,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.lastEffect=a)}function os(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Li(e,t,r.children,n),0!==(2&(r=La.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(uo(La,r),0===(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Pa(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),rs(t,!1,o,n,a,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Pa(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Kl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function is(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mo(t.type)&&Ao(),null;case 3:return Fa(),co(fo),co(ho),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Xi(t),null;case 5:Oa(t);var a=Ra(Ea.current);if(n=t.type,null!==e&&null!=t.stateNode)Yi(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Ra(Sa.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Qr]=s,n){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(e=0;e<wr.length;e++)Sr(wr[e],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":ee(r,s),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Sr("invalid",r);break;case"textarea":le(r,s),Sr("invalid",r)}for(var c in be(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):l.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Sr("scroll",r));switch(n){case"input":Z(r),re(r,s,!0);break;case"textarea":Z(r),ue(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=zr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===de.html&&(e=pe(n)),e===de.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Qr]=r,qi(e,t,!1,!1),t.stateNode=e,c=xe(n,r),n){case"dialog":Sr("cancel",e),Sr("close",e),a=r;break;case"iframe":case"object":case"embed":Sr("load",e),a=r;break;case"video":case"audio":for(a=0;a<wr.length;a++)Sr(wr[a],e);a=r;break;case"source":Sr("error",e),a=r;break;case"img":case"image":case"link":Sr("error",e),Sr("load",e),a=r;break;case"details":Sr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Sr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=o({},r,{value:void 0}),Sr("invalid",e);break;case"textarea":le(e,r),a=se(e,r),Sr("invalid",e);break;default:a=r}be(n,a);var u=a;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];"style"===s?ye(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&Ge(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Sr("scroll",e):null!=d&&g(e,s,d,c))}switch(n){case"input":Z(e),re(e,r,!1);break;case"textarea":Z(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ie(e,!!r.multiple,s,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=zr)}Hr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Zi(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));n=Ra(Ea.current),Ra(Sa.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return co(La),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&La.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===Ds||0===(134217727&Vs)&&0===(134217727&Hs)||Al(Ds,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Fa(),Xi(t),null===e&&Er(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(co(La),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)is(r,!1);else{if(0!==Ps||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Pa(e))){for(t.flags|=64,is(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return uo(La,1&La.current|2),t.child}e=e.sibling}null!==r.tail&&Wo()>Ks&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Pa(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),is(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Wo()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Wo(),n.sibling=null,t=La.current,uo(La,s?1&t|2:1&t),n):null;case 23:case 24:return bl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function ls(e){switch(e.tag){case 1:mo(e.type)&&Ao();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fa(),co(fo),co(ho),Ya(),0!==(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Oa(e),null;case 13:return co(La),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return co(La),null;case 4:return Fa(),null;case 10:return ra(e),null;case 23:case 24:return bl(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}qi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xi=function(){},Yi=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Sa.current);var i,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=zr)}for(d in be(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var c=a[d];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(null!=u||null!=c))if("style"===d)if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(d,n)),n=u;else"dangerouslySetInnerHTML"===d?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(d,u)):"children"===d?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(d,""+u):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=u&&"onScroll"===d&&Sr("scroll",e),s||c===u||(s=[])):"object"===typeof u&&null!==u&&u.$$typeof===M?u.toString():(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Zi=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zs||(Zs=!0,Js=r),us(0,t)},n}function hs(e,t,n){(n=ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return us(0,t),r(o)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),us(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fs="function"===typeof WeakSet?WeakSet:Set;function Cs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bl(e,n)}else t.current=null}function Gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Jo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(i(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!==(4&(o=o.tag))&&0!==(1&o)&&(Ll(n,e),Ol(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Jo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&yt(n)))))}throw Error(i(163))}function As(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,r.style.display=ge("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ts(e,t){if(xo&&"function"===typeof xo.onCommitFiberUnmount)try{xo.onCommitFiberUnmount(bo,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!==(4&r))Ll(t,n);else{r=t;try{o()}catch(a){Bl(r,a)}}n=n.next}while(n!==e)}break;case 1:if(Cs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bl(t,a)}break;case 5:Cs(t);break;case 4:ws(e,t)}}function gs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function vs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ys(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?bs(e,n,t):xs(e,n,t)}function bs(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=zr));else if(4!==r&&null!==(e=e.child))for(bs(e,t,n),e=e.sibling;null!==e;)bs(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function ws(e,t){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(i(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var s=e,l=o,c=l;;)if(Ts(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,l=o.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(Ts(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),xe(e,o),t=xe(e,r),o=0;o<a.length;o+=2){var s=a[o],l=a[o+1];"style"===s?ye(n,l):"dangerouslySetInnerHTML"===s?Ge(n,l):"children"===s?me(n,l):g(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?ie(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,yt(n.containerInfo)));case 13:return null!==t.memoizedState&&(js=Wo(),As(t.child,!0)),void Is(t);case 19:return void Is(t);case 23:case 24:return void As(t,null!==t.memoizedState)}throw Error(i(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fs),t.forEach((function(t){var r=Hl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _s(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ss=Math.ceil,Ns=y.ReactCurrentDispatcher,Es=y.ReactCurrentOwner,Rs=0,Ds=null,Fs=null,Ms=0,Os=0,Ls=lo(0),Ps=0,zs=null,Bs=0,Vs=0,Hs=0,Ws=0,Us=null,js=0,Ks=1/0;function qs(){Ks=Wo()+500}var Xs,Ys=null,Zs=!1,Js=null,Qs=null,$s=!1,el=null,tl=90,nl=[],rl=[],ol=null,al=0,il=null,sl=-1,ll=0,cl=0,ul=null,dl=!1;function pl(){return 0!==(48&Rs)?Wo():-1!==sl?sl:sl=Wo()}function hl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Uo()?1:2;if(0===ll&&(ll=Bs),0!==Zo.transition){0!==cl&&(cl=null!==Us?Us.pendingLanes:0),e=ll;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Uo(),0!==(4&Rs)&&98===e?e=zt(12,ll):e=zt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,n){if(50<al)throw al=0,il=null,Error(i(185));if(null===(e=Cl(e,t)))return null;Ht(e,t,n),e===Ds&&(Hs|=t,4===Ps&&Al(e,Ms));var r=Uo();1===t?0!==(8&Rs)&&0===(48&Rs)?Tl(e):(Gl(e,n),0===Rs&&(qs(),Xo())):(0===(4&Rs)||98!==r&&99!==r||(null===ol?ol=new Set([e]):ol.add(e)),Gl(e,n)),Us=e}function Cl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Wt(s),c=1<<l,u=a[l];if(-1===u){if(0===(c&r)||0!==(c&o)){u=t,Ot(c);var d=Mt;a[l]=10<=d?u+250:6<=d?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);s&=~c}if(r=Lt(e,e===Ds?Ms:0),t=Mt,0===r)null!==n&&(n!==Lo&&Io(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Lo&&Io(n)}15===t?(n=Tl.bind(null,e),null===zo?(zo=[n],Bo=ko(Ro,Yo)):zo.push(n),n=Lo):14===t?n=qo(99,Tl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=qo(n,ml.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ml(e){if(sl=-1,cl=ll=0,0!==(48&Rs))throw Error(i(327));var t=e.callbackNode;if(Ml()&&e.callbackNode!==t)return null;var n=Lt(e,e===Ds?Ms:0);if(0===n)return null;var r=n,o=Rs;Rs|=16;var a=kl();for(Ds===e&&Ms===r||(qs(),xl(e,r));;)try{Sl();break}catch(l){wl(e,l)}if(na(),Ns.current=a,Rs=o,null!==Fs?r=0:(Ds=null,Ms=0,r=Ps),0!==(Bs&Hs))xl(e,0);else if(0!==r){if(2===r&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Pt(e))&&(r=Il(e,n))),1===r)throw t=zs,xl(e,0),Al(e,n),Gl(e,Wo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Rl(e);break;case 3:if(Al(e,n),(62914560&n)===n&&10<(r=js+500-Wo())){if(0!==Lt(e,0))break;if(((o=e.suspendedLanes)&n)!==n){pl(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ur(Rl.bind(null,e),r);break}Rl(e);break;case 4:if(Al(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>o&&(o=s),n&=~a}if(n=o,10<(n=(120>(n=Wo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ss(n/1960))-n)){e.timeoutHandle=Ur(Rl.bind(null,e),n);break}Rl(e);break;default:throw Error(i(329))}}return Gl(e,Wo()),e.callbackNode===t?ml.bind(null,e):null}function Al(e,t){for(t&=~Ws,t&=~Hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Tl(e){if(0!==(48&Rs))throw Error(i(327));if(Ml(),e===Ds&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Il(e,t);0!==(Bs&Hs)&&(n=Il(e,t=Lt(e,t)))}else n=Il(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Pt(e))&&(n=Il(e,t))),1===n)throw n=zs,xl(e,0),Al(e,t),Gl(e,Wo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rl(e),Gl(e,Wo()),null}function gl(e,t){var n=Rs;Rs|=1;try{return e(t)}finally{0===(Rs=n)&&(qs(),Xo())}}function yl(e,t){var n=Rs;Rs&=-2,Rs|=8;try{return e(t)}finally{0===(Rs=n)&&(qs(),Xo())}}function vl(e,t){uo(Ls,Os),Os|=t,Bs|=t}function bl(){Os=Ls.current,co(Ls)}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,jr(n)),null!==Fs)for(n=Fs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ao();break;case 3:Fa(),co(fo),co(ho),Ya();break;case 5:Oa(r);break;case 4:Fa();break;case 13:case 19:co(La);break;case 10:ra(r);break;case 23:case 24:bl()}n=n.return}Ds=e,Fs=Kl(e.current,null),Ms=Os=Bs=t,Ps=0,zs=null,Ws=Hs=Vs=0}function wl(e,t){for(;;){var n=Fs;try{if(na(),Za.current=Ei,ni){for(var r=$a.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ni=!1}if(Qa=0,ti=ei=$a=null,ri=!1,Es.current=null,null===n||null===n.return){Ps=1,zs=t,Fs=null;break}e:{var a=e,i=n.return,s=n,l=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&La.current),p=i;do{var h;if(h=13===p.tag){var f=p.memoizedState;if(null!==f)h=null!==f.dehydrated;else{var C=p.memoizedProps;h=void 0!==C.fallback&&(!0!==C.unstable_avoidThisFallback||!d)}}if(h){var G=p.updateQueue;if(null===G){var m=new Set;m.add(c),p.updateQueue=m}else G.add(c);if(0===(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var A=ua(-1,1);A.tag=2,da(s,A)}s.lanes|=1;break e}l=void 0,s=t;var T=a.pingCache;if(null===T?(T=a.pingCache=new ds,l=new Set,T.set(c,l)):void 0===(l=T.get(c))&&(l=new Set,T.set(c,l)),!l.has(s)){l.add(s);var g=Vl.bind(null,a,c,s);c.then(g,g)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(null!==p);l=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),l=cs(l,s),p=i;do{switch(p.tag){case 3:a=l,p.flags|=4096,t&=-t,p.lanes|=t,pa(p,ps(0,a,t));break e;case 1:a=l;var y=p.type,v=p.stateNode;if(0===(64&p.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Qs||!Qs.has(v)))){p.flags|=4096,t&=-t,p.lanes|=t,pa(p,hs(p,a,t));break e}}p=p.return}while(null!==p)}El(n)}catch(b){t=b,Fs===n&&null!==n&&(Fs=n=n.return);continue}break}}function kl(){var e=Ns.current;return Ns.current=Ei,null===e?Ei:e}function Il(e,t){var n=Rs;Rs|=16;var r=kl();for(Ds===e&&Ms===t||xl(e,t);;)try{_l();break}catch(o){wl(e,o)}if(na(),Rs=n,Ns.current=r,null!==Fs)throw Error(i(261));return Ds=null,Ms=0,Ps}function _l(){for(;null!==Fs;)Nl(Fs)}function Sl(){for(;null!==Fs&&!_o();)Nl(Fs)}function Nl(e){var t=Xs(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?El(e):Fs=t,Es.current=null}function El(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Os)))return void(Fs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Os)||0===(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(Fs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Fs=t);Fs=t=e}while(null!==t);0===Ps&&(Ps=5)}function Rl(e){var t=Uo();return Ko(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Ml()}while(null!==el);if(0!==(48&Rs))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,a=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<a;){var c=31-Wt(a),u=1<<c;o[c]=0,s[c]=-1,l[c]=-1,a&=~u}if(null!==ol&&0===(24&r)&&ol.has(e)&&ol.delete(e),e===Ds&&(Fs=Ds=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=Rs,Rs|=32,Es.current=null,Br=Xt,Gr(s=Cr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,a=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(k){l=null;break e}var d=0,p=-1,h=-1,f=0,C=0,G=s,m=null;t:for(;;){for(var A;G!==l||0!==a&&3!==G.nodeType||(p=d+a),G!==c||0!==u&&3!==G.nodeType||(h=d+u),3===G.nodeType&&(d+=G.nodeValue.length),null!==(A=G.firstChild);)m=G,G=A;for(;;){if(G===s)break t;if(m===l&&++f===a&&(p=d),m===c&&++C===u&&(h=d),null!==(A=G.nextSibling))break;m=(G=m).parentNode}G=A}l=-1===p||-1===h?null:{start:p,end:h}}else l=null;l=l||{start:0,end:0}}else l=null;Vr={focusedElem:s,selectionRange:l},Xt=!1,ul=null,dl=!1,Ys=r;do{try{Fl()}catch(k){if(null===Ys)throw Error(i(330));Bl(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);ul=null,Ys=r;do{try{for(s=e;null!==Ys;){var T=Ys.flags;if(16&T&&me(Ys.stateNode,""),128&T){var g=Ys.alternate;if(null!==g){var y=g.ref;null!==y&&("function"===typeof y?y(null):y.current=null)}}switch(1038&T){case 2:vs(Ys),Ys.flags&=-3;break;case 6:vs(Ys),Ys.flags&=-3,ks(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,ks(Ys.alternate,Ys);break;case 4:ks(Ys.alternate,Ys);break;case 8:ws(s,l=Ys);var v=l.alternate;gs(l),null!==v&&gs(v)}Ys=Ys.nextEffect}}catch(k){if(null===Ys)throw Error(i(330));Bl(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);if(y=Vr,g=Cr(),T=y.focusedElem,s=y.selectionRange,g!==T&&T&&T.ownerDocument&&fr(T.ownerDocument.documentElement,T)){null!==s&&Gr(T)&&(g=s.start,void 0===(y=s.end)&&(y=g),"selectionStart"in T?(T.selectionStart=g,T.selectionEnd=Math.min(y,T.value.length)):(y=(g=T.ownerDocument||document)&&g.defaultView||window).getSelection&&(y=y.getSelection(),l=T.textContent.length,v=Math.min(s.start,l),s=void 0===s.end?v:Math.min(s.end,l),!y.extend&&v>s&&(l=s,s=v,v=l),l=hr(T,v),a=hr(T,s),l&&a&&(1!==y.rangeCount||y.anchorNode!==l.node||y.anchorOffset!==l.offset||y.focusNode!==a.node||y.focusOffset!==a.offset)&&((g=g.createRange()).setStart(l.node,l.offset),y.removeAllRanges(),v>s?(y.addRange(g),y.extend(a.node,a.offset)):(g.setEnd(a.node,a.offset),y.addRange(g))))),g=[];for(y=T;y=y.parentNode;)1===y.nodeType&&g.push({element:y,left:y.scrollLeft,top:y.scrollTop});for("function"===typeof T.focus&&T.focus(),T=0;T<g.length;T++)(y=g[T]).element.scrollLeft=y.left,y.element.scrollTop=y.top}Xt=!!Br,Vr=Br=null,e.current=n,Ys=r;do{try{for(T=e;null!==Ys;){var b=Ys.flags;if(36&b&&ms(T,Ys.alternate,Ys),128&b){g=void 0;var x=Ys.ref;if(null!==x){var w=Ys.stateNode;Ys.tag,g=w,"function"===typeof x?x(g):x.current=g}}Ys=Ys.nextEffect}}catch(k){if(null===Ys)throw Error(i(330));Bl(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Po(),Rs=o}else e.current=n;if($s)$s=!1,el=e,tl=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((b=Ys).sibling=null,b.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===il?al++:(al=0,il=e):al=0,n=n.stateNode,xo&&"function"===typeof xo.onCommitFiberRoot)try{xo.onCommitFiberRoot(bo,n,void 0,64===(64&n.current.flags))}catch(k){}if(Gl(e,Wo()),Zs)throw Zs=!1,e=Js,Js=null,e;return 0!==(8&Rs)||Xo(),null}function Fl(){for(;null!==Ys;){var e=Ys.alternate;dl||null===ul||(0!==(8&Ys.flags)?$e(Ys,ul)&&(dl=!0):13===Ys.tag&&_s(e,Ys)&&$e(Ys,ul)&&(dl=!0));var t=Ys.flags;0!==(256&t)&&Gs(e,Ys),0===(512&t)||$s||($s=!0,qo(97,(function(){return Ml(),null}))),Ys=Ys.nextEffect}}function Ml(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Ko(e,Pl)}return!1}function Ol(e,t){nl.push(t,e),$s||($s=!0,qo(97,(function(){return Ml(),null})))}function Ll(e,t){rl.push(t,e),$s||($s=!0,qo(97,(function(){return Ml(),null})))}function Pl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Rs))throw Error(i(331));var t=Rs;Rs|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var o=n[r],a=n[r+1],s=o.destroy;if(o.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(i(330));Bl(a,c)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){o=n[r],a=n[r+1];try{var l=o.create;o.destroy=l()}catch(c){if(null===a)throw Error(i(330));Bl(a,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Rs=t,Xo(),!0}function zl(e,t,n){da(e,t=ps(0,t=cs(n,t),1)),t=pl(),null!==(e=Cl(e,1))&&(Ht(e,1,t),Gl(e,t))}function Bl(e,t){if(3===e.tag)zl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var o=hs(n,e=cs(t,e),1);if(da(n,o),o=pl(),null!==(n=Cl(n,1)))Ht(n,1,o),Gl(n,o);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Vl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=pl(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ms&n)===n&&(4===Ps||3===Ps&&(62914560&Ms)===Ms&&500>Wo()-js?xl(e,0):Ws|=n),Gl(e,t)}function Hl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Uo()?1:2:(0===ll&&(ll=Bs),0===(t=Bt(62914560&~ll))&&(t=4194304))),n=pl(),null!==(e=Cl(e,t))&&(Ht(e,t,n),Gl(e,n))}function Wl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ul(e,t,n,r){return new Wl(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kl(e,t){var n=e.alternate;return null===n?((n=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ql(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)jl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Xl(n.children,o,a,t);case O:s=8,o|=16;break;case w:s=8,o|=1;break;case k:return(e=Ul(12,n,t,8|o)).elementType=k,e.type=k,e.lanes=a,e;case N:return(e=Ul(13,n,t,o)).type=N,e.elementType=N,e.lanes=a,e;case E:return(e=Ul(19,n,t,o)).elementType=E,e.lanes=a,e;case L:return Yl(n,o,a,t);case P:return(e=Ul(24,n,t,o)).elementType=P,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case _:s=9;break e;case S:s=11;break e;case R:s=14;break e;case D:s=16,r=null;break e;case F:s=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ul(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Xl(e,t,n,r){return(e=Ul(7,e,r,t)).lanes=n,e}function Yl(e,t,n,r){return(e=Ul(23,e,r,t)).elementType=L,e.lanes=n,e}function Zl(e,t,n){return(e=Ul(6,e,null,t)).lanes=n,e}function Jl(e,t,n){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function $l(e,t,n,r){var o=t.current,a=pl(),s=hl(o);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(mo(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(i(171))}if(1===n.tag){var c=n.type;if(mo(c)){n=go(n,c,l);break e}}n=l}else n=po;return null===t.context?t.context=n:t.pendingContext=n,(t=ua(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),da(o,t),fl(o,s,a),s}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(e,t,null!=n&&!0===n.hydrate),t=Ul(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,la(t),e[$r]=n.current,Er(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a._internalRoot;if("function"===typeof o){var s=o;o=function(){var e=ec(i);s.call(e)}}$l(t,i,e,o)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),i=a._internalRoot,"function"===typeof o){var l=o;o=function(){var e=ec(i);l.call(e)}}yl((function(){$l(t,i,e,o)}))}return ec(i)}function ic(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fo.current)Oi=!0;else{if(0===(n&r)){switch(Oi=!1,t.tag){case 3:Ki(t),qa();break;case 5:Ma(t);break;case 1:mo(t.type)&&yo(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;uo(Qo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qi(e,t,n):(uo(La,1&La.current),null!==(t=as(e,t,n))?t.sibling:null);uo(La,1&La.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return os(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),uo(La,La.current),r)break;return null;case 23:case 24:return t.lanes=0,Vi(e,t,n)}return as(e,t,n)}Oi=0!==(16384&e.flags)}else Oi=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=Go(t,ho.current),aa(t,n),o=ii(null,t,r,e,o,n),t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mo(r)){var a=!0;yo(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,la(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&Ga(t,r,s,e),o.updater=ma,t.stateNode=o,o._reactInternals=t,ya(t,r,e,n),t=ji(null,t,r,!0,a,n)}else t.tag=0,Li(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"===typeof e)return jl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===R)return 14}return 2}(o),e=Jo(o,e),a){case 0:t=Wi(null,t,o,e,n);break e;case 1:t=Ui(null,t,o,e,n);break e;case 11:t=Pi(null,t,o,e,n);break e;case 14:t=zi(null,t,o,Jo(o.type,e),r,n);break e}throw Error(i(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Wi(e,t,r,o=t.elementType===r?o:Jo(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ui(e,t,r,o=t.elementType===r?o:Jo(r,o),n);case 3:if(Ki(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ca(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===o)qa(),t=as(e,t,n);else{if((a=(o=t.stateNode).hydrate)&&(Ba=qr(t.stateNode.containerInfo.firstChild),za=t,a=Va=!0),a){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(a=e[o])._workInProgressVersionPrimary=e[o+1],Xa.push(a);for(n=Ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Li(e,t,r,n),qa();t=t.child}return t;case 5:return Ma(t),null===e&&Ua(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,Wr(r,o)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),Hi(e,t),Li(e,t,s,n),t.child;case 6:return null===e&&Ua(t),null;case 13:return Qi(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ka(t,null,r,n):Li(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Pi(e,t,r,o=t.elementType===r?o:Jo(r,o),n);case 7:return Li(e,t,t.pendingProps,n),t.child;case 8:case 12:return Li(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value;var l=t.type._context;if(uo(Qo,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0===(a=cr(l,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===o.children&&!fo.current){t=as(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&a)){1===l.tag&&((u=ua(-1,n&-n)).tag=2,da(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),oa(l.return,n),c.lanes|=n;break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Li(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(o=ia(o,a.unstable_observedBits)),t.flags|=1,Li(e,t,r,n),t.child;case 14:return a=Jo(o=t.type,t.pendingProps),zi(e,t,o,a=Jo(o.type,a),r,n);case 15:return Bi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Jo(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mo(r)?(e=!0,yo(t)):e=!1,aa(t,n),Ta(t,r,o),ya(t,r,o,n),ji(null,t,r,!0,e,n);case 19:return os(e,t,n);case 23:case 24:return Vi(e,t,n)}throw Error(i(156,t.tag))},rc.prototype.render=function(e){$l(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$l(null,e,null,(function(){t[$r]=null}))},et=function(e){13===e.tag&&(fl(e,4,pl()),nc(e,4))},tt=function(e){13===e.tag&&(fl(e,67108864,pl()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=pl(),n=hl(e);fl(e,n,t),nc(e,n)}},rt=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=oo(r);if(!o)throw Error(i(90));J(r),ne(r,o)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Re=gl,De=function(e,t,n,r,o){var a=Rs;Rs|=4;try{return Ko(98,e.bind(null,t,n,r,o))}finally{0===(Rs=a)&&(qs(),Xo())}},Fe=function(){0===(49&Rs)&&(function(){if(null!==ol){var e=ol;ol=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Gl(e,Wo())}))}Xo()}(),Ml())},Me=function(e,t){var n=Rs;Rs|=2;try{return e(t)}finally{0===(Rs=n)&&(qs(),Xo())}};var sc={Events:[no,ro,oo,Ne,Ee,Ml,{current:!1}]},lc={findFiberByHostInstance:to,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{bo=uc.inject(cc),xo=uc}catch(Ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=ic,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Rs;if(0!==(48&n))return e(t);Rs|=1;try{if(e)return Ko(99,e.bind(null,t))}finally{Rs=n,Xo()}},t.hydrate=function(e,t,n){if(!oc(t))throw Error(i(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!oc(t))throw Error(i(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!oc(e))throw Error(i(40));return!!e._reactRootContainer&&(yl((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[$r]=null}))})),!0)},t.unstable_batchedUpdates=gl,t.unstable_createPortal=function(e,t){return ic(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";n(2123);var r=n(5043),o=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;o=a("react.element"),a("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:a,_owner:i.current}}t.jsx=c,t.jsxs=c},4202:(e,t,n)=>{"use strict";var r=n(2123),o=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,s=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;o=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),i=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),u=d("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={};function G(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||f}function m(){}function A(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||f}G.prototype.isReactComponent={},G.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},G.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=G.prototype;var T=A.prototype=new m;T.constructor=A,r(T,G.prototype),T.isPureReactComponent=!0;var g={current:null},y=Object.prototype.hasOwnProperty,v={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,n){var r,a={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)y.call(t,r)&&!v.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:o,type:e,key:i,ref:s,props:a,_owner:g.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var w=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case a:l=!0}}if(l)return i=i(l=e),e=""===r?"."+k(l,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(w,"$&/")+"/"),I(i,t,n,"",(function(e){return e}))):null!=i&&(x(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(w,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+k(s=e[c],c);l+=I(s,t,n,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,n,u=r+k(s,c++),i);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function _(e,t,n){if(null==e)return e;var r=[],o=0;return I(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function S(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function E(){var e=N.current;if(null===e)throw Error(h(321));return e}var R={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:g,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(h(143));return e}},t.Component=G,t.PureComponent=A,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var a=r({},e.props),i=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=g.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)y.call(t,u)&&!v.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];a.children=c}return{$$typeof:o,type:e.type,key:i,ref:s,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=b,t.createFactory=function(e){var t=b.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:S}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return E().useCallback(e,t)},t.useContext=function(e,t){return E().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return E().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return E().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return E().useLayoutEffect(e,t)},t.useMemo=function(e,t){return E().useMemo(e,t)},t.useReducer=function(e,t,n){return E().useReducer(e,t,n)},t.useRef=function(e){return E().useRef(e)},t.useState=function(e){return E().useState(e)},t.version="17.0.2"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";var n,r,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,u=null,d=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(n){throw setTimeout(d,0),n}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(d,0))},r=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var f=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var C=!1,G=null,m=-1,A=5,T=0;t.unstable_shouldYield=function(){return t.unstable_now()>=T},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5};var g=new MessageChannel,y=g.port2;g.port1.onmessage=function(){if(null!==G){var e=t.unstable_now();T=e+A;try{G(!0,e)?y.postMessage(null):(C=!1,G=null)}catch(n){throw y.postMessage(null),n}}else C=!1},n=function(e){G=e,C||(C=!0,y.postMessage(null))},r=function(e,n){m=p((function(){e(t.unstable_now())}),n)},o=function(){h(m),m=-1}}function v(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<w(o,t)))break e;e[r]=t,e[n]=o,n=r}}function b(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var a=2*(r+1)-1,i=e[a],s=a+1,l=e[s];if(void 0!==i&&0>w(i,n))void 0!==l&&0>w(l,i)?(e[r]=l,e[s]=n,r=s):(e[r]=i,e[a]=n,r=a);else{if(!(void 0!==l&&0>w(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function w(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],I=[],_=1,S=null,N=3,E=!1,R=!1,D=!1;function F(e){for(var t=b(I);null!==t;){if(null===t.callback)x(I);else{if(!(t.startTime<=e))break;x(I),t.sortIndex=t.expirationTime,v(k,t)}t=b(I)}}function M(e){if(D=!1,F(e),!R)if(null!==b(k))R=!0,n(O);else{var t=b(I);null!==t&&r(M,t.startTime-e)}}function O(e,n){R=!1,D&&(D=!1,o()),E=!0;var a=N;try{for(F(n),S=b(k);null!==S&&(!(S.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=S.callback;if("function"===typeof i){S.callback=null,N=S.priorityLevel;var s=i(S.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?S.callback=s:S===b(k)&&x(k),F(n)}else x(k);S=b(k)}if(null!==S)var l=!0;else{var c=b(I);null!==c&&r(M,c.startTime-n),l=!1}return l}finally{S=null,N=a,E=!1}}var L=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,n(O))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return b(k)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:_++,callback:a,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>s?(e.sortIndex=i,v(I,e),null===b(k)&&e===b(I)&&(D?o():D=!0,r(M,i-s))):(e.sortIndex=l,v(k,e),R||E||(R=!0,n(O))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4334:(e,t,n)=>{var r=n(7359),o=n(7066),a=n(9016),i=n(9538),s=n(6288),l=n(5262),c=n(2430);c.alea=r,c.xor128=o,c.xorwow=a,c.xorshift7=i,c.xor4096=s,c.tychei=l,e.exports=c},7359:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new i(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},5262:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},7066:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},6288:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},9538:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},9016:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},2430:function(e,t,n){var r;!function(o,a,i){var s,l=256,c=i.pow(l,6),u=i.pow(2,52),d=2*u,p=l-1;function h(e,t,n){var r=[],p=m(G((t=1==t?{entropy:!0}:t||{}).entropy?[e,A(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(o.crypto||o.msCrypto).getRandomValues(e)),A(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,A(a)]}}():e,3),r),h=new f(r),T=function(){for(var e=h.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return T.int32=function(){return 0|h.g(4)},T.quick=function(){return h.g(4)/4294967296},T.double=T,m(A(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&C(r,h),e.state=function(){return C(h,{})}),n?(i.random=e,t):e})(T,p,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<l;)i[o]=o++;for(o=0;o<l;o++)i[o]=i[a=p&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=p&o+1],n=n*l+i[p&(i[o]=i[a=p&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(l)}function C(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function G(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(G(e[n],t-1))}catch(a){}return r.length?r:"string"==o?e:e+"\0"}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return A(t)}function A(e){return String.fromCharCode.apply(0,e)}if(m(i.random(),a),e.exports){e.exports=h;try{s=n(1234)}catch(T){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},5817:()=>{},8590:()=>{},4530:()=>{},8108:()=>{},551:()=>{},1234:()=>{},1751:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(4402);class o extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(i(this,e),t)}delete(e){return super.delete(s(this,e))}}Set;function a(e,t){let{_intern:n,_key:r}=e;const o=r(t);return n.has(o)?n.get(o):t}function i(e,t){let{_intern:n,_key:r}=e;const o=r(t);return n.has(o)?n.get(o):(n.set(o,t),t)}function s(e,t){let{_intern:n,_key:r}=e;const o=r(t);return n.has(o)&&(t=n.get(t),n.delete(o)),t}function l(e){return null!==e&&"object"===typeof e?e.valueOf():e}const c=Symbol("implicit");function u(){var e=new o,t=[],n=[],a=c;function i(r){let o=e.get(r);if(void 0===o){if(a!==c)return a;e.set(r,o=t.push(r)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new o;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(a=e,i):a},i.copy=function(){return u(t,n).unknown(a)},r.C.apply(i,arguments),i}function d(){var e,t,n=u().unknown(void 0),o=n.domain,a=n.range,i=0,s=1,l=!1,c=0,p=0,h=.5;function f(){var n=o().length,r=s<i,u=r?s:i,d=r?i:s;e=(d-u)/Math.max(1,n-c+2*p),l&&(e=Math.floor(e)),u+=(d-u-e*(n-c))*h,t=e*(1-c),l&&(u=Math.round(u),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(o);++r<o;)a[r]=e+r*n;return a}(n).map((function(t){return u+e*t}));return a(r?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(o(e),f()):o()},n.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,f()):[i,s]},n.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,l=!0,f()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,f()):l},n.padding=function(e){return arguments.length?(c=Math.min(1,p=+e),f()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),f()):c},n.paddingOuter=function(e){return arguments.length?(p=+e,f()):p},n.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),f()):h},n.copy=function(){return d(o(),[i,s]).round(l).paddingInner(c).paddingOuter(p).align(h)},r.C.apply(f(),arguments)}},9333:(e,t,n)=>{"use strict";n.d(t,{C:()=>de,Ay:()=>he});var r=n(454),o=n(9221);const a=(0,o.A)(r.A),i=a.right,s=(a.left,(0,o.A)((function(e){return null===e?NaN:+e})).center,i);function l(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function c(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function u(){}var d=.7,p=1/d,h="\\s*([+-]?\\d+)\\s*",f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",C="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G=/^#([0-9a-f]{3,8})$/,m=new RegExp("^rgb\\(".concat(h,",").concat(h,",").concat(h,"\\)$")),A=new RegExp("^rgb\\(".concat(C,",").concat(C,",").concat(C,"\\)$")),T=new RegExp("^rgba\\(".concat(h,",").concat(h,",").concat(h,",").concat(f,"\\)$")),g=new RegExp("^rgba\\(".concat(C,",").concat(C,",").concat(C,",").concat(f,"\\)$")),y=new RegExp("^hsl\\(".concat(f,",").concat(C,",").concat(C,"\\)$")),v=new RegExp("^hsla\\(".concat(f,",").concat(C,",").concat(C,",").concat(f,"\\)$")),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function w(){return this.rgb().formatRgb()}function k(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=G.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?I(t):3===n?new N(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=m.exec(e))?new N(t[1],t[2],t[3],1):(t=A.exec(e))?new N(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=T.exec(e))?_(t[1],t[2],t[3],t[4]):(t=g.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=y.exec(e))?O(t[1],t[2]/100,t[3]/100,1):(t=v.exec(e))?O(t[1],t[2]/100,t[3]/100,t[4]):b.hasOwnProperty(e)?I(b[e]):"transparent"===e?new N(NaN,NaN,NaN,0):null}function I(e){return new N(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new N(e,t,n,r)}function S(e,t,n,r){return 1===arguments.length?((o=e)instanceof u||(o=k(o)),o?new N((o=o.rgb()).r,o.g,o.b,o.opacity):new N):new N(e,t,n,null==r?1:r);var o}function N(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function E(){return"#".concat(M(this.r)).concat(M(this.g)).concat(M(this.b))}function R(){const e=D(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(F(this.r),", ").concat(F(this.g),", ").concat(F(this.b)).concat(1===e?")":", ".concat(e,")"))}function D(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function F(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function M(e){return((e=F(e))<16?"0":"")+e.toString(16)}function O(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new P(e,t,n,r)}function L(e){if(e instanceof P)return new P(e.h,e.s,e.l,e.opacity);if(e instanceof u||(e=k(e)),!e)return new P;if(e instanceof P)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(i=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new P(i,s,l,e.opacity)}function P(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function z(e){return(e=(e||0)%360)<0?e+360:e}function B(e){return Math.max(0,Math.min(1,e||0))}function V(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function H(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}l(u,k,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return L(this).formatHsl()},formatRgb:w,toString:w}),l(N,S,c(u,{brighter(e){return e=null==e?p:Math.pow(p,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?d:Math.pow(d,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new N(F(this.r),F(this.g),F(this.b),D(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatHex8:function(){return"#".concat(M(this.r)).concat(M(this.g)).concat(M(this.b)).concat(M(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:R,toString:R})),l(P,(function(e,t,n,r){return 1===arguments.length?L(e):new P(e,t,n,null==r?1:r)}),c(u,{brighter(e){return e=null==e?p:Math.pow(p,e),new P(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?d:Math.pow(d,e),new P(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new N(V(e>=240?e-240:e+120,o,r),V(e,o,r),V(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new P(z(this.h),B(this.s),B(this.l),D(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=D(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(z(this.h),", ").concat(100*B(this.s),"%, ").concat(100*B(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const W=e=>()=>e;function U(e,t){return function(n){return e+n*t}}function j(e){return 1===(e=+e)?K:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):W(isNaN(t)?n:t)}}function K(e,t){var n=t-e;return n?U(e,n):W(isNaN(e)?t:e)}const q=function e(t){var n=j(t);function r(e,t){var r=n((e=S(e)).r,(t=S(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=K(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function X(e){return function(t){var n,r,o=t.length,a=new Array(o),i=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=S(t[n]),a[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return a=e(a),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=i(e),r.b=s(e),r+""}}}X((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],i=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return H((n-r/t)*t,i,o,a,s)}})),X((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return H((n-r/t)*t,o,a,i,s)}}));function Y(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,a=new Array(o),i=new Array(r);for(n=0;n<o;++n)a[n]=re(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function Z(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function J(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Q(e,t){var n,r={},o={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=re(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var $=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp($.source,"g");function te(e,t){var n,r,o,a=$.lastIndex=ee.lastIndex=0,i=-1,s=[],l=[];for(e+="",t+="";(n=$.exec(e))&&(r=ee.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i:i,x:J(n,r)})),a=ee.lastIndex;return a<t.length&&(o=t.slice(a),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function ne(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<r;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}}function re(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?W(t):("number"===o?J:"string"===o?(n=k(t))?(t=n,q):te:t instanceof k?q:t instanceof Date?Z:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Y:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Q:J:ne))(e,t)}function oe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ae(e){return+e}var ie=[0,1];function se(e){return e}function le(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ce(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=le(o,r),a=n(i,a)):(r=le(r,o),a=n(a,i)),function(e){return a(r(e))}}function ue(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=le(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(t){var n=s(e,t,1,r)-1;return a[n](o[n](t))}}function de(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pe(){var e,t,n,r,o,a,i=ie,s=ie,l=re,c=se;function u(){var e=Math.min(i.length,s.length);return c!==se&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?ue:ce,o=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(o||(o=r(i.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(s,i.map(e),J)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,ae),u()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=oe,u()},d.clamp=function(e){return arguments.length?(c=!!e||se,u()):c!==se},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function he(){return pe()(se,se)}},4402:(e,t,n)=>{"use strict";function r(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}n.d(t,{C:()=>r})},5056:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(1522),o=n(9333),a=n(4402),i=n(7903),s=n(7715);var l=n(6555);function c(e,t,n,o){var a,c=(0,r.sG)(e,t,n);switch((o=(0,i.A)(null==o?",f":o)).type){case"s":var u=Math.max(Math.abs(e),Math.abs(t));return null!=o.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,s.A)(t)/3)))-(0,s.A)(Math.abs(e)))}(c,u))||(o.precision=a),(0,l.s)(o,u);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,s.A)(t)-(0,s.A)(e))+1}(c,Math.max(Math.abs(e),Math.abs(t))))||(o.precision=a-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(a=function(e){return Math.max(0,-(0,s.A)(Math.abs(e)))}(c))||(o.precision=a-2*("%"===o.type))}return(0,l.GP)(o)}function u(){var e=(0,o.Ay)();return e.copy=function(){return(0,o.C)(e,u())},a.C.apply(e,arguments),function(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,r.Ay)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return c(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var o,a,i=t(),s=0,l=i.length-1,c=i[s],u=i[l],d=10;for(u<c&&(a=c,c=u,u=a,a=s,s=l,l=a);d-- >0;){if((a=(0,r.lq)(c,u,n))===o)return i[s]=c,i[l]=u,t(i);if(a>0)c=Math.floor(c/a)*a,u=Math.ceil(u/a)*a;else{if(!(a<0))break;c=Math.ceil(c*a)/a,u=Math.floor(u*a)/a}o=a}return e},e}(e)}},5665:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(9221),o=n(1522),a=n(3758),i=n(9063),s=(0,i.A)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,i.A)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):s:null};const l=s;s.range;var c=n(4102),u=n(6594),d=n(4260),p=n(8966),h=n(5038),f=n(3238),C=n(6883),G=(0,i.A)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*a.rR)}),(function(e,t){return(t-e)/a.rR}),(function(e){return e.getUTCMinutes()}));const m=G;G.range;var A=(0,i.A)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*a.JJ)}),(function(e,t){return(t-e)/a.JJ}),(function(e){return e.getUTCHours()}));const T=A;A.range;var g=n(7558),y=n(5838),v=(0,i.A)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));const b=v;v.range;var x=n(2915);function w(e,t,n,i,s,u){const d=[[c.A,1,a.Tt],[c.A,5,5*a.Tt],[c.A,15,15*a.Tt],[c.A,30,30*a.Tt],[u,1,a.rR],[u,5,5*a.rR],[u,15,15*a.rR],[u,30,30*a.rR],[s,1,a.JJ],[s,3,3*a.JJ],[s,6,6*a.JJ],[s,12,12*a.JJ],[i,1,a.Nm],[i,2,2*a.Nm],[n,1,a.Fq],[t,1,a.Pv],[t,3,3*a.Pv],[e,1,a.MP]];function p(t,n,i){const s=Math.abs(n-t)/i,c=(0,r.A)((e=>{let[,,t]=e;return t})).right(d,s);if(c===d.length)return e.every((0,o.sG)(t/a.MP,n/a.MP,i));if(0===c)return l.every(Math.max((0,o.sG)(t,n,i),1));const[u,p]=d[s/d[c-1][2]<d[c][2]/s?c-1:c];return u.every(p)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const o=n&&"function"===typeof n.range?n:p(e,t,n),a=o?o.range(e,+t+1):[];return r?a.reverse():a},p]}const[k,I]=w(x.A,b,y.Hl,g.A,T,m),[_,S]=w(C.A,f.A,h.fz,p.A,d.A,u.A);var N=n(7305),E=n(9333);function R(e){return new Date(e)}function D(e){return e instanceof Date?+e:+new Date(+e)}function F(e,t,n,r,o,a,i,s,l,c){var u=(0,E.Ay)(),d=u.invert,p=u.domain,h=c(".%L"),f=c(":%S"),C=c("%I:%M"),G=c("%I %p"),m=c("%a %d"),A=c("%b %d"),T=c("%B"),g=c("%Y");function y(e){return(l(e)<e?h:s(e)<e?f:i(e)<e?C:a(e)<e?G:r(e)<e?o(e)<e?m:A:n(e)<e?T:g)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?p(Array.from(e,D)):p().map(R)},u.ticks=function(t){var n=p();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?y:c(t)},u.nice=function(e){var n=p();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?p(function(e,t){var n,r=0,o=(e=e.slice()).length-1,a=e[r],i=e[o];return i<a&&(n=r,r=o,o=n,n=a,a=i,i=n),e[r]=t.floor(a),e[o]=t.ceil(i),e}(n,e)):u},u.copy=function(){return(0,E.C)(u,F(e,t,n,r,o,a,i,s,l,c))},u}var M=n(4402);function O(){return M.C.apply(F(k,I,x.A,b,y.Hl,g.A,T,m,c.A,N.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}},6326:(e,t,n)=>{"use strict";n.d(t,{C6:()=>o,Cg:()=>s,Cl:()=>a,Tt:()=>i,fX:()=>l});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}Object.create;function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{CompositeArrayBuffer:()=>xG,browserFiles:()=>AA,browserHTTPRequest:()=>IA,concatenateArrayBuffers:()=>WG,copyModel:()=>_m,decodeWeights:()=>FG,decodeWeightsStream:()=>zG,encodeWeights:()=>DG,fromMemory:()=>EA,fromMemorySync:()=>RA,getLoadHandlers:()=>em,getModelArtifactsForJSON:()=>qG,getModelArtifactsForJSONSync:()=>KG,getModelArtifactsInfoForJSON:()=>XG,getSaveHandlers:()=>$G,getWeightSpecs:()=>YG,http:()=>kA,isHTTPScheme:()=>xA,listModels:()=>km,loadWeights:()=>yA,moveModel:()=>Sm,registerLoadRouter:()=>QG,registerSaveRouter:()=>JG,removeModel:()=>Im,weightsLoaderFactory:()=>vA,withSaveHandler:()=>DA,withSaveHandlerSync:()=>FA});var t={};n.r(t),n.d(t,{assertParamsValid:()=>PA,computeFlatOffset:()=>JA,computeOutShape:()=>BA,getNormalizedAxes:()=>UA,isSliceContinous:()=>ZA,maskToAxes:()=>zA,parseSliceParams:()=>QA,sliceInfo:()=>$A,startForAxis:()=>XA,startIndicesWithElidedDims:()=>jA,stopForAxis:()=>YA,stopIndicesWithElidedDims:()=>KA,stridesForAxis:()=>qA,stridesWithElidedDims:()=>VA});var r={};n.r(r),n.d(r,{conv2d:()=>pb,depthwiseConv2d:()=>Cb,matMul:()=>Gb});var o={};n.r(o),n.d(o,{collectGatherOpShapeInfo:()=>Iw,computeOutShape:()=>kw,segOpComputeOptimalWindowSize:()=>ww});var a={};n.r(a),n.d(a,{ERF_A1:()=>Wx,ERF_A2:()=>Ux,ERF_A3:()=>jx,ERF_A4:()=>Kx,ERF_A5:()=>qx,ERF_P:()=>Hx,PARALLELIZE_THRESHOLD:()=>Ex,RowPartitionType:()=>kx,SELU_SCALE:()=>Vx,SELU_SCALEALPHA:()=>Bx,applyActivation:()=>ub,assertAndGetBroadcastShape:()=>lA,assertAxesAreInnerMostDims:()=>kg,assertParamsConsistent:()=>xx,assignToTypedArray:()=>$x,axesAreInnerMostDims:()=>vg,calculateShapes:()=>Bv,checkEinsumDimSizes:()=>lw,checkPadOnDimRoundingMode:()=>IT,combineLocations:()=>bg,combineRaggedTensorToTensorShapes:()=>Ix,complexWithEvenIndex:()=>Zx,complexWithOddIndex:()=>Jx,computeConv2DInfo:()=>GT,computeConv3DInfo:()=>mT,computeDefaultPad:()=>AT,computeDilation2DInfo:()=>hT,computeOptimalWindowSize:()=>Rx,computeOutAndReduceShapes:()=>xg,computeOutShape:()=>wx,computePool2DInfo:()=>fT,computePool3DInfo:()=>CT,convertConv2DDataFormat:()=>kT,decodeEinsumEquation:()=>iw,eitherStridesOrDilationsAreOne:()=>xT,expandShapeToKeepDim:()=>wg,exponent:()=>tw,exponents:()=>ew,fromStringArrayToUint8:()=>Sw,fromUint8ToStringArray:()=>_w,getAxesPermutation:()=>Ig,getBroadcastDims:()=>iA,getComplexWithIndex:()=>Qx,getEinsumComputePath:()=>cw,getEinsumPermutation:()=>sw,getFusedBiasGradient:()=>cb,getFusedDyActivation:()=>lb,getImageCenter:()=>Dx,getInnerMostAxes:()=>Sg,getPermuted:()=>Mx,getRaggedRank:()=>Sx,getReductionAxes:()=>sA,getReshaped:()=>Fx,getReshapedPermuted:()=>Ox,getRowPartitionTypesHelper:()=>_x,getSliceBeginCoords:()=>Lx,getSliceSize:()=>Px,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>hw,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>fw,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Cw,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Aw,getSparseReshapeInputOutputMismatchErrorMessage:()=>gw,getSparseReshapeInputOutputMultipleErrorMessage:()=>Tw,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Gw,getSparseReshapeNegativeOutputDimErrorMessage:()=>mw,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>xw,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>yw,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>vw,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>bw,getUndoAxesPermutation:()=>_g,isIdentityPermutation:()=>uw,log:()=>Xf,mergeRealAndImagArrays:()=>Xx,prepareAndValidate:()=>zx,prepareSplitSize:()=>pw,segment_util:()=>o,shouldFuse:()=>db,slice_util:()=>t,splitRealAndImagArrays:()=>Yx,stridesOrDilationsArePositive:()=>wT,tupleValuesAreOne:()=>bT,upcastType:()=>YC,validateDefaultValueShape:()=>Nx,validateInput:()=>zv,validateUpdateShape:()=>Pv,warn:()=>qf});var i={};n.r(i),n.d(i,{json:()=>YR});var s={};n.r(s),n.d(s,{json:()=>ZR});var l={};n.r(l),n.d(l,{json:()=>JR});var c={};n.r(c),n.d(c,{json:()=>QR});var u={};n.r(u),n.d(u,{json:()=>$R});var d={};n.r(d),n.d(d,{json:()=>eD});var p={};n.r(p),n.d(p,{json:()=>tD});var h={};n.r(h),n.d(h,{json:()=>nD});var f={};n.r(f),n.d(f,{json:()=>rD});var C={};n.r(C),n.d(C,{json:()=>oD});var G={};n.r(G),n.d(G,{json:()=>aD});var m={};n.r(m),n.d(m,{json:()=>iD});var A={};n.r(A),n.d(A,{json:()=>sD});var T={};n.r(T),n.d(T,{json:()=>lD});var g={};n.r(g),n.d(g,{json:()=>cD});var y={};n.r(y),n.d(y,{json:()=>uD});var v={};n.r(v),n.d(v,{json:()=>dD});var b={};n.r(b),n.d(b,{json:()=>pD});var x={};n.r(x),n.d(x,{json:()=>hD});var w={};n.r(w),n.d(w,{OP_SCOPE_SUFFIX:()=>AG,abs:()=>aA,acos:()=>tT,acosh:()=>nT,add:()=>Pm,addN:()=>rT,all:()=>oT,any:()=>aT,argMax:()=>iT,argMin:()=>sT,asin:()=>lT,asinh:()=>cT,atan:()=>uT,atan2:()=>dT,atanh:()=>pT,avgPool:()=>ST,avgPool3d:()=>NT,basicLSTMCell:()=>OT,batchNorm:()=>PT,batchNorm2d:()=>zT,batchNorm3d:()=>BT,batchNorm4d:()=>VT,batchToSpaceND:()=>LT,bincount:()=>HT,bitwiseAnd:()=>WT,booleanMaskAsync:()=>Jv,broadcastArgs:()=>UT,broadcastTo:()=>jT,buffer:()=>Fm,cast:()=>Mm,ceil:()=>KT,clipByValue:()=>qT,clone:()=>Om,complex:()=>gG,concat:()=>ET,concat1d:()=>XT,concat2d:()=>YT,concat3d:()=>ZT,concat4d:()=>JT,conv1d:()=>$T,conv2d:()=>QT,conv2dTranspose:()=>tg,conv3d:()=>ng,conv3dTranspose:()=>og,cos:()=>ag,cosh:()=>ig,cosineWindow:()=>ab,cumprod:()=>sg,cumsum:()=>lg,denseBincount:()=>cg,depthToSpace:()=>ug,depthwiseConv2d:()=>dg,diag:()=>pg,dilation2d:()=>hg,div:()=>Bm,divNoNan:()=>Gg,dot:()=>mg,dropout:()=>rb,einsum:()=>Ag,elu:()=>Tg,enclosingPowerOfTwo:()=>ob,ensureShape:()=>gg,equal:()=>fg,erf:()=>yg,euclideanNorm:()=>Mg,exp:()=>Og,expandDims:()=>Lg,expm1:()=>Pg,eye:()=>Bg,fft:()=>vv,fill:()=>eA,floor:()=>Vg,floorDiv:()=>zm,fused:()=>r,gather:()=>Hg,gatherND:()=>nb,greater:()=>Wg,greaterEqual:()=>Ug,ifft:()=>bv,imag:()=>jg,image:()=>Gx,inTopKAsync:()=>ib,irfft:()=>xv,isFinite:()=>Kg,isInf:()=>qg,isNaN:()=>Xg,leakyRelu:()=>Yg,less:()=>Zg,lessEqual:()=>Jg,linalg:()=>mx,linspace:()=>Qg,localResponseNormalization:()=>$g,log:()=>ey,log1p:()=>ty,logSigmoid:()=>oy,logSoftmax:()=>ay,logSumExp:()=>iy,logicalAnd:()=>sy,logicalNot:()=>ly,logicalOr:()=>cy,logicalXor:()=>uy,losses:()=>Ax,lowerBound:()=>hy,matMul:()=>RT,max:()=>Ng,maxPool:()=>fy,maxPool3d:()=>Cy,maxPoolWithArgmax:()=>Gy,maximum:()=>cA,mean:()=>my,meshgrid:()=>gy,min:()=>Eg,minimum:()=>yy,mirrorPad:()=>vy,mod:()=>by,moments:()=>xy,movingAverage:()=>$v,mul:()=>Vm,multiRNNCell:()=>wy,multinomial:()=>ky,neg:()=>ny,norm:()=>Fg,notEqual:()=>Iy,oneHot:()=>_y,ones:()=>Ty,onesLike:()=>Sy,op:()=>TG,outerProduct:()=>Ny,pad:()=>Ey,pad1d:()=>Ry,pad2d:()=>Dy,pad3d:()=>Fy,pad4d:()=>My,pool:()=>Ly,pow:()=>nA,prelu:()=>Py,print:()=>Lm,prod:()=>zy,raggedGather:()=>By,raggedRange:()=>Vy,raggedTensorToTensor:()=>Hy,rand:()=>Wy,randomGamma:()=>Xy,randomNormal:()=>Yy,randomStandardNormal:()=>Zy,randomUniform:()=>Jy,randomUniformInt:()=>Qy,range:()=>$y,real:()=>ev,reciprocal:()=>tv,relu:()=>nv,relu6:()=>rv,reshape:()=>_T,reverse:()=>ov,reverse1d:()=>av,reverse2d:()=>iv,reverse3d:()=>sv,reverse4d:()=>lv,rfft:()=>kv,round:()=>cv,rsqrt:()=>uv,scalar:()=>Km,scatterND:()=>eb,searchSorted:()=>py,selu:()=>dv,separableConv2d:()=>pv,setdiff1dAsync:()=>hv,sigmoid:()=>DT,sign:()=>fv,signal:()=>Cx,sin:()=>Cv,sinh:()=>Gv,slice:()=>FT,slice1d:()=>mv,slice2d:()=>Av,slice3d:()=>Tv,slice4d:()=>gv,softmax:()=>yv,softplus:()=>ry,spaceToBatchND:()=>Oy,sparse:()=>Tx,sparseToDense:()=>tb,spectral:()=>fx,split:()=>wv,sqrt:()=>Hm,square:()=>Wm,squaredDifference:()=>Iv,squeeze:()=>_v,stack:()=>Sv,step:()=>Nv,stridedSlice:()=>Ev,string:()=>gx,sub:()=>rA,sum:()=>Rg,tan:()=>Rv,tanh:()=>MT,tensor:()=>vG,tensor1d:()=>Dv,tensor2d:()=>Fv,tensor3d:()=>MA,tensor4d:()=>Mv,tensor5d:()=>Ov,tensor6d:()=>Lv,tensorScatterUpdate:()=>Vv,tile:()=>zg,topk:()=>Hv,transpose:()=>Qv,truncatedNormal:()=>Wv,unique:()=>Uv,unsortedSegmentSum:()=>jv,unstack:()=>Kv,upperBound:()=>qv,variable:()=>Xv,where:()=>Cg,whereAsync:()=>Zv,zeros:()=>Ay,zerosLike:()=>Um});var k={};n.r(k),n.d(k,{addImpl:()=>fM,bincountImpl:()=>iO,bincountReduceImpl:()=>sO,bitwiseAndImpl:()=>cO,castImpl:()=>cM,ceilImpl:()=>hO,concatImpl:()=>TO,equalImpl:()=>rL,expImpl:()=>fL,expm1Impl:()=>TL,floorImpl:()=>OL,gatherNdImpl:()=>UL,gatherV2Impl:()=>KL,greaterEqualImpl:()=>JL,greaterImpl:()=>XL,lessEqualImpl:()=>uP,lessImpl:()=>sP,linSpaceImpl:()=>hP,logImpl:()=>CP,maxImpl:()=>NP,maximumImpl:()=>DP,minimumImpl:()=>WP,multiplyImpl:()=>YO,negImpl:()=>$P,notEqualImpl:()=>sz,prodImpl:()=>gz,raggedGatherImpl:()=>wz,raggedRangeImpl:()=>_z,raggedTensorToTensorImpl:()=>Fz,rangeImpl:()=>Oz,rsqrtImpl:()=>Xz,scatterImpl:()=>Jz,sigmoidImpl:()=>eM,simpleAbsImpl:()=>bM,sliceImpl:()=>nO,sparseFillEmptyRowsImpl:()=>mB,sparseReshapeImpl:()=>TB,sparseSegmentReductionImpl:()=>yB,sqrtImpl:()=>kB,staticRegexReplaceImpl:()=>DB,stridedSliceImpl:()=>PB,stringNGramsImpl:()=>VB,stringSplitImpl:()=>UB,stringToHashBucketFastImpl:()=>KB,subImpl:()=>wL,tileImpl:()=>QB,topKImpl:()=>nV,transposeImpl:()=>NM,uniqueImpl:()=>cV});var I={};n.r(I),n.d(I,{root:()=>cJ,svg:()=>uJ});var _=n(5043),S=n.t(_,2),N=n(7950),E=n(579);function R(e){if("number"===typeof e)return!0;if("string"===typeof e){if(0===e.length||0===e.trim().length)return!1;const t=function(e){const t="(_{1})(?=[0-9A-F]+)",n=new RegExp(t,"g");if(e.match(t)){let t,r="",o=0;for(;null!==(t=n.exec(e));)r+=e.substring(o,t.index),o=t.index+1;return r+=e.substring(o),r}return e}(e),n=Number(t);if(!Number.isNaN(n))return!0}return!1}function D(e,t,n){let r=e;const o=t.match(/(\w+)/g);if(!o)return e;for(let a=0;a<o.length;a++){const e=o[a];a!==o.length-1?(r[e]||(r[e]=R(o[a+1])?[]:{}),r=r[e]):r[e]=n}return e}function F(e,t){let n=e;const r=t.match(/(\w+)/g);if(r){for(let e=0;e<r.length;e++)if(n=n[r[e]],void 0===n)return;return n}}function M(e){if("object"!==typeof e)return e;if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=M(e[n]));return t}if(Array.isArray(e)){const t=[];for(const n of e)t.push(M(n));return t}return e instanceof Date?new Date(e):e}const O=(0,_.createContext)({state:{values:{},fieldValues:{},errors:{},initialValues:{},visited:{}},dispatch:()=>{},runValidations:async()=>!0});function L(e,t){let n;if(Array.isArray(e)){n=[];for(const r of e)"object"!==typeof r?n.push(t):n.push(L(r,t));return n}n={};for(const r in e)"object"!==typeof e[r]?n[r]=t:n[r]=L(e[r],t);return n}function P(e,t){switch(t.type){case"REGISTER_FIELD":return{...e,values:D(M(e.values),t.payload.name,t.payload.value),fieldValues:D(M(e.fieldValues),t.payload.name,t.payload.value)};case"SET_FIELD_VALUE":return{...e,fieldValues:D(M(e.fieldValues),t.payload.name,t.payload.value)};case"SET_VALUES":return{...e,values:D(M(e.values),t.payload.name,t.payload.value)};case"SET_VISITED":return{...e,visited:D(M(e.visited),t.payload.name,t.payload.value)};case"SET_ALL_VISITED":return{...e,visited:L(e.fieldValues,!0)};case"SET_ERRORS":return{...e,errors:M(t.payload)};default:throw new Error}}function z(e){const{initialValues:t,children:n,validate:r,onSubmit:o}=e,a=M(t),i=async()=>{if(r){const e=await r(l.values);if(e&&Object.keys(e).length>0)return c({type:"SET_ERRORS",payload:e}),!1;c({type:"SET_ERRORS",payload:{}})}return!0},s={values:a||{},fieldValues:a||{},errors:{},initialValues:a,visited:{}},[l,c]=(0,_.useReducer)(P,s),u={state:l,dispatch:c,runValidations:i};return(0,E.jsx)(O.Provider,{value:u,children:(0,E.jsx)("form",{role:"form",onSubmit:async e=>{e.preventDefault(),c({type:"SET_ALL_VISITED",payload:null});await i()&&o&&o(l.values)},children:n})})}function B(e,t){const{state:n,dispatch:r,runValidations:o}=(0,_.useContext)(O),a=F(n.fieldValues,e);let i=(null===t||void 0===t?void 0:t.multiple)?[]:"";a&&(i=(null===t||void 0===t?void 0:t.multiple)&&!Array.isArray(a)?[a]:a),(0,_.useEffect)((()=>{r({type:"REGISTER_FIELD",payload:{name:e,value:i}})}),[]);const s=e=>{const t=e.currentTarget||e.target;return"number"===t.type?parseInt(t.value):"file"===t.type?t.files:t.value};return{field:{value:i,onChange:t=>{const n=t.currentTarget||t.target;r({type:"SET_VALUES",payload:{name:e,value:s(t)}}),r({type:"SET_FIELD_VALUE",payload:{name:e,value:n.value}})},onBlur:()=>{setTimeout((()=>{r({type:"SET_VISITED",payload:{name:e,value:!0}}),o()}),300)}},error:(()=>{if(F(n.visited,e))return F(n.errors,e)})(),setValue:t=>{r({type:"SET_VALUES",payload:{name:e,value:t}}),r({type:"SET_FIELD_VALUE",payload:{name:e,value:t}})}}}var V=n(6326);function H(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.length<2?t[0]:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.forEach((function(t){return t&&t.apply(e,n)}))}}function W(e){!function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=H(e,e[n],t[n]))}(e,{componentDidMount:U,componentDidUpdate:j,componentWillUnmount:K})}function U(){q(this.props.componentRef,this)}function j(e){e.componentRef!==this.props.componentRef&&(q(e.componentRef,null),q(this.props.componentRef,this))}function K(){q(this.props.componentRef,null)}function q(e,t){e&&("object"===typeof e?e.current=t:"function"===typeof e&&e(t))}var X=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++)for(var a=o[r],i=0,s=Array.isArray(a)?a:Object.keys(a);i<s.length;i++){n[s[i]]=1}return n},Y=X(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),Z=X(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),J=X(Z,Y),Q=X(J,["form"]),$=X(J,["height","loop","muted","preload","src","width"]),ee=X($,["poster"]),te=X(J,["start"]),ne=X(J,["value"]),re=X(J,["download","href","hrefLang","media","rel","target","type"]),oe=X(J,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),ae=X(oe,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),ie=X(oe,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]),se=X(oe,["form","multiple","required"]),le=X(J,["selected","value"]),ce=X(J,["cellPadding","cellSpacing"]),ue=J,de=X(J,["rowSpan","scope"]),pe=X(J,["colSpan","headers","rowSpan","scope"]),he=X(J,["span"]),fe=X(J,["span"]),Ce=X(J,["acceptCharset","action","encType","encType","method","noValidate","target"]),Ge=X(J,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),me=X(J,["alt","crossOrigin","height","src","srcSet","useMap","width"]),Ae=J;function Te(e,t,n){for(var r=Array.isArray(t),o={},a=0,i=Object.keys(e);a<i.length;a++){var s=i[a];!(!r&&t[s]||r&&t.indexOf(s)>=0||0===s.indexOf("data-")||0===s.indexOf("aria-"))||n&&-1!==(null===n||void 0===n?void 0:n.indexOf(s))||(o[s]=e[s])}return o}var ge=function(e){function t(t){var n=e.call(this,t)||this;return W(n),n}return(0,V.C6)(t,e),t.prototype.render=function(){return _.createElement("div",(0,V.Cl)({},Te(this.props,Ae)),this.props.children)},t}(_.Component),ye=n(9773),ve=n(9379),be=n(6783),xe=n(605),we=n(7480);function ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,o=e;r<o.length;r++){var a=o[r];if(a)if("string"===typeof a)n.push(a);else if(a.hasOwnProperty("toString")&&"function"===typeof a.toString)n.push(a.toString());else for(var i in a)a[i]&&n.push(i)}return n.join(" ")}var Ie,_e=n(4828),Se=((Ie={})[we.c.up]=1,Ie[we.c.down]=1,Ie[we.c.left]=1,Ie[we.c.right]=1,Ie[we.c.home]=1,Ie[we.c.end]=1,Ie[we.c.tab]=1,Ie[we.c.pageUp]=1,Ie[we.c.pageDown]=1,Ie);function Ne(e){return!!Se[e]}var Ee=n(2815),Re=new WeakMap,De=new WeakMap;function Fe(e,t){var n,r=Re.get(e);return n=r?r+t:1,Re.set(e,n),n}function Me(e){var t=De.get(e);if(t)return t;return t={onMouseDown:function(t){return ze(t,e.registeredProviders)},onPointerDown:function(t){return Be(t,e.registeredProviders)},onKeyDown:function(t){return Ve(t,e.registeredProviders)},onKeyUp:function(t){return He(t,e.registeredProviders)}},De.set(e,t),t}var Oe=_.createContext(void 0);function Le(e){var t=_.useContext(Oe);_.useEffect((function(){var n,r,o,a,i=(0,_e.z)(null===e||void 0===e?void 0:e.current);if(i&&!0!==(null===(n=i.FabricConfig)||void 0===n?void 0:n.disableFocusRects)){var s,l,c,u,d=i;if((null===(r=null===t||void 0===t?void 0:t.providerRef)||void 0===r?void 0:r.current)&&(null===(a=null===(o=null===t||void 0===t?void 0:t.providerRef)||void 0===o?void 0:o.current)||void 0===a?void 0:a.addEventListener)){d=t.providerRef.current;var p=Me(t);s=p.onMouseDown,l=p.onPointerDown,c=p.onKeyDown,u=p.onKeyUp}else s=ze,l=Be,c=Ve,u=He;var h=Fe(d,1);return h<=1&&(d.addEventListener("mousedown",s,!0),d.addEventListener("pointerdown",l,!0),d.addEventListener("keydown",c,!0),d.addEventListener("keyup",u,!0)),function(){var e;i&&!0!==(null===(e=i.FabricConfig)||void 0===e?void 0:e.disableFocusRects)&&0===(h=Fe(d,-1))&&(d.removeEventListener("mousedown",s,!0),d.removeEventListener("pointerdown",l,!0),d.removeEventListener("keydown",c,!0),d.removeEventListener("keyup",u,!0))}}}),[t,e])}var Pe=function(e){return Le(e.rootRef),null};function ze(e,t){(0,Ee.Fy)(!1,e.target,t)}function Be(e,t){"mouse"!==e.pointerType&&(0,Ee.Fy)(!1,e.target,t)}function Ve(e,t){Ne(e.which)&&(0,Ee.Fy)(!0,e.target,t)}function He(e,t){Ne(e.which)&&(0,Ee.Fy)(!0,e.target,t)}var We,Ue,je,Ke,qe,Xe=function(){function e(e,t){this._timeoutIds=null,this._immediateIds=null,this._intervalIds=null,this._animationFrameIds=null,this._isDisposed=!1,this._parent=e||null,this._onErrorHandler=t,this._noop=function(){}}return e.prototype.dispose=function(){var e;if(this._isDisposed=!0,this._parent=null,this._timeoutIds){for(e in this._timeoutIds)this._timeoutIds.hasOwnProperty(e)&&this.clearTimeout(parseInt(e,10));this._timeoutIds=null}if(this._immediateIds){for(e in this._immediateIds)this._immediateIds.hasOwnProperty(e)&&this.clearImmediate(parseInt(e,10));this._immediateIds=null}if(this._intervalIds){for(e in this._intervalIds)this._intervalIds.hasOwnProperty(e)&&this.clearInterval(parseInt(e,10));this._intervalIds=null}if(this._animationFrameIds){for(e in this._animationFrameIds)this._animationFrameIds.hasOwnProperty(e)&&this.cancelAnimationFrame(parseInt(e,10));this._animationFrameIds=null}},e.prototype.setTimeout=function(e,t){var n=this,r=0;return this._isDisposed||(this._timeoutIds||(this._timeoutIds={}),r=setTimeout((function(){try{n._timeoutIds&&delete n._timeoutIds[r],e.apply(n._parent)}catch(t){n._logError(t)}}),t),this._timeoutIds[r]=!0),r},e.prototype.clearTimeout=function(e){this._timeoutIds&&this._timeoutIds[e]&&(clearTimeout(e),delete this._timeoutIds[e])},e.prototype.setImmediate=function(e,t){var n=this,r=0,o=(0,_e.z)(t);if(!this._isDisposed){this._immediateIds||(this._immediateIds={});r=o.setTimeout((function(){try{n._immediateIds&&delete n._immediateIds[r],e.apply(n._parent)}catch(t){n._logError(t)}}),0),this._immediateIds[r]=!0}return r},e.prototype.clearImmediate=function(e,t){var n=(0,_e.z)(t);this._immediateIds&&this._immediateIds[e]&&(n.clearTimeout(e),delete this._immediateIds[e])},e.prototype.setInterval=function(e,t){var n=this,r=0;return this._isDisposed||(this._intervalIds||(this._intervalIds={}),r=setInterval((function(){try{e.apply(n._parent)}catch(t){n._logError(t)}}),t),this._intervalIds[r]=!0),r},e.prototype.clearInterval=function(e){this._intervalIds&&this._intervalIds[e]&&(clearInterval(e),delete this._intervalIds[e])},e.prototype.throttle=function(e,t,n){var r=this;if(this._isDisposed)return this._noop;var o,a,i=t||0,s=!0,l=!0,c=0,u=null;n&&"boolean"===typeof n.leading&&(s=n.leading),n&&"boolean"===typeof n.trailing&&(l=n.trailing);var d=function(t){var n=Date.now(),p=n-c,h=s?i-p:i;return p>=i&&(!t||s)?(c=n,u&&(r.clearTimeout(u),u=null),o=e.apply(r._parent,a)):null===u&&l&&(u=r.setTimeout(d,h)),o};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a=e,d(!0)}},e.prototype.debounce=function(e,t,n){var r=this;if(this._isDisposed){var o=function(){};return o.cancel=function(){},o.flush=function(){return null},o.pending=function(){return!1},o}var a,i,s=t||0,l=!1,c=!0,u=null,d=0,p=Date.now(),h=null;n&&"boolean"===typeof n.leading&&(l=n.leading),n&&"boolean"===typeof n.trailing&&(c=n.trailing),n&&"number"===typeof n.maxWait&&!isNaN(n.maxWait)&&(u=n.maxWait);var f=function(e){h&&(r.clearTimeout(h),h=null),p=e},C=function(t){f(t),a=e.apply(r._parent,i)},G=function(e){var t=Date.now(),n=!1;e&&(l&&t-d>=s&&(n=!0),d=t);var o=t-d,i=s-o,f=t-p,m=!1;return null!==u&&(f>=u&&h?m=!0:i=Math.min(i,u-f)),o>=s||m||n?C(t):null!==h&&e||!c||(h=r.setTimeout(G,i)),a},m=function(){return!!h},A=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i=e,G(!0)};return A.cancel=function(){m()&&f(Date.now())},A.flush=function(){return m()&&C(Date.now()),a},A.pending=m,A},e.prototype.requestAnimationFrame=function(e,t){var n=this,r=0,o=(0,_e.z)(t);if(!this._isDisposed){this._animationFrameIds||(this._animationFrameIds={});var a=function(){try{n._animationFrameIds&&delete n._animationFrameIds[r],e.apply(n._parent)}catch(t){n._logError(t)}};r=o.requestAnimationFrame?o.requestAnimationFrame(a):o.setTimeout(a,0),this._animationFrameIds[r]=!0}return r},e.prototype.cancelAnimationFrame=function(e,t){var n=(0,_e.z)(t);this._animationFrameIds&&this._animationFrameIds[e]&&(n.cancelAnimationFrame?n.cancelAnimationFrame(e):n.clearTimeout(e),delete this._animationFrameIds[e])},e.prototype._logError=function(e){this._onErrorHandler&&this._onErrorHandler(e)},e}();function Ye(e,t){return void 0===t&&(t=!0),e&&(t&&function(e){var t,n;return e&&(n=e)&&n._virtual&&(t=e._virtual.parent),t}(e)||e.parentNode&&e.parentNode)}function Ze(e,t,n){void 0===n&&(n=!0);var r=!1;if(e&&t)if(n)if(e===t)r=!0;else for(r=!1;t;){var o=Ye(t);if(o===e){r=!0;break}t=o}else e.contains&&(r=e.contains(t));return r}!function(e){e[e.disabled=0]="disabled",e[e.clickable=1]="clickable",e[e.hasDropdown=2]="hasDropdown"}(We||(We={})),function(e){e[e.unconstrained=0]="unconstrained",e[e.horizontalConstrained=1]="horizontalConstrained"}(Ue||(Ue={})),function(e){e[e.outside=0]="outside",e[e.surface=1]="surface",e[e.header=2]="header"}(je||(je={})),function(e){e[e.fixedColumns=0]="fixedColumns",e[e.justified=1]="justified"}(Ke||(Ke={})),function(e){e[e.onHover=0]="onHover",e[e.always=1]="always",e[e.hidden=2]="hidden"}(qe||(qe={}));var Je=n(8717);function Qe(e,t){if(!e||!t)return!e&&!t;for(var n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(var n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}function $e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return et.apply(this,[null,e].concat(t))}function et(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t=t||{};for(var o=0,a=n;o<a.length;o++){var i=a[o];if(i)for(var s in i)!i.hasOwnProperty(s)||e&&!e(s)||(t[s]=i[s])}return t}var tt=function(){function e(t){this._id=e._uniqueId++,this._parent=t,this._eventRecords=[]}return e.raise=function(t,n,r,o,a){var i,s=null!==a&&void 0!==a?a:(0,Je.Y)();if(e._isElement(t)){if("undefined"!==typeof s&&s.createEvent){var l=s.createEvent("HTMLEvents");l.initEvent(n,o||!1,!0),$e(l,r),i=t.dispatchEvent(l)}else if("undefined"!==typeof s&&s.createEventObject){var c=s.createEventObject(r);t.fireEvent("on"+n,c)}}else for(;t&&!1!==i;){var u=t.__events__,d=u?u[n]:null;if(d)for(var p in d)if(d.hasOwnProperty(p))for(var h=d[p],f=0;!1!==i&&f<h.length;f++){var C=h[f];C.objectCallback&&(i=C.objectCallback.call(C.parent,r))}t=o?t.parent:null}return i},e.isObserved=function(e,t){var n=e&&e.__events__;return!!n&&!!n[t]},e.isDeclared=function(e,t){var n=e&&e.__declaredEvents;return!!n&&!!n[t]},e.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},e._isElement=function(e){return!!e&&(!!e.addEventListener||"undefined"!==typeof HTMLElement&&e instanceof HTMLElement)},e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},e.prototype.onAll=function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&this.on(e,r,t[r],n)},e.prototype.on=function(t,n,r,o){var a=this;if(n.indexOf(",")>-1)for(var i=n.split(/[ ,]+/),s=0;s<i.length;s++)this.on(t,i[s],r,o);else{var l=this._parent,c={target:t,eventName:n,parent:l,callback:r,options:o};if((i=t.__events__=t.__events__||{})[n]=i[n]||{count:0},i[n][this._id]=i[n][this._id]||[],i[n][this._id].push(c),i[n].count++,e._isElement(t)){var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!a._isDisposed){var n;try{if(!1===(n=r.apply(l,e))&&e[0]){var o=e[0];o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.cancelBubble=!0}}catch(o){}return n}};c.elementCallback=u,t.addEventListener?t.addEventListener(n,u,o):t.attachEvent&&t.attachEvent("on"+n,u)}else{c.objectCallback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!a._isDisposed)return r.apply(l,e)}}this._eventRecords.push(c)}},e.prototype.off=function(e,t,n,r){for(var o=0;o<this._eventRecords.length;o++){var a=this._eventRecords[o];if((!e||e===a.target)&&(!t||t===a.eventName)&&(!n||n===a.callback)&&("boolean"!==typeof r||r===a.options)){var i=a.target.__events__,s=i[a.eventName],l=s?s[this._id]:null;l&&(1!==l.length&&n?(s.count--,l.splice(l.indexOf(a),1)):(s.count-=l.length,delete i[a.eventName][this._id]),s.count||delete i[a.eventName]),a.elementCallback&&(a.target.removeEventListener?a.target.removeEventListener(a.eventName,a.elementCallback,a.options):a.target.detachEvent&&a.target.detachEvent("on"+a.eventName,a.elementCallback)),this._eventRecords.splice(o--,1)}}},e.prototype.raise=function(t,n,r){return e.raise(this._parent,t,n,r)},e.prototype.declare=function(e){var t=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if("string"===typeof e)t[e]=!0;else for(var n=0;n<e.length;n++)t[e[n]]=!0},e._uniqueId=0,e}(),nt=n(3722),rt="__currentId__",ot="id__",at=(0,_e.z)()||{};void 0===at[rt]&&(at[rt]=0);var it=!1;function st(e){if(!it){var t=nt.n.getInstance();t&&t.onReset&&t.onReset(lt),it=!0}var n=at[rt]++;return(void 0===e?ot:e)+n}function lt(e){void 0===e&&(e=0),at[rt]=e}var ct,ut=1,dt=2;function pt(e,t,n){void 0===n&&(n=0);for(var r=-1,o=n;e&&o<e.length;o++)if(t(e[o],o)){r=o;break}return r}!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.bidirectional=2]="bidirectional",e[e.domOrder=3]="domOrder"}(ct||(ct={}));var ht=function(e){var t={refs:[]};return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.resolver&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t.refs,e)||(t.resolver=function(e){return function(t){for(var n=0,r=e.refs;n<r.length;n++){var o=r[n];"function"===typeof o?o(t):o&&(o.current=t)}}}(t)),t.refs=e,t.resolver}};function ft(e,t,n){return null!==n&&void 0!==n||(n=document),e&&e!==n.body?t(e)?e:ft(Ye(e),t):null}var Ct="data-is-focusable",Gt="data-is-visible",mt="data-focuszone-id",At="data-is-sub-focuszone";function Tt(e,t){var n=yt(e,e,!0,!1,!1,!0,void 0,void 0,t);return!!n&&(St(n),!0)}function gt(e,t,n,r,o,a,i,s){if(!t||!i&&t===e)return null;var l=vt(t);if(o&&l&&(a||!wt(t)&&!kt(t))){var c=gt(e,t.lastElementChild,!0,!0,!0,a,i,s);if(c){if(s&&xt(c,!0)||!s)return c;var u=gt(e,c.previousElementSibling,!0,!0,!0,a,i,s);if(u)return u;for(var d=c.parentElement;d&&d!==t;){var p=gt(e,d.previousElementSibling,!0,!0,!0,a,i,s);if(p)return p;d=d.parentElement}}}if(n&&l&&xt(t,s))return t;var h=gt(e,t.previousElementSibling,!0,!0,!0,a,i,s);return h||(r?null:gt(e,t.parentElement,!0,!1,!1,a,i,s))}function yt(e,t,n,r,o,a,i,s,l){if(!t||t===e&&o&&!i)return null;var c=(l?bt:vt)(t);if(n&&c&&xt(t,s))return t;if(!o&&c&&(a||!wt(t)&&!kt(t))){var u=yt(e,t.firstElementChild,!0,!0,!1,a,i,s,l);if(u)return u}if(t===e)return null;var d=yt(e,t.nextElementSibling,!0,!0,!1,a,i,s,l);return d||(r?null:yt(e,t.parentElement,!1,!1,!0,a,i,s,l))}function vt(e){if(!e||!e.getAttribute)return!1;var t=e.getAttribute(Gt);return null!==t&&void 0!==t?"true"===t:0!==e.offsetHeight||null!==e.offsetParent||!0===e.isVisible}function bt(e,t){var n=null!==t&&void 0!==t?t:(0,_e.z)();return!!e&&vt(e)&&!e.hidden&&"hidden"!==n.getComputedStyle(e).visibility}function xt(e,t){if(!e||e.disabled)return!1;var n=0,r=null;e&&e.getAttribute&&(r=e.getAttribute("tabIndex"))&&(n=parseInt(r,10));var o=e.getAttribute?e.getAttribute(Ct):null,a=null!==r&&n>=0,i=!!e&&"false"!==o&&("A"===e.tagName||"BUTTON"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||"true"===o||a);return t?-1!==n&&i:i}function wt(e){return!!(e&&e.getAttribute&&e.getAttribute(mt))}function kt(e){return!(!e||!e.getAttribute||"true"!==e.getAttribute(At))}function It(e,t,n){return"true"!==function(e,t,n){var r=ft(e,(function(e){return e.hasAttribute(t)}),n);return r&&r.getAttribute(t)}(e,t,null!==n&&void 0!==n?n:(0,Je.Y)())}var _t=void 0;function St(e){if(e){var t=(0,_e.z)(e);t&&(void 0!==_t&&t.cancelAnimationFrame(_t),_t=t.requestAnimationFrame((function(){e&&e.focus(),_t=void 0})))}}var Nt,Et=n(7002),Rt=((0,Et.Z)({overflow:"hidden !important"}),"data-is-scrollable");function Dt(e){for(var t=e,n=(0,Je.Y)(e);t&&t!==n.body;){if("true"===t.getAttribute(Rt))return t;t=t.parentElement}for(t=e;t&&t!==n.body;){if("false"!==t.getAttribute(Rt)){var r=getComputedStyle(t),o=r?r.getPropertyValue("overflow-y"):"";if(o&&("scroll"===o||"auto"===o))return t}t=t.parentElement}return t&&t!==n.body||(t=(0,_e.z)(e)),t}var Ft="data-portal-element";function Mt(e,t,n){var r=ft(e,(function(e){return t===e||e.hasAttribute(Ft)}),n);return null!==r&&r.hasAttribute(Ft)}var Ot,Lt=n(835),Pt="data-is-focusable",zt="data-focuszone-id",Bt="tabindex",Vt="data-no-vertical-wrap",Ht="data-no-horizontal-wrap",Wt=999999999,Ut=-999999999;function jt(e,t){var n;"function"===typeof MouseEvent?n=new MouseEvent("click",{ctrlKey:null===t||void 0===t?void 0:t.ctrlKey,metaKey:null===t||void 0===t?void 0:t.metaKey,shiftKey:null===t||void 0===t?void 0:t.shiftKey,altKey:null===t||void 0===t?void 0:t.altKey,bubbles:null===t||void 0===t?void 0:t.bubbles,cancelable:null===t||void 0===t?void 0:t.cancelable}):(n=document.createEvent("MouseEvents")).initMouseEvent("click",!!t&&t.bubbles,!!t&&t.cancelable,window,0,0,0,0,0,!!t&&t.ctrlKey,!!t&&t.altKey,!!t&&t.shiftKey,!!t&&t.metaKey,0,null),e.dispatchEvent(n)}var Kt,qt,Xt,Yt,Zt={},Jt=new Set,Qt=["text","number","password","email","tel","url","search","textarea"],$t=!1,en=function(e){function t(n){var r,o,a,i,s=this;(s=e.call(this,n)||this)._root=_.createRef(),s._mergedRef=ht(),s._onFocus=function(e){if(!s._portalContainsElement(e.target)){var t,n=s.props,r=n.onActiveElementChanged,o=n.doNotAllowFocusEventToPropagate,a=n.stopFocusPropagation,i=n.onFocusNotification,l=n.onFocus,c=n.shouldFocusInnerElementWhenReceivedFocus,u=n.defaultTabbableElement,d=s._isImmediateDescendantOfZone(e.target);if(d)t=e.target;else for(var p=e.target;p&&p!==s._root.current;){if(xt(p)&&s._isImmediateDescendantOfZone(p)){t=p;break}p=Ye(p,$t)}if(c&&e.target===s._root.current){var h=u&&"function"===typeof u&&s._root.current&&u(s._root.current);h&&xt(h)?(t=h,h.focus()):(s.focus(!0),s._activeElement&&(t=null))}var f=!s._activeElement;t&&t!==s._activeElement&&((d||f)&&s._setFocusAlignment(t,!0,!0),s._activeElement=t,f&&s._updateTabIndexes()),r&&r(s._activeElement,e),(a||o)&&e.stopPropagation(),l?l(e):i&&i()}},s._onBlur=function(){s._setParkedFocus(!1)},s._onMouseDown=function(e){if(!s._portalContainsElement(e.target)&&!s.props.disabled){for(var t=e.target,n=[];t&&t!==s._root.current;)n.push(t),t=Ye(t,$t);for(;n.length&&((t=n.pop())&&xt(t)&&s._setActiveElement(t,!0),!wt(t)););}},s._onKeyDown=function(e,t){if(!s._portalContainsElement(e.target)){var n=s.props,r=n.direction,o=n.disabled,a=n.isInnerZoneKeystroke,i=n.pagingSupportDisabled,l=n.shouldEnterInnerZone;if(!o&&(s.props.onKeyDown&&s.props.onKeyDown(e),!e.isDefaultPrevented()&&(s._getDocument().activeElement!==s._root.current||!s._isInnerZone))){if((l&&l(e)||a&&a(e))&&s._isImmediateDescendantOfZone(e.target)){var c=s._getFirstInnerZone();if(c){if(!c.focus(!0))return}else{if(!kt(e.target))return;if(!s.focusElement(yt(e.target,e.target.firstChild,!0)))return}}else{if(e.altKey)return;switch(e.which){case we.c.space:if(s._shouldRaiseClicksOnSpace&&s._tryInvokeClickForFocusable(e.target,e))break;return;case we.c.left:if(r!==ct.vertical&&(s._preventDefaultWhenHandled(e),s._moveFocusLeft(t)))break;return;case we.c.right:if(r!==ct.vertical&&(s._preventDefaultWhenHandled(e),s._moveFocusRight(t)))break;return;case we.c.up:if(r!==ct.horizontal&&(s._preventDefaultWhenHandled(e),s._moveFocusUp()))break;return;case we.c.down:if(r!==ct.horizontal&&(s._preventDefaultWhenHandled(e),s._moveFocusDown()))break;return;case we.c.pageDown:if(!i&&s._moveFocusPaging(!0))break;return;case we.c.pageUp:if(!i&&s._moveFocusPaging(!1))break;return;case we.c.tab:if(s.props.allowTabKey||s.props.handleTabKey===ut||s.props.handleTabKey===dt&&s._isElementInput(e.target)){var u=!1;if(s._processingTabKey=!0,r!==ct.vertical&&s._shouldWrapFocus(s._activeElement,Ht))u=((0,xe.jI)(t)?!e.shiftKey:e.shiftKey)?s._moveFocusLeft(t):s._moveFocusRight(t);else u=e.shiftKey?s._moveFocusUp():s._moveFocusDown();if(s._processingTabKey=!1,u)break;s.props.shouldResetActiveElementWhenTabFromZone&&(s._activeElement=null)}return;case we.c.home:if(s._isContentEditableElement(e.target)||s._isElementInput(e.target)&&!s._shouldInputLoseFocus(e.target,!1))return!1;var d=s._root.current&&s._root.current.firstChild;if(s._root.current&&d&&s.focusElement(yt(s._root.current,d,!0)))break;return;case we.c.end:if(s._isContentEditableElement(e.target)||s._isElementInput(e.target)&&!s._shouldInputLoseFocus(e.target,!0))return!1;var p=s._root.current&&s._root.current.lastChild;if(s._root.current&&s.focusElement(gt(s._root.current,p,!0,!0,!0)))break;return;case we.c.enter:if(s._shouldRaiseClicksOnEnter&&s._tryInvokeClickForFocusable(e.target,e))break;return;default:return}}e.preventDefault(),e.stopPropagation()}}},s._getHorizontalDistanceFromCenter=function(e,t,n){var r=s._focusAlignment.left||s._focusAlignment.x||0,o=Math.floor(n.top),a=Math.floor(t.bottom),i=Math.floor(n.bottom),l=Math.floor(t.top);return e&&o>a||!e&&i<l?r>=n.left&&r<=n.left+n.width?0:Math.abs(n.left+n.width/2-r):s._shouldWrapFocus(s._activeElement,Vt)?Wt:Ut},W(s),s._id=st("FocusZone"),s._focusAlignment={left:0,top:0},s._processingTabKey=!1;var l=null===(o=null!==(r=n.shouldRaiseClicks)&&void 0!==r?r:t.defaultProps.shouldRaiseClicks)||void 0===o||o;return s._shouldRaiseClicksOnEnter=null!==(a=n.shouldRaiseClicksOnEnter)&&void 0!==a?a:l,s._shouldRaiseClicksOnSpace=null!==(i=n.shouldRaiseClicksOnSpace)&&void 0!==i?i:l,s}return(0,V.C6)(t,e),t.getOuterZones=function(){return Jt.size},t._onKeyDownCapture=function(e){e.which===we.c.tab&&Jt.forEach((function(e){return e._updateTabIndexes()}))},t.prototype.componentDidMount=function(){var e=this._root.current;if(Zt[this._id]=this,e){for(var n=Ye(e,$t);n&&n!==this._getDocument().body&&1===n.nodeType;){if(wt(n)){this._isInnerZone=!0;break}n=Ye(n,$t)}this._isInnerZone||(Jt.add(this),this._root.current&&this._root.current.addEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.addEventListener("blur",this._onBlur,!0),this._updateTabIndexes(),this.props.defaultTabbableElement&&"string"===typeof this.props.defaultTabbableElement?this._activeElement=this._getDocument().querySelector(this.props.defaultTabbableElement):this.props.defaultActiveElement&&(this._activeElement=this._getDocument().querySelector(this.props.defaultActiveElement)),this.props.shouldFocusOnMount&&this.focus()}},t.prototype.componentDidUpdate=function(){var e=this._root.current,t=this._getDocument();if((this._activeElement&&!Ze(this._root.current,this._activeElement,$t)||this._defaultFocusElement&&!Ze(this._root.current,this._defaultFocusElement,$t))&&(this._activeElement=null,this._defaultFocusElement=null,this._updateTabIndexes()),!this.props.preventFocusRestoration&&t&&this._lastIndexPath&&(t.activeElement===t.body||null===t.activeElement||t.activeElement===e)){var n=function(e,t){for(var n=e,r=0,o=t;r<o.length;r++){var a=o[r],i=n.children[Math.min(a,n.children.length-1)];if(!i)break;n=i}return xt(n)&&vt(n)?n:yt(e,n,!0)||gt(e,n)}(e,this._lastIndexPath);n?(this._setActiveElement(n,!0),n.focus(),this._setParkedFocus(!1)):this._setParkedFocus(!0)}},t.prototype.componentWillUnmount=function(){delete Zt[this._id],this._isInnerZone||(Jt.delete(this),this._root.current&&this._root.current.removeEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.removeEventListener("blur",this._onBlur,!0),this._activeElement=null,this._defaultFocusElement=null},t.prototype.render=function(){var e=this,t=this.props,n=t.as,r=t.elementType,o=t.rootProps,a=t.ariaDescribedBy,i=t.ariaLabelledBy,s=t.className,l=Te(this.props,J),c=n||r||"div";this._evaluateFocusBeforeRender();var u=(0,Lt.O4)();return _.createElement(c,(0,V.Cl)({"aria-labelledby":i,"aria-describedby":a},l,o,{className:ke((Ot||(Ot=(0,Et.Z)({selectors:{":focus":{outline:"none"}}},"ms-FocusZone")),Ot),s),ref:this._mergedRef(this.props.elementRef,this._root),"data-focuszone-id":this._id,onKeyDown:function(t){return e._onKeyDown(t,u)},onFocus:this._onFocus,onMouseDownCapture:this._onMouseDown}),this.props.children)},t.prototype.focus=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._root.current){if(!e&&"true"===this._root.current.getAttribute(Pt)&&this._isInnerZone){var n=this._getOwnerZone(this._root.current);if(n!==this._root.current){var r=Zt[n.getAttribute(zt)];return!!r&&r.focusElement(this._root.current)}return!1}if(!e&&this._activeElement&&Ze(this._root.current,this._activeElement)&&xt(this._activeElement)&&(!t||bt(this._activeElement)))return this._activeElement.focus(),!0;var o=this._root.current.firstChild;return this.focusElement(yt(this._root.current,o,!0,void 0,void 0,void 0,void 0,void 0,t))}return!1},t.prototype.focusLast=function(){if(this._root.current){var e=this._root.current&&this._root.current.lastChild;return this.focusElement(gt(this._root.current,e,!0,!0,!0))}return!1},t.prototype.focusElement=function(e,t){var n=this.props,r=n.onBeforeFocus,o=n.shouldReceiveFocus;return!(o&&!o(e)||r&&!r(e))&&(!!e&&(this._setActiveElement(e,t),this._activeElement&&this._activeElement.focus(),!0))},t.prototype.setFocusAlignment=function(e){this._focusAlignment=e},Object.defineProperty(t.prototype,"defaultFocusElement",{get:function(){return this._defaultFocusElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeElement",{get:function(){return this._activeElement},enumerable:!1,configurable:!0}),t.prototype._evaluateFocusBeforeRender=function(){var e=this._root.current,t=this._getDocument();if(t){var n=t.activeElement;if(n!==e){var r=Ze(e,n,!1);this._lastIndexPath=r?function(e,t){for(var n=[];t&&e&&t!==e;){var r=Ye(t,!0);if(null===r)return[];n.unshift(Array.prototype.indexOf.call(r.children,t)),t=r}return n}(e,n):void 0}}},t.prototype._setParkedFocus=function(e){var t=this._root.current;t&&this._isParked!==e&&(this._isParked=e,e?(this.props.allowFocusRoot||(this._parkedTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1")),t.focus()):this.props.allowFocusRoot||(this._parkedTabIndex?(t.setAttribute("tabindex",this._parkedTabIndex),this._parkedTabIndex=void 0):t.removeAttribute("tabindex")))},t.prototype._setActiveElement=function(e,t){var n=this._activeElement;this._activeElement=e,n&&(wt(n)&&this._updateTabIndexes(n),n.tabIndex=-1),this._activeElement&&(this._focusAlignment&&!t||this._setFocusAlignment(e,!0,!0),this._activeElement.tabIndex=0)},t.prototype._preventDefaultWhenHandled=function(e){this.props.preventDefaultWhenHandled&&e.preventDefault()},t.prototype._tryInvokeClickForFocusable=function(e,t){var n=e;if(n===this._root.current)return!1;do{if("BUTTON"===n.tagName||"A"===n.tagName||"INPUT"===n.tagName||"TEXTAREA"===n.tagName||"SUMMARY"===n.tagName)return!1;if(this._isImmediateDescendantOfZone(n)&&"true"===n.getAttribute(Pt)&&"true"!==n.getAttribute("data-disable-click-on-enter"))return jt(n,t),!0;n=Ye(n,$t)}while(n!==this._root.current);return!1},t.prototype._getFirstInnerZone=function(e){if(!(e=e||this._activeElement||this._root.current))return null;if(wt(e))return Zt[e.getAttribute(zt)];for(var t=e.firstElementChild;t;){if(wt(t))return Zt[t.getAttribute(zt)];var n=this._getFirstInnerZone(t);if(n)return n;t=t.nextElementSibling}return null},t.prototype._moveFocus=function(e,t,n,r){void 0===r&&(r=!0);var o=this._activeElement,a=-1,i=void 0,s=!1,l=this.props.direction===ct.bidirectional;if(!o||!this._root.current)return!1;if(this._isElementInput(o)&&!this._shouldInputLoseFocus(o,e))return!1;var c=l?o.getBoundingClientRect():null;do{if(o=e?yt(this._root.current,o):gt(this._root.current,o),!l){i=o;break}if(o){var u=t(c,o.getBoundingClientRect());if(-1===u&&-1===a){i=o;break}if(u>-1&&(-1===a||u<a)&&(a=u,i=o),a>=0&&u<0)break}}while(o);if(i&&i!==this._activeElement)s=!0,this.focusElement(i);else if(this.props.isCircularNavigation&&r)return e?this.focusElement(yt(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(gt(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return s},t.prototype._moveFocusDown=function(){var e=this,t=-1,n=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!0,(function(r,o){var a=-1,i=Math.floor(o.top),s=Math.floor(r.bottom);return i<s?e._shouldWrapFocus(e._activeElement,Vt)?Wt:Ut:((-1===t&&i>=s||i===t)&&(t=i,a=n>=o.left&&n<=o.left+o.width?0:Math.abs(o.left+o.width/2-n)),a)}))&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusUp=function(){var e=this,t=-1,n=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!1,(function(r,o){var a=-1,i=Math.floor(o.bottom),s=Math.floor(o.top),l=Math.floor(r.top);return i>l?e._shouldWrapFocus(e._activeElement,Vt)?Wt:Ut:((-1===t&&i<=l||s===t)&&(t=s,a=n>=o.left&&n<=o.left+o.width?0:Math.abs(o.left+o.width/2-n)),a)}))&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusLeft=function(e){var t=this,n=this._shouldWrapFocus(this._activeElement,Ht);return!!this._moveFocus((0,xe.jI)(e),(function(r,o){var a=-1;return((0,xe.jI)(e)?parseFloat(o.top.toFixed(3))<parseFloat(r.bottom.toFixed(3)):parseFloat(o.bottom.toFixed(3))>parseFloat(r.top.toFixed(3)))&&o.right<=r.right&&t.props.direction!==ct.vertical?a=r.right-o.right:n||(a=Ut),a}),void 0,n)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusRight=function(e){var t=this,n=this._shouldWrapFocus(this._activeElement,Ht);return!!this._moveFocus(!(0,xe.jI)(e),(function(r,o){var a=-1;return((0,xe.jI)(e)?parseFloat(o.bottom.toFixed(3))>parseFloat(r.top.toFixed(3)):parseFloat(o.top.toFixed(3))<parseFloat(r.bottom.toFixed(3)))&&o.left>=r.left&&t.props.direction!==ct.vertical?a=o.left-r.left:n||(a=Ut),a}),void 0,n)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusPaging=function(e,t){void 0===t&&(t=!0);var n=this._activeElement;if(!n||!this._root.current)return!1;if(this._isElementInput(n)&&!this._shouldInputLoseFocus(n,e))return!1;var r=Dt(n);if(!r)return!1;var o=-1,a=void 0,i=-1,s=-1,l=r.clientHeight,c=n.getBoundingClientRect();do{if(n=e?yt(this._root.current,n):gt(this._root.current,n)){var u=n.getBoundingClientRect(),d=Math.floor(u.top),p=Math.floor(c.bottom),h=Math.floor(u.bottom),f=Math.floor(c.top),C=this._getHorizontalDistanceFromCenter(e,c,u);if(e&&d>p+l||!e&&h<f-l)break;C>-1&&(e&&d>i?(i=d,o=C,a=n):!e&&h<s?(s=h,o=C,a=n):(-1===o||C<=o)&&(o=C,a=n))}}while(n);var G=!1;if(a&&a!==this._activeElement)G=!0,this.focusElement(a),this._setFocusAlignment(a,!1,!0);else if(this.props.isCircularNavigation&&t)return e?this.focusElement(yt(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(gt(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return G},t.prototype._setFocusAlignment=function(e,t,n){if(this.props.direction===ct.bidirectional&&(!this._focusAlignment||t||n)){var r=e.getBoundingClientRect(),o=r.left+r.width/2,a=r.top+r.height/2;this._focusAlignment||(this._focusAlignment={left:o,top:a}),t&&(this._focusAlignment.left=o),n&&(this._focusAlignment.top=a)}},t.prototype._isImmediateDescendantOfZone=function(e){return this._getOwnerZone(e)===this._root.current},t.prototype._getOwnerZone=function(e){for(var t=Ye(e,$t);t&&t!==this._root.current&&t!==this._getDocument().body;){if(wt(t))return t;t=Ye(t,$t)}return t},t.prototype._updateTabIndexes=function(e){!this._activeElement&&this.props.defaultTabbableElement&&"function"===typeof this.props.defaultTabbableElement&&(this._activeElement=this.props.defaultTabbableElement(this._root.current)),!e&&this._root.current&&(this._defaultFocusElement=null,e=this._root.current,this._activeElement&&!Ze(e,this._activeElement)&&(this._activeElement=null)),this._activeElement&&!xt(this._activeElement)&&(this._activeElement=null);for(var t=e&&e.children,n=0;t&&n<t.length;n++){var r=t[n];wt(r)?"true"===r.getAttribute(Pt)&&(this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==r?"-1"!==r.getAttribute(Bt)&&r.setAttribute(Bt,"-1"):(this._defaultFocusElement=r,"0"!==r.getAttribute(Bt)&&r.setAttribute(Bt,"0"))):(r.getAttribute&&"false"===r.getAttribute(Pt)&&r.setAttribute(Bt,"-1"),xt(r)?this.props.disabled?r.setAttribute(Bt,"-1"):this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==r?"-1"!==r.getAttribute(Bt)&&r.setAttribute(Bt,"-1"):(this._defaultFocusElement=r,"0"!==r.getAttribute(Bt)&&r.setAttribute(Bt,"0")):"svg"===r.tagName&&"false"!==r.getAttribute("focusable")&&r.setAttribute("focusable","false")),this._updateTabIndexes(r)}},t.prototype._isContentEditableElement=function(e){return e&&"true"===e.getAttribute("contenteditable")},t.prototype._isElementInput=function(e){return!(!e||!e.tagName||"input"!==e.tagName.toLowerCase()&&"textarea"!==e.tagName.toLowerCase())},t.prototype._shouldInputLoseFocus=function(e,t){if(!this._processingTabKey&&e&&e.type&&Qt.indexOf(e.type.toLowerCase())>-1){var n=e.selectionStart,r=n!==e.selectionEnd,o=e.value,a=e.readOnly;if(r||n>0&&!t&&!a||n!==o.length&&t&&!a||this.props.handleTabKey&&(!this.props.shouldInputLoseFocusOnArrowKey||!this.props.shouldInputLoseFocusOnArrowKey(e)))return!1}return!0},t.prototype._shouldWrapFocus=function(e,t){return!this.props.checkForNoWrap||It(e,t)},t.prototype._portalContainsElement=function(e){return e&&!!this._root.current&&Mt(e,this._root.current)},t.prototype._getDocument=function(){return(0,Je.Y)(this._root.current)},t.defaultProps={isCircularNavigation:!1,direction:ct.bidirectional,shouldRaiseClicks:!0,"data-tabster":'{"uncontrolled": {}}'},t}(_.Component),tn=(0,Lt.l8)({root:{display:"inline-block"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),nn="ms-Icon",rn=(0,be.J9)((function(e){var t=(0,Lt.sW)(e)||{subset:{},code:void 0},n=t.code,r=t.subset;return n?{children:n,iconClassName:r.className,fontFamily:r.fontFace&&r.fontFace.fontFamily,mergeImageProps:r.mergeImageProps}:null}),void 0,!0),on=function(e){var t=e.iconName,n=e.className,r=e.style,o=void 0===r?{}:r,a=rn(t)||{},i=a.iconClassName,s=a.children,l=a.fontFamily,c=a.mergeImageProps,u=Te(e,J),d=e["aria-label"]||e.title,p=e["aria-label"]||e["aria-labelledby"]||e.title?{role:c?void 0:"img"}:{"aria-hidden":!0},h=s;return c&&"object"===typeof s&&"object"===typeof s.props&&d&&(h=_.cloneElement(s,{alt:d})),_.createElement("i",(0,V.Cl)({"data-icon-name":t},p,u,c?{title:void 0,"aria-label":void 0}:{},{className:ke(nn,tn.root,i,!t&&tn.placeholder,n),style:(0,V.Cl)({fontFamily:l},o)}),h)};(0,be.J9)((function(e,t,n){return on({iconName:e,className:t,"aria-label":n})}));!function(e){e[e.default=0]="default",e[e.image=1]="image",e[e.Default=1e5]="Default",e[e.Image=100001]="Image"}(Kt||(Kt={})),function(e){e[e.center=0]="center",e[e.contain=1]="contain",e[e.cover=2]="cover",e[e.none=3]="none",e[e.centerCover=4]="centerCover",e[e.centerContain=5]="centerContain"}(qt||(qt={})),function(e){e[e.landscape=0]="landscape",e[e.portrait=1]="portrait"}(Xt||(Xt={})),function(e){e[e.notLoaded=0]="notLoaded",e[e.loaded=1]="loaded",e[e.error=2]="error",e[e.errorLoaded=3]="errorLoaded"}(Yt||(Yt={}));var an=n(3895),sn=(0,an.S)()?_.useLayoutEffect:_.useEffect;function ln(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_.useCallback((function(t){n.current=t;for(var r=0,o=e;r<o.length;r++){var a=o[r];"function"===typeof a?a(t):a&&(a.current=t)}}),(0,V.fX)([],e,!0));return n}var cn=(0,ve.Z)(),un=/\.svg$/i;var dn=_.forwardRef((function(e,t){var n=_.useRef(),r=_.useRef(),o=function(e,t){var n=e.onLoadingStateChange,r=e.onLoad,o=e.onError,a=e.src,i=_.useState(Yt.notLoaded),s=i[0],l=i[1];sn((function(){l(Yt.notLoaded)}),[a]),_.useEffect((function(){s===Yt.notLoaded&&t.current&&(a&&t.current.naturalWidth>0&&t.current.naturalHeight>0||t.current.complete&&un.test(a))&&l(Yt.loaded)})),_.useEffect((function(){null===n||void 0===n||n(s)}),[s]);var c=_.useCallback((function(e){null===r||void 0===r||r(e),a&&l(Yt.loaded)}),[a,r]),u=_.useCallback((function(e){null===o||void 0===o||o(e),l(Yt.error)}),[o]);return[s,c,u]}(e,r),a=o[0],i=o[1],s=o[2],l=Te(e,me,["width","height"]),c=e.src,u=e.alt,d=e.width,p=e.height,h=e.shouldFadeIn,f=void 0===h||h,C=e.shouldStartVisible,G=e.className,m=e.imageFit,A=e.role,T=e.maximizeFrame,g=e.styles,y=e.theme,v=e.loading,b=function(e,t,n,r){var o=_.useRef(t),a=_.useRef();(void 0===a||o.current===Yt.notLoaded&&t===Yt.loaded)&&(a.current=function(e,t,n,r){var o=e.imageFit,a=e.width,i=e.height;if(void 0!==e.coverStyle)return e.coverStyle;if(t===Yt.loaded&&(o===qt.cover||o===qt.contain||o===qt.centerContain||o===qt.centerCover)&&n.current&&r.current){var s=void 0;if(s="number"===typeof a&&"number"===typeof i&&o!==qt.centerContain&&o!==qt.centerCover?a/i:r.current.clientWidth/r.current.clientHeight,n.current.naturalWidth/n.current.naturalHeight>s)return Xt.landscape}return Xt.portrait}(e,t,n,r));return o.current=t,a.current}(e,a,r,n),x=cn(g,{theme:y,className:G,width:d,height:p,maximizeFrame:T,shouldFadeIn:f,shouldStartVisible:C,isLoaded:a===Yt.loaded||a===Yt.notLoaded&&e.shouldStartVisible,isLandscape:b===Xt.landscape,isCenter:m===qt.center,isCenterContain:m===qt.centerContain,isCenterCover:m===qt.centerCover,isContain:m===qt.contain,isCover:m===qt.cover,isNone:m===qt.none,isError:a===Yt.error,isNotImageFit:void 0===m});return _.createElement("div",{className:x.root,style:{width:d,height:p},ref:n},_.createElement("img",(0,V.Cl)({},l,{onLoad:i,onError:s,key:"fabricImage"+e.src||"",className:x.image,ref:ln(r,t),src:c,alt:u,role:A,loading:v})))}));dn.displayName="ImageBase";var pn={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},hn=(0,ye.I)(dn,(function(e){var t=e.className,n=e.width,r=e.height,o=e.maximizeFrame,a=e.isLoaded,i=e.shouldFadeIn,s=e.shouldStartVisible,l=e.isLandscape,c=e.isCenter,u=e.isContain,d=e.isCover,p=e.isCenterContain,h=e.isCenterCover,f=e.isNone,C=e.isError,G=e.isNotImageFit,m=e.theme,A=(0,Lt.Km)(pn,m),T={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},g=(0,_e.z)(),y=void 0!==g&&void 0===g.navigator.msMaxTouchPoints,v=u&&l||d&&!l?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[A.root,m.fonts.medium,{overflow:"hidden"},o&&[A.rootMaximizeFrame,{height:"100%",width:"100%"}],a&&i&&!s&&Lt.lw.fadeIn400,(c||u||d||p||h)&&{position:"relative"},t],image:[A.image,{display:"block",opacity:0},a&&["is-loaded",{opacity:1}],c&&[A.imageCenter,T],u&&[A.imageContain,y&&{width:"100%",height:"100%",objectFit:"contain"},!y&&v,!y&&T],d&&[A.imageCover,y&&{width:"100%",height:"100%",objectFit:"cover"},!y&&v,!y&&T],p&&[A.imageCenterContain,l&&{maxWidth:"100%"},!l&&{maxHeight:"100%"},T],h&&[A.imageCenterCover,l&&{maxHeight:"100%"},!l&&{maxWidth:"100%"},T],f&&[A.imageNone,{width:"auto",height:"auto"}],G&&[!!n&&!r&&{height:"auto",width:"100%"},!n&&!!r&&{height:"100%",width:"auto"},!!n&&!!r&&{height:"100%",width:"100%"}],l&&A.imageLandscape,!l&&A.imagePortrait,!a&&"is-notLoaded",i&&"is-fadeIn",C&&"is-error"]}}),void 0,{scope:"Image"},!0);hn.displayName="Image";var fn=(0,ve.Z)({cacheSize:100}),Cn=function(e){function t(t){var n=e.call(this,t)||this;return n._onImageLoadingStateChange=function(e){n.props.imageProps&&n.props.imageProps.onLoadingStateChange&&n.props.imageProps.onLoadingStateChange(e),e===Yt.error&&n.setState({imageLoadError:!0})},n.state={imageLoadError:!1},n}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.styles,o=e.iconName,a=e.imageErrorAs,i=e.theme,s="string"===typeof o&&0===o.length,l=!!this.props.imageProps||this.props.iconType===Kt.image||this.props.iconType===Kt.Image,c=rn(o)||{},u=c.iconClassName,d=c.children,p=c.mergeImageProps,h=fn(r,{theme:i,className:n,iconClassName:u,isImage:l,isPlaceholder:s}),f=l?"span":"i",C=Te(this.props,J,["aria-label"]),G=this.state.imageLoadError,m=(0,V.Cl)((0,V.Cl)({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),A=G&&a||hn,T=this.props["aria-label"]||this.props.ariaLabel,g=m.alt||T||this.props.title,y=!!(g||this.props["aria-labelledby"]||m["aria-label"]||m["aria-labelledby"])?{role:l||p?void 0:"img","aria-label":l||p?void 0:g}:{"aria-hidden":!0},v=d;return p&&d&&"object"===typeof d&&g&&(v=_.cloneElement(d,{alt:g})),_.createElement(f,(0,V.Cl)({"data-icon-name":o},y,C,p?{title:void 0,"aria-label":void 0}:{},{className:h.root}),l?_.createElement(A,(0,V.Cl)({},m)):t||v)},t}(_.Component),Gn=(0,ye.I)(Cn,(function(e){var t=e.className,n=e.iconClassName,r=e.isPlaceholder,o=e.isImage,a=e.styles;return{root:[r&&tn.placeholder,tn.root,o&&tn.image,n,t,a&&a.root,a&&a.imageContainer]}}),void 0,{scope:"Icon"},!0);Gn.displayName="Icon";var mn=_.createContext(void 0),An=function(){return function(){}};mn.Provider;var Tn=function(e){var t=e.providerRef,n=e.layerRoot,r=_.useState([])[0],o=_.useContext(Oe),a=void 0!==o&&!n,i=_.useMemo((function(){return a?void 0:{providerRef:t,registeredProviders:r,registerProvider:function(e){r.push(e),null===o||void 0===o||o.registerProvider(e)},unregisterProvider:function(e){null===o||void 0===o||o.unregisterProvider(e);var t=r.indexOf(e);t>=0&&r.splice(t,1)}}}),[t,r,o,a]);return _.useEffect((function(){if(i)return i.registerProvider(i.providerRef),function(){return i.unregisterProvider(i.providerRef)}}),[i]),i?_.createElement(Oe.Provider,{value:i},e.children):_.createElement(_.Fragment,null,e.children)},gn=n(7142),yn=n(3956);function vn(e,t){void 0===e&&(e={});var n=xn(t)?t:function(e){return function(t){return e?(0,V.Cl)((0,V.Cl)({},t),e):t}}(t);return n(e)}function bn(e,t){return void 0===e&&(e={}),(xn(t)?t:function(e){void 0===e&&(e={});return function(t){var n=(0,V.Cl)({},t);for(var r in e)e.hasOwnProperty(r)&&(n[r]=(0,V.Cl)((0,V.Cl)({},t[r]),e[r]));return n}}(t))(e)}function xn(e){return"function"===typeof e}var wn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onCustomizationChange=function(){return t.forceUpdate()},t}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){gn.X.observe(this._onCustomizationChange)},t.prototype.componentWillUnmount=function(){gn.X.unobserve(this._onCustomizationChange)},t.prototype.render=function(){var e=this,t=this.props.contextTransform;return _.createElement(yn.z.Consumer,null,(function(n){var r=function(e,t){var n=(t||{}).customizations,r=void 0===n?{settings:{},scopedSettings:{}}:n;return{customizations:{settings:vn(r.settings,e.settings),scopedSettings:bn(r.scopedSettings,e.scopedSettings),inCustomizerContext:!0}}}(e.props,n);return t&&(r=t(r)),_.createElement(yn.z.Provider,{value:r},e.props.children)}))},t}(_.Component),kn=n(9425),In=(0,ve.Z)(),_n=(0,be.J9)((function(e,t){return(0,kn.a)((0,V.Cl)((0,V.Cl)({},e),{rtl:t}))})),Sn=_.forwardRef((function(e,t){var n=e.className,r=e.theme,o=e.applyTheme,a=e.applyThemeToBody,i=e.styles,s=In(i,{theme:r,applyTheme:o,className:n}),l=_.useRef(null);return function(e,t,n){var r=t.bodyThemed;_.useEffect((function(){if(e){var t=(0,Je.Y)(n.current);if(t)return t.body.classList.add(r),function(){t.body.classList.remove(r)}}}),[r,e,n])}(a,s,l),_.createElement(_.Fragment,null,function(e,t,n,r){var o=t.root,a=e.as,i=void 0===a?"div":a,s=e.dir,l=e.theme,c=Te(e,Ae,["dir"]),u=function(e){var t=e.theme,n=e.dir,r=(0,xe.jI)(t)?"rtl":"ltr",o=(0,xe.jI)()?"rtl":"ltr",a=n||r;return{rootDir:a!==r||a!==o?a:n,needsTheme:a!==r}}(e),d=u.rootDir,p=u.needsTheme,h=_.createElement(Tn,{providerRef:n},_.createElement(i,(0,V.Cl)({dir:d},c,{className:o,ref:ln(n,r)})));p&&(h=_.createElement(wn,{settings:{theme:_n(l,"rtl"===s)}},h));return h}(e,s,l,t))}));Sn.displayName="FabricBase";var Nn={fontFamily:"inherit"},En={root:"ms-Fabric",bodyThemed:"ms-Fabric-bodyThemed"},Rn=(0,ye.I)(Sn,(function(e){var t=e.applyTheme,n=e.className,r=e.preventBlanketFontInheritance,o=e.theme;return{root:[(0,Lt.Km)(En,o).root,o.fonts.medium,{color:o.palette.neutralPrimary},!r&&{"& button":Nn,"& input":Nn,"& textarea":Nn},t&&{color:o.semanticColors.bodyText,backgroundColor:o.semanticColors.bodyBackground},n],bodyThemed:[{backgroundColor:o.semanticColors.bodyBackground}]}}),void 0,{scope:"Fabric"});var Dn={},Fn={},Mn="fluent-default-layer-host",On="#".concat(Mn);var Ln,Pn=(0,ve.Z)(),zn=_.forwardRef((function(e,t){var n=function(){var e;return null!==(e=_.useContext(mn))&&void 0!==e?e:An}(),r=_.useRef(null),o=ln(r,t),a=_.useRef(),i=_.useRef(null),s=_.useContext(Oe),l=_.useState(!1),c=l[0],u=l[1],d=_.useCallback((function(e){var t,n=!!(null===(t=null===s||void 0===s?void 0:s.providerRef)||void 0===t?void 0:t.current)&&t.current.classList.contains(Ee.Y2);e&&n&&e.classList.add(Ee.Y2)}),[s]),p=e.children,h=e.className,f=e.eventBubblingEnabled,C=e.fabricProps,G=e.hostId,m=e.insertFirst,A=e.onLayerDidMount,T=void 0===A?function(){}:A,g=e.onLayerMounted,y=void 0===g?function(){}:g,v=e.onLayerWillUnmount,b=e.styles,x=e.theme,w=ln(i,null===C||void 0===C?void 0:C.ref,d),k=Pn(b,{theme:x,className:h,isNotHost:!G}),I=function(e){var t,n;if(G){var r=function(e){var t=Fn[e];return t&&t[0]||void 0}(G);return r?null!==(t=r.rootRef.current)&&void 0!==t?t:null:null!==(n=e.getElementById(G))&&void 0!==n?n:null}var o=On,a=o?e.querySelector(o):null;return a||(a=function(e){var t=e.createElement("div");return t.setAttribute("id",Mn),t.style.cssText="position:fixed;z-index:1000000",null===e||void 0===e||e.body.appendChild(t),t}(e)),a},S=function(){null===v||void 0===v||v();var e=a.current;a.current=void 0,e&&e.parentNode&&e.parentNode.removeChild(e)},E=function(){var e,t=(0,Je.Y)(r.current);if(t){var n=I(t);if(n){S();var o=(null!==(e=n.ownerDocument)&&void 0!==e?e:t).createElement("div");o.className=k.root,o.setAttribute(Ft,"true"),function(e,t){var n=e,r=t;n._virtual||(n._virtual={children:[]});var o=n._virtual.parent;if(o&&o!==t){var a=o._virtual.children.indexOf(n);a>-1&&o._virtual.children.splice(a,1)}n._virtual.parent=r||void 0,r&&(r._virtual||(r._virtual={children:[]}),r._virtual.children.push(n))}(o,r.current),m?n.insertBefore(o,n.firstChild):n.appendChild(o),a.current=o,u(!0)}}};return sn((function(){E(),G&&function(e,t){Dn[e]||(Dn[e]=[]),Dn[e].push(t);var n=Fn[e];if(n)for(var r=0,o=n;r<o.length;r++)o[r].notifyLayersChanged()}(G,E);var e=a.current?n(a.current):void 0;return function(){e&&e(),S(),G&&function(e,t){var n=Dn[e];if(n){var r=n.indexOf(t);r>=0&&(n.splice(r,1),0===n.length&&delete Dn[e])}var o=Fn[e];if(o)for(var a=0,i=o;a<i.length;a++)i[a].notifyLayersChanged()}(G,E)}}),[G]),_.useEffect((function(){a.current&&c&&(null===y||void 0===y||y(),null===T||void 0===T||T(),u(!1))}),[c,y,T]),_.createElement("span",{className:"ms-layer",ref:o},a.current&&N.createPortal(_.createElement(Tn,{layerRoot:!0,providerRef:w},_.createElement(Rn,(0,V.Cl)({},!f&&function(){Ln||(Ln={},["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchStart","onTouchCancel","onTouchEnd","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit"].forEach((function(e){return Ln[e]=Bn})));return Ln}(),C,{className:ke(k.content,null===C||void 0===C?void 0:C.className),ref:w}),p)),a.current))}));zn.displayName="LayerBase";var Bn=function(e){e.eventPhase===Event.BUBBLING_PHASE&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"touchstart"!==e.type&&"touchend"!==e.type&&e.stopPropagation()};var Vn,Hn={root:"ms-Layer",rootNoHost:"ms-Layer--fixed",content:"ms-Layer-content"},Wn=(0,ye.I)(zn,(function(e){var t=e.className,n=e.isNotHost,r=e.theme,o=(0,Lt.Km)(Hn,r);return{root:[o.root,r.fonts.medium,n&&[o.rootNoHost,{position:"fixed",zIndex:Lt.nA.Layer,top:0,left:0,bottom:0,right:0,visibility:"hidden"}],t],content:[o.content,{visibility:"visible"}]}}),void 0,{scope:"Layer",fields:["hostId","theme","styles"]}),Un=function(e){var t=e.count,n=e.indentWidth,r=void 0===n?36:n,o=e.role,a=void 0===o?"presentation":o,i=t*r;return t>0?_.createElement("span",{className:"ms-GroupSpacer",style:{display:"inline-block",width:i},role:a}):null};!function(e){e[e.hidden=0]="hidden",e[e.visible=1]="visible"}(Vn||(Vn={}));var jn=(0,be.J5)((function(e){return(0,be.J5)((function(t){var n=(0,be.J5)((function(e){return function(n){return t(n,e)}}));return function(r,o){return e(r,o?n(o):t)}}))}));function Kn(e,t){return jn(e)(t)}var qn={label:Q,audio:$,video:ee,ol:te,li:ne,a:re,button:oe,input:ae,textarea:ie,select:se,option:le,table:ce,tr:ue,th:de,td:pe,colGroup:he,col:fe,form:Ce,iframe:Ge,img:me};var Xn=(0,ve.Z)(),Yn=_.forwardRef((function(e,t){var n=e.checked,r=void 0!==n&&n,o=e.className,a=e.theme,i=e.styles,s=e.useFastIcons,l=void 0===s||s,c=Xn(i,{theme:a,className:o,checked:r}),u=l?on:Gn;return _.createElement("div",{className:c.root,ref:t},_.createElement(u,{iconName:"CircleRing",className:c.circle}),_.createElement(u,{iconName:"StatusCircleCheckmark",className:c.check}))}));Yn.displayName="CheckBase";var Zn,Jn,Qn={root:"ms-Check",circle:"ms-Check-circle",check:"ms-Check-check",checkHost:"ms-Check-checkHost"},$n=(0,ye.I)(Yn,(function(e){var t,n,r,o,a,i=e.height,s=void 0===i?e.checkBoxHeight||"18px":i,l=e.checked,c=e.className,u=e.theme,d=u.palette,p=u.semanticColors,h=u.fonts,f=(0,xe.jI)(u),C=(0,Lt.Km)(Qn,u),G={fontSize:s,position:"absolute",left:0,top:0,width:s,height:s,textAlign:"center",display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle"};return{root:[C.root,h.medium,{lineHeight:"1",width:s,height:s,verticalAlign:"top",position:"relative",userSelect:"none",selectors:(t={":before":{content:'""',position:"absolute",top:"1px",right:"1px",bottom:"1px",left:"1px",borderRadius:"50%",opacity:1,background:p.bodyBackground}},t[".".concat(C.checkHost,":hover &, .").concat(C.checkHost,":focus &, &:hover, &:focus")]={opacity:1},t)},l&&["is-checked",{selectors:{":before":{background:d.themePrimary,opacity:1,selectors:(n={},n[Lt.up]={background:"Window"},n)}}}],c],circle:[C.circle,G,{color:d.neutralSecondary,selectors:(r={},r[Lt.up]={color:"WindowText"},r)},l&&{color:d.white}],check:[C.check,G,{opacity:0,color:d.neutralSecondary,fontSize:Lt.fF.medium,left:f?"-0.5px":".5px",top:"-1px",selectors:(o={":hover":{opacity:1}},o[Lt.up]=(0,V.Cl)({},(0,Lt.Qg)()),o)},l&&{opacity:1,color:d.white,fontWeight:900,selectors:(a={},a[Lt.up]={border:"none",color:"WindowText"},a)}],checkHost:C.checkHost}}),void 0,{scope:"Check"},!0),er={root:"ms-Link"},tr={root:"ms-DetailsRow",compact:"ms-DetailsList--Compact",cell:"ms-DetailsRow-cell",cellAnimation:"ms-DetailsRow-cellAnimation",cellCheck:"ms-DetailsRow-cellCheck",check:"ms-DetailsRow-check",cellMeasurer:"ms-DetailsRow-cellMeasurer",listCellFirstChild:"ms-List-cell:first-child",isContentUnselectable:"is-contentUnselectable",isSelected:"is-selected",isCheckVisible:"is-check-visible",isRowHeader:"is-row-header",fields:"ms-DetailsRow-fields"},nr={cellLeftPadding:12,cellRightPadding:8,cellExtraRightPadding:24},rr={rowHeight:42,compactRowHeight:32},or=(0,V.Cl)((0,V.Cl)({},rr),{rowVerticalPadding:11,compactRowVerticalPadding:6}),ar={tooltipHost:"ms-TooltipHost",root:"ms-DetailsHeader",cell:"ms-DetailsHeader-cell",cellIsCheck:"ms-DetailsHeader-cellIsCheck",collapseButton:"ms-DetailsHeader-collapseButton",isCollapsed:"is-collapsed",isAllSelected:"is-allSelected",isSelectAllHidden:"is-selectAllHidden",isResizingColumn:"is-resizingColumn",cellSizer:"ms-DetailsHeader-cellSizer",isResizing:"is-resizing",dropHintCircleStyle:"ms-DetailsHeader-dropHintCircleStyle",dropHintCaretStyle:"ms-DetailsHeader-dropHintCaretStyle",dropHintLineStyle:"ms-DetailsHeader-dropHintLineStyle",cellTitle:"ms-DetailsHeader-cellTitle",cellName:"ms-DetailsHeader-cellName",filterChevron:"ms-DetailsHeader-filterChevron",gripperBarVertical:"ms-DetailsColumn-gripperBarVertical",checkTooltip:"ms-DetailsHeader-checkTooltip",check:"ms-DetailsHeader-check"},ir=function(e){var t=e.theme,n=e.cellStyleProps,r=void 0===n?nr:n,o=t.semanticColors;return[(0,Lt.Km)(ar,t).cell,(0,Lt.gm)(t),{color:o.bodyText,position:"relative",display:"inline-block",boxSizing:"border-box",padding:"0 ".concat(r.cellRightPadding,"px 0 ").concat(r.cellLeftPadding,"px"),lineHeight:"inherit",margin:"0",height:42,verticalAlign:"top",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left"}]},sr={root:"ms-DetailsRow-check",isDisabled:"ms-DetailsRow-check--isDisabled",isHeader:"ms-DetailsRow-check--isHeader"},lr="change";!function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(Zn||(Zn={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(Jn||(Jn={}));var cr=(0,ve.Z)(),ur=_.memo((function(e){return _.createElement($n,{theme:e.theme,checked:e.checked,className:e.className,useFastIcons:!0})}));function dr(e){return _.createElement($n,{checked:e.checked})}function pr(e){return _.createElement(ur,{theme:e.theme,checked:e.checked})}var hr,fr=(0,ye.I)((function(e){var t=e.isVisible,n=void 0!==t&&t,r=e.canSelect,o=void 0!==r&&r,a=e.anySelected,i=void 0!==a&&a,s=e.selected,l=void 0!==s&&s,c=e.selectionMode,u=e.isHeader,d=void 0!==u&&u,p=e.className,h=(e.checkClassName,e.styles),f=e.theme,C=e.compact,G=e.onRenderDetailsCheckbox,m=e.useFastIcons,A=void 0===m||m,T=(0,V.Tt)(e,["isVisible","canSelect","anySelected","selected","selectionMode","isHeader","className","checkClassName","styles","theme","compact","onRenderDetailsCheckbox","useFastIcons"]),g=A?pr:dr,y=G?Kn(G,g):g,v=cr(h,{theme:f,canSelect:o,selected:l,anySelected:i,className:p,isHeader:d,isVisible:n,compact:C}),b={checked:l,theme:f},x=function(e,t,n){return Te(t,e&&qn[e]||J,n)}("div",T,["aria-label","aria-labelledby","aria-describedby"]),w=c===Zn.single?"radio":"checkbox";return o?_.createElement("div",(0,V.Cl)({},T,{role:w,className:ke(v.root,v.check),"aria-checked":l,"data-selection-toggle":!0,"data-automationid":"DetailsRowCheck",tabIndex:-1}),y(b)):_.createElement("div",(0,V.Cl)({},x,{className:ke(v.root,v.check)}))}),(function(e){var t=e.theme,n=e.className,r=e.isHeader,o=e.selected,a=e.anySelected,i=e.canSelect,s=e.compact,l=e.isVisible,c=(0,Lt.Km)(sr,t),u=r?42:s?rr.compactRowHeight:rr.rowHeight,d=l||o||a;return{root:[c.root,n],check:[!i&&c.isDisabled,r&&c.isHeader,(0,Lt.gm)(t),t.fonts.small,Qn.checkHost,{display:"flex",alignItems:"center",justifyContent:"center",cursor:"default",boxSizing:"border-box",verticalAlign:"top",background:"none",backgroundColor:"transparent",border:"none",opacity:d?1:0,height:u,width:48,padding:0,margin:0}],isDisabled:[]}}),void 0,{scope:"DetailsRowCheck"},!0),Cr=function(){function e(e){this._selection=e.selection,this._dragEnterCounts={},this._activeTargets={},this._lastId=0,this._initialized=!1}return e.prototype.dispose=function(){this._events&&this._events.dispose()},e.prototype.subscribe=function(e,t,n){var r=this;if(!this._initialized){this._events=new tt(this);var o=(0,Je.Y)();o&&(this._events.on(o.body,"mouseup",this._onMouseUp.bind(this),!0),this._events.on(o,"mouseup",this._onDocumentMouseUp.bind(this),!0)),this._initialized=!0}var a,i,s,l,c,u,d,p,h,f,C=n.key,G=void 0===C?"".concat(++this._lastId):C,m=[];if(n&&e){var A=n.eventMap,T=n.context,g=n.updateDropState,y={root:e,options:n,key:G};if(p=this._isDraggable(y),h=this._isDroppable(y),(p||h)&&A)for(var v=0,b=A;v<b.length;v++){var x=b[v],w={callback:x.callback.bind(null,T),eventName:x.eventName};m.push(w),this._events.on(e,w.eventName,w.callback)}h&&(i=function(e){e.isHandled||(e.isHandled=!0,r._dragEnterCounts[G]--,0===r._dragEnterCounts[G]&&g(!1,e))},s=function(e){e.preventDefault(),e.isHandled||(e.isHandled=!0,r._dragEnterCounts[G]++,1===r._dragEnterCounts[G]&&g(!0,e))},l=function(e){r._dragEnterCounts[G]=0,g(!1,e)},c=function(e){r._dragEnterCounts[G]=0,g(!1,e),n.onDrop&&n.onDrop(n.context.data,e)},u=function(e){e.preventDefault(),n.onDragOver&&n.onDragOver(n.context.data,e)},this._dragEnterCounts[G]=0,t.on(e,"dragenter",s),t.on(e,"dragleave",i),t.on(e,"dragend",l),t.on(e,"drop",c),t.on(e,"dragover",u)),p&&(d=this._onMouseDown.bind(this,y),l=this._onDragEnd.bind(this,y),a=function(t){var o=n;o&&o.onDragStart&&o.onDragStart(o.context.data,o.context.index,r._selection.getSelection(),t),r._isDragging=!0,t.dataTransfer&&t.dataTransfer.setData("id",e.id)},t.on(e,"dragstart",a),t.on(e,"mousedown",d),t.on(e,"dragend",l)),f={target:y,dispose:function(){if(r._activeTargets[G]===f&&delete r._activeTargets[G],e){for(var n=0,o=m;n<o.length;n++){var C=o[n];r._events.off(e,C.eventName,C.callback)}h&&(t.off(e,"dragenter",s),t.off(e,"dragleave",i),t.off(e,"dragend",l),t.off(e,"dragover",u),t.off(e,"drop",c)),p&&(t.off(e,"dragstart",a),t.off(e,"mousedown",d),t.off(e,"dragend",l))}}},this._activeTargets[G]=f}return{key:G,dispose:function(){f&&f.dispose()}}},e.prototype.unsubscribe=function(e,t){var n=this._activeTargets[t];n&&n.dispose()},e.prototype._onDragEnd=function(e,t){var n=e.options;n.onDragEnd&&n.onDragEnd(n.context.data,t)},e.prototype._onMouseUp=function(e){if(this._isDragging=!1,this._dragData){for(var t=0,n=Object.keys(this._activeTargets);t<n.length;t++){var r=n[t],o=this._activeTargets[r];o.target.root&&(this._events.off(o.target.root,"mousemove"),this._events.off(o.target.root,"mouseleave"))}this._dragData.dropTarget&&(tt.raise(this._dragData.dropTarget.root,"dragleave"),tt.raise(this._dragData.dropTarget.root,"drop"))}this._dragData=null},e.prototype._onDocumentMouseUp=function(e){var t=(0,Je.Y)();t&&e.target===t.documentElement&&this._onMouseUp(e)},e.prototype._onMouseMove=function(e,t){var n=t.buttons,r=void 0===n?1:n;if(this._dragData&&1!==r)this._onMouseUp(t);else{var o=e.root,a=e.key;this._isDragging&&this._isDroppable(e)&&this._dragData&&this._dragData.dropTarget&&this._dragData.dropTarget.key!==a&&!this._isChild(o,this._dragData.dropTarget.root)&&this._dragEnterCounts[this._dragData.dropTarget.key]>0&&(tt.raise(this._dragData.dropTarget.root,"dragleave"),tt.raise(o,"dragenter"),this._dragData.dropTarget=e)}},e.prototype._onMouseLeave=function(e,t){this._isDragging&&this._dragData&&this._dragData.dropTarget&&this._dragData.dropTarget.key===e.key&&(tt.raise(e.root,"dragleave"),this._dragData.dropTarget=void 0)},e.prototype._onMouseDown=function(e,t){if(0===t.button)if(this._isDraggable(e)){this._dragData={clientX:t.clientX,clientY:t.clientY,eventTarget:t.target,dragTarget:e};for(var n=0,r=Object.keys(this._activeTargets);n<r.length;n++){var o=r[n],a=this._activeTargets[o];a.target.root&&(this._events.on(a.target.root,"mousemove",this._onMouseMove.bind(this,a.target)),this._events.on(a.target.root,"mouseleave",this._onMouseLeave.bind(this,a.target)))}}else this._dragData=null},e.prototype._isChild=function(e,t){for(;t&&t.parentElement;){if(t.parentElement===e)return!0;t=t.parentElement}return!1},e.prototype._isDraggable=function(e){var t=e.options;return!(!t.canDrag||!t.canDrag(t.context.data))},e.prototype._isDroppable=function(e){var t=e.options,n=this._dragData&&this._dragData.dragTarget?this._dragData.dragTarget.options.context:void 0;return!(!t.canDrop||!t.canDrop(t.context,n))},e}(),Gr=(0,ve.Z)(),mr=function(e){return function(t){return t?t.column.isIconOnly?_.createElement("span",{className:e.accessibleLabel},t.column.name):_.createElement(_.Fragment,null,t.column.name):null}},Ar=function(e){function t(t){var n=e.call(this,t)||this;return n._root=_.createRef(),n._tooltipRef=_.createRef(),n._onRenderFilterIcon=function(e){return function(e){var t=e.columnProps,n=(0,V.Tt)(e,["columnProps"]),r=(null===t||void 0===t?void 0:t.useFastIcons)?on:Gn;return _.createElement(r,(0,V.Cl)({},n))}},n._onRenderColumnHeaderTooltip=function(e){return _.createElement("span",{className:e.hostClassName},e.children)},n._onColumnClick=function(e){var t=n.props,r=t.onColumnClick,o=t.column;o.columnActionsMode!==We.disabled&&(o.onColumnClick&&o.onColumnClick(e,o),r&&r(e,o))},n._onColumnBlur=function(){n._tooltipRef.current&&n._tooltipRef.current.dismiss()},n._onColumnFocus=function(){n._tooltipRef.current&&n._tooltipRef.current.show()},n._onDragStart=function(e,t,r,o){var a=n._classNames;t&&(n._updateHeaderDragInfo(t),n._root.current.classList.add(a.borderWhileDragging),n._async.setTimeout((function(){n._root.current&&n._root.current.classList.add(a.noBorderWhileDragging)}),20))},n._onDragEnd=function(e,t){var r=n._classNames;t&&n._updateHeaderDragInfo(-1,t),n._root.current.classList.remove(r.borderWhileDragging),n._root.current.classList.remove(r.noBorderWhileDragging)},n._updateHeaderDragInfo=function(e,t){n.props.setDraggedItemIndex&&n.props.setDraggedItemIndex(e),n.props.updateDragInfo&&n.props.updateDragInfo({itemIndex:e},t)},n._onColumnContextMenu=function(e){var t=n.props,r=t.onColumnContextMenu,o=t.column;o.onColumnContextMenu&&(o.onColumnContextMenu(o,e),e.preventDefault()),r&&(r(o,e),e.preventDefault())},n._onRootMouseDown=function(e){n.props.isDraggable&&0===e.button&&e.stopPropagation()},W(n),n._async=new Xe(n),n._events=new tt(n),n}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.column,n=e.parentId,r=e.isDraggable,o=e.styles,a=e.theme,i=e.cellStyleProps,s=void 0===i?nr:i,l=e.useFastIcons,c=void 0===l||l,u=this.props.onRenderColumnHeaderTooltip,d=void 0===u?this._onRenderColumnHeaderTooltip:u;this._classNames=Gr(o,{theme:a,headerClassName:t.headerClassName,iconClassName:t.iconClassName,isActionable:t.columnActionsMode!==We.disabled,isEmpty:!t.name,isIconVisible:t.isSorted||t.isGrouped||t.isFiltered,isPadded:t.isPadded,isIconOnly:t.isIconOnly,cellStyleProps:s,transitionDurationDrag:200,transitionDurationDrop:1500});var p=this._classNames,h=c?on:Gn,f=t.onRenderFilterIcon?Kn(t.onRenderFilterIcon,this._onRenderFilterIcon(this._classNames)):this._onRenderFilterIcon(this._classNames),C=t.onRenderHeader?Kn(t.onRenderHeader,mr(this._classNames)):mr(this._classNames),G=t.columnActionsMode!==We.disabled&&(void 0!==t.onColumnClick||void 0!==this.props.onColumnClick),m=this.props.onRenderColumnHeaderTooltip?!t.ariaLabel:this._hasAccessibleDescription(),A={"aria-label":t.ariaLabel?t.ariaLabel:t.isIconOnly?t.name:void 0,"aria-labelledby":t.ariaLabel||t.isIconOnly?void 0:"".concat(n,"-").concat(t.key,"-name"),"aria-describedby":m?"".concat(n,"-").concat(t.key,"-tooltip"):void 0};return _.createElement(_.Fragment,null,_.createElement("div",(0,V.Cl)({key:t.key,ref:this._root,role:"columnheader"},!G&&A,{"aria-sort":t.isSorted?t.isSortedDescending?"descending":"ascending":"none","data-is-focusable":G||t.columnActionsMode===We.disabled?void 0:"true",className:p.root,"data-is-draggable":r,draggable:r,style:{width:(t.calculatedWidth||0)+s.cellLeftPadding+s.cellRightPadding+(t.isPadded?s.cellExtraRightPadding:0)},"data-automationid":"ColumnsHeaderColumn","data-item-key":t.key,onBlur:this._onColumnBlur,onFocus:this._onColumnFocus}),r&&_.createElement(h,{iconName:"GripperBarVertical",className:p.gripperBarVerticalStyle}),d({hostClassName:p.cellTooltip,id:"".concat(n,"-").concat(t.key,"-tooltip"),setAriaDescribedBy:!1,column:t,componentRef:this._tooltipRef,content:t.columnActionsMode!==We.disabled?t.ariaLabel:"",children:_.createElement("span",(0,V.Cl)({id:"".concat(n,"-").concat(t.key),className:p.cellTitle,"data-is-focusable":G&&t.columnActionsMode!==We.disabled?"true":void 0,role:G?"button":void 0},G&&A,{onContextMenu:this._onColumnContextMenu,onClick:this._onColumnClick,"aria-haspopup":t.columnActionsMode===We.hasDropdown?"menu":void 0,"aria-expanded":t.columnActionsMode===We.hasDropdown?!!t.isMenuOpen:void 0}),_.createElement("span",{id:"".concat(n,"-").concat(t.key,"-name"),className:p.cellName},(t.iconName||t.iconClassName)&&_.createElement(h,{className:p.iconClassName,iconName:t.iconName}),C(this.props)),t.isFiltered&&_.createElement(h,{className:p.nearIcon,iconName:"Filter"}),(t.isSorted||t.showSortIconWhenUnsorted)&&_.createElement(h,{className:p.sortIcon,iconName:t.isSorted?t.isSortedDescending?"SortDown":"SortUp":"Sort"}),t.isGrouped&&_.createElement(h,{className:p.nearIcon,iconName:"GroupedDescending"}),t.columnActionsMode===We.hasDropdown&&!t.isIconOnly&&f({"aria-hidden":!0,columnProps:this.props,className:p.filterChevron,iconName:"ChevronDown"}))},this._onRenderColumnHeaderTooltip)),this.props.onRenderColumnHeaderTooltip?null:this._renderAccessibleDescription())},t.prototype.componentDidMount=function(){var e=this;this.props.dragDropHelper&&this.props.isDraggable&&this._addDragDropHandling();var t=this._classNames;this.props.isDropped&&(this._root.current&&(this._root.current.classList.add(t.borderAfterDropping),this._async.setTimeout((function(){e._root.current&&e._root.current.classList.add(t.noBorderAfterDropping)}),20)),this._async.setTimeout((function(){e._root.current&&(e._root.current.classList.remove(t.borderAfterDropping),e._root.current.classList.remove(t.noBorderAfterDropping))}),1520))},t.prototype.componentWillUnmount=function(){this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this._async.dispose(),this._events.dispose()},t.prototype.componentDidUpdate=function(){!this._dragDropSubscription&&this.props.dragDropHelper&&this.props.isDraggable&&this._addDragDropHandling(),this._dragDropSubscription&&!this.props.isDraggable&&(this._dragDropSubscription.dispose(),this._events.off(this._root.current,"mousedown"),delete this._dragDropSubscription)},t.prototype._getColumnDragDropOptions=function(){var e=this,t=this.props.columnIndex;return{selectionIndex:t,context:{data:t,index:t},canDrag:function(){return e.props.isDraggable},canDrop:function(){return!1},onDragStart:this._onDragStart,updateDropState:function(){},onDrop:function(){},onDragEnd:this._onDragEnd}},t.prototype._hasAccessibleDescription=function(){var e=this.props.column;return!!(e.filterAriaLabel||e.sortAscendingAriaLabel||e.sortDescendingAriaLabel||e.groupAriaLabel||e.sortableAriaLabel)},t.prototype._renderAccessibleDescription=function(){var e=this.props,t=e.column,n=e.parentId,r=this._classNames;return this._hasAccessibleDescription()&&!this.props.onRenderColumnHeaderTooltip?_.createElement("label",{key:"".concat(t.key,"_label"),id:"".concat(n,"-").concat(t.key,"-tooltip"),className:r.accessibleLabel,hidden:!0},t.isFiltered&&t.filterAriaLabel||null,(t.isSorted||t.showSortIconWhenUnsorted)&&(t.isSorted?t.isSortedDescending?t.sortDescendingAriaLabel:t.sortAscendingAriaLabel:t.sortableAriaLabel)||null,t.isGrouped&&t.groupAriaLabel||null):null},t.prototype._addDragDropHandling=function(){this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getColumnDragDropOptions()),this._events.on(this._root.current,"mousedown",this._onRootMouseDown)},t}(_.Component),Tr={isActionable:"is-actionable",cellIsCheck:"ms-DetailsHeader-cellIsCheck",collapseButton:"ms-DetailsHeader-collapseButton",isCollapsed:"is-collapsed",isAllSelected:"is-allSelected",isSelectAllHidden:"is-selectAllHidden",isResizingColumn:"is-resizingColumn",isEmpty:"is-empty",isIconVisible:"is-icon-visible",cellSizer:"ms-DetailsHeader-cellSizer",isResizing:"is-resizing",dropHintCircleStyle:"ms-DetailsHeader-dropHintCircleStyle",dropHintLineStyle:"ms-DetailsHeader-dropHintLineStyle",cellTitle:"ms-DetailsHeader-cellTitle",cellName:"ms-DetailsHeader-cellName",filterChevron:"ms-DetailsHeader-filterChevron",gripperBarVerticalStyle:"ms-DetailsColumn-gripperBar",nearIcon:"ms-DetailsColumn-nearIcon"},gr=(0,ye.I)(Ar,(function(e){var t,n=e.theme,r=e.headerClassName,o=e.iconClassName,a=e.isActionable,i=e.isEmpty,s=e.isIconVisible,l=e.isPadded,c=e.isIconOnly,u=e.cellStyleProps,d=void 0===u?nr:u,p=e.transitionDurationDrag,h=e.transitionDurationDrop,f=n.semanticColors,C=n.palette,G=n.fonts,m=(0,Lt.Km)(Tr,n),A={iconForegroundColor:f.bodySubtext,headerForegroundColor:f.bodyText,headerBackgroundColor:f.bodyBackground,dropdownChevronForegroundColor:C.neutralSecondary,resizerColor:C.neutralTertiaryAlt},T={color:A.iconForegroundColor,opacity:1,paddingLeft:8},g={outline:"1px solid ".concat(C.themePrimary)},y={outlineColor:"transparent"};return{root:[ir(e),G.small,a&&[m.isActionable,{selectors:{":hover":{color:f.bodyText,background:f.listHeaderBackgroundHovered},":active":{background:f.listHeaderBackgroundPressed}}}],i&&[m.isEmpty,{textOverflow:"clip"}],s&&m.isIconVisible,l&&{paddingRight:d.cellExtraRightPadding+d.cellRightPadding},{selectors:{':hover i[data-icon-name="GripperBarVertical"]':{display:"block"}}},r],gripperBarVerticalStyle:{display:"none",position:"absolute",textAlign:"left",color:C.neutralTertiary,left:1},nearIcon:[m.nearIcon,T],sortIcon:[T,{paddingLeft:4,position:"relative",top:1}],iconClassName:[{color:A.iconForegroundColor,opacity:1},o],filterChevron:[m.filterChevron,{color:A.dropdownChevronForegroundColor,paddingLeft:6,verticalAlign:"middle",fontSize:G.small.fontSize}],cellTitle:[m.cellTitle,(0,Lt.gm)(n),(0,V.Cl)({display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",boxSizing:"border-box",overflow:"hidden",padding:"0 ".concat(d.cellRightPadding,"px 0 ").concat(d.cellLeftPadding,"px")},c?{alignContent:"flex-end",maxHeight:"100%",flexWrap:"wrap-reverse"}:{})],cellName:[m.cellName,{flex:"0 1 auto",overflow:"hidden",textOverflow:"ellipsis",fontWeight:Lt.BO.semibold,fontSize:G.medium.fontSize},c&&{selectors:(t={},t[".".concat(m.nearIcon)]={paddingLeft:0},t)}],cellTooltip:{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0},accessibleLabel:Lt.dX,borderWhileDragging:g,noBorderWhileDragging:[y,{transition:"outline ".concat(p,"ms ease")}],borderAfterDropping:g,noBorderAfterDropping:[y,{transition:"outline  ".concat(h,"ms ease")}]}}),void 0,{scope:"DetailsColumn"});!function(e){e[e.none=0]="none",e[e.hidden=1]="hidden",e[e.visible=2]="visible"}(hr||(hr={}));var yr=(0,ve.Z)(),vr=[],br=function(e){function t(t){var n=e.call(this,t)||this;return n._rootElement=_.createRef(),n._rootComponent=_.createRef(),n._draggedColumnIndex=-1,n._dropHintDetails={},n._updateDroppingState=function(e,t){n._draggedColumnIndex>=0&&"drop"!==t.type&&!e&&n._resetDropHints()},n._onDragOver=function(e,t){n._draggedColumnIndex>=0&&(t.stopPropagation(),n._computeDropHintToBeShown(t.clientX))},n._onDrop=function(e,t){var r=n._getColumnReorderProps();if(n._draggedColumnIndex>=0&&t){var o=n._draggedColumnIndex>n._currentDropHintIndex?n._currentDropHintIndex:n._currentDropHintIndex-1,a=n._isValidCurrentDropHintIndex();if(t.stopPropagation(),a)if(n._onDropIndexInfo.sourceIndex=n._draggedColumnIndex,n._onDropIndexInfo.targetIndex=o,r.onColumnDrop){var i={draggedIndex:n._draggedColumnIndex,targetIndex:o};r.onColumnDrop(i)}else r.handleColumnReorder&&r.handleColumnReorder(n._draggedColumnIndex,o)}n._resetDropHints(),n._dropHintDetails={},n._draggedColumnIndex=-1},n._computeColumnIndexOffset=function(e){var t=1;return e&&(t+=1),n.props.groupNestingDepth&&n.props.groupNestingDepth>0&&(t+=1),t},n._updateDragInfo=function(e,t){var r=n._getColumnReorderProps(),o=e.itemIndex;if(o>=0)n._draggedColumnIndex=o-n._computeColumnIndexOffset(!n._isCheckboxColumnHidden()),n._getDropHintPositions(),r.onColumnDragStart&&r.onColumnDragStart(!0);else if(t&&n._draggedColumnIndex>=0&&(n._resetDropHints(),n._draggedColumnIndex=-1,n._dropHintDetails={},r.onColumnDragEnd)){var a=n._isEventOnHeader(t);r.onColumnDragEnd({dropLocation:a},t)}},n._getDropHintPositions=function(){for(var e,t=n.props.columns,r=void 0===t?vr:t,o=n._getColumnReorderProps(),a=0,i=0,s=o.frozenColumnCountFromStart||0,l=o.frozenColumnCountFromEnd||0,c=s;c<r.length-l+1;c++)if(n._rootElement.current){var u=n._rootElement.current.querySelectorAll("#columnDropHint_"+c)[0];if(u)if(c===s)a=u.offsetLeft,i=u.offsetLeft,e=u;else{var d=(u.offsetLeft+a)/2;n._dropHintDetails[c-1]={originX:a,startX:i,endX:d,dropHintElementRef:e},i=d,e=u,a=u.offsetLeft,c===r.length-l&&(n._dropHintDetails[c]={originX:a,startX:i,endX:u.offsetLeft,dropHintElementRef:e})}}},n._computeDropHintToBeShown=function(e){var t=(0,xe.jI)(n.props.theme);if(n._rootElement.current){var r=e-n._rootElement.current.getBoundingClientRect().left,o=n._currentDropHintIndex;if(n._isValidCurrentDropHintIndex()&&xr(t,r,n._dropHintDetails[o].startX,n._dropHintDetails[o].endX))return;var a=n.props.columns,i=void 0===a?vr:a,s=n._getColumnReorderProps(),l=s.frozenColumnCountFromStart||0,c=s.frozenColumnCountFromEnd||0,u=l,d=i.length-c,p=-1;if(wr(t,r,n._dropHintDetails[u].endX)?p=u:kr(t,r,n._dropHintDetails[d].startX)?p=d:n._isValidCurrentDropHintIndex()&&(n._dropHintDetails[o+1]&&xr(t,r,n._dropHintDetails[o+1].startX,n._dropHintDetails[o+1].endX)?p=o+1:n._dropHintDetails[o-1]&&xr(t,r,n._dropHintDetails[o-1].startX,n._dropHintDetails[o-1].endX)&&(p=o-1)),-1===p)for(var h=l,f=d;h<f;){var C=Math.ceil((f+h)/2);if(xr(t,r,n._dropHintDetails[C].startX,n._dropHintDetails[C].endX)){p=C;break}wr(t,r,n._dropHintDetails[C].originX)?f=C:kr(t,r,n._dropHintDetails[C].originX)&&(h=C)}p===n._draggedColumnIndex||p===n._draggedColumnIndex+1?n._isValidCurrentDropHintIndex()&&n._resetDropHints():o!==p&&p>=0&&(n._resetDropHints(),n._updateDropHintElement(n._dropHintDetails[p].dropHintElementRef,"inline-block"),n._currentDropHintIndex=p)}},n._renderColumnSizer=function(e){var t,r=e.columnIndex,o=n.props.columns,a=void 0===o?vr:o,i=a[r],s=n.state.columnResizeDetails,l=n._classNames;return i.isResizable?_.createElement("div",{key:"".concat(i.key,"_sizer"),"aria-hidden":!0,role:"button","data-is-focusable":!1,onClick:Ir,"data-sizer-index":r,onBlur:n._onSizerBlur,className:ke(l.cellSizer,r<a.length-1?l.cellSizerStart:l.cellSizerEnd,(t={},t[l.cellIsResizing]=s&&s.columnIndex===r,t)),onDoubleClick:n._onSizerDoubleClick.bind(n,r)}):null},n._onRenderColumnHeaderTooltip=function(e){return _.createElement("span",{className:e.hostClassName},e.children)},n._onSelectAllClicked=function(){var e=n.props.selection;e&&e.toggleAllSelected()},n._onRootMouseDown=function(e){var t=e.target.getAttribute("data-sizer-index"),r=Number(t),o=n.props.columns,a=void 0===o?vr:o;null!==t&&0===e.button&&(n.setState({columnResizeDetails:{columnIndex:r,columnMinWidth:a[r].calculatedWidth,originX:e.clientX}}),e.preventDefault(),e.stopPropagation())},n._onRootMouseMove=function(e){var t=n.state,r=t.columnResizeDetails,o=t.isSizing;r&&!o&&e.clientX!==r.originX&&n.setState({isSizing:!0})},n._onRootKeyDown=function(e){var t=n.state,r=t.columnResizeDetails,o=t.isSizing,a=n.props,i=a.columns,s=void 0===i?vr:i,l=a.onColumnResized,c=e.target.getAttribute("data-sizer-index");if(c&&!o){var u=Number(c);if(r){var d=void 0;e.which===we.c.enter?(n.setState({columnResizeDetails:void 0}),e.preventDefault(),e.stopPropagation()):e.which===we.c.left?d=(0,xe.jI)(n.props.theme)?1:-1:e.which===we.c.right&&(d=(0,xe.jI)(n.props.theme)?-1:1),d&&(e.shiftKey||(d*=10),n.setState({columnResizeDetails:(0,V.Cl)((0,V.Cl)({},r),{columnMinWidth:r.columnMinWidth+d})}),l&&l(s[u],r.columnMinWidth+d,u),e.preventDefault(),e.stopPropagation())}else e.which===we.c.enter&&(n.setState({columnResizeDetails:{columnIndex:u,columnMinWidth:s[u].calculatedWidth}}),e.preventDefault(),e.stopPropagation())}},n._onSizerMouseMove=function(e){var t=e.buttons,r=n.props,o=r.onColumnIsSizingChanged,a=r.onColumnResized,i=r.columns,s=void 0===i?vr:i,l=n.state.columnResizeDetails;if(void 0===t||1===t){if(e.clientX!==l.originX&&o&&o(s[l.columnIndex],!0),a){var c=e.clientX-l.originX;(0,xe.jI)(n.props.theme)&&(c=-c),a(s[l.columnIndex],l.columnMinWidth+c,l.columnIndex)}}else n._onSizerMouseUp(e)},n._onSizerBlur=function(e){n.state.columnResizeDetails&&n.setState({columnResizeDetails:void 0,isSizing:!1})},n._onSizerMouseUp=function(e){var t=n.props,r=t.columns,o=void 0===r?vr:r,a=t.onColumnIsSizingChanged,i=n.state.columnResizeDetails;n.setState({columnResizeDetails:void 0,isSizing:!1}),a&&a(o[i.columnIndex],!1)},n._onToggleCollapseAll=function(){var e=n.props.onToggleCollapseAll,t=!n.state.isAllCollapsed;n.setState({isAllCollapsed:t}),e&&e(t)},W(n),n._events=new tt(n),n.state={columnResizeDetails:void 0,isAllCollapsed:n.props.isAllCollapsed,isAllSelected:!!n.props.selection&&n.props.selection.isAllSelected()},n._onDropIndexInfo={sourceIndex:-1,targetIndex:-1},n._id=st("header"),n._currentDropHintIndex=-1,n._dragDropHelper=new Cr({selection:{getSelection:function(){}},minimumPixelsForDrag:n.props.minimumPixelsForDrag}),n}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){var e=this.props.selection;this._events.on(e,lr,this._onSelectionChanged),this._rootElement.current&&(this._events.on(this._rootElement.current,"mousedown",this._onRootMouseDown),this._events.on(this._rootElement.current,"keydown",this._onRootKeyDown),this._getColumnReorderProps()&&(this._subscriptionObject=this._dragDropHelper.subscribe(this._rootElement.current,this._events,this._getHeaderDragDropOptions())))},t.prototype.componentDidUpdate=function(e){if(this._getColumnReorderProps()?!this._subscriptionObject&&this._rootElement.current&&(this._subscriptionObject=this._dragDropHelper.subscribe(this._rootElement.current,this._events,this._getHeaderDragDropOptions())):this._subscriptionObject&&(this._subscriptionObject.dispose(),delete this._subscriptionObject),this.props!==e&&this._onDropIndexInfo.sourceIndex>=0&&this._onDropIndexInfo.targetIndex>=0){var t=e.columns,n=void 0===t?vr:t,r=this.props.columns,o=void 0===r?vr:r;n[this._onDropIndexInfo.sourceIndex].key===o[this._onDropIndexInfo.targetIndex].key&&(this._onDropIndexInfo={sourceIndex:-1,targetIndex:-1})}this.props.isAllCollapsed!==e.isAllCollapsed&&this.setState({isAllCollapsed:this.props.isAllCollapsed})},t.prototype.componentWillUnmount=function(){this._subscriptionObject&&(this._subscriptionObject.dispose(),delete this._subscriptionObject),this._dragDropHelper.dispose(),this._events.dispose()},t.prototype.render=function(){var e=this,t=this.props,n=t.columns,r=void 0===n?vr:n,o=t.ariaLabel,a=t.ariaLabelForToggleAllGroupsButton,i=t.ariaLabelForSelectAllCheckbox,s=t.selectAllVisibility,l=t.ariaLabelForSelectionColumn,c=t.indentWidth,u=t.onColumnClick,d=t.onColumnContextMenu,p=t.onRenderColumnHeaderTooltip,h=void 0===p?this._onRenderColumnHeaderTooltip:p,f=t.styles,C=t.selectionMode,G=t.theme,m=t.onRenderDetailsCheckbox,A=t.groupNestingDepth,T=t.useFastIcons,g=t.checkboxVisibility,y=t.className,v=this.state,b=v.isAllSelected,x=v.columnResizeDetails,w=v.isSizing,k=v.isAllCollapsed,I=s!==hr.none,S=s===hr.hidden,N=g===qe.always,E=this._getColumnReorderProps(),R=E&&E.frozenColumnCountFromStart?E.frozenColumnCountFromStart:0,D=E&&E.frozenColumnCountFromEnd?E.frozenColumnCountFromEnd:0;this._classNames=yr(f,{theme:G,isAllSelected:b,isSelectAllHidden:s===hr.hidden,isResizingColumn:!!x&&w,isSizing:w,isAllCollapsed:k,isCheckboxHidden:S,className:y});var F=this._classNames,M=T?on:Gn,O=A>0,L=O&&this.props.collapseAllVisibility===Vn.visible,P=this._computeColumnIndexOffset(I),z=(0,xe.jI)(G);return _.createElement(en,{role:"row","aria-label":o,className:F.root,componentRef:this._rootComponent,elementRef:this._rootElement,onMouseMove:this._onRootMouseMove,"data-automationid":"DetailsHeader",direction:ct.horizontal},I?[_.createElement("div",{key:"__checkbox",className:F.cellIsCheck,"aria-labelledby":"".concat(this._id,"-checkTooltip"),onClick:S?void 0:this._onSelectAllClicked,role:"columnheader"},h({hostClassName:F.checkTooltip,id:"".concat(this._id,"-checkTooltip"),setAriaDescribedBy:!1,content:i,children:_.createElement(fr,{id:"".concat(this._id,"-check"),"aria-label":C===Zn.multiple?i:l,"data-is-focusable":!S||void 0,isHeader:!0,selected:b,anySelected:!1,canSelect:!S,className:F.check,onRenderDetailsCheckbox:m,useFastIcons:T,isVisible:N})},this._onRenderColumnHeaderTooltip)),this.props.onRenderColumnHeaderTooltip?null:i&&!S?_.createElement("label",{key:"__checkboxLabel",id:"".concat(this._id,"-checkTooltip"),className:F.accessibleLabel,"aria-hidden":!0},i):l&&S?_.createElement("label",{key:"__checkboxLabel",id:"".concat(this._id,"-checkTooltip"),className:F.accessibleLabel,"aria-hidden":!0},l):null]:null,L?_.createElement("div",{className:F.cellIsGroupExpander,onClick:this._onToggleCollapseAll,"data-is-focusable":!0,"aria-label":a,"aria-expanded":!k,role:"columnheader"},_.createElement(M,{className:F.collapseButton,iconName:z?"ChevronLeftMed":"ChevronRightMed"}),_.createElement("span",{className:F.accessibleLabel},a)):O?_.createElement("div",{className:F.cellIsGroupExpander,"data-is-focusable":!1,role:"columnheader"}):null,_.createElement(Un,{indentWidth:c,role:"gridcell",count:A-1}),r.map((function(t,n){var o=!!E&&(n>=R&&n<r.length-D);return[E&&(o||n===r.length-D)&&e._renderDropHint(n),_.createElement(gr,{column:t,styles:t.styles,key:t.key,columnIndex:P+n,parentId:e._id,isDraggable:o,updateDragInfo:e._updateDragInfo,dragDropHelper:e._dragDropHelper,onColumnClick:u,onColumnContextMenu:d,onRenderColumnHeaderTooltip:e.props.onRenderColumnHeaderTooltip,isDropped:e._onDropIndexInfo.targetIndex===n,cellStyleProps:e.props.cellStyleProps,useFastIcons:T}),e._renderColumnDivider(n)]})),E&&0===D&&this._renderDropHint(r.length),w&&_.createElement(Wn,null,_.createElement("div",{className:F.sizingOverlay,onMouseMove:this._onSizerMouseMove,onMouseUp:this._onSizerMouseUp})))},t.prototype.focus=function(){var e;return!!(null===(e=this._rootComponent.current)||void 0===e?void 0:e.focus())},t.prototype._getColumnReorderProps=function(){var e=this.props,t=e.columnReorderOptions;return e.columnReorderProps||t&&(0,V.Cl)((0,V.Cl)({},t),{onColumnDragEnd:void 0})},t.prototype._getHeaderDragDropOptions=function(){return{selectionIndex:1,context:{data:this,index:0},canDrag:function(){return!1},canDrop:function(){return!0},onDragStart:function(){},updateDropState:this._updateDroppingState,onDrop:this._onDrop,onDragEnd:function(){},onDragOver:this._onDragOver}},t.prototype._isValidCurrentDropHintIndex=function(){return this._currentDropHintIndex>=0},t.prototype._isCheckboxColumnHidden=function(){var e=this.props,t=e.selectionMode,n=e.checkboxVisibility;return t===Zn.none||n===qe.hidden},t.prototype._resetDropHints=function(){this._currentDropHintIndex>=0&&(this._updateDropHintElement(this._dropHintDetails[this._currentDropHintIndex].dropHintElementRef,"none"),this._currentDropHintIndex=-1)},t.prototype._updateDropHintElement=function(e,t){e.childNodes[1].style.display=t,e.childNodes[0].style.display=t},t.prototype._isEventOnHeader=function(e){if(this._rootElement.current){var t=this._rootElement.current.getBoundingClientRect();if(e.clientX>t.left&&e.clientX<t.right&&e.clientY>t.top&&e.clientY<t.bottom)return je.header}},t.prototype._renderColumnDivider=function(e){var t=this.props.columns,n=(void 0===t?vr:t)[e],r=n.onRenderDivider;return r?r({column:n,columnIndex:e},this._renderColumnSizer):this._renderColumnSizer({column:n,columnIndex:e})},t.prototype._renderDropHint=function(e){var t=this._classNames,n=this.props.useFastIcons?on:Gn;return _.createElement("div",{key:"dropHintKey",className:t.dropHintStyle,id:"columnDropHint_".concat(e)},_.createElement("div",{role:"presentation",key:"dropHintCircleKey",className:t.dropHintCaretStyle,"data-is-focusable":!1,"data-sizer-index":e,"aria-hidden":!0},_.createElement(n,{iconName:"CircleShapeSolid"})),_.createElement("div",{key:"dropHintLineKey","aria-hidden":!0,"data-is-focusable":!1,"data-sizer-index":e,className:t.dropHintLineStyle}))},t.prototype._onSizerDoubleClick=function(e,t){var n=this.props,r=n.onColumnAutoResized,o=n.columns;r&&r((void 0===o?vr:o)[e],e)},t.prototype._onSelectionChanged=function(){var e=!!this.props.selection&&this.props.selection.isAllSelected();this.state.isAllSelected!==e&&this.setState({isAllSelected:e})},t.defaultProps={selectAllVisibility:hr.visible,collapseAllVisibility:Vn.visible,useFastIcons:!0},t}(_.Component);function xr(e,t,n,r){return e?t<=n&&t>=r:t>=n&&t<=r}function wr(e,t,n){return e?t>=n:t<=n}function kr(e,t,n){return e?t<=n:t>=n}function Ir(e){e.stopPropagation()}var _r=(0,ye.I)(br,(function(e){var t,n,r,o,a=e.theme,i=e.className,s=e.isAllSelected,l=e.isResizingColumn,c=e.isSizing,u=e.isAllCollapsed,d=e.cellStyleProps,p=void 0===d?nr:d,h=a.semanticColors,f=a.palette,C=a.fonts,G=(0,Lt.Km)(ar,a),m={iconForegroundColor:h.bodySubtext,headerForegroundColor:h.bodyText,headerBackgroundColor:h.bodyBackground,resizerColor:f.neutralTertiaryAlt},A={opacity:1,transition:"opacity 0.3s linear"},T=ir(e);return{root:[G.root,C.small,{display:"inline-block",background:m.headerBackgroundColor,position:"relative",minWidth:"100%",verticalAlign:"top",height:42,lineHeight:42,whiteSpace:"nowrap",boxSizing:"content-box",paddingBottom:"1px",paddingTop:"16px",borderBottom:"1px solid ".concat(h.bodyDivider),cursor:"default",userSelect:"none",selectors:(t={},t["&:hover .".concat(G.check)]={opacity:1},t["& .".concat(G.tooltipHost," .").concat(G.checkTooltip)]={display:"block"},t)},s&&G.isAllSelected,l&&G.isResizingColumn,i],check:[G.check,{height:42},{selectors:(n={},n[".".concat(Ee.Y2," &:focus")]={opacity:1},n)}],cellWrapperPadded:{paddingRight:p.cellExtraRightPadding+p.cellRightPadding},cellIsCheck:[T,G.cellIsCheck,{position:"relative",padding:0,margin:0,display:"inline-flex",alignItems:"center",border:"none"},s&&{opacity:1}],cellIsGroupExpander:[T,{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:C.small.fontSize,padding:0,border:"none",width:36,color:f.neutralSecondary,selectors:{":hover":{backgroundColor:f.neutralLighter},":active":{backgroundColor:f.neutralLight}}}],cellIsActionable:{selectors:{":hover":{color:h.bodyText,background:h.listHeaderBackgroundHovered},":active":{background:h.listHeaderBackgroundPressed}}},cellIsEmpty:{textOverflow:"clip"},cellSizer:[G.cellSizer,(0,Lt.QN)(),{display:"inline-block",position:"relative",cursor:"ew-resize",bottom:0,top:0,overflow:"hidden",height:"inherit",background:"transparent",zIndex:1,width:16,selectors:(r={":after":{content:'""',position:"absolute",top:0,bottom:0,width:1,background:m.resizerColor,opacity:0,left:"50%"},":focus:after":A,":hover:after":A},r["&.".concat(G.isResizing,":after")]=[A,{boxShadow:"0 0 5px 0 rgba(0, 0, 0, 0.4)"}],r)}],cellIsResizing:G.isResizing,cellSizerStart:{margin:"0 -8px"},cellSizerEnd:{margin:0,marginLeft:-16},collapseButton:[G.collapseButton,{transformOrigin:"50% 50%",transition:"transform .1s linear"},u?[G.isCollapsed,{transform:"rotate(0deg)"}]:{transform:(0,xe.jI)(a)?"rotate(-90deg)":"rotate(90deg)"}],checkTooltip:G.checkTooltip,sizingOverlay:c&&{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"ew-resize",background:"rgba(255, 255, 255, 0)",selectors:(o={},o[Lt.up]=(0,V.Cl)({background:"transparent"},(0,Lt.Qg)()),o)},accessibleLabel:Lt.dX,dropHintCircleStyle:[G.dropHintCircleStyle,{display:"inline-block",visibility:"hidden",position:"absolute",bottom:0,height:9,width:9,borderRadius:"50%",marginLeft:-5,top:34,overflow:"visible",zIndex:10,border:"1px solid ".concat(f.themePrimary),background:f.white}],dropHintCaretStyle:[G.dropHintCaretStyle,{display:"none",position:"absolute",top:-28,left:-6.5,fontSize:C.medium.fontSize,color:f.themePrimary,overflow:"visible",zIndex:10}],dropHintLineStyle:[G.dropHintLineStyle,{display:"none",position:"absolute",bottom:0,top:0,overflow:"hidden",height:42,width:1,background:f.themePrimary,zIndex:10}],dropHintStyle:{display:"inline-block",position:"absolute"}}}),void 0,{scope:"DetailsHeader"});var Sr=(0,be.J5)((function(e){var t=e;return(0,be.J5)((function(n){if(e===n)throw new Error("Attempted to compose a component with itself.");var r=n,o=(0,be.J5)((function(e){return function(t){return _.createElement(r,(0,V.Cl)({},t,{defaultRender:e}))}}));return function(e){var n=e.defaultRender;return _.createElement(t,(0,V.Cl)({},e,{defaultRender:n?o(n):r}))}}))}));function Nr(e,t){return Sr(e)(t)}var Er=function(e){var t=e.columns,n=e.rowClassNames,r=e.cellStyleProps,o=void 0===r?nr:r,a=e.item,i=e.itemIndex,s=e.isSelected,l=e.onRenderItemColumn,c=e.getCellValueKey,u=e.onRenderField,d=e.cellsByColumn,p=e.enableUpdateAnimations,h=e.rowHeaderId,f=_.useRef(),C=f.current||(f.current={}),G=_.useCallback((function(e){var t=e.column,r=e.cellValueKey,a=e.className,i=e.onRender,s=e.item,l=e.itemIndex,c="undefined"===typeof t.calculatedWidth?"auto":t.calculatedWidth+o.cellLeftPadding+o.cellRightPadding+(t.isPadded?o.cellExtraRightPadding:0),u="".concat(t.key).concat(void 0!==r?"-".concat(r):"");return _.createElement("div",{key:u,id:t.isRowHeader?h:void 0,role:t.isRowHeader?"rowheader":"gridcell",className:ke(t.className,t.isMultiline&&n.isMultiline,t.isRowHeader&&n.isRowHeader,n.cell,t.isPadded?n.cellPadded:n.cellUnpadded,a),style:{width:c},"data-automationid":"DetailsRowCell","data-automation-key":t.key},i(s,l,t))}),[n,o,h]);return _.createElement("div",{className:n.fields,"data-automationid":"DetailsRowFields",role:"presentation"},t.map((function(e){var t=e.getValueKey,r=void 0===t?c:t,o=d&&e.key in d&&function(){return d[e.key]}||e.onRender||l||Rr,h=G;e.onRenderField&&(h=Kn(e.onRenderField,h)),u&&(h=Kn(u,h));var f=C[e.key],m=p&&r?r(a,i,e):void 0,A=!1;return void 0!==m&&void 0!==f&&m!==f&&(A=!0),C[e.key]=m,h({item:a,itemIndex:i,isSelected:s,column:e,cellValueKey:m,className:A?n.cellAnimation:void 0,onRender:o})})))};function Rr(e,t,n){return e&&n?function(e,t){var n=e&&t&&t.fieldName?e[t.fieldName]:"";return null!==n&&void 0!==n||(n=""),"boolean"===typeof n?n.toString():n}(e,n):null}var Dr=(0,ve.Z)(),Fr=[],Mr=function(e){function t(t){var n=e.call(this,t)||this;return n._root=_.createRef(),n._cellMeasurer=_.createRef(),n._focusZone=_.createRef(),n._onSelectionChanged=function(){var e=Or(n.props);Qe(e,n.state.selectionState)||n.setState({selectionState:e})},n._updateDroppingState=function(e,t){var r=n.state.isDropping,o=n.props,a=o.dragDropEvents,i=o.item;e?a.onDragEnter&&(n._droppingClassNames=a.onDragEnter(i,t)):a.onDragLeave&&a.onDragLeave(i,t),r!==e&&n.setState({isDropping:e})},W(n),n._events=new tt(n),n.state={selectionState:Or(t),columnMeasureInfo:void 0,isDropping:!1},n._droppingClassNames="",n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){return(0,V.Cl)((0,V.Cl)({},t),{selectionState:Or(e)})},t.prototype.componentDidMount=function(){var e=this.props,t=e.dragDropHelper,n=e.selection,r=e.item,o=e.onDidMount;t&&this._root.current&&(this._dragDropSubscription=t.subscribe(this._root.current,this._events,this._getRowDragDropOptions())),n&&this._events.on(n,lr,this._onSelectionChanged),o&&r&&(this._onDidMountCalled=!0,o(this))},t.prototype.componentDidUpdate=function(e){var t=this.state,n=this.props,r=n.item,o=n.onDidMount,a=t.columnMeasureInfo;if(this.props.itemIndex===e.itemIndex&&this.props.item===e.item&&this.props.dragDropHelper===e.dragDropHelper||(this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this.props.dragDropHelper&&this._root.current&&(this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getRowDragDropOptions()))),a&&a.index>=0&&this._cellMeasurer.current){var i=this._cellMeasurer.current.getBoundingClientRect().width;a.onMeasureDone(i),this.setState({columnMeasureInfo:void 0})}r&&o&&!this._onDidMountCalled&&(this._onDidMountCalled=!0,o(this))},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.item,n=e.onWillUnmount;n&&t&&n(this),this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this._events.dispose()},t.prototype.shouldComponentUpdate=function(e,t){if(this.props.useReducedRowRenderer){var n=Or(e);return this.state.selectionState.isSelected!==n.isSelected||!Qe(this.props,e)}return!0},t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.columns,o=void 0===r?Fr:r,a=t.dragDropEvents,i=t.item,s=t.itemIndex,l=t.id,c=t.flatIndexOffset,u=void 0===c?2:c,d=t.onRenderCheck,p=void 0===d?this._onRenderCheck:d,h=t.onRenderDetailsCheckbox,f=t.onRenderItemColumn,C=t.onRenderField,G=t.getCellValueKey,m=t.selectionMode,A=t.checkboxVisibility,T=t.getRowAriaLabel,g=t.getRowAriaDescription,y=t.getRowAriaDescribedBy,v=t.isGridRow,b=t.checkButtonAriaLabel,x=t.checkboxCellClassName,w=t.rowFieldsAs,k=t.selection,I=t.indentWidth,S=t.enableUpdateAnimations,N=t.compact,E=t.theme,R=t.styles,D=t.cellsByColumn,F=t.groupNestingDepth,M=t.useFastIcons,O=void 0===M||M,L=t.cellStyleProps,P=t.group,z=t.focusZoneProps,B=t.disabled,H=void 0!==B&&B,W=this.state,U=W.columnMeasureInfo,j=W.isDropping,K=this.state.selectionState,q=K.isSelected,X=void 0!==q&&q,Y=K.isSelectionModal,Z=void 0!==Y&&Y,J=a?!(!a.canDrag||!a.canDrag(i)):void 0,Q=j?this._droppingClassNames||"is-dropping":"",$=T?T(i):void 0,ee=g?g(i):void 0,te=y?y(i):void 0,ne=!!k&&k.canSelectItem(i,s)&&!H,re=m===Zn.multiple,oe=m!==Zn.none&&A!==qe.hidden,ae=m===Zn.none?void 0:X,ie=P?s-P.startIndex+1:void 0,se=P?P.count:void 0,le=z?z.direction:ct.horizontal;this._classNames=(0,V.Cl)((0,V.Cl)({},this._classNames),Dr(R,{theme:E,isSelected:X,canSelect:!re,anySelected:Z,checkboxCellClassName:x,droppingClassName:Q,className:n,compact:N,enableUpdateAnimations:S,cellStyleProps:L,disabled:H}));var ce={isMultiline:this._classNames.isMultiline,isRowHeader:this._classNames.isRowHeader,cell:this._classNames.cell,cellAnimation:this._classNames.cellAnimation,cellPadded:this._classNames.cellPadded,cellUnpadded:this._classNames.cellUnpadded,fields:this._classNames.fields};Qe(this._rowClassNames||{},ce)||(this._rowClassNames=ce);var ue=w?Nr(w,Er):Er,de=_.createElement(ue,{rowClassNames:this._rowClassNames,rowHeaderId:"".concat(l,"-header"),cellsByColumn:D,columns:o,item:i,itemIndex:s,isSelected:X,columnStartIndex:(oe?1:0)+(F?1:0),onRenderItemColumn:f,onRenderField:C,getCellValueKey:G,enableUpdateAnimations:S,cellStyleProps:L}),pe=this.props.role?this.props.role:"row";this._ariaRowDescriptionId=st("DetailsRow-description");var he=o.some((function(e){return!!e.isRowHeader})),fe="".concat(l,"-checkbox")+(he?" ".concat(l,"-header"):""),Ce=v?{}:{"aria-level":F&&F+1||void 0,"aria-posinset":ie,"aria-setsize":se};return _.createElement(en,(0,V.Cl)({"data-is-focusable":!0},Te(this.props,Ae),"boolean"===typeof J?{"data-is-draggable":J,draggable:J}:{},z,Ce,{direction:le,elementRef:this._root,componentRef:this._focusZone,role:pe,"aria-label":$,"aria-disabled":H||void 0,"aria-describedby":ee?this._ariaRowDescriptionId:te,className:this._classNames.root,"data-selection-index":s,"data-selection-touch-invoke":!0,"data-selection-disabled":null!==(e=this.props["data-selection-disabled"])&&void 0!==e?e:H||void 0,"data-item-index":s,"aria-rowindex":void 0===ie?s+u:void 0,"data-automationid":"DetailsRow","aria-selected":ae,allowFocusRoot:!0}),ee?_.createElement("span",{key:"description",role:"presentation",hidden:!0,id:this._ariaRowDescriptionId},ee):null,oe&&_.createElement("div",{role:"gridcell","data-selection-toggle":!0,className:this._classNames.checkCell},p({id:l?"".concat(l,"-checkbox"):void 0,selected:X,selectionMode:m,anySelected:Z,"aria-label":b,"aria-labelledby":l?fe:void 0,canSelect:ne,compact:N,className:this._classNames.check,theme:E,isVisible:A===qe.always,onRenderDetailsCheckbox:h,useFastIcons:O})),_.createElement(Un,{indentWidth:I,role:"gridcell",count:0===F?-1:F}),i&&de,U&&_.createElement("span",{role:"presentation",className:ke(this._classNames.cellMeasurer,this._classNames.cell),ref:this._cellMeasurer},_.createElement(ue,{rowClassNames:this._rowClassNames,rowHeaderId:"".concat(l,"-header"),columns:[U.column],item:i,itemIndex:s,columnStartIndex:(oe?1:0)+(F?1:0)+o.length,onRenderItemColumn:f,getCellValueKey:G})))},t.prototype.measureCell=function(e,t){var n=this.props.columns,r=void 0===n?Fr:n,o=(0,V.Cl)({},r[e]);o.minWidth=0,o.maxWidth=999999,delete o.calculatedWidth,this.setState({columnMeasureInfo:{index:e,column:o,onMeasureDone:t}})},t.prototype.focus=function(e){var t;return void 0===e&&(e=!1),!!(null===(t=this._focusZone.current)||void 0===t?void 0:t.focus(e))},t.prototype._onRenderCheck=function(e){return _.createElement(fr,(0,V.Cl)({},e))},t.prototype._getRowDragDropOptions=function(){var e=this.props,t=e.item,n=e.itemIndex,r=e.dragDropEvents;return{eventMap:e.eventsToRegister,selectionIndex:n,context:{data:t,index:n},canDrag:r.canDrag,canDrop:r.canDrop,onDragStart:r.onDragStart,updateDropState:this._updateDroppingState,onDrop:r.onDrop,onDragEnd:r.onDragEnd,onDragOver:r.onDragOver}},t}(_.Component);function Or(e){var t,n=e.itemIndex,r=e.selection;return{isSelected:!!(null===r||void 0===r?void 0:r.isIndexSelected(n)),isSelectionModal:!!(null===(t=null===r||void 0===r?void 0:r.isModal)||void 0===t?void 0:t.call(r))}}var Lr=(0,ye.I)(Mr,(function(e){var t,n,r,o,a,i,s,l,c,u,d,p,h,f,C=e.theme,G=e.isSelected,m=e.canSelect,A=e.droppingClassName,T=e.isCheckVisible,g=e.checkboxCellClassName,y=e.compact,v=e.className,b=e.cellStyleProps,x=void 0===b?nr:b,w=e.enableUpdateAnimations,k=e.disabled,I=C.palette,_=C.fonts,S=I.neutralPrimary,N=I.white,E=I.neutralSecondary,R=I.neutralLighter,D=I.neutralLight,F=I.neutralDark,M=I.neutralQuaternaryAlt,O=C.semanticColors,L=O.focusBorder,P=O.linkHovered,z=(0,Lt.Km)(tr,C),B={defaultHeaderText:S,defaultMetaText:E,defaultBackground:N,defaultHoverHeaderText:F,defaultHoverMetaText:S,defaultHoverBackground:R,selectedHeaderText:F,selectedMetaText:S,selectedBackground:D,selectedHoverHeaderText:F,selectedHoverMetaText:S,selectedHoverBackground:M,focusHeaderText:F,focusMetaText:S,focusBackground:D,focusHoverBackground:M},H=[(0,Lt.gm)(C,{inset:-1,borderColor:L,outlineColor:N,highContrastStyle:{top:2,right:2,bottom:2,left:2},pointerEvents:"none"}),z.isSelected,{color:B.selectedMetaText,background:B.selectedBackground,borderBottom:"1px solid ".concat(N),selectors:(t={"&:before":{position:"absolute",display:"block",top:-1,height:1,bottom:0,left:0,right:0,content:"",borderTop:"1px solid ".concat(N)}},t[".".concat(z.cell," > .").concat(er.root)]={color:P,selectors:(n={},n[Lt.up]={color:"HighlightText"},n)},t["&:hover"]={background:B.selectedHoverBackground,color:B.selectedHoverMetaText,selectors:(r={},r[Lt.up]={background:"Highlight",selectors:(o={},o[".".concat(z.cell)]={color:"HighlightText"},o[".".concat(z.cell," > .").concat(er.root)]={forcedColorAdjust:"none",color:"HighlightText"},o)},r[".".concat(z.isRowHeader)]={color:B.selectedHoverHeaderText,selectors:(a={},a[Lt.up]={color:"HighlightText"},a)},r)},t["&:focus"]={background:B.focusBackground,selectors:(i={},i[".".concat(z.cell)]={color:B.focusMetaText,selectors:(s={},s[Lt.up]={color:"HighlightText",selectors:{"> a":{color:"HighlightText"}}},s)},i[".".concat(z.isRowHeader)]={color:B.focusHeaderText,selectors:(l={},l[Lt.up]={color:"HighlightText"},l)},i[Lt.up]={background:"Highlight"},i)},t[Lt.up]=(0,V.Cl)((0,V.Cl)({background:"Highlight",color:"HighlightText"},(0,Lt.Qg)()),{selectors:{a:{color:"HighlightText"}}}),t["&:focus:hover"]={background:B.focusHoverBackground},t)}],W=[z.isContentUnselectable,{userSelect:"none",cursor:"default"}],U={minHeight:or.compactRowHeight,border:0},j={minHeight:or.compactRowHeight,paddingTop:or.compactRowVerticalPadding,paddingBottom:or.compactRowVerticalPadding,paddingLeft:"".concat(x.cellLeftPadding,"px")},K=[(0,Lt.gm)(C,{inset:-1}),z.cell,{display:"inline-block",position:"relative",boxSizing:"border-box",minHeight:or.rowHeight,verticalAlign:"top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingTop:or.rowVerticalPadding,paddingBottom:or.rowVerticalPadding,paddingLeft:"".concat(x.cellLeftPadding,"px"),selectors:(c={"& > button":{maxWidth:"100%"}},c["[data-is-focusable='true']"]=(0,Lt.gm)(C,{inset:-1,borderColor:E,outlineColor:N}),c)},G&&{selectors:(u={},u[Lt.up]=(0,V.Cl)({background:"Highlight",color:"HighlightText"},(0,Lt.Qg)()),u)},y&&j,k&&{opacity:.5}];return{root:[z.root,Lt.lw.fadeIn400,A,C.fonts.small,T&&z.isCheckVisible,(0,Lt.gm)(C,{borderColor:L,outlineColor:N}),{borderBottom:"1px solid ".concat(R),background:B.defaultBackground,color:B.defaultMetaText,display:"inline-flex",minWidth:"100%",minHeight:or.rowHeight,whiteSpace:"nowrap",padding:0,boxSizing:"border-box",verticalAlign:"top",textAlign:"left",selectors:(d={},d[".".concat(z.listCellFirstChild," &:before")]={display:"none"},d["&:hover"]={background:B.defaultHoverBackground,color:B.defaultHoverMetaText,selectors:(p={},p[".".concat(z.isRowHeader)]={color:B.defaultHoverHeaderText},p[".".concat(z.cell," > .").concat(er.root)]={color:P},p)},d["&:hover .".concat(z.check)]={opacity:1},d[".".concat(Ee.Y2," &:focus .").concat(z.check)]={opacity:1},d[".ms-GroupSpacer"]={flexShrink:0,flexGrow:0},d)},G&&H,!m&&W,y&&U,v],cellUnpadded:{paddingRight:"".concat(x.cellRightPadding,"px")},cellPadded:{paddingRight:"".concat(x.cellExtraRightPadding+x.cellRightPadding,"px"),selectors:(h={},h["&.".concat(z.cellCheck)]={paddingRight:0},h)},cell:K,cellAnimation:w&&Lt.Dm.slideLeftIn40,cellMeasurer:[z.cellMeasurer,{overflow:"visible",whiteSpace:"nowrap"}],checkCell:[K,z.cellCheck,g,{padding:0,paddingTop:1,marginTop:-1,flexShrink:0}],fields:[z.fields,{display:"flex",alignItems:"stretch"}],isRowHeader:[z.isRowHeader,{color:B.defaultHeaderText,fontSize:_.medium.fontSize},G&&{color:B.selectedHeaderText,fontWeight:Lt.BO.semibold,selectors:(f={},f[Lt.up]={color:"HighlightText"},f)}],isMultiline:[K,{whiteSpace:"normal",wordBreak:"break-word",textOverflow:"clip"}],check:[z.check]}}),void 0,{scope:"DetailsRow"}),Pr="data-selection-index",zr="data-selection-toggle",Br="data-selection-invoke",Vr="data-selection-all-toggle",Hr=function(e){function t(t){var n=e.call(this,t)||this;n._root=_.createRef(),n.ignoreNextFocus=function(){n._handleNextFocus(!1)},n._onSelectionChange=function(){var e=n.props.selection,t=e.isModal&&e.isModal();n.setState({isModal:t})},n._onMouseDownCapture=function(e){var t=e.target,r=(0,_e.z)(n._root.current),o=null===r||void 0===r?void 0:r.document;if((null===o||void 0===o?void 0:o.activeElement)===t||Ze(null===o||void 0===o?void 0:o.activeElement,t)){if(Ze(t,n._root.current))for(;t!==n._root.current;){if(n._hasAttribute(t,Br)){n.ignoreNextFocus();break}t=Ye(t)}}else n.ignoreNextFocus()},n._onFocus=function(e){var t=e.target,r=n.props.selection,o=n._isCtrlPressed||n._isMetaPressed,a=n._getSelectionMode();if(n._shouldHandleFocus&&a!==Zn.none){var i=n._hasAttribute(t,zr),s=n._findItemRoot(t);if(!i&&s){var l=n._getItemIndex(s);void 0===n._getItemSpan(s)&&(o?(r.setIndexSelected(l,r.isIndexSelected(l),!0),n.props.enterModalOnTouch&&n._isTouch&&r.setModal&&(r.setModal(!0),n._setIsTouch(!1))):n.props.isSelectedOnFocus&&n._onItemSurfaceClick("focus",l))}}n._handleNextFocus(!1)},n._onMouseDown=function(e){n._updateModifiers(e);var t=n.props.toggleWithoutModifierPressed,r=e.target,o=n._findItemRoot(r);if(!n._isSelectionDisabled(r))for(;r!==n._root.current&&!n._hasAttribute(r,Vr);){if(o){if(n._hasAttribute(r,zr))break;if(n._hasAttribute(r,Br))break;if(!(r!==o&&!n._shouldAutoSelect(r)||n._isShiftPressed||n._isCtrlPressed||n._isMetaPressed||t)){n._onInvokeMouseDown(e,n._getItemIndex(o),n._getItemSpan(o));break}if(n.props.disableAutoSelectOnInputElements&&("A"===r.tagName||"BUTTON"===r.tagName||"INPUT"===r.tagName))return}r=Ye(r)}},n._onTouchStartCapture=function(e){n._setIsTouch(!0)},n._onClick=function(e){var t=n.props.enableTouchInvocationTarget,r=void 0!==t&&t;n._updateModifiers(e);for(var o=e.target,a=n._findItemRoot(o),i=n._isSelectionDisabled(o);o!==n._root.current;){if(n._hasAttribute(o,Vr)){i||n._onToggleAllClick(e);break}if(a){var s=n._getItemIndex(a),l=n._getItemSpan(a);if(n._hasAttribute(o,zr)){i||(n._isShiftPressed?n._onItemSurfaceClick("click",s,l):n._onToggleClick(e,s,l));break}if(n._isTouch&&r&&n._hasAttribute(o,"data-selection-touch-invoke")||n._hasAttribute(o,Br)){void 0===l&&n._onInvokeClick(e,s);break}if(o===a){i||n._onItemSurfaceClick("click",s,l);break}if("A"===o.tagName||"BUTTON"===o.tagName||"INPUT"===o.tagName)return}o=Ye(o)}},n._onContextMenu=function(e){var t=e.target,r=n.props,o=r.onItemContextMenu,a=r.selection;if(o){var i=n._findItemRoot(t);if(i){var s=n._getItemIndex(i);n._onInvokeMouseDown(e,s),o(a.getItems()[s],s,e.nativeEvent)||e.preventDefault()}}},n._onDoubleClick=function(e){var t=e.target,r=n.props.onItemInvoked,o=n._findItemRoot(t);if(o&&r&&!n._isInputElement(t)){for(var a=n._getItemIndex(o);t!==n._root.current&&!n._hasAttribute(t,zr)&&!n._hasAttribute(t,Br);){if(t===o){n._onInvokeClick(e,a);break}t=Ye(t)}t=Ye(t)}},n._onKeyDownCapture=function(e){n._updateModifiers(e),n._handleNextFocus(!0)},n._onKeyDown=function(e){n._updateModifiers(e);var t=e.target,r=n._isSelectionDisabled(t),o=n.props,a=o.selection,i=o.selectionClearedOnEscapePress,s=e.which===we.c.a&&(n._isCtrlPressed||n._isMetaPressed),l=e.which===we.c.escape;if(!n._isInputElement(t)){var c=n._getSelectionMode();if(s&&c===Zn.multiple&&!a.isAllSelected())return r||a.setAllSelected(!0),e.stopPropagation(),void e.preventDefault();if(i&&l&&a.getSelectedCount()>0)return r||a.setAllSelected(!1),e.stopPropagation(),void e.preventDefault();var u=n._findItemRoot(t);if(u)for(var d=n._getItemIndex(u),p=n._getItemSpan(u);t!==n._root.current&&!n._hasAttribute(t,zr);){if(n._shouldAutoSelect(t)){r||void 0!==p||n._onInvokeMouseDown(e,d,p);break}if(!(e.which!==we.c.enter&&e.which!==we.c.space||"BUTTON"!==t.tagName&&"A"!==t.tagName&&"INPUT"!==t.tagName&&"SUMMARY"!==t.tagName))return!1;if(t===u){if(e.which===we.c.enter)return void(void 0===p&&(n._onInvokeClick(e,d),e.preventDefault()));if(e.which===we.c.space)return r||n._onToggleClick(e,d,p),void e.preventDefault();break}t=Ye(t)}}},n._events=new tt(n),n._async=new Xe(n),W(n);var r=n.props.selection,o=r.isModal&&r.isModal();return n.state={isModal:o},n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.selection.isModal&&e.selection.isModal();return(0,V.Cl)((0,V.Cl)({},t),{isModal:n})},t.prototype.componentDidMount=function(){var e=(0,_e.z)(this._root.current),t=null===e||void 0===e?void 0:e.document;this._events.on(e,"keydown, keyup",this._updateModifiers,!0),this._events.on(t,"click",this._findScrollParentAndTryClearOnEmptyClick),this._events.on(null===t||void 0===t?void 0:t.body,"touchstart",this._onTouchStartCapture,!0),this._events.on(null===t||void 0===t?void 0:t.body,"touchend",this._onTouchStartCapture,!0),this._events.on(this.props.selection,"change",this._onSelectionChange)},t.prototype.render=function(){var e=this.state.isModal;return _.createElement("div",{className:ke("ms-SelectionZone",this.props.className,{"ms-SelectionZone--modal":!!e}),ref:this._root,onKeyDown:this._onKeyDown,onMouseDown:this._onMouseDown,onKeyDownCapture:this._onKeyDownCapture,onClick:this._onClick,role:"presentation",onDoubleClick:this._onDoubleClick,onContextMenu:this._onContextMenu,onMouseDownCapture:this._onMouseDownCapture,onFocusCapture:this._onFocus,"data-selection-is-modal":!!e||void 0},this.props.children,_.createElement(Pe,null))},t.prototype.componentDidUpdate=function(e){var t=this.props.selection;t!==e.selection&&(this._events.off(e.selection),this._events.on(t,"change",this._onSelectionChange))},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose()},t.prototype._isSelectionDisabled=function(e){if(this._getSelectionMode()===Zn.none)return!0;for(;e!==this._root.current;){if(this._hasAttribute(e,"data-selection-disabled"))return!0;e=Ye(e)}return!1},t.prototype._onToggleAllClick=function(e){var t=this.props.selection;this._getSelectionMode()===Zn.multiple&&(t.toggleAllSelected(),e.stopPropagation(),e.preventDefault())},t.prototype._onToggleClick=function(e,t,n){var r=this.props.selection,o=this._getSelectionMode();if(r.setChangeEvents(!1),this.props.enterModalOnTouch&&this._isTouch&&(void 0!==n?!r.isRangeSelected(t,n):!r.isIndexSelected(t))&&r.setModal&&(r.setModal(!0),this._setIsTouch(!1)),o===Zn.multiple)void 0!==n?r.toggleRangeSelected(t,n):r.toggleIndexSelected(t);else{if(o!==Zn.single)return void r.setChangeEvents(!0);if(void 0===n||1===n){var a=r.isIndexSelected(t),i=r.isModal&&r.isModal();r.setAllSelected(!1),r.setIndexSelected(t,!a,!0),i&&r.setModal&&r.setModal(!0)}}r.setChangeEvents(!0),e.stopPropagation()},t.prototype._onInvokeClick=function(e,t){var n=this.props,r=n.selection,o=n.onItemInvoked;o&&(o(r.getItems()[t],t,e.nativeEvent),e.preventDefault(),e.stopPropagation())},t.prototype._onItemSurfaceClick=function(e,t,n){var r,o=this.props,a=o.selection,i=o.toggleWithoutModifierPressed,s=this._isCtrlPressed||this._isMetaPressed,l=this._getSelectionMode();l===Zn.multiple?this._isShiftPressed&&!this._isTabPressed?void 0!==n?null===(r=a.selectToRange)||void 0===r||r.call(a,t,n,!s):a.selectToIndex(t,!s):"click"===e&&(s||i)?void 0!==n?a.toggleRangeSelected(t,n):a.toggleIndexSelected(t):this._clearAndSelectIndex(t,n):l===Zn.single&&this._clearAndSelectIndex(t,n)},t.prototype._onInvokeMouseDown=function(e,t,n){var r=this.props.selection;if(void 0!==n){if(r.isRangeSelected(t,n))return}else if(r.isIndexSelected(t))return;this._clearAndSelectIndex(t,n)},t.prototype._findScrollParentAndTryClearOnEmptyClick=function(e){var t=(0,_e.z)(this._root.current),n=null===t||void 0===t?void 0:t.document,r=Dt(this._root.current);this._events.off(n,"click",this._findScrollParentAndTryClearOnEmptyClick),this._events.on(r,"click",this._tryClearOnEmptyClick),(r&&e.target instanceof Node&&r.contains(e.target)||r===e.target)&&this._tryClearOnEmptyClick(e)},t.prototype._tryClearOnEmptyClick=function(e){!this.props.selectionPreservedOnEmptyClick&&this._isNonHandledClick(e.target)&&this.props.selection.setAllSelected(!1)},t.prototype._clearAndSelectIndex=function(e,t){var n,r=this.props,o=r.selection,a=r.selectionClearedOnSurfaceClick,i=void 0===a||a;if(!((void 0===t||1===t)&&1===o.getSelectedCount()&&o.isIndexSelected(e))&&i){var s=o.isModal&&o.isModal();o.setChangeEvents(!1),o.setAllSelected(!1),void 0!==t?null===(n=o.setRangeSelected)||void 0===n||n.call(o,e,t,!0,!0):o.setIndexSelected(e,!0,!0),(s||this.props.enterModalOnTouch&&this._isTouch)&&(o.setModal&&o.setModal(!0),this._isTouch&&this._setIsTouch(!1)),o.setChangeEvents(!0)}},t.prototype._updateModifiers=function(e){this._isShiftPressed=e.shiftKey,this._isCtrlPressed=e.ctrlKey,this._isMetaPressed=e.metaKey;var t=e.keyCode;this._isTabPressed=!!t&&t===we.c.tab},t.prototype._findItemRoot=function(e){for(var t=this.props.selection;e!==this._root.current;){var n=e.getAttribute(Pr),r=Number(n);if(null!==n&&r>=0&&r<t.getItems().length)break;e=Ye(e)}if(e!==this._root.current)return e},t.prototype._getItemIndex=function(e){var t,n=parseInt(null!==(t=e.getAttribute(Pr))&&void 0!==t?t:"",10);return isNaN(n)?-1:n},t.prototype._getItemSpan=function(e){var t,n=parseInt(null!==(t=e.getAttribute("data-selection-span"))&&void 0!==t?t:"",10);return isNaN(n)?void 0:n},t.prototype._shouldAutoSelect=function(e){return this._hasAttribute(e,"data-selection-select")},t.prototype._hasAttribute=function(e,t){for(var n=!1;!n&&e!==this._root.current;){var r=e.getAttribute(t);if("false"===r){n=!1;break}n="true"===r,e=Ye(e)}return n},t.prototype._isInputElement=function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||""===e.getAttribute("contenteditable")},t.prototype._isNonHandledClick=function(e){var t=(0,Je.Y)();if(t&&e)for(;e&&e!==t.documentElement;){if(xt(e)||e.hasAttribute("data-selection-index"))return!1;e=Ye(e)}return!0},t.prototype._handleNextFocus=function(e){var t=this;this._shouldHandleFocusTimeoutId&&(this._async.clearTimeout(this._shouldHandleFocusTimeoutId),this._shouldHandleFocusTimeoutId=void 0),this._shouldHandleFocus=e,e&&this._async.setTimeout((function(){t._shouldHandleFocus=!1}),100)},t.prototype._setIsTouch=function(e){var t=this;this._isTouchTimeoutId&&(this._async.clearTimeout(this._isTouchTimeoutId),this._isTouchTimeoutId=void 0),this._isTouch=!0,e&&this._async.setTimeout((function(){t._isTouch=!1}),300)},t.prototype._getSelectionMode=function(){var e=this.props.selection,t=this.props.selectionMode;return void 0===t?e?e.mode:Zn.none:t},t.defaultProps={isSelectedOnFocus:!0,toggleWithoutModifierPressed:!1,selectionMode:Zn.multiple,selectionClearedOnEscapePress:!0},t}(_.Component),Wr=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0]||{},r=n.onSelectionChanged,o=n.onItemsChanged,a=n.getKey,i=n.canSelectItem,s=void 0===i?function(){return!0}:i,l=n.items,c=n.selectionMode,u=void 0===c?Zn.multiple:c;this.mode=u,this._getKey=a||Ur,this._changeEventSuppressionCount=0,this._exemptedCount=0,this._anchoredIndex=0,this._unselectableCount=0,this._onSelectionChanged=r,this._onItemsChanged=o,this._canSelectItem=s,this._keyToIndexMap={},this._isModal=!1,this.setItems(l||[],!0),this.count=this.getSelectedCount()}return e.prototype.canSelectItem=function(e,t){return!("number"===typeof t&&t<0)&&this._canSelectItem(e,t)},e.prototype.getKey=function(e,t){var n=this._getKey(e,t);return"number"===typeof n||n?"".concat(n):""},e.prototype.setChangeEvents=function(e,t){this._changeEventSuppressionCount+=e?-1:1,0===this._changeEventSuppressionCount&&this._hasChanged&&(this._hasChanged=!1,t||this._change())},e.prototype.isModal=function(){return this._isModal},e.prototype.setModal=function(e){this._isModal!==e&&(this.setChangeEvents(!1),this._isModal=e,e||this.setAllSelected(!1),this._change(),this.setChangeEvents(!0))},e.prototype.setItems=function(e,t){void 0===t&&(t=!0);var n={},r={},o=!1;this.setChangeEvents(!1),this._unselectableCount=0;for(var a=!1,i=0;i<e.length;i++){if(u=e[i])(G=this.getKey(u,i))&&(a||G in this._keyToIndexMap&&this._keyToIndexMap[G]===i||(a=!0),n[G]=i);r[i]=u&&!this.canSelectItem(u),r[i]&&this._unselectableCount++}(t||0===e.length)&&this._setAllSelected(!1,!0);var s={},l=0;for(var c in this._exemptedIndices)if(this._exemptedIndices.hasOwnProperty(c)){var u,d=Number(c),p=(u=this._items[d])?this.getKey(u,Number(d)):void 0,h=p?n[p]:d;void 0===h?o=!0:(s[h]=!0,l++,o=o||h!==d)}if(this._items&&0===this._exemptedCount&&e.length!==this._items.length&&this._isAllSelected&&(o=!0),!a)for(var f=0,C=Object.keys(this._keyToIndexMap);f<C.length;f++){var G;if(!((G=C[f])in n)){a=!0;break}}this._exemptedIndices=s,this._exemptedCount=l,this._keyToIndexMap=n,this._unselectableIndices=r,this._items=e,this._selectedItems=null,o&&this._updateCount(),a&&(tt.raise(this,"items-change"),this._onItemsChanged&&this._onItemsChanged()),o&&this._change(),this.setChangeEvents(!0)},e.prototype.getItems=function(){return this._items},e.prototype.getSelection=function(){if(!this._selectedItems){this._selectedItems=[];var e=this._items;if(e)for(var t=0;t<e.length;t++)this.isIndexSelected(t)&&this._selectedItems.push(e[t])}return this._selectedItems},e.prototype.getSelectedCount=function(){return this._isAllSelected?this._items.length-this._exemptedCount-this._unselectableCount:this._exemptedCount},e.prototype.getSelectedIndices=function(){if(!this._selectedIndices){this._selectedIndices=[];var e=this._items;if(e)for(var t=0;t<e.length;t++)this.isIndexSelected(t)&&this._selectedIndices.push(t)}return this._selectedIndices},e.prototype.getItemIndex=function(e){var t=this._keyToIndexMap[e];return null!==t&&void 0!==t?t:-1},e.prototype.isRangeSelected=function(e,t){if(0===t)return!1;for(var n=e+t,r=e;r<n;r++)if(!this.isIndexSelected(r))return!1;return!0},e.prototype.isAllSelected=function(){var e=this._items.length-this._unselectableCount;return this.mode===Zn.single&&(e=Math.min(e,1)),this.count>0&&this._isAllSelected&&0===this._exemptedCount||!this._isAllSelected&&this._exemptedCount===e&&e>0},e.prototype.isKeySelected=function(e){var t=this._keyToIndexMap[e];return this.isIndexSelected(t)},e.prototype.isIndexSelected=function(e){return!!(this.count>0&&this._isAllSelected&&!this._exemptedIndices[e]&&!this._unselectableIndices[e]||!this._isAllSelected&&this._exemptedIndices[e])},e.prototype.setAllSelected=function(e){if(!e||this.mode===Zn.multiple){var t=this._items?this._items.length-this._unselectableCount:0;this.setChangeEvents(!1),t>0&&(this._exemptedCount>0||e!==this._isAllSelected)&&(this._exemptedIndices={},(e!==this._isAllSelected||this._exemptedCount>0)&&(this._exemptedCount=0,this._isAllSelected=e,this._change()),this._updateCount()),this.setChangeEvents(!0)}},e.prototype.setKeySelected=function(e,t,n){var r=this._keyToIndexMap[e];r>=0&&this.setIndexSelected(r,t,n)},e.prototype.setIndexSelected=function(e,t,n){if(this.mode!==Zn.none&&!((e=Math.min(Math.max(0,e),this._items.length-1))<0||e>=this._items.length)){this.setChangeEvents(!1);var r=this._exemptedIndices[e];!this._unselectableIndices[e]&&(t&&this.mode===Zn.single&&this._setAllSelected(!1,!0),r&&(t&&this._isAllSelected||!t&&!this._isAllSelected)&&(delete this._exemptedIndices[e],this._exemptedCount--),!r&&(t&&!this._isAllSelected||!t&&this._isAllSelected)&&(this._exemptedIndices[e]=!0,this._exemptedCount++),n&&(this._anchoredIndex=e)),this._updateCount(),this.setChangeEvents(!0)}},e.prototype.setRangeSelected=function(e,t,n,r){if(this.mode!==Zn.none&&(e=Math.min(Math.max(0,e),this._items.length-1),t=Math.min(Math.max(0,t),this._items.length-e),!(e<0||e>=this._items.length||0===t))){this.setChangeEvents(!1);for(var o=e,a=e+t-1,i=(this._anchoredIndex||0)>=a?o:a;o<=a;o++)this.setIndexSelected(o,n,!!r&&o===i);this.setChangeEvents(!0)}},e.prototype.selectToKey=function(e,t){this.selectToIndex(this._keyToIndexMap[e],t)},e.prototype.selectToRange=function(e,t,n){if(this.mode!==Zn.none)if(this.mode!==Zn.single){var r=this._anchoredIndex||0,o=Math.min(e,r),a=Math.max(e+t-1,r);for(this.setChangeEvents(!1),n&&this._setAllSelected(!1,!0);o<=a;o++)this.setIndexSelected(o,!0,!1);this.setChangeEvents(!0)}else 1===t&&this.setIndexSelected(e,!0,!0)},e.prototype.selectToIndex=function(e,t){if(this.mode!==Zn.none)if(this.mode!==Zn.single){var n=this._anchoredIndex||0,r=Math.min(e,n),o=Math.max(e,n);for(this.setChangeEvents(!1),t&&this._setAllSelected(!1,!0);r<=o;r++)this.setIndexSelected(r,!0,!1);this.setChangeEvents(!0)}else this.setIndexSelected(e,!0,!0)},e.prototype.toggleAllSelected=function(){this.setAllSelected(!this.isAllSelected())},e.prototype.toggleKeySelected=function(e){this.setKeySelected(e,!this.isKeySelected(e),!0)},e.prototype.toggleIndexSelected=function(e){this.setIndexSelected(e,!this.isIndexSelected(e),!0)},e.prototype.toggleRangeSelected=function(e,t){if(this.mode!==Zn.none){var n=this.isRangeSelected(e,t),r=e+t;if(!(this.mode===Zn.single&&t>1)){this.setChangeEvents(!1);for(var o=e;o<r;o++)this.setIndexSelected(o,!n,!1);this.setChangeEvents(!0)}}},e.prototype._updateCount=function(e){void 0===e&&(e=!1);var t=this.getSelectedCount();t!==this.count&&(this.count=t,this._change()),this.count||e||this.setModal(!1)},e.prototype._setAllSelected=function(e,t){if(void 0===t&&(t=!1),!e||this.mode===Zn.multiple){var n=this._items?this._items.length-this._unselectableCount:0;this.setChangeEvents(!1),n>0&&(this._exemptedCount>0||e!==this._isAllSelected)&&(this._exemptedIndices={},(e!==this._isAllSelected||this._exemptedCount>0)&&(this._exemptedCount=0,this._isAllSelected=e,this._change()),this._updateCount(t)),this.setChangeEvents(!0)}},e.prototype._change=function(){0===this._changeEventSuppressionCount?(this._selectedItems=null,this._selectedIndices=void 0,tt.raise(this,lr),this._onSelectionChanged&&this._onSelectionChanged()):this._hasChanged=!0},e}();function Ur(e,t){var n=(e||{}).key;return void 0===n?"".concat(t):n}var jr,Kr,qr={root:"ms-GroupedList",compact:"ms-GroupedList--Compact",group:"ms-GroupedList-group",link:"ms-Link",listCell:"ms-List-cell"},Xr="cubic-bezier(0.445, 0.050, 0.550, 0.950)",Yr={root:"ms-GroupHeader",compact:"ms-GroupHeader--compact",check:"ms-GroupHeader-check",dropIcon:"ms-GroupHeader-dropIcon",expand:"ms-GroupHeader-expand",isCollapsed:"is-collapsed",title:"ms-GroupHeader-title",isSelected:"is-selected",iconTag:"ms-Icon--Tag",group:"ms-GroupedList-group",isDropping:"is-dropping"},Zr="cubic-bezier(0.075, 0.820, 0.165, 1.000)",Jr="cubic-bezier(0.390, 0.575, 0.565, 1.000)",Qr="cubic-bezier(0.600, -0.280, 0.735, 0.045)";!function(e){e[e.xSmall=0]="xSmall",e[e.small=1]="small",e[e.medium=2]="medium",e[e.large=3]="large"}(jr||(jr={})),function(e){e[e.normal=0]="normal",e[e.large=1]="large"}(Kr||(Kr={}));var $r=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isRendered:void 0===(0,_e.z)()},n}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.delay;this._timeoutId=window.setTimeout((function(){e.setState({isRendered:!0})}),t)},t.prototype.componentWillUnmount=function(){this._timeoutId&&clearTimeout(this._timeoutId)},t.prototype.render=function(){return this.state.isRendered?_.Children.only(this.props.children):null},t.defaultProps={delay:0},t}(_.Component),eo=(0,ve.Z)(),to=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.size,r=e.ariaLabel,o=e.ariaLive,a=e.styles,i=e.label,s=e.theme,l=e.className,c=e.labelPosition,u=r,d=Te(this.props,Ae,["size"]),p=n;void 0===p&&void 0!==t&&(p=t===Kr.large?jr.large:jr.medium);var h=eo(a,{theme:s,size:p,className:l,labelPosition:c});return _.createElement("div",(0,V.Cl)({},d,{className:h.root}),_.createElement("div",{className:h.circle}),i&&_.createElement("div",{className:h.label},i),u&&_.createElement("div",{role:"status","aria-live":o},_.createElement($r,null,_.createElement("div",{className:h.screenReaderText},u))))},t.defaultProps={size:jr.medium,ariaLive:"polite",labelPosition:"bottom"},t}(_.Component),no={root:"ms-Spinner",circle:"ms-Spinner-circle",label:"ms-Spinner-label"},ro=(0,be.J9)((function(){return(0,Lt.i7)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}})})),oo=(0,ye.I)(to,(function(e){var t,n=e.theme,r=e.size,o=e.className,a=e.labelPosition,i=n.palette,s=(0,Lt.Km)(no,n);return{root:[s.root,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"top"===a&&{flexDirection:"column-reverse"},"right"===a&&{flexDirection:"row"},"left"===a&&{flexDirection:"row-reverse"},o],circle:[s.circle,{boxSizing:"border-box",borderRadius:"50%",border:"1.5px solid "+i.themeLight,borderTopColor:i.themePrimary,animationName:ro(),animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.53,.21,.29,.67)",selectors:(t={},t[Lt.up]=(0,V.Cl)({borderTopColor:"Highlight"},(0,Lt.Qg)()),t)},r===jr.xSmall&&["ms-Spinner--xSmall",{width:12,height:12}],r===jr.small&&["ms-Spinner--small",{width:16,height:16}],r===jr.medium&&["ms-Spinner--medium",{width:20,height:20}],r===jr.large&&["ms-Spinner--large",{width:28,height:28}]],label:[s.label,n.fonts.small,{color:i.themePrimary,margin:"8px 0 0",textAlign:"center"},"top"===a&&{margin:"0 0 8px"},"right"===a&&{margin:"0 0 0 8px"},"left"===a&&{margin:"0 8px 0 0"}],screenReaderText:Lt.dX}}),void 0,{scope:"Spinner"}),ao=(0,ve.Z)(),io=function(e){function t(t){var n=e.call(this,t)||this;return n._toggleCollapse=function(){var e=n.props,t=e.group,r=e.onToggleCollapse,o=e.isGroupLoading,a=!n.state.isCollapsed,i=!a&&o&&o(t);n.setState({isCollapsed:a,isLoadingVisible:i}),r&&r(t)},n._onKeyUp=function(e){var t=n.props,r=t.group,o=t.onGroupHeaderKeyUp;if(o&&o(e,r),!e.defaultPrevented){var a=n.state.isCollapsed&&e.which===(0,xe.SM)(we.c.right,n.props.theme);(!n.state.isCollapsed&&e.which===(0,xe.SM)(we.c.left,n.props.theme)||a)&&(n._toggleCollapse(),e.stopPropagation(),e.preventDefault())}},n._onToggleClick=function(e){n._toggleCollapse(),e.stopPropagation(),e.preventDefault()},n._onHeaderClick=function(){var e=n.props,t=e.group,r=e.onGroupHeaderClick;r&&r(t)},n._onRenderTitle=function(e){if(!e.group)return null;var t=e.onRenderName?Kn(e.onRenderName,n._onRenderName):n._onRenderName;return _.createElement("div",{className:n._classNames.title,id:n._id,onClick:n._onHeaderClick,role:"gridcell","aria-colspan":n.props.ariaColSpan,"data-selection-invoke":!0},t(e))},n._onRenderName=function(e){var t=e.group;return t?_.createElement(_.Fragment,null,_.createElement("span",null,t.name),_.createElement("span",{className:n._classNames.headerCount},"(",t.count,t.hasMoreData&&"+",")")):null},n._id=st("GroupHeader"),n.state={isCollapsed:n.props.group&&n.props.group.isCollapsed,isLoadingVisible:!1},n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){if(e.group){var n=e.group.isCollapsed,r=e.isGroupLoading,o=!n&&r&&r(e.group);return(0,V.Cl)((0,V.Cl)({},t),{isCollapsed:n||!1,isLoadingVisible:o||!1})}return t},t.prototype.render=function(){var e=this.props,t=e.group,n=e.groupLevel,r=void 0===n?0:n,o=e.viewport,a=e.selectionMode,i=e.loadingText,s=e.isSelected,l=void 0!==s&&s,c=e.selected,u=void 0!==c&&c,d=e.indentWidth,p=e.onRenderGroupHeaderCheckbox,h=e.isCollapsedGroupSelectVisible,f=void 0===h||h,C=e.expandButtonProps,G=e.expandButtonIcon,m=e.selectAllButtonProps,A=e.theme,T=e.styles,g=e.className,y=e.compact,v=e.ariaLevel,b=e.ariaPosInSet,x=e.ariaSetSize,w=e.ariaRowIndex,k=e.useFastIcons,I=this.props.onRenderTitle?Kn(this.props.onRenderTitle,this._onRenderTitle):this._onRenderTitle,S=k?this._fastDefaultCheckboxRender:this._defaultCheckboxRender,N=p?Kn(p,S):S,E=this.state,R=E.isCollapsed,D=E.isLoadingVisible,F=a===Zn.multiple,M=F&&(f||!(t&&t.isCollapsed)),O=u||l,L=(0,xe.jI)(A);return this._classNames=ao(T,{theme:A,className:g,selected:O,isCollapsed:R,compact:y}),t?_.createElement("div",{className:this._classNames.root,style:o?{minWidth:o.width}:{},role:"row","aria-level":v,"aria-setsize":x,"aria-posinset":b,"aria-rowindex":w,"data-is-focusable":!0,onKeyUp:this._onKeyUp,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabel?void 0:this._id,"aria-expanded":!this.state.isCollapsed,"aria-selected":F?O:void 0,"data-selection-index":t.startIndex,"data-selection-span":t.count},_.createElement("div",{className:this._classNames.groupHeaderContainer,role:"presentation"},M?_.createElement("div",{role:"gridcell"},_.createElement("button",(0,V.Cl)({"data-is-focusable":!1,type:"button",className:this._classNames.check,role:"checkbox",id:"".concat(this._id,"-check"),"aria-checked":O,"aria-labelledby":"".concat(this._id,"-check ").concat(this._id),"data-selection-toggle":!0},m),N({checked:O,theme:A},N))):a!==Zn.none&&_.createElement(Un,{indentWidth:48,count:1}),_.createElement(Un,{indentWidth:d,count:r}),_.createElement("div",{className:this._classNames.dropIcon,role:"presentation"},_.createElement(Gn,{iconName:"Tag"})),_.createElement("div",{role:"gridcell"},_.createElement("button",(0,V.Cl)({"data-is-focusable":!1,"data-selection-disabled":!0,type:"button",className:this._classNames.expand,onClick:this._onToggleClick,"aria-expanded":!this.state.isCollapsed},C),_.createElement(Gn,{className:this._classNames.expandIsCollapsed,iconName:G||(L?"ChevronLeftMed":"ChevronRightMed")}))),I(this.props),D&&_.createElement(oo,{label:i}))):null},t.prototype._defaultCheckboxRender=function(e){return _.createElement($n,{checked:e.checked})},t.prototype._fastDefaultCheckboxRender=function(e){return _.createElement(so,{theme:e.theme,checked:e.checked})},t.defaultProps={expandButtonProps:{"aria-label":"expand collapse group"}},t}(_.Component),so=_.memo((function(e){return _.createElement($n,{theme:e.theme,checked:e.checked,className:e.className,useFastIcons:!0})})),lo=(0,ye.I)(io,(function(e){var t,n,r,o,a,i=e.theme,s=e.className,l=e.selected,c=e.isCollapsed,u=e.compact,d=nr.cellLeftPadding,p=u?40:48,h=i.semanticColors,f=i.palette,C=i.fonts,G=(0,Lt.Km)(Yr,i),m=[(0,Lt.gm)(i),{cursor:"default",background:"none",backgroundColor:"transparent",border:"none",padding:0}];return{root:[G.root,(0,Lt.gm)(i),i.fonts.medium,{borderBottom:"1px solid ".concat(h.listBackground),cursor:"default",userSelect:"none",selectors:(t={":hover":{background:h.listItemBackgroundHovered,color:h.actionLinkHovered}},t["&:hover .".concat(G.check)]={opacity:1},t[".".concat(Ee.Y2," &:focus .").concat(G.check)]={opacity:1},t[":global(.".concat(G.group,".").concat(G.isDropping,")")]={selectors:(n={},n["& > .".concat(G.root," .").concat(G.dropIcon)]={transition:"transform ".concat(Lt.cs.durationValue4," ").concat(Zr," ")+"opacity ".concat(Lt.cs.durationValue1," ").concat(Jr),transitionDelay:Lt.cs.durationValue3,opacity:1,transform:"rotate(0.2deg) scale(1);"},n[".".concat(G.check)]={opacity:0},n)},t)},l&&[G.isSelected,{background:h.listItemBackgroundChecked,selectors:(r={":hover":{background:h.listItemBackgroundCheckedHovered}},r["".concat(G.check)]={opacity:1},r)}],u&&[G.compact,{border:"none"}],s],groupHeaderContainer:[{display:"flex",alignItems:"center",height:p}],headerCount:[{padding:"0px 4px"}],check:[G.check,m,{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:1,marginTop:-1,opacity:0,width:48,height:p,selectors:(o={},o[".".concat(Ee.Y2," &:focus")]={opacity:1},o)}],expand:[G.expand,m,{display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",fontSize:C.small.fontSize,width:36,height:p,color:l?f.neutralPrimary:f.neutralSecondary,selectors:{":hover":{backgroundColor:l?f.neutralQuaternary:f.neutralLight},":active":{backgroundColor:l?f.neutralTertiaryAlt:f.neutralQuaternaryAlt}}}],expandIsCollapsed:[c?[G.isCollapsed,{transform:"rotate(0deg)",transformOrigin:"50% 50%",transition:"transform .1s linear"}]:{transform:(0,xe.jI)(i)?"rotate(-90deg)":"rotate(90deg)",transformOrigin:"50% 50%",transition:"transform .1s linear"}],title:[G.title,{paddingLeft:d,fontSize:u?C.medium.fontSize:C.mediumPlus.fontSize,fontWeight:c?Lt.BO.regular:Lt.BO.semibold,cursor:"pointer",outline:0,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}],dropIcon:[G.dropIcon,{position:"absolute",left:-26,fontSize:Lt.fF.large,color:f.neutralSecondary,transition:"transform ".concat(Lt.cs.durationValue2," ").concat(Qr,", ")+"opacity ".concat(Lt.cs.durationValue4," ").concat(Jr),opacity:0,transform:"rotate(0.2deg) scale(0.65)",transformOrigin:"10px 10px",selectors:(a={},a[":global(.".concat(G.iconTag,")")]={position:"absolute"},a)}]}}),void 0,{scope:"GroupHeader"}),co={root:"ms-GroupShowAll",link:"ms-Link"},uo=(0,ve.Z)(),po=function(e,t){_.useImperativeHandle(e.componentRef,(function(){return{focus:function(){t.current&&t.current.focus()}}}),[t])},ho=function(e,t){t.as;var n=t.disabled,r=t.target,o=t.href,a=(t.theme,t.getStyles,t.styles,t.componentRef,t.underline,(0,V.Tt)(t,["as","disabled","target","href","theme","getStyles","styles","componentRef","underline"]));return"string"===typeof e?"a"===e?(0,V.Cl)({target:r,href:n?void 0:o},a):"button"===e?(0,V.Cl)({type:"button",disabled:n},a):(0,V.Cl)((0,V.Cl)({},a),{disabled:n}):(0,V.Cl)({target:r,href:o,disabled:n},a)},fo=_.forwardRef((function(e,t){var n=function(e,t){var n=e.as,r=e.className,o=e.disabled,a=e.href,i=e.onClick,s=e.styles,l=e.theme,c=e.underline,u=_.useRef(null),d=ln(u,t);po(e,u),Le(u);var p=uo(s,{className:r,isButton:!a,isDisabled:o,isUnderlined:c,theme:l}),h=n||(a?"a":"button");return{state:{},slots:{root:h},slotProps:{root:(0,V.Cl)((0,V.Cl)({},ho(h,e)),{"aria-disabled":o,className:p.root,onClick:function(e){o?e.preventDefault():i&&i(e)},ref:d})}}}(e,t),r=n.slots,o=n.slotProps;return _.createElement(r.root,(0,V.Cl)({},o.root))}));fo.displayName="LinkBase";var Co=(0,ye.I)(fo,(function(e){var t,n,r,o,a,i,s,l=e.className,c=e.isButton,u=e.isDisabled,d=e.isUnderlined,p=e.theme,h=p.semanticColors,f=h.link,C=h.linkHovered,G=h.disabledText,m=h.focusBorder,A=(0,Lt.Km)(er,p);return{root:[A.root,p.fonts.medium,{color:f,outline:"none",fontSize:"inherit",fontWeight:"inherit",textDecoration:d?"underline":"none",selectors:(t={".ms-Fabric--isFocusVisible &:focus":{boxShadow:"0 0 0 1px ".concat(m," inset"),outline:"1px auto ".concat(m),selectors:(n={},n[Lt.up]={outline:"1px solid WindowText"},n)}},t[Lt.up]={borderBottom:"none"},t)},c&&{background:"none",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"inline",margin:0,overflow:"inherit",padding:0,textAlign:"left",textOverflow:"inherit",userSelect:"text",borderBottom:"1px solid transparent",selectors:(r={},r[Lt.up]={color:"LinkText",forcedColorAdjust:"none"},r)},!c&&{selectors:(o={},o[Lt.up]={MsHighContrastAdjust:"auto",forcedColorAdjust:"auto"},o)},u&&["is-disabled",{color:G,cursor:"default"},{selectors:(a={"&:link, &:visited":{pointerEvents:"none"}},a[Lt.up]={color:"GrayText"},a)}],!u&&{selectors:{"&:active, &:hover, &:active:hover":{color:C,textDecoration:"underline",selectors:(i={},i[Lt.up]={color:"LinkText"},i)},"&:focus":{color:f,selectors:(s={},s[Lt.up]={color:"LinkText"},s)}}},A.root,l]}}),void 0,{scope:"Link"}),Go=(0,ve.Z)(),mo=(0,ye.I)((function(e){var t=e.group,n=e.groupLevel,r=e.showAllLinkText,o=void 0===r?"Show All":r,a=e.styles,i=e.theme,s=e.onToggleSummarize,l=Go(a,{theme:i}),c=(0,_.useCallback)((function(e){s(t),e.stopPropagation(),e.preventDefault()}),[s,t]);return t?_.createElement("div",{className:l.root},_.createElement(Un,{count:n}),_.createElement(Co,{onClick:c},o)):null}),(function(e){var t,n=e.theme,r=n.fonts,o=(0,Lt.Km)(co,n);return{root:[o.root,{position:"relative",padding:"10px 84px",cursor:"pointer",selectors:(t={},t[".".concat(o.link)]={fontSize:r.small.fontSize},t)}]}}),void 0,{scope:"GroupShowAll"}),Ao={root:"ms-groupFooter"},To=(0,ve.Z)(),go=(0,ye.I)((function(e){var t=e.group,n=e.groupLevel,r=e.footerText,o=e.indentWidth,a=e.styles,i=e.theme,s=To(a,{theme:i});return t&&r?_.createElement("div",{className:s.root},_.createElement(Un,{indentWidth:o,count:n}),r):null}),(function(e){var t=e.theme,n=e.className,r=(0,Lt.Km)(Ao,t);return{root:[t.fonts.medium,r.root,{position:"relative",padding:"5px 38px"},n]}}),void 0,{scope:"GroupFooter"}),yo=0,vo=1,bo=2,xo=3,wo=function(e){if(void 0===e)return 0;var t=0;return"scrollTop"in e?t=e.scrollTop:"scrollY"in e&&(t=e.scrollY),Math.ceil(t)},ko=function(e,t){"scrollTop"in e?e.scrollTop=t:"scrollY"in e&&e.scrollTo(e.scrollX,t)},Io=_.createContext({window:"object"===typeof window?window:void 0}),_o=function(){return _.useContext(Io).window},So=function(){var e;return null===(e=_.useContext(Io).window)||void 0===e?void 0:e.document},No=function(){var e;return(null!==(e=_o())&&void 0!==e?e:"undefined"!==typeof window)?window:void 0},Eo="spacer-",Ro={top:-1,bottom:-1,left:-1,right:-1,width:0,height:0},Do=function(e){return e.getBoundingClientRect()},Fo=Do,Mo=Do,Oo=function(e){function t(t){var n=e.call(this,t)||this;return n._root=_.createRef(),n._surface=_.createRef(),n._pageRefs={},n._getDerivedStateFromProps=function(e,t){return e.items!==n.props.items||e.renderCount!==n.props.renderCount||e.startIndex!==n.props.startIndex||e.version!==n.props.version||!t.hasMounted&&n.props.renderEarly&&(0,an.S)()?(n._resetRequiredWindows(),n._requiredRect=null,n._measureVersion++,n._invalidatePageCache(),n._updatePages(e,t)):t},n._onRenderRoot=function(e){var t=e.rootRef,n=e.surfaceElement,r=e.divProps;return _.createElement("div",(0,V.Cl)({ref:t},r),n)},n._onRenderSurface=function(e){var t=e.surfaceRef,n=e.pageElements,r=e.divProps;return _.createElement("div",(0,V.Cl)({ref:t},r),n)},n._onRenderPage=function(e,t){for(var r,o=n.props,a=o.onRenderCell,i=o.onRenderCellConditional,s=o.role,l=e.page,c=l.items,u=void 0===c?[]:c,d=l.startIndex,p=(0,V.Tt)(e,["page"]),h=void 0===s?"listitem":"presentation",f=[],C=0;C<u.length;C++){var G=d+C,m=u[C],A=n.props.getKey?n.props.getKey(m,G):m&&m.key;null!==A&&void 0!==A||(A=G);var T=null!==i&&void 0!==i?i:a,g=null!==(r=null===T||void 0===T?void 0:T(m,G,n.props.ignoreScrollingState?void 0:n.state.isScrolling))&&void 0!==r?r:null;i&&!g||f.push(_.createElement("div",{role:h,className:"ms-List-cell",key:A,"data-list-index":G,"data-automationid":"ListCell"},g))}return _.createElement("div",(0,V.Cl)({},p),f)},W(n),n.state={pages:[],isScrolling:!1,getDerivedStateFromProps:n._getDerivedStateFromProps,hasMounted:!1},n._estimatedPageHeight=0,n._totalEstimates=0,n._requiredWindowsAhead=0,n._requiredWindowsBehind=0,n._measureVersion=0,n._cachedPageHeights={},n._estimatedPageHeight=0,n._focusedIndex=-1,n._pageCache={},n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){return t.getDerivedStateFromProps(e,t)},Object.defineProperty(t.prototype,"pageRefs",{get:function(){return this._pageRefs},enumerable:!1,configurable:!0}),t.prototype.scrollToIndex=function(e,t,n){void 0===n&&(n=yo);for(var r=this.props.startIndex,o=r+this._getRenderCount(),a=this._allowedRect,i=0,s=1,l=r;l<o;l+=s){var c=this._getPageSpecification(this.props,l,a),u=c.height;if(s=c.itemCount,l<=e&&l+s>e){if(t&&this._scrollElement){for(var d=Mo(this._scrollElement),p=wo(this._scrollElement),h={top:p,bottom:p+d.height},f=e-l,C=0;C<f;++C)i+=t(l+C);var G=i+t(e);switch(n){case vo:return void ko(this._scrollElement,i);case bo:return void ko(this._scrollElement,G-d.height);case xo:return void ko(this._scrollElement,(i+G-d.height)/2)}if(i>=h.top&&G<=h.bottom)return;i<h.top||G>h.bottom&&(i=G-d.height)}return void(this._scrollElement&&ko(this._scrollElement,i))}i+=u}},t.prototype.getStartItemIndexInView=function(e){for(var t=0,n=this.state.pages||[];t<n.length;t++){var r=n[t];if(!r.isSpacer&&(this._scrollTop||0)>=r.top&&(this._scrollTop||0)<=r.top+r.height){if(!e){var o=Math.floor(r.height/r.itemCount);return r.startIndex+Math.floor((this._scrollTop-r.top)/o)}for(var a=0,i=r.startIndex;i<r.startIndex+r.itemCount;i++){o=e(i);if(r.top+a<=this._scrollTop&&this._scrollTop<r.top+a+o)return i;a+=o}}}return 0},t.prototype.componentDidMount=function(){this._async=new Xe(this),this._events=new tt(this),this._onAsyncScrollDebounced=this._async.debounce(this._onAsyncScroll,100,{leading:!1,maxWait:500}),this._onAsyncIdleDebounced=this._async.debounce(this._onAsyncIdle,200,{leading:!1}),this._onAsyncResizeDebounced=this._async.debounce(this._onAsyncResize,16,{leading:!1}),this._onScrollingDoneDebounced=this._async.debounce(this._onScrollingDone,500,{leading:!1}),this._scrollElement=Dt(this._root.current),this._scrollTop=0,this.setState((0,V.Cl)((0,V.Cl)({},this._updatePages(this.props,this.state)),{hasMounted:!0})),this._measureVersion++;var e=function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.window)&&void 0!==t?t:"undefined"!==typeof window)?window:void 0}(this.context);this._events.on(e,"resize",this._onAsyncResizeDebounced),this._root.current&&this._events.on(this._root.current,"focus",this._onFocus,!0),this._scrollElement&&(this._events.on(this._scrollElement,"scroll",this._onScroll),this._events.on(this._scrollElement,"scroll",this._onAsyncScrollDebounced))},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=this.state;if(this.state.pagesVersion!==t.pagesVersion){if(n.getPageHeight)this._onAsyncIdleDebounced();else this._updatePageMeasurements(r.pages)?(this._materializedRect=null,this._hasCompletedFirstRender?this._onAsyncScrollDebounced():(this._hasCompletedFirstRender=!0,this.setState(this._updatePages(n,r)))):this._onAsyncIdleDebounced();n.onPagesUpdated&&n.onPagesUpdated(r.pages)}},t.prototype.componentWillUnmount=function(){var e,t;null===(e=this._async)||void 0===e||e.dispose(),null===(t=this._events)||void 0===t||t.dispose(),delete this._scrollElement},t.prototype.shouldComponentUpdate=function(e,t){var n=this.state.pages,r=t.pages,o=!1;if(!t.isScrolling&&this.state.isScrolling)return!0;if(e.version!==this.props.version)return!0;if(e.className!==this.props.className)return!0;if(e.items===this.props.items&&n.length===r.length)for(var a=0;a<n.length;a++){var i=n[a],s=r[a];if(i.key!==s.key||i.itemCount!==s.itemCount){o=!0;break}}else o=!0;return o},t.prototype.forceUpdate=function(){this._invalidatePageCache(),this._updateRenderRects(this.props,this.state,!0),this.setState(this._updatePages(this.props,this.state)),this._measureVersion++,e.prototype.forceUpdate.call(this)},t.prototype.getTotalListHeight=function(){return this._surfaceRect.height},t.prototype.render=function(){for(var e=this.props,t=e.className,n=e.role,r=void 0===n?"list":n,o=e.onRenderSurface,a=e.onRenderRoot,i=this.state.pages,s=void 0===i?[]:i,l=[],c=Te(this.props,Ae),u=0,d=s;u<d.length;u++){var p=d[u];l.push(this._renderPage(p))}var h=o?Kn(o,this._onRenderSurface):this._onRenderSurface;return(a?Kn(a,this._onRenderRoot):this._onRenderRoot)({rootRef:this._root,pages:s,surfaceElement:h({surfaceRef:this._surface,pages:s,pageElements:l,divProps:{role:"presentation",className:"ms-List-surface"}}),divProps:(0,V.Cl)((0,V.Cl)({},c),{className:ke("ms-List",t),role:l.length>0?r:void 0,"aria-label":l.length>0?c["aria-label"]:void 0})})},t.prototype._shouldVirtualize=function(e){void 0===e&&(e=this.props);var t=e.onShouldVirtualize;return!t||t(e)},t.prototype._invalidatePageCache=function(){this._pageCache={}},t.prototype._renderPage=function(e){var t,n=this,r=this.props.usePageCache;if(r&&(t=this._pageCache[e.key])&&t.pageElement)return t.pageElement;var o=this._getPageStyle(e),a=this.props.onRenderPage,i=(void 0===a?this._onRenderPage:a)({page:e,className:"ms-List-page",key:e.key,ref:function(t){n._pageRefs[e.key]=t},style:o,role:"presentation"},this._onRenderPage);return r&&0===e.startIndex&&(this._pageCache[e.key]={page:e,pageElement:i}),i},t.prototype._getPageStyle=function(e){var t=this.props.getPageStyle;return(0,V.Cl)((0,V.Cl)({},t?t(e):{}),e.items?{}:{height:e.height})},t.prototype._onFocus=function(e){for(var t=e.target;t!==this._surface.current;){var n=t.getAttribute("data-list-index");if(n){this._focusedIndex=Number(n);break}t=Ye(t)}},t.prototype._onScroll=function(){this.state.isScrolling||this.props.ignoreScrollingState||this.setState({isScrolling:!0}),this._resetRequiredWindows(),this._onScrollingDoneDebounced()},t.prototype._resetRequiredWindows=function(){this._requiredWindowsAhead=0,this._requiredWindowsBehind=0},t.prototype._onAsyncScroll=function(){var e,t;this._updateRenderRects(this.props,this.state),this._materializedRect&&(e=this._requiredRect,t=this._materializedRect,e.top>=t.top&&e.left>=t.left&&e.bottom<=t.bottom&&e.right<=t.right)||this.setState(this._updatePages(this.props,this.state))},t.prototype._onAsyncIdle=function(){var e=this.props,t=e.renderedWindowsAhead,n=e.renderedWindowsBehind,r=this._requiredWindowsAhead,o=this._requiredWindowsBehind,a=Math.min(t,r+1),i=Math.min(n,o+1);a===r&&i===o||(this._requiredWindowsAhead=a,this._requiredWindowsBehind=i,this._updateRenderRects(this.props,this.state),this.setState(this._updatePages(this.props,this.state))),(t>a||n>i)&&this._onAsyncIdleDebounced()},t.prototype._onScrollingDone=function(){this.props.ignoreScrollingState||this.setState({isScrolling:!1})},t.prototype._onAsyncResize=function(){this.forceUpdate()},t.prototype._updatePages=function(e,t){this._requiredRect||this._updateRenderRects(e,t);var n=this._buildPages(e,t),r=t.pages;return this._notifyPageChanges(r,n.pages,this.props),(0,V.Cl)((0,V.Cl)((0,V.Cl)({},t),n),{pagesVersion:{}})},t.prototype._notifyPageChanges=function(e,t,n){var r=n.onPageAdded,o=n.onPageRemoved;if(r||o){for(var a={},i=0,s=e;i<s.length;i++){(u=s[i]).items&&(a[u.startIndex]=u)}for(var l=0,c=t;l<c.length;l++){var u;(u=c[l]).items&&(a[u.startIndex]?delete a[u.startIndex]:this._onPageAdded(u))}for(var d in a)a.hasOwnProperty(d)&&this._onPageRemoved(a[d])}},t.prototype._updatePageMeasurements=function(e){var t=!1;if(!this._shouldVirtualize())return t;for(var n=0;n<e.length;n++){var r=e[n];r.items&&(t=this._measurePage(r)||t)}return t},t.prototype._measurePage=function(e){var t=!1,n=this._pageRefs[e.key],r=this._cachedPageHeights[e.startIndex];if(n&&this._shouldVirtualize()&&(!r||r.measureVersion!==this._measureVersion)){var o={width:n.clientWidth,height:n.clientHeight};(o.height||o.width)&&(t=e.height!==o.height,e.height=o.height,this._cachedPageHeights[e.startIndex]={height:o.height,measureVersion:this._measureVersion},this._estimatedPageHeight=Math.round((this._estimatedPageHeight*this._totalEstimates+o.height)/(this._totalEstimates+1)),this._totalEstimates++)}return t},t.prototype._onPageAdded=function(e){var t=this.props.onPageAdded;t&&t(e)},t.prototype._onPageRemoved=function(e){var t=this.props.onPageRemoved;t&&t(e)},t.prototype._buildPages=function(e,t){var n=e.renderCount,r=e.items,o=e.startIndex,a=e.getPageHeight;n=this._getRenderCount(e);for(var i=(0,V.Cl)({},Ro),s=[],l=1,c=0,u=null,d=this._focusedIndex,p=o+n,h=this._shouldVirtualize(e),f=0===this._estimatedPageHeight&&!a,C=this._allowedRect,G=function(n){var a=m._getPageSpecification(e,n,C),G=a.height,A=a.data,T=a.key;l=a.itemCount;var g,y,v=c+G-1,b=pt(t.pages,(function(e){return!!e.items&&e.startIndex===n}))>-1,x=!C||v>=C.top&&c<=C.bottom,w=!m._requiredRect||v>=m._requiredRect.top&&c<=m._requiredRect.bottom;if(!f&&(w||x&&b)||!h||d>=n&&d<n+l||n===o){u&&(s.push(u),u=null);var k=Math.min(l,p-n),I=m._createPage(T,r.slice(n,n+k),n,void 0,void 0,A);I.top=c,I.height=G,m._visibleRect&&m._visibleRect.bottom&&(I.isVisible=v>=m._visibleRect.top&&c<=m._visibleRect.bottom),s.push(I),w&&m._allowedRect&&(g=i,y={top:c,bottom:v,height:G,left:C.left,right:C.right,width:C.width},g.top=y.top<g.top||-1===g.top?y.top:g.top,g.left=y.left<g.left||-1===g.left?y.left:g.left,g.bottom=y.bottom>g.bottom||-1===g.bottom?y.bottom:g.bottom,g.right=y.right>g.right||-1===g.right?y.right:g.right,g.width=g.right-g.left+1,g.height=g.bottom-g.top+1)}else u||(u=m._createPage(Eo+n,void 0,n,0,void 0,A,!0)),u.height=(u.height||0)+(v-c)+1,u.itemCount+=l;if(c+=v-c+1,f&&h)return"break"},m=this,A=o;A<p;A+=l){if("break"===G(A))break}return u&&(u.key=Eo+"end",s.push(u)),this._materializedRect=i,(0,V.Cl)((0,V.Cl)({},t),{pages:s,measureVersion:this._measureVersion})},t.prototype._getPageSpecification=function(e,t,n){var r=e.getPageSpecification;if(r){var o=r(t,n,e.items),a=o.itemCount,i=void 0===a?this._getItemCountForPage(t,n):a,s=o.height;return{itemCount:i,height:void 0===s?this._getPageHeight(t,n,i):s,data:o.data,key:o.key}}return{itemCount:i=this._getItemCountForPage(t,n),height:this._getPageHeight(t,n,i)}},t.prototype._getPageHeight=function(e,t,n){if(this.props.getPageHeight)return this.props.getPageHeight(e,t,n,this.props.items);var r=this._cachedPageHeights[e];return r?r.height:this._estimatedPageHeight||30},t.prototype._getItemCountForPage=function(e,t){var n=this.props.getItemCountForPage?this.props.getItemCountForPage(e,t):10;return n||10},t.prototype._createPage=function(e,t,n,r,o,a,i){void 0===n&&(n=-1),void 0===r&&(r=t?t.length:0),void 0===o&&(o={}),e=e||"page-"+n;var s=this._pageCache[e];return s&&s.page?s.page:{key:e,startIndex:n,itemCount:r,items:t,style:o,top:0,height:0,data:a,isSpacer:i||!1}},t.prototype._getRenderCount=function(e){var t=e||this.props,n=t.items,r=t.startIndex,o=t.renderCount;return void 0===o?n?n.length-r:0:o},t.prototype._updateRenderRects=function(e,t,n){var r=e.renderedWindowsAhead,o=e.renderedWindowsBehind,a=t.pages;if(this._shouldVirtualize(e)){var i=this._surfaceRect||(0,V.Cl)({},Ro),s=function(e){if(void 0===e)return 0;var t=0;return"scrollHeight"in e?t=e.scrollHeight:"document"in e&&(t=e.document.documentElement.scrollHeight),t}(this._scrollElement),l=wo(this._scrollElement);this._surface.current&&(n||!a||!this._surfaceRect||!s||s!==this._scrollHeight||Math.abs(this._scrollTop-l)>this._estimatedPageHeight/3)&&(i=this._surfaceRect=Fo(this._surface.current),this._scrollTop=l),!n&&s&&s===this._scrollHeight||this._measureVersion++,this._scrollHeight=s||0;var c=Math.max(0,-i.top),u=(0,_e.z)(this._root.current),d={top:c,left:i.left,bottom:c+u.innerHeight,right:i.right,width:i.width,height:u.innerHeight};this._requiredRect=Lo(d,this._requiredWindowsBehind,this._requiredWindowsAhead),this._allowedRect=Lo(d,o,r),this._visibleRect=d}},t.defaultProps={startIndex:0,onRenderCell:function(e,t,n){return _.createElement(_.Fragment,null,e&&e.name||"")},onRenderCellConditional:void 0,renderedWindowsAhead:2,renderedWindowsBehind:2},t.contextType=Io,t}(_.Component);function Lo(e,t,n){var r=e.top-t*e.height,o=e.height+(t+n)*e.height;return{top:r,bottom:r+o,height:o,left:e.left,right:e.right,width:e.width}}var Po=function(e){function t(n){var r=e.call(this,n)||this;r._root=_.createRef(),r._list=_.createRef(),r._subGroupRefs={},r._droppingClassName="",r._onRenderGroupHeader=function(e){return _.createElement(lo,(0,V.Cl)({},e))},r._onRenderGroupShowAll=function(e){return _.createElement(mo,(0,V.Cl)({},e))},r._onRenderGroupFooter=function(e){return _.createElement(go,(0,V.Cl)({},e))},r._renderSubGroup=function(e,n){var o=r.props,a=o.dragDropEvents,i=o.dragDropHelper,s=o.eventsToRegister,l=o.getGroupItemLimit,c=o.groupNestingDepth,u=o.groupProps,d=o.items,p=o.headerProps,h=o.showAllProps,f=o.footerProps,C=o.listProps,G=o.onRenderCell,m=o.selection,A=o.selectionMode,T=o.viewport,g=o.onRenderGroupHeader,y=o.onRenderGroupShowAll,v=o.onRenderGroupFooter,b=o.onShouldVirtualize,x=o.group,w=o.compact,k=e.level?e.level+1:c;return!e||e.count>0||u&&u.showEmptyGroups?_.createElement(t,{ref:function(e){return r._subGroupRefs["subGroup_"+n]=e},key:r._getGroupKey(e,n),dragDropEvents:a,dragDropHelper:i,eventsToRegister:s,footerProps:f,getGroupItemLimit:l,group:e,groupIndex:n,groupNestingDepth:k,groupProps:u,headerProps:p,items:d,listProps:C,onRenderCell:G,selection:m,selectionMode:A,showAllProps:h,viewport:T,onRenderGroupHeader:g,onRenderGroupShowAll:y,onRenderGroupFooter:v,onShouldVirtualize:b,groups:x?x.children:[],compact:w}):null},r._getGroupDragDropOptions=function(){var e=r.props,t=e.group,n=e.groupIndex,o=e.dragDropEvents;return{eventMap:e.eventsToRegister,selectionIndex:-1,context:{data:t,index:n,isGroup:!0},updateDropState:r._updateDroppingState,canDrag:o.canDrag,canDrop:o.canDrop,onDrop:o.onDrop,onDragStart:o.onDragStart,onDragEnter:o.onDragEnter,onDragLeave:o.onDragLeave,onDragEnd:o.onDragEnd,onDragOver:o.onDragOver}},r._updateDroppingState=function(e,t){var n=r.state.isDropping,o=r.props,a=o.dragDropEvents,i=o.group;n!==e&&(n?a&&a.onDragLeave&&a.onDragLeave(i,t):a&&a.onDragEnter&&(r._droppingClassName=a.onDragEnter(i,t)),r.setState({isDropping:e}))};var o=n.selection,a=n.group;return W(r),r._id=st("GroupedListSection"),r.state={isDropping:!1,isSelected:!(!o||!a)&&o.isRangeSelected(a.startIndex,a.count)},r._events=new tt(r),r}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.dragDropHelper,n=e.selection;t&&this._root.current&&(this._dragDropSubscription=t.subscribe(this._root.current,this._events,this._getGroupDragDropOptions())),n&&this._events.on(n,lr,this._onSelectionChange)},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._dragDropSubscription&&this._dragDropSubscription.dispose()},t.prototype.componentDidUpdate=function(e){this.props.group===e.group&&this.props.groupIndex===e.groupIndex&&this.props.dragDropHelper===e.dragDropHelper||(this._dragDropSubscription&&(this._dragDropSubscription.dispose(),delete this._dragDropSubscription),this.props.dragDropHelper&&this._root.current&&(this._dragDropSubscription=this.props.dragDropHelper.subscribe(this._root.current,this._events,this._getGroupDragDropOptions())))},t.prototype.render=function(){var e=this.props,t=e.getGroupItemLimit,n=e.group,r=e.groupIndex,o=e.headerProps,a=e.showAllProps,i=e.footerProps,s=e.viewport,l=e.selectionMode,c=e.onRenderGroupHeader,u=void 0===c?this._onRenderGroupHeader:c,d=e.onRenderGroupShowAll,p=void 0===d?this._onRenderGroupShowAll:d,h=e.onRenderGroupFooter,f=void 0===h?this._onRenderGroupFooter:h,C=e.onShouldVirtualize,G=e.groupedListClassNames,m=e.groups,A=e.compact,T=e.listProps,g=void 0===T?{}:T,y=this.state.isSelected,v=n&&t?t(n):1/0,b=n&&!n.children&&!n.isCollapsed&&!n.isShowingAll&&(n.count>v||n.hasMoreData),x=n&&n.children&&n.children.length>0,w=g.version,k={group:n,groupIndex:r,groupLevel:n?n.level:0,isSelected:y,selected:y,viewport:s,selectionMode:l,groups:m,compact:A},I={groupedListId:this._id,ariaLevel:(null===n||void 0===n?void 0:n.level)?n.level+1:1,ariaSetSize:m?m.length:void 0,ariaPosInSet:void 0!==r?r+1:void 0},S=(0,V.Cl)((0,V.Cl)((0,V.Cl)({},o),k),I),N=(0,V.Cl)((0,V.Cl)({},a),k),E=(0,V.Cl)((0,V.Cl)({},i),k),R=!!this.props.dragDropHelper&&this._getGroupDragDropOptions().canDrag(n)&&!!this.props.dragDropEvents.canDragGroups;return _.createElement("div",(0,V.Cl)({ref:this._root},R&&{draggable:!0},{className:ke(G&&G.group,this._getDroppingClassName()),role:"presentation"}),u(S,this._onRenderGroupHeader),n&&n.isCollapsed?null:x?_.createElement(Oo,{role:"presentation",ref:this._list,items:n?n.children:[],onRenderCell:this._renderSubGroup,getItemCountForPage:this._returnOne,onShouldVirtualize:C,version:w,id:this._id}):this._onRenderGroup(v),n&&n.isCollapsed?null:b&&p(N,this._onRenderGroupShowAll),f(E,this._onRenderGroupFooter))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this.forceListUpdate()},t.prototype.forceListUpdate=function(){var e=this.props.group;if(this._list.current){if(this._list.current.forceUpdate(),e&&e.children&&e.children.length>0)for(var t=e.children.length,n=0;n<t;n++){var r;(r=this._list.current.pageRefs["subGroup_"+String(n)])&&r.forceListUpdate()}}else(r=this._subGroupRefs["subGroup_"+String(0)])&&r.forceListUpdate()},t.prototype._onSelectionChange=function(){var e=this.props,t=e.group,n=e.selection;if(n&&t){var r=n.isRangeSelected(t.startIndex,t.count);r!==this.state.isSelected&&this.setState({isSelected:r})}},t.prototype._onRenderGroupCell=function(e,t,n){return function(r,o){return e(t,r,o,n)}},t.prototype._onRenderGroup=function(e){var t=this.props,n=t.group,r=t.items,o=t.onRenderCell,a=t.listProps,i=t.groupNestingDepth,s=t.onShouldVirtualize,l=t.groupProps,c=n&&!n.isShowingAll?n.count:r.length,u=n?n.startIndex:0;return _.createElement(Oo,(0,V.Cl)({role:l&&l.role?l.role:"rowgroup","aria-label":null===n||void 0===n?void 0:n.name,items:r,onRenderCell:this._onRenderGroupCell(o,i,n),ref:this._list,renderCount:Math.min(c,e),startIndex:u,onShouldVirtualize:s,id:this._id},a))},t.prototype._returnOne=function(){return 1},t.prototype._getGroupKey=function(e,t){return"group-"+(e&&e.key?e.key:String(e.level)+String(t))},t.prototype._getDroppingClassName=function(){var e=this.state.isDropping,t=this.props,n=t.group,r=t.groupedListClassNames;return ke((e=!(!n||!e))&&this._droppingClassName,e&&"is-dropping",e&&r&&r.groupIsDropping)},t}(_.Component),zo=(0,ve.Z)(),Bo=rr.rowHeight,Vo=rr.compactRowHeight,Ho=function(e){function t(t){var n=e.call(this,t)||this;n._list=_.createRef(),n._renderGroup=function(e,t){var r=n.props,o=r.dragDropEvents,a=r.dragDropHelper,i=r.eventsToRegister,s=r.groupProps,l=r.items,c=r.listProps,u=r.onRenderCell,d=r.selectionMode,p=r.selection,h=r.viewport,f=r.onShouldVirtualize,C=r.groups,G=r.compact,m={onToggleSelectGroup:n._onToggleSelectGroup,onToggleCollapse:n._onToggleCollapse,onToggleSummarize:n._onToggleSummarize},A=(0,V.Cl)((0,V.Cl)({},s.headerProps),m),T=(0,V.Cl)((0,V.Cl)({},s.showAllProps),m),g=(0,V.Cl)((0,V.Cl)({},s.footerProps),m),y=n._getGroupNestingDepth();if(!s.showEmptyGroups&&e&&0===e.count)return null;var v=(0,V.Cl)((0,V.Cl)({},c||{}),{version:n.state.version});return _.createElement(Po,{key:n._getGroupKey(e,t),dragDropEvents:o,dragDropHelper:a,eventsToRegister:i,footerProps:g,getGroupItemLimit:s&&s.getGroupItemLimit,group:e,groupIndex:t,groupNestingDepth:y,groupProps:s,headerProps:A,listProps:v,items:l,onRenderCell:u,onRenderGroupHeader:s.onRenderHeader,onRenderGroupShowAll:s.onRenderShowAll,onRenderGroupFooter:s.onRenderFooter,selectionMode:d,selection:p,showAllProps:T,viewport:h,onShouldVirtualize:f,groupedListClassNames:n._classNames,groups:C,compact:G})},n._getDefaultGroupItemLimit=function(e){return e.children&&e.children.length>0?e.children.length:e.count},n._getGroupItemLimit=function(e){var t=n.props.groupProps;return(t&&t.getGroupItemLimit?t.getGroupItemLimit:n._getDefaultGroupItemLimit)(e)},n._getGroupHeight=function(e){var t=n.props.compact?Vo:Bo;return t+(e.isCollapsed?0:t*n._getGroupItemLimit(e))},n._getPageHeight=function(e){var t=n.state.groups,r=n.props.getGroupHeight,o=void 0===r?n._getGroupHeight:r,a=t&&t[e];return a?o(a,e):0},n._onToggleCollapse=function(e){var t=n.props.groupProps,r=t&&t.headerProps&&t.headerProps.onToggleCollapse;e&&(r&&r(e),e.isCollapsed=!e.isCollapsed,n._updateIsSomeGroupExpanded(),n.forceUpdate())},n._onToggleSelectGroup=function(e){var t=n.props,r=t.selection,o=t.selectionMode;e&&r&&o===Zn.multiple&&r.toggleRangeSelected(e.startIndex,e.count)},n._isInnerZoneKeystroke=function(e){return e.which===(0,xe.SM)(we.c.right)},n._onToggleSummarize=function(e){var t=n.props.groupProps,r=t&&t.showAllProps&&t.showAllProps.onToggleSummarize;r?r(e):(e&&(e.isShowingAll=!e.isShowingAll),n.forceUpdate())},n._getPageSpecification=function(e){var t=n.state.groups,r=t&&t[e];return{key:r&&r.key}},W(n),n._isSomeGroupExpanded=n._computeIsSomeGroupExpanded(t.groups);var r=t.listProps,o=(void 0===r?{}:r).version,a=void 0===o?{}:o;return n.state={groups:t.groups,items:t.items,listProps:t.listProps,version:a},n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.groups,r=e.selectionMode,o=e.compact,a=e.items,i=e.listProps,s=i&&i.version,l=(0,V.Cl)((0,V.Cl)({},t),{selectionMode:r,compact:o,groups:n,listProps:i,items:a}),c=!1;return s===(t.listProps&&t.listProps.version)&&a===t.items&&n===t.groups&&r===t.selectionMode&&o===t.compact||(c=!0),c&&(l=(0,V.Cl)((0,V.Cl)({},l),{version:{}})),l},t.prototype.scrollToIndex=function(e,t,n){this._list.current&&this._list.current.scrollToIndex(e,t,n)},t.prototype.getStartItemIndexInView=function(){return this._list.current.getStartItemIndexInView()||0},t.prototype.componentDidMount=function(){var e=this.props,t=e.groupProps,n=e.groups,r=void 0===n?[]:n;t&&t.isAllGroupsCollapsed&&this._setGroupsCollapsedState(r,t.isAllGroupsCollapsed)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.usePageCache,r=e.onShouldVirtualize,o=e.theme,a=e.role,i=void 0===a?"treegrid":a,s=e.styles,l=e.compact,c=e.focusZoneProps,u=void 0===c?{}:c,d=e.rootListProps,p=void 0===d?{}:d,h=this.state,f=h.groups,C=h.version;this._classNames=zo(s,{theme:o,className:t,compact:l});var G=u.shouldEnterInnerZone,m=void 0===G?this._isInnerZoneKeystroke:G;return _.createElement(en,(0,V.Cl)({direction:ct.vertical,"data-automationid":"GroupedList","data-is-scrollable":"false",role:"presentation"},u,{shouldEnterInnerZone:m,className:ke(this._classNames.root,u.className)}),f?_.createElement(Oo,(0,V.Cl)({ref:this._list,role:i,items:f,onRenderCell:this._renderGroup,getItemCountForPage:this._returnOne,getPageHeight:this._getPageHeight,getPageSpecification:this._getPageSpecification,usePageCache:n,onShouldVirtualize:r,version:C},p)):this._renderGroup(void 0,0))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this._forceListUpdates()},t.prototype.toggleCollapseAll=function(e){var t=this.state.groups,n=void 0===t?[]:t,r=this.props.groupProps,o=r&&r.onToggleCollapseAll;n.length>0&&(o&&o(e),this._setGroupsCollapsedState(n,e),this._updateIsSomeGroupExpanded(),this.forceUpdate())},t.prototype._setGroupsCollapsedState=function(e,t){for(var n=0;n<e.length;n++)e[n].isCollapsed=t},t.prototype._returnOne=function(){return 1},t.prototype._getGroupKey=function(e,t){return"group-"+(e&&e.key?e.key:String(t))},t.prototype._getGroupNestingDepth=function(){for(var e=0,t=this.state.groups;t&&t.length>0;)e++,t=t[0].children;return e},t.prototype._forceListUpdates=function(e){this.setState({version:{}})},t.prototype._computeIsSomeGroupExpanded=function(e){var t=this;return!(!e||!e.some((function(e){return e.children?t._computeIsSomeGroupExpanded(e.children):!e.isCollapsed})))},t.prototype._updateIsSomeGroupExpanded=function(){var e=this.state.groups,t=this.props.onGroupExpandStateChanged,n=this._computeIsSomeGroupExpanded(e);this._isSomeGroupExpanded!==n&&(t&&t(n),this._isSomeGroupExpanded=n)},t.defaultProps={selectionMode:Zn.multiple,isHeaderVisible:!0,groupProps:{},compact:!1},t}(_.Component),Wo=(0,ye.I)(Ho,(function(e){var t,n,r=e.theme,o=e.className,a=e.compact,i=r.palette,s=(0,Lt.Km)(qr,r);return{root:[s.root,r.fonts.small,{position:"relative",selectors:(t={},t[".".concat(s.listCell)]={minHeight:38},t)},a&&[s.compact,{selectors:(n={},n[".".concat(s.listCell)]={minHeight:32},n)}],o],group:[s.group,{transition:"background-color ".concat(Lt.cs.durationValue2," ").concat(Xr)}],groupIsDropping:{backgroundColor:i.neutralLight}}}),void 0,{scope:"GroupedList"}),Uo=["setState","render","componentWillMount","UNSAFE_componentWillMount","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount"];var jo=function(e){function t(t){var n=e.call(this,t)||this;return n._updateComposedComponentRef=n._updateComposedComponentRef.bind(n),n}return(0,V.C6)(t,e),t.prototype._updateComposedComponentRef=function(e){var t;this._composedComponentInstance=e,e?this._hoisted=function(e,t,n){void 0===n&&(n=Uo);var r=[],o=function(o){"function"!==typeof t[o]||void 0!==e[o]||n&&-1!==n.indexOf(o)||(r.push(o),e[o]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t[o].apply(t,e)})};for(var a in t)o(a);return r}(this,e):this._hoisted&&(t=this,this._hoisted.forEach((function(e){return delete t[e]})))},t}(_.Component);function Ko(e,t){var n,r=(null!==t&&void 0!==t?t:!e||e&&e.hasOwnProperty("devicePixelRatio"))?(0,_e.z)():(0,_e.z)(e);return e&&(e===r?n={left:0,top:0,width:r.innerWidth,height:r.innerHeight,right:r.innerWidth,bottom:r.innerHeight}:e.getBoundingClientRect&&(n=e.getBoundingClientRect())),n}function qo(e){return function(t){function n(e){var n=t.call(this,e)||this;return n._root=_.createRef(),n._registerResizeObserver=function(){var e=(0,_e.z)(n._root.current);n._viewportResizeObserver=new e.ResizeObserver(n._onAsyncResize),n._viewportResizeObserver.observe(n._root.current)},n._unregisterResizeObserver=function(){n._viewportResizeObserver&&(n._viewportResizeObserver.disconnect(),delete n._viewportResizeObserver)},n._updateViewport=function(e){var t=n.state.viewport,r=n._root.current,o=(0,_e.z)(r),a=Ko(Dt(r),o),i=Ko(r,o);((i&&i.width)!==t.width||(a&&a.height)!==t.height)&&n._resizeAttempts<3&&i&&a?(n._resizeAttempts++,n.setState({viewport:{width:i.width,height:a.height}},(function(){n._updateViewport(e)}))):(n._resizeAttempts=0,e&&n._composedComponentInstance&&n._composedComponentInstance.forceUpdate())},n._async=new Xe(n),n._events=new tt(n),n._resizeAttempts=0,n.state={viewport:{width:0,height:0}},n}return(0,V.C6)(n,t),n.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.delayFirstMeasure,r=t.disableResizeObserver,o=t.skipViewportMeasures,a=(0,_e.z)(this._root.current);this._onAsyncResize=this._async.debounce(this._onAsyncResize,500,{leading:!1}),o||(!r&&this._isResizeObserverAvailable()?this._registerResizeObserver():this._events.on(a,"resize",this._onAsyncResize),n?this._async.setTimeout((function(){e._updateViewport()}),500):this._updateViewport())},n.prototype.componentDidUpdate=function(e){var t=e.skipViewportMeasures,n=this.props,r=n.disableResizeObserver,o=n.skipViewportMeasures,a=(0,_e.z)(this._root.current);o!==t&&(o?(this._unregisterResizeObserver(),this._events.off(a,"resize",this._onAsyncResize)):(!r&&this._isResizeObserverAvailable()?this._viewportResizeObserver||this._registerResizeObserver():this._events.on(a,"resize",this._onAsyncResize),this._updateViewport()))},n.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose(),this._unregisterResizeObserver()},n.prototype.render=function(){var t=this.state.viewport,n=t.width>0&&t.height>0?t:void 0;return _.createElement("div",{className:"ms-Viewport",ref:this._root,style:{minWidth:1,minHeight:1}},_.createElement(e,(0,V.Cl)({ref:this._updateComposedComponentRef,viewport:n},this.props)))},n.prototype.forceUpdate=function(){this._updateViewport(!0)},n.prototype._onAsyncResize=function(){this._updateViewport()},n.prototype._isResizeObserverAvailable=function(){var e=(0,_e.z)(this._root.current);return e&&e.ResizeObserver},n}(jo)}function Xo(e){var t=_.useRef();return void 0===t.current&&(t.current={value:"function"===typeof e?e():e}),t.current.value}var Yo=(0,ve.Z)(),Zo=100,Jo={tabIndex:0},Qo={},$o=function(e){var t=e.selection,n=e.ariaLabelForListHeader,r=e.ariaLabelForSelectAllCheckbox,o=e.ariaLabelForSelectionColumn,a=e.className,i=e.checkboxVisibility,s=e.compact,l=e.constrainMode,c=e.dragDropEvents,u=e.groups,d=e.groupProps,p=e.indentWidth,h=e.items,f=e.isPlaceholderData,C=e.isHeaderVisible,G=e.layoutMode,m=e.onItemInvoked,A=e.onItemContextMenu,T=e.onColumnHeaderClick,g=e.onColumnHeaderContextMenu,y=e.selectionMode,v=void 0===y?t.mode:y,b=e.selectionPreservedOnEmptyClick,x=e.selectionZoneProps,w=e.ariaLabel,k=e.ariaLabelForGrid,I=e.rowElementEventMap,S=e.shouldApplyApplicationRole,N=void 0!==S&&S,E=e.getKey,R=e.listProps,D=e.usePageCache,F=e.onShouldVirtualize,M=e.viewport,O=e.minimumPixelsForDrag,L=e.getGroupHeight,P=e.styles,z=e.theme,B=e.cellStyleProps,H=void 0===B?nr:B,W=e.onRenderCheckbox,U=e.useFastIcons,j=e.dragDropHelper,K=e.adjustedColumns,q=e.isCollapsed,X=e.isSizing,Y=e.isSomeGroupExpanded,Z=e.version,J=e.rootRef,Q=e.listRef,$=e.focusZoneRef,ee=e.columnReorderOptions,te=e.groupedListRef,ne=e.headerRef,re=e.onGroupExpandStateChanged,oe=e.onColumnIsSizingChanged,ae=e.onRowDidMount,ie=e.onRowWillUnmount,se=e.disableSelectionZone,le=e.isSelectedOnFocus,ce=void 0===le||le,ue=e.onColumnResized,de=e.onColumnAutoResized,pe=e.onToggleCollapse,he=e.onActiveRowChanged,fe=e.onBlur,Ce=e.rowElementEventMap,Ge=e.onRenderMissingItem,me=e.onRenderItemColumn,Ae=e.onRenderField,Te=e.getCellValueKey,ge=e.getRowAriaLabel,ye=e.getRowAriaDescribedBy,ve=e.checkButtonAriaLabel,Ie=e.checkButtonGroupAriaLabel,_e=e.checkboxCellClassName,Se=e.useReducedRowRenderer,Ne=e.enableUpdateAnimations,Ee=e.enterModalSelectionOnTouch,Re=e.onRenderDefaultRow,De=e.selectionZoneRef,Fe=e.focusZoneProps,Me="grid",Oe=e.role?e.role:Me,Le=st("row"),ze=function(e){var t=0,n=e;for(;n&&n.length>0;)t++,n=n[0].children;return t}(u),Be=function(e){return _.useMemo((function(){var t={};if(e)for(var n=1,r=1,o=0,a=e;o<a.length;o++){var i=a[o];t[i.key]={numOfGroupHeadersBeforeItem:r,totalRowCount:n},r++,n+=i.count+1}return t}),[e])}(u),Ve=_.useMemo((function(){return(0,V.Cl)({renderedWindowsAhead:X?0:2,renderedWindowsBehind:X?0:2,getKey:E,version:Z},R)}),[X,E,Z,R]),He=hr.none;if(v===Zn.single&&(He=hr.hidden),v===Zn.multiple){var We=d&&d.headerProps&&d.headerProps.isCollapsedGroupSelectVisible;void 0===We&&(We=!0),He=We||!u||Y?hr.visible:hr.hidden}i===qe.hidden&&(He=hr.none);var Xe=_.useCallback((function(e){return _.createElement(_r,(0,V.Cl)({},e))}),[]),Ye=_.useCallback((function(){return null}),[]),Ze=e.onRenderDetailsHeader,Je=_.useMemo((function(){return Ze?Kn(Ze,Xe):Xe}),[Ze,Xe]),Qe=e.onRenderDetailsFooter,$e=_.useMemo((function(){return Qe?Kn(Qe,Ye):Ye}),[Qe,Ye]),et=_.useMemo((function(){return{columns:K,groupNestingDepth:ze,selection:t,selectionMode:v,viewport:M,checkboxVisibility:i,indentWidth:p,cellStyleProps:H}}),[K,ze,t,v,M,i,p,H]),tt=ee&&ee.onDragEnd,nt=_.useCallback((function(e,t){var n=e.dropLocation,r=je.outside;if(tt){if(n&&n!==je.header)r=n;else if(J.current){var o=J.current.getBoundingClientRect();t.clientX>o.left&&t.clientX<o.right&&t.clientY>o.top&&t.clientY<o.bottom&&(r=je.surface)}tt(r)}}),[tt,J]),rt=_.useMemo((function(){if(ee)return(0,V.Cl)((0,V.Cl)({},ee),{onColumnDragEnd:nt})}),[ee,nt]),ot=(C?1:0)+(e.onRenderDetailsFooter?1:0)+function(e){var t=0;if(e)for(var n=(0,V.fX)([],e,!0),r=void 0;n&&n.length>0;)++t,(r=n.pop())&&r.children&&n.push.apply(n,r.children);return t}(u)+(h?h.length:0),at=(He!==hr.none?1:0)+(K?K.length:0)+(u?1:0),it=_.useMemo((function(){return Yo(P,{theme:z,compact:s,isFixed:G===Ke.fixedColumns,isHorizontalConstrained:l===Ue.horizontalConstrained,className:a})}),[P,z,s,G,l,a]),lt=d&&d.onRenderFooter,ut=_.useMemo((function(){return lt?function(e,n){return lt((0,V.Cl)((0,V.Cl)({},e),{columns:K,groupNestingDepth:ze,indentWidth:p,selection:t,selectionMode:v,viewport:M,checkboxVisibility:i,cellStyleProps:H}),n)}:void 0}),[lt,K,ze,p,t,v,M,i,H]),dt=d&&d.onRenderHeader,pt=_.useMemo((function(){return dt?function(e,n){var r,o,a=e.groupIndex,s=void 0!==a?null===(o=null===(r=e.groups)||void 0===r?void 0:r[a])||void 0===o?void 0:o.key:void 0,l=void 0!==s&&Be[s]?Be[s].totalRowCount:0;return dt((0,V.Cl)((0,V.Cl)({},e),{columns:K,groupNestingDepth:ze,indentWidth:p,selection:t,selectionMode:i!==qe.hidden?v:Zn.none,viewport:M,checkboxVisibility:i,cellStyleProps:H,ariaColSpan:K.length,ariaLevel:void 0,ariaPosInSet:void 0,ariaSetSize:void 0,ariaRowCount:void 0,ariaRowIndex:void 0!==a?l+(C?1:0):void 0}),n)}:function(e,t){var n,r,o=e.groupIndex,a=void 0!==o?null===(r=null===(n=e.groups)||void 0===n?void 0:n[o])||void 0===r?void 0:r.key:void 0,i=void 0!==a&&Be[a]?Be[a].totalRowCount:0;return t((0,V.Cl)((0,V.Cl)({},e),{ariaColSpan:K.length,ariaLevel:void 0,ariaPosInSet:void 0,ariaSetSize:void 0,ariaRowCount:void 0,ariaRowIndex:void 0!==o?i+(C?1:0):void 0}))}}),[dt,K,ze,p,C,t,v,M,i,H,Be]),ht=_.useMemo((function(){var e;return(0,V.Cl)((0,V.Cl)({},d),{role:Oe===Me?"rowgroup":"presentation",onRenderFooter:ut,onRenderHeader:pt,headerProps:(0,V.Cl)((0,V.Cl)({},null===d||void 0===d?void 0:d.headerProps),{selectAllButtonProps:(0,V.Cl)({"aria-label":Ie},null===(e=null===d||void 0===d?void 0:d.headerProps)||void 0===e?void 0:e.selectAllButtonProps)})})}),[d,ut,pt,Ie,Oe]),ft=Xo((function(){return(0,be.J9)((function(e){var t=0;return e.forEach((function(e){return t+=e.calculatedWidth||e.minWidth})),t}))})),Ct=d&&d.collapseAllVisibility,Gt=_.useMemo((function(){return ft(K)}),[K,ft]),mt=_.useCallback((function(n,r,o,a){var l=e.onRenderRow?Kn(e.onRenderRow,Re):Re,u=a?a.key:void 0,d=u&&Be[u]?Be[u].numOfGroupHeadersBeforeItem:0,h=Oe===Me?void 0:"presentation",f=o>0?Qo:Jo,G={item:r,itemIndex:o,flatIndexOffset:(C?2:1)+d,compact:s,columns:K,groupNestingDepth:n,id:"".concat(Le,"-").concat(o),selectionMode:v,selection:t,onDidMount:ae,onWillUnmount:ie,onRenderItemColumn:me,onRenderField:Ae,getCellValueKey:Te,eventsToRegister:Ce,dragDropEvents:c,dragDropHelper:j,viewport:M,checkboxVisibility:i,collapseAllVisibility:Ct,getRowAriaLabel:ge,getRowAriaDescribedBy:ye,checkButtonAriaLabel:ve,checkboxCellClassName:_e,useReducedRowRenderer:Se,indentWidth:p,cellStyleProps:H,onRenderDetailsCheckbox:W,enableUpdateAnimations:Ne,rowWidth:Gt,useFastIcons:U,role:h,isGridRow:!0,focusZoneProps:f};return r?l(G):Ge?Ge(o,G):null}),[s,K,v,t,Le,ae,ie,me,Ae,Te,Ce,c,j,M,i,Ct,ge,ye,C,ve,_e,Se,p,H,W,Ne,U,Re,Ge,e.onRenderRow,Gt,Oe,Be]),At=_.useCallback((function(e){return function(t,n){return mt(e,t,n)}}),[mt]),Tt=_.useCallback((function(e){return e.which===(0,xe.SM)(we.c.right,z)}),[z]),gt=(0,V.Cl)((0,V.Cl)({},Fe),{componentRef:Fe&&Fe.componentRef?Fe.componentRef:$,className:Fe&&Fe.className?ke(it.focusZone,Fe.className):it.focusZone,direction:Fe?Fe.direction:ct.vertical,shouldEnterInnerZone:Fe&&Fe.shouldEnterInnerZone?Fe.shouldEnterInnerZone:Tt,onActiveElementChanged:Fe&&Fe.onActiveElementChanged?Fe.onActiveElementChanged:he,shouldRaiseClicksOnEnter:!1,onBlur:Fe&&Fe.onBlur?Fe.onBlur:fe}),yt=u&&(null===d||void 0===d?void 0:d.groupedListAs)?Nr(d.groupedListAs,Wo):Wo,vt=u?_.createElement(yt,{focusZoneProps:gt,componentRef:te,groups:u,groupProps:ht,items:h,onRenderCell:mt,role:"presentation",selection:t,selectionMode:i!==qe.hidden?v:Zn.none,dragDropEvents:c,dragDropHelper:j,eventsToRegister:I,listProps:Ve,onGroupExpandStateChanged:re,usePageCache:D,onShouldVirtualize:F,getGroupHeight:L,compact:s}):_.createElement(en,(0,V.Cl)({},gt),_.createElement(Oo,(0,V.Cl)({ref:Q,role:"presentation",items:h,onRenderCell:At(0),usePageCache:D,onShouldVirtualize:F},Ve))),bt=_.useCallback((function(e){e.which===we.c.down&&$.current&&$.current.focus()&&(ce&&0===t.getSelectedIndices().length&&t.setIndexSelected(0,!0,!1),e.preventDefault(),e.stopPropagation())}),[t,$,ce]),xt=_.useCallback((function(e){e.which!==we.c.up||e.altKey||ne.current&&ne.current.focus()&&(e.preventDefault(),e.stopPropagation())}),[ne]);return _.createElement("div",(0,V.Cl)({ref:J,className:it.root,"data-automationid":"DetailsList","data-is-scrollable":"false"},N?{role:"application"}:{}),_.createElement(Pe,null),_.createElement("div",{role:Oe,"aria-label":k||w,"aria-rowcount":f?0:ot,"aria-colcount":at,"aria-busy":f},_.createElement("div",{onKeyDown:bt,role:"presentation",className:it.headerWrapper},C&&Je({componentRef:ne,selectionMode:v,layoutMode:G,selection:t,columns:K,onColumnClick:T,onColumnContextMenu:g,onColumnResized:ue,onColumnIsSizingChanged:oe,onColumnAutoResized:de,groupNestingDepth:ze,isAllCollapsed:q,onToggleCollapseAll:pe,ariaLabel:n,ariaLabelForSelectAllCheckbox:r,ariaLabelForSelectionColumn:o,selectAllVisibility:He,collapseAllVisibility:d&&d.collapseAllVisibility,viewport:M,columnReorderProps:rt,minimumPixelsForDrag:O,cellStyleProps:H,checkboxVisibility:i,indentWidth:p,onRenderDetailsCheckbox:W,rowWidth:ft(K),useFastIcons:U},Je)),_.createElement("div",{onKeyDown:xt,role:"presentation",className:it.contentWrapper},se?vt:_.createElement(Hr,(0,V.Cl)({ref:De,selection:t,selectionPreservedOnEmptyClick:b,selectionMode:v,isSelectedOnFocus:ce,selectionClearedOnEscapePress:ce,toggleWithoutModifierPressed:!ce,onItemInvoked:m,onItemContextMenu:A,enterModalOnTouch:Ee},x||{}),vt)),$e((0,V.Cl)({},et))))},ea=function(e){function t(t){var n=e.call(this,t)||this;return n._root=_.createRef(),n._header=_.createRef(),n._groupedList=_.createRef(),n._list=_.createRef(),n._focusZone=_.createRef(),n._selectionZone=_.createRef(),n._onRenderRow=function(e,t){return _.createElement(Lr,(0,V.Cl)({},e))},n._getDerivedStateFromProps=function(e,t){var r=n.props,o=r.checkboxVisibility,a=r.items,i=r.setKey,s=r.selectionMode,l=void 0===s?n._selection.mode:s,c=r.columns,u=r.viewport,d=r.compact,p=r.dragDropEvents,h=(n.props.groupProps||{}).isAllGroupsCollapsed,f=void 0===h?void 0:h,C=e.viewport&&e.viewport.width||0,G=u&&u.width||0,m=e.setKey!==i||void 0===e.setKey,A=!1;e.layoutMode!==n.props.layoutMode&&(A=!0);var T=t;return m&&(n._initialFocusedIndex=e.initialFocusedIndex,T=(0,V.Cl)((0,V.Cl)({},T),{focusedItemIndex:void 0!==n._initialFocusedIndex?n._initialFocusedIndex:-1})),n.props.disableSelectionZone||e.items===a||n._selection.setItems(e.items,m),e.checkboxVisibility===o&&e.columns===c&&C===G&&e.compact===d||(A=!0),T=(0,V.Cl)((0,V.Cl)({},T),n._adjustColumns(e,T,!0)),e.selectionMode!==l&&(A=!0),void 0===f&&e.groupProps&&void 0!==e.groupProps.isAllGroupsCollapsed&&(T=(0,V.Cl)((0,V.Cl)({},T),{isCollapsed:e.groupProps.isAllGroupsCollapsed,isSomeGroupExpanded:!e.groupProps.isAllGroupsCollapsed})),e.dragDropEvents!==p&&(n._dragDropHelper&&n._dragDropHelper.dispose(),n._dragDropHelper=e.dragDropEvents?new Cr({selection:n._selection,minimumPixelsForDrag:e.minimumPixelsForDrag}):void 0,A=!0),A&&(T=(0,V.Cl)((0,V.Cl)({},T),{version:{}})),T},n._onGroupExpandStateChanged=function(e){n.setState({isSomeGroupExpanded:e})},n._onColumnIsSizingChanged=function(e,t){n.setState({isSizing:t})},n._onRowDidMount=function(e){var t=e.props,r=t.item,o=t.itemIndex,a=n._getItemKey(r,o);n._activeRows[a]=e,n._setFocusToRowIfPending(e);var i=n.props.onRowDidMount;i&&i(r,o)},n._onRowWillUnmount=function(e){var t=n.props.onRowWillUnmount,r=e.props,o=r.item,a=r.itemIndex,i=n._getItemKey(o,a);delete n._activeRows[i],t&&t(o,a)},n._onToggleCollapse=function(e){n.setState({isCollapsed:e}),n._groupedList.current&&n._groupedList.current.toggleCollapseAll(e)},n._onColumnResized=function(e,t,r){var o=Math.max(e.minWidth||Zo,t);n.props.onColumnResize&&n.props.onColumnResize(e,o,r),n._rememberCalculatedWidth(e,o),n.setState((0,V.Cl)((0,V.Cl)({},n._adjustColumns(n.props,n.state,!0,r)),{version:{}}))},n._onColumnAutoResized=function(e,t){var r=0,o=0,a=Object.keys(n._activeRows).length;for(var i in n._activeRows){if(n._activeRows.hasOwnProperty(i))n._activeRows[i].measureCell(t,(function(i){r=Math.max(r,i),++o===a&&n._onColumnResized(e,r,t)}))}},n._onActiveRowChanged=function(e,t){var r=n.props,o=r.items,a=r.onActiveItemChanged;if(e&&e.getAttribute("data-item-index")){var i=Number(e.getAttribute("data-item-index"));i>=0&&(a&&a(o[i],i,t),n.setState({focusedItemIndex:i}))}},n._onBlur=function(e){n.setState({focusedItemIndex:-1})},W(n),n._async=new Xe(n),n._activeRows={},n._columnOverrides={},n.state={focusedItemIndex:-1,lastWidth:0,adjustedColumns:n._getAdjustedColumns(t,void 0),isSizing:!1,isCollapsed:t.groupProps&&t.groupProps.isAllGroupsCollapsed,isSomeGroupExpanded:t.groupProps&&!t.groupProps.isAllGroupsCollapsed,version:{},getDerivedStateFromProps:n._getDerivedStateFromProps},n._selection=t.selection||new Wr({onSelectionChanged:void 0,getKey:t.getKey,selectionMode:t.selectionMode}),n.props.disableSelectionZone||n._selection.setItems(t.items,!1),n._dragDropHelper=t.dragDropEvents?new Cr({selection:n._selection,minimumPixelsForDrag:t.minimumPixelsForDrag}):void 0,n._initialFocusedIndex=t.initialFocusedIndex,n}return(0,V.C6)(t,e),t.getDerivedStateFromProps=function(e,t){return t.getDerivedStateFromProps(e,t)},t.prototype.scrollToIndex=function(e,t,n){this._list.current&&this._list.current.scrollToIndex(e,t,n),this._groupedList.current&&this._groupedList.current.scrollToIndex(e,t,n)},t.prototype.focusIndex=function(e,t,n,r){void 0===t&&(t=!1);var o=this.props.items[e];if(o){this.scrollToIndex(e,n,r);var a=this._getItemKey(o,e),i=this._activeRows[a];i&&this._setFocusToRow(i,t)}},t.prototype.getStartItemIndexInView=function(){return this._list&&this._list.current?this._list.current.getStartItemIndexInView():this._groupedList&&this._groupedList.current?this._groupedList.current.getStartItemIndexInView():0},t.prototype.updateColumn=function(e,t){var n,r,o=this.props,a=o.columns,i=void 0===a?[]:a,s=o.selectionMode,l=o.checkboxVisibility,c=o.columnReorderOptions,u=t.width,d=t.newColumnIndex,p=i.findIndex((function(t){return t.key===e.key}));if(u&&this._onColumnResized(e,u,p),void 0!==d&&c){var h=s===Zn.none||l===qe.hidden,f=(l!==qe.hidden?2:1)+p,C=h?f-1:f-2,G=h?d-1:d-2,m=null!==(n=c.frozenColumnCountFromStart)&&void 0!==n?n:0,A=null!==(r=c.frozenColumnCountFromEnd)&&void 0!==r?r:0;if(G>=m&&G<i.length-A)if(c.onColumnDrop){var T={draggedIndex:C,targetIndex:G};c.onColumnDrop(T)}else c.handleColumnReorder&&c.handleColumnReorder(C,G)}},t.prototype.componentWillUnmount=function(){this._dragDropHelper&&this._dragDropHelper.dispose(),this._async.dispose()},t.prototype.componentDidUpdate=function(e,t){this._notifyColumnsResized();var n=function(e){var t,n;return(null!==(n=null===(t=null===e||void 0===e?void 0:e.window)||void 0===t?void 0:t.document)&&void 0!==n?n:"undefined"!==typeof document)?document:void 0}(this.context);if(void 0!==this._initialFocusedIndex&&(i=this.props.items[this._initialFocusedIndex])){var r=this._getItemKey(i,this._initialFocusedIndex);(o=this._activeRows[r])&&this._setFocusToRowIfPending(o)}if(this.props.items!==e.items&&this.props.items.length>0&&-1!==this.state.focusedItemIndex&&!Ze(this._root.current,null===n||void 0===n?void 0:n.activeElement,!1)){var o,a=this.state.focusedItemIndex<this.props.items.length?this.state.focusedItemIndex:this.props.items.length-1,i=this.props.items[a];r=this._getItemKey(i,this.state.focusedItemIndex);(o=this._activeRows[r])?this._setFocusToRow(o):this._initialFocusedIndex=a}this.props.onDidUpdate&&this.props.onDidUpdate(this)},t.prototype.render=function(){return _.createElement($o,(0,V.Cl)({},this.props,this.state,{selection:this._selection,dragDropHelper:this._dragDropHelper,rootRef:this._root,listRef:this._list,groupedListRef:this._groupedList,focusZoneRef:this._focusZone,headerRef:this._header,selectionZoneRef:this._selectionZone,onGroupExpandStateChanged:this._onGroupExpandStateChanged,onColumnIsSizingChanged:this._onColumnIsSizingChanged,onRowDidMount:this._onRowDidMount,onRowWillUnmount:this._onRowWillUnmount,onColumnResized:this._onColumnResized,onColumnAutoResized:this._onColumnAutoResized,onToggleCollapse:this._onToggleCollapse,onActiveRowChanged:this._onActiveRowChanged,onBlur:this._onBlur,onRenderDefaultRow:this._onRenderRow}))},t.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this._forceListUpdates()},t.prototype._getGroupNestingDepth=function(){for(var e=0,t=this.props.groups;t&&t.length>0;)e++,t=t[0].children;return e},t.prototype._setFocusToRowIfPending=function(e){var t=e.props.itemIndex;void 0!==this._initialFocusedIndex&&t===this._initialFocusedIndex&&(this._setFocusToRow(e),delete this._initialFocusedIndex)},t.prototype._setFocusToRow=function(e,t){void 0===t&&(t=!1),this._selectionZone.current&&this._selectionZone.current.ignoreNextFocus(),this._async.setTimeout((function(){e.focus(t)}),0)},t.prototype._forceListUpdates=function(){this._groupedList.current&&this._groupedList.current.forceUpdate(),this._list.current&&this._list.current.forceUpdate()},t.prototype._notifyColumnsResized=function(){this.state.adjustedColumns.forEach((function(e){e.onColumnResize&&e.onColumnResize(e.currentWidth)}))},t.prototype._adjustColumns=function(e,t,n,r){var o=this._getAdjustedColumns(e,t,n,r),a=this.props.viewport,i=a&&a.width?a.width:0;return(0,V.Cl)((0,V.Cl)({},t),{adjustedColumns:o,lastWidth:i})},t.prototype._getAdjustedColumns=function(e,t,n,r){var o,a=this,i=e.items,s=e.layoutMode,l=e.selectionMode,c=e.viewport,u=c&&c.width?c.width:0,d=e.columns,p=this.props?this.props.columns:[],h=t?t.lastWidth:-1,f=t?t.lastSelectionMode:void 0;return n||h!==u||f!==l||p&&d!==p?(d=d||function(e,t,n,r,o,a,i,s){var l=[];if(e&&e.length){var c=e[0];for(var u in c)c.hasOwnProperty(u)&&l.push({key:u,name:u,fieldName:u,minWidth:Zo,maxWidth:300,isCollapsible:!!l.length,isMultiline:void 0!==i&&i,isSorted:r===u,isSortedDescending:!!o,isRowHeader:!1,columnActionsMode:null!==s&&void 0!==s?s:We.clickable,isResizable:t,onColumnClick:n,isGrouped:a===u})}return l}(i,!0),s===Ke.fixedColumns?(o=this._getFixedColumns(d,u,e)).forEach((function(e){a._rememberCalculatedWidth(e,e.calculatedWidth)})):(o=this._getJustifiedColumns(d,u,e)).forEach((function(e){a._getColumnOverride(e.key).currentWidth=e.calculatedWidth})),o):d||[]},t.prototype._getFixedColumns=function(e,t,n){var r=this,o=this.props,a=o.selectionMode,i=void 0===a?this._selection.mode:a,s=o.checkboxVisibility,l=o.flexMargin,c=o.skipViewportMeasures,u=t-(l||0),d=0;e.forEach((function(e){c||!e.flexGrow?u-=e.maxWidth||e.minWidth||Zo:(u-=e.minWidth||Zo,d+=e.flexGrow),u-=ta(e,n,!0)}));var p=i!==Zn.none&&s!==qe.hidden?48:0,h=36*this._getGroupNestingDepth(),f=(u-=p+h)/d;return c||e.forEach((function(e){var t=(0,V.Cl)((0,V.Cl)({},e),r._columnOverrides[e.key]);if(t.flexGrow&&t.maxWidth){var n=t.flexGrow*f+t.minWidth,o=n-t.maxWidth;o>0&&(u+=o,d-=o/(n-t.minWidth)*t.flexGrow)}})),f=u>0?u/d:0,e.map((function(e){var n=(0,V.Cl)((0,V.Cl)({},e),r._columnOverrides[e.key]);return!c&&n.flexGrow&&u<=0&&0===t||n.calculatedWidth||(!c&&n.flexGrow?(n.calculatedWidth=n.minWidth+n.flexGrow*f,n.calculatedWidth=Math.min(n.calculatedWidth,n.maxWidth||Number.MAX_VALUE)):n.calculatedWidth=n.maxWidth||n.minWidth||Zo),n}))},t.prototype._getJustifiedColumns=function(e,t,n){var r=this,o=n.selectionMode,a=void 0===o?this._selection.mode:o,i=n.checkboxVisibility,s=n.skipViewportMeasures,l=a!==Zn.none&&i!==qe.hidden?48:0,c=36*this._getGroupNestingDepth(),u=0,d=0,p=t-(l+c),h=e.map((function(e,t){var o=(0,V.Cl)((0,V.Cl)({},e),{calculatedWidth:e.minWidth||Zo}),a=(0,V.Cl)((0,V.Cl)({},o),r._columnOverrides[e.key]);return o.isCollapsible||o.isCollapsable||(d+=ta(o,n)),u+=ta(a,n),a}));if(s)return h;for(var f=h.length-1;f>=0&&u>p;){var C=(T=h[f]).minWidth||Zo,G=u-p;if(T.calculatedWidth-C>=G||!T.isCollapsible&&!T.isCollapsable){var m=T.calculatedWidth;d<p&&(T.calculatedWidth=Math.max(T.calculatedWidth-G,C)),u-=m-T.calculatedWidth}else u-=ta(T,n),h.splice(f,1);f--}for(var A=0;A<h.length&&u<p;A++){var T=h[A],g=A===h.length-1,y=this._columnOverrides[T.key];if(!y||!y.calculatedWidth||g){var v=p-u,b=void 0;if(g)b=v;else{var x=T.maxWidth;C=T.minWidth||x||Zo;b=x?Math.min(v,x-C):v}T.calculatedWidth=T.calculatedWidth+b,u+=b}}return h},t.prototype._rememberCalculatedWidth=function(e,t){var n=this._getColumnOverride(e.key);n.calculatedWidth=t,n.currentWidth=t},t.prototype._getColumnOverride=function(e){return this._columnOverrides[e]=this._columnOverrides[e]||{}},t.prototype._getItemKey=function(e,t){var n=this.props.getKey,r=void 0;return e&&(r=e.key),n&&(r=n(e,t)),r||(r=t),r},t.defaultProps={layoutMode:Ke.justified,selectionMode:Zn.multiple,constrainMode:Ue.horizontalConstrained,checkboxVisibility:qe.onHover,isHeaderVisible:!0,compact:!1,useFastIcons:!0},t.contextType=Io,t=(0,V.Cg)([qo],t)}(_.Component);function ta(e,t,n){var r=t.cellStyleProps,o=void 0===r?nr:r;return(n?0:e.calculatedWidth)+o.cellLeftPadding+o.cellRightPadding+(e.isPadded?o.cellExtraRightPadding:0)}var na={root:"ms-DetailsList",compact:"ms-DetailsList--Compact",contentWrapper:"ms-DetailsList-contentWrapper",headerWrapper:"ms-DetailsList-headerWrapper",isFixed:"is-fixed",isHorizontalConstrained:"is-horizontalConstrained",listCell:"ms-List-cell"},ra=(0,ye.I)(ea,(function(e){var t,n,r=e.theme,o=e.className,a=e.isHorizontalConstrained,i=e.compact,s=e.isFixed,l=r.semanticColors,c=(0,Lt.Km)(na,r);return{root:[c.root,r.fonts.small,{position:"relative",color:l.listText,selectors:(t={},t["& .".concat(c.listCell)]={minHeight:38,wordBreak:"break-word"},t)},s&&c.isFixed,i&&[c.compact,{selectors:(n={},n[".".concat(c.listCell)]={minHeight:32},n)}],a&&[c.isHorizontalConstrained,{overflowX:"auto",overflowY:"visible",WebkitOverflowScrolling:"touch"}],o],focusZone:[{display:"inline-block",minWidth:"100%",minHeight:1}],headerWrapper:c.headerWrapper,contentWrapper:c.contentWrapper}}),void 0,{scope:"DetailsList"});function oa(e,t){var n=_.useRef(t);return n.current||(n.current=st(e)),n.current}function aa(e,t,n){var r=_.useState(t),o=r[0],a=r[1],i=Xo(void 0!==e),s=i?e:o,l=_.useRef(s),c=_.useRef(n);_.useEffect((function(){l.current=s,c.current=n}));var u=Xo((function(){return function(e,t){var n="function"===typeof e?e(l.current):e;c.current&&c.current(t,n),i||a(n)}}));return[s,u]}var ia=n(7178);!function(e){function t(n,r){var o=e.call(this,n,r)||this;return function(e,t,n){for(var r=0,o=n.length;r<o;r++)sa(e,t,n[r])}(o,t.prototype,["componentDidMount","shouldComponentUpdate","getSnapshotBeforeUpdate","render","componentDidUpdate","componentWillUnmount"]),o}(0,V.C6)(t,e),t.prototype.componentDidUpdate=function(e,t){this._updateComponentRef(e,this.props)},t.prototype.componentDidMount=function(){this._setComponentRef(this.props.componentRef,this)},t.prototype.componentWillUnmount=function(){if(this._setComponentRef(this.props.componentRef,null),this.__disposables){for(var e=0,t=this._disposables.length;e<t;e++){var n=this.__disposables[e];n.dispose&&n.dispose()}this.__disposables=null}},Object.defineProperty(t.prototype,"className",{get:function(){if(!this.__className){var e=/function (.{1,})\(/.exec(this.constructor.toString());this.__className=e&&e.length>1?e[1]:""}return this.__className},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_disposables",{get:function(){return this.__disposables||(this.__disposables=[]),this.__disposables},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_async",{get:function(){return this.__async||(this.__async=new Xe(this),this._disposables.push(this.__async)),this.__async},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_events",{get:function(){return this.__events||(this.__events=new tt(this),this._disposables.push(this.__events)),this.__events},enumerable:!1,configurable:!0}),t.prototype._resolveRef=function(e){var t=this;return this.__resolves||(this.__resolves={}),this.__resolves[e]||(this.__resolves[e]=function(n){return t[e]=n}),this.__resolves[e]},t.prototype._updateComponentRef=function(e,t){void 0===t&&(t={}),e&&t&&e.componentRef!==t.componentRef&&(this._setComponentRef(e.componentRef,null),this._setComponentRef(t.componentRef,this))},t.prototype._warnDeprecations=function(e){this.className,this.props},t.prototype._warnMutuallyExclusive=function(e){this.className,this.props},t.prototype._warnConditionallyRequiredProps=function(e,t,n){this.className,this.props},t.prototype._setComponentRef=function(e,t){!this._skipComponentRefResolution&&e&&("function"===typeof e&&e(t),"object"===typeof e&&(e.current=t))}}(_.Component);function sa(e,t,n){var r=e[n],o=t[n];(r||o)&&(e[n]=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o&&(e=o.apply(this,t)),r!==o&&(e=r.apply(this,t)),e})}function la(){return null}function ca(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter((function(e){return e})).join(" ").trim();return""===n?void 0:n}var ua,da,pa=function(e){var t=e.className,n=e.imageProps,r=Te(e,J,["aria-label","aria-labelledby","title","aria-describedby"]),o=n.alt||e["aria-label"],a=o||e["aria-labelledby"]||e.title||n["aria-label"]||n["aria-labelledby"]||n.title,i={"aria-labelledby":e["aria-labelledby"],"aria-describedby":e["aria-describedby"],title:e.title},s=a?{}:{"aria-hidden":!0};return _.createElement("div",(0,V.Cl)({},s,r,{className:ke(nn,tn.root,tn.image,t)}),_.createElement(hn,(0,V.Cl)({},i,n,{alt:a?o:""})))},ha={topLeftEdge:0,topCenter:1,topRightEdge:2,topAutoEdge:3,bottomLeftEdge:4,bottomCenter:5,bottomRightEdge:6,bottomAutoEdge:7,leftTopEdge:8,leftCenter:9,leftBottomEdge:10,rightTopEdge:11,rightCenter:12,rightBottomEdge:13};function fa(e){var t;if("undefined"===typeof da||e){var n=(0,_e.z)(),r=null===(t=null===n||void 0===n?void 0:n.navigator)||void 0===t?void 0:t.userAgent;da=!!r&&-1!==r.indexOf("Macintosh")}return!!da}!function(e){e[e.Normal=0]="Normal",e[e.Divider=1]="Divider",e[e.Header=2]="Header",e[e.Section=3]="Section"}(ua||(ua={}));var Ca,Ga,ma=function(){return!!(window&&window.navigator&&window.navigator.userAgent)&&/iPad|iPhone|iPod/i.test(window.navigator.userAgent)};function Aa(e,t){for(var n=(0,V.Cl)({},t),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];void 0===n[a]&&(n[a]=e[a])}return n}function Ta(e){return e.canCheck?!(!e.isChecked&&!e.checked):"boolean"===typeof e.isChecked?e.isChecked:"boolean"===typeof e.checked?e.checked:null}function ga(e){return!(!e.subMenuProps&&!e.items)}function ya(e){return!(!e.isDisabled&&!e.disabled)}function va(e){return null!==Ta(e)?"menuitemcheckbox":"menuitem"}function ba(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}!function(e){e[e.top=1]="top",e[e.bottom=-1]="bottom",e[e.left=2]="left",e[e.right=-2]="right"}(Ca||(Ca={})),function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.start=2]="start",e[e.end=3]="end"}(Ga||(Ga={}));var xa,wa=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=n,this.bottom=r,this.left=e,this.right=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this.right-this.left},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return parseFloat(this.top.toFixed(4))===parseFloat(e.top.toFixed(4))&&parseFloat(this.bottom.toFixed(4))===parseFloat(e.bottom.toFixed(4))&&parseFloat(this.left.toFixed(4))===parseFloat(e.left.toFixed(4))&&parseFloat(this.right.toFixed(4))===parseFloat(e.right.toFixed(4))},e}();function ka(e,t,n){return{targetEdge:e,alignmentEdge:t,isAuto:n}}var Ia=((xa={})[ha.topLeftEdge]=ka(Ca.top,Ca.left),xa[ha.topCenter]=ka(Ca.top),xa[ha.topRightEdge]=ka(Ca.top,Ca.right),xa[ha.topAutoEdge]=ka(Ca.top,void 0,!0),xa[ha.bottomLeftEdge]=ka(Ca.bottom,Ca.left),xa[ha.bottomCenter]=ka(Ca.bottom),xa[ha.bottomRightEdge]=ka(Ca.bottom,Ca.right),xa[ha.bottomAutoEdge]=ka(Ca.bottom,void 0,!0),xa[ha.leftTopEdge]=ka(Ca.left,Ca.top),xa[ha.leftCenter]=ka(Ca.left),xa[ha.leftBottomEdge]=ka(Ca.left,Ca.bottom),xa[ha.rightTopEdge]=ka(Ca.right,Ca.top),xa[ha.rightCenter]=ka(Ca.right),xa[ha.rightBottomEdge]=ka(Ca.right,Ca.bottom),xa);function _a(e,t){return!(e.top<t.top)&&(!(e.bottom>t.bottom)&&(!(e.left<t.left)&&!(e.right>t.right)))}function Sa(e,t){var n=[];return e.top<t.top&&n.push(Ca.top),e.bottom>t.bottom&&n.push(Ca.bottom),e.left<t.left&&n.push(Ca.left),e.right>t.right&&n.push(Ca.right),n}function Na(e,t){return e[Ca[t]]}function Ea(e,t,n){return e[Ca[t]]=n,e}function Ra(e,t){var n=ja(t);return(Na(e,n.positiveEdge)+Na(e,n.negativeEdge))/2}function Da(e,t){return e>0?t:-1*t}function Fa(e,t){return Da(e,Na(t,e))}function Ma(e,t,n){return Da(n,Na(e,n)-Na(t,n))}function Oa(e,t,n,r){void 0===r&&(r=!0);var o=Na(e,t)-n,a=Ea(e,t,n);return r&&(a=Ea(e,-1*t,Na(e,-1*t)-o)),a}function La(e,t,n,r){return void 0===r&&(r=0),Oa(e,n,Na(t,n)+Da(n,r))}function Pa(e,t,n){return Fa(n,e)>Fa(n,t)}function za(e,t){for(var n=0,r=0,o=Sa(e,t);r<o.length;r++){var a=o[r];n+=Math.pow(Ma(e,t,a),2)}return n}function Ba(e,t,n,r){return void 0===r&&(r=200),(n===Ca.bottom||n===Ca.top)&&Ma(e,t,n)>=r}function Va(e,t,n,r,o,a,i,s,l){void 0===o&&(o=!1),void 0===i&&(i=0);var c=r.alignmentEdge,u=r.alignTargetEdge,d={elementRectangle:e,targetEdge:r.targetEdge,alignmentEdge:c};s||l||(d=function(e,t,n,r,o,a,i){void 0===o&&(o=!1),void 0===i&&(i=0);var s=[Ca.left,Ca.right,Ca.bottom,Ca.top];(0,xe.jI)()&&(s[0]*=-1,s[1]*=-1);for(var l,c=e,u=r.targetEdge,d=r.alignmentEdge,p=u,h=d,f=0;f<4;f++){if(Pa(c,n,u))return{elementRectangle:c,targetEdge:u,alignmentEdge:d};if(o&&Ba(t,n,u,a)){switch(u){case Ca.bottom:c.bottom=n.bottom;break;case Ca.top:c.top=n.top}return{elementRectangle:c,targetEdge:u,alignmentEdge:d,forcedInBounds:!0}}var C=za(c,n);(!l||C<l)&&(l=C,p=u,h=d),s.splice(s.indexOf(u),1),s.length>0&&(s.indexOf(-1*u)>-1?u*=-1:(d=u,u=s.slice(-1)[0]),c=Ua(e,t,{targetEdge:u,alignmentEdge:d},i))}return{elementRectangle:c=Ua(e,t,{targetEdge:p,alignmentEdge:h},i),targetEdge:p,alignmentEdge:h}}(e,t,n,r,o,a,i));var p=Sa(d.elementRectangle,n),h=s?-d.targetEdge:void 0;if(p.length>0)if(u)if(d.alignmentEdge&&p.indexOf(-1*d.alignmentEdge)>-1){var f=function(e,t,n,r){var o=e.alignmentEdge,a=e.targetEdge,i=-1*o;return{elementRectangle:Ua(e.elementRectangle,t,{targetEdge:a,alignmentEdge:i},n,r),targetEdge:a,alignmentEdge:i}}(d,t,i,l);if(_a(f.elementRectangle,n))return f;d=Ha(Sa(f.elementRectangle,n),d,n,h)}else d=Ha(p,d,n,h);else d=Ha(p,d,n,h);return d}function Ha(e,t,n,r){for(var o=0,a=e;o<a.length;o++){var i=a[o],s=void 0;if(r&&r===-1*i)s=Oa(t.elementRectangle,i,Na(n,i),!1),t.forcedInBounds=!0;else Pa(s=La(t.elementRectangle,n,i),n,-1*i)||(s=Oa(s,-1*i,Na(n,-1*i),!1),t.forcedInBounds=!0);t.elementRectangle=s}return t}function Wa(e,t,n){var r=ja(t).positiveEdge;return Oa(e,r,n-(Ra(e,t)-Na(e,r)))}function Ua(e,t,n,r,o){void 0===r&&(r=0);var a=new wa(e.left,e.right,e.top,e.bottom),i=n.alignmentEdge,s=n.targetEdge,l=o?s:-1*s;(a=o?La(a,t,s,r):function(e,t,n,r){void 0===r&&(r=0);var o=Da(-1*n,r);return Oa(e,-1*n,Na(t,n)+o)}(a,t,s,r),i)?a=La(a,t,i):a=Wa(a,l,Ra(t,s));return a}function ja(e){return e===Ca.top||e===Ca.bottom?{positiveEdge:Ca.left,negativeEdge:Ca.right}:{positiveEdge:Ca.top,negativeEdge:Ca.bottom}}function Ka(e,t,n){return n&&Math.abs(Ma(e,n,t))>Math.abs(Ma(e,n,-1*t))?-1*t:t}function qa(e,t,n,r,o,a,i,s){var l,c={},u=ei(t),d=a?n:-1*n,p=o||ja(n).positiveEdge;return i&&!function(e,t,n){return void 0!==n&&Na(e,t)===Na(n,t)}(e,(l=p,-1*l),r)||(p=Ka(e,p,r)),c[Ca[d]]=Ma(e,u,d),c[Ca[p]]=Ma(e,u,p),s&&(c[Ca[-1*d]]=Ma(e,u,-1*d),c[Ca[-1*p]]=Ma(e,u,-1*p)),c}function Xa(e){return Math.sqrt(e*e*2)}function Ya(e,t,n){if(void 0===e&&(e=ha.bottomAutoEdge),n)return{alignmentEdge:n.alignmentEdge,isAuto:n.isAuto,targetEdge:n.targetEdge};var r=(0,V.Cl)({},Ia[e]);return(0,xe.jI)()?(r.alignmentEdge&&r.alignmentEdge%2===0&&(r.alignmentEdge=-1*r.alignmentEdge),void 0!==t?Ia[t]:r):r}function Za(e,t,n){var r=Ra(t,e),o=Ra(n,e),a=ja(e),i=a.positiveEdge,s=a.negativeEdge;return r<=o?i:s}function Ja(e,t,n,r,o,a,i,s,l){void 0===a&&(a=!1);var c=Ua(e,t,r,o,l);return _a(c,n)?{elementRectangle:c,targetEdge:r.targetEdge,alignmentEdge:r.alignmentEdge}:Va(c,t,n,r,a,i,o,s,l)}function Qa(e,t,n){var r=-1*e.targetEdge,o=new wa(0,e.elementRectangle.width,0,e.elementRectangle.height),a={},i=Ka(e.elementRectangle,e.alignmentEdge?e.alignmentEdge:ja(r).positiveEdge,n),s=Ma(e.elementRectangle,e.targetRectangle,r)>Math.abs(Na(t,r));return a[Ca[r]]=Na(t,r),a[Ca[i]]=Ma(t,o,i),{elementPosition:(0,V.Cl)({},a),closestEdge:Za(e.targetEdge,t,o),targetEdge:r,hideBeak:!s}}function $a(e,t){var n=t.targetRectangle,r=ja(t.targetEdge),o=r.positiveEdge,a=r.negativeEdge,i=Ra(n,t.targetEdge),s=new wa(e/2,t.elementRectangle.width-e/2,e/2,t.elementRectangle.height-e/2),l=new wa(0,e,0,e);return Pa(l=Wa(l=Oa(l,-1*t.targetEdge,-e/2),-1*t.targetEdge,i-Fa(o,t.elementRectangle)),s,o)?Pa(l,s,a)||(l=La(l,s,a)):l=La(l,s,o),l}function ei(e){var t=e.getBoundingClientRect();return new wa(t.left,t.right,t.top,t.bottom)}function ti(e){return new wa(e.left,e.right,e.top,e.bottom)}function ni(e,t,n,r,o,a){void 0===o&&(o=!1);var i=e.gapSpace?e.gapSpace:0,s=function(e,t){var n;if(t){if(t.preventDefault){var r=t;n=new wa(r.clientX,r.clientX,r.clientY,r.clientY)}else if(t.getBoundingClientRect)n=ei(t);else{var o=t,a=o.left||o.x,i=o.top||o.y,s=o.right||a,l=o.bottom||i;n=new wa(a,s,i,l)}if(!_a(n,e))for(var c=0,u=Sa(n,e);c<u.length;c++){var d=u[c];n[Ca[d]]=e[Ca[d]]}}else n=new wa(0,0,0,0);return n}(n,e.target),l=function(e,t,n,r,o){return e.isAuto&&(e.alignmentEdge=Za(e.targetEdge,t,n)),e.alignTargetEdge=o,e}(Ya(e.directionalHint,e.directionalHintForRTL,r),s,n,e.coverTarget,e.alignTargetEdge),c=Ja(ei(t),s,n,l,i,o,a,e.directionalHintFixed,e.coverTarget);return(0,V.Cl)((0,V.Cl)({},c),{targetRectangle:s})}function ri(e,t,n,r,o){return{elementPosition:qa(e.elementRectangle,t,e.targetEdge,n,e.alignmentEdge,r,o,e.forcedInBounds),targetEdge:e.targetEdge,alignmentEdge:e.alignmentEdge}}function oi(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),Xa(e?t:0)/2+n}function ai(e,t,n,r,o,a,i,s){void 0===o&&(o=!1);var l=null!==s&&void 0!==s?s:(0,_e.z)(),c=e.isBeakVisible&&e.beakWidth||0,u=oi(e.isBeakVisible,e.beakWidth,e.gapSpace),d=e;d.gapSpace=u;var p=e.bounds?ti(e.bounds):new wa(0,l.innerWidth-function(e){if(void 0===Nt){var t=null!==e&&void 0!==e?e:(0,Je.Y)(),n=t.createElement("div");n.style.setProperty("width","100px"),n.style.setProperty("height","100px"),n.style.setProperty("overflow","scroll"),n.style.setProperty("position","absolute"),n.style.setProperty("top","-9999px"),t.body.appendChild(n),Nt=n.offsetWidth-n.clientWidth,t.body.removeChild(n)}return Nt}(),0,l.innerHeight),h=ni(d,n,p,r,o,a),f=Qa(h,$a(c,h),p);return(0,V.Cl)((0,V.Cl)({},ri(h,t,p,e.coverTarget,i)),{beakPosition:f})}function ii(e){var t,n,r,o,a=e,i=e,s=e,l=null!==(t=s.left)&&void 0!==t?t:s.x,c=null!==(n=s.top)&&void 0!==n?n:s.y,u=null!==(r=s.right)&&void 0!==r?r:l,d=null!==(o=s.bottom)&&void 0!==o?o:c;return a.stopPropagation?new wa(a.clientX,a.clientX,a.clientY,a.clientY):void 0!==l&&void 0!==c?new wa(l,u,c,d):ei(i)}function si(e,t,n,r,o){return function(e,t,n,r,o){return ai(e,t,n,r,!1,void 0,!0,null!==o&&void 0!==o?o:(0,_e.z)())}(e,t,n,r,o)}var li=["TEMPLATE","STYLE","SCRIPT"];function ci(e){var t=(0,Je.Y)(e);if(!t)return function(){};for(var n=[];e!==t.body&&e.parentElement;){for(var r=0,o=e.parentElement.children;r<o.length;r++){var a=o[r],i=a.getAttribute("aria-hidden");a!==e&&"true"!==(null===i||void 0===i?void 0:i.toLowerCase())&&-1===li.indexOf(a.tagName)&&n.push([a,i])}e=e.parentElement}return n.forEach((function(e){e[0].setAttribute("aria-hidden","true")})),function(){!function(e){e.forEach((function(e){var t=e[0],n=e[1];n?t.setAttribute("aria-hidden",n):t.removeAttribute("aria-hidden")}))}(n),n=[]}}function ui(){var e=_.useRef();return e.current||(e.current=new Xe),_.useEffect((function(){return function(){var t;null===(t=e.current)||void 0===t||t.dispose(),e.current=void 0}}),[]),e.current}function di(e,t,n,r){var o=_.useRef(n);o.current=n,_.useEffect((function(){var n=e&&"current"in e?e.current:e;if(n&&n.addEventListener)return ba(n,t,(function(e){return o.current(e)}),r)}),[e,t,r])}function pi(e){var t=e.originalElement,n=e.containsFocus;t&&n&&t!==(0,_e.z)()&&setTimeout((function(){var e;null===(e=t.focus)||void 0===e||e.call(t)}),0)}function hi(e,t){var n=e.onRestoreFocus,r=void 0===n?pi:n,o=_.useRef(),a=_.useRef(!1);_.useEffect((function(){return o.current=(0,Je.Y)().activeElement,function(e){var t=(0,Je.Y)(e),n=t&&t.activeElement;return!(!n||!Ze(e,n))}(t.current)&&(a.current=!0),function(){var e;null===r||void 0===r||r({originalElement:o.current,containsFocus:a.current,documentContainsFocus:(null===(e=(0,Je.Y)())||void 0===e?void 0:e.hasFocus())||!1}),o.current=void 0}}),[]),di(t,"focus",_.useCallback((function(){a.current=!0}),[]),!0),di(t,"blur",_.useCallback((function(e){t.current&&e.relatedTarget&&!t.current.contains(e.relatedTarget)&&(a.current=!1)}),[]),!0)}var fi,Ci=_.forwardRef((function(e,t){var n=Aa({shouldRestoreFocus:!0,enableAriaHiddenSiblings:!0},e),r=_.useRef(),o=ln(r,t);!function(e,t){var n="true"===String(e["aria-modal"]).toLowerCase()&&e.enableAriaHiddenSiblings;_.useEffect((function(){if(n&&t.current)return ci(t.current)}),[t,n])}(n,r),hi(n,r);var a=n.role,i=n.className,s=n.ariaLabel,l=n.ariaLabelledBy,c=n.ariaDescribedBy,u=n.style,d=n.children,p=n.onDismiss,h=function(e,t){var n=ui(),r=_.useState(!1),o=r[0],a=r[1];return _.useEffect((function(){return n.requestAnimationFrame((function(){var n;if(!e.style||!e.style.overflowY){var r=!1;if(t&&t.current&&(null===(n=t.current)||void 0===n?void 0:n.firstElementChild)){var i=t.current.clientHeight,s=t.current.firstElementChild.clientHeight;i>0&&s>i&&(r=s-i>1)}o!==r&&a(r)}})),function(){return n.dispose()}})),o}(n,r),f=_.useCallback((function(e){if(e.which===we.c.escape)p&&(p(e),e.preventDefault(),e.stopPropagation())}),[p]);return di(_o(),"keydown",f),_.createElement("div",(0,V.Cl)({ref:o},Te(n,Ae),{className:i,role:a,"aria-label":s,"aria-labelledby":l,"aria-describedby":c,onKeyDown:f,style:(0,V.Cl)({overflowY:h?"scroll":void 0,outline:"none"},u)}),d)}));function Gi(e,t){var n=_.useRef(),r=_.useRef(null),o=_o();if(!e||e!==n.current||"string"===typeof e){var a=null===t||void 0===t?void 0:t.current;if(e)if("string"===typeof e){var i=(0,Je.Y)(a);r.current=i?i.querySelector(e):null}else r.current="stopPropagation"in e||"getBoundingClientRect"in e?e:"current"in e?e.current:e;n.current=e}return[r,o]}Ci.displayName="Popup";var mi=((fi={})[Ca.top]=Lt.lw.slideUpIn10,fi[Ca.bottom]=Lt.lw.slideDownIn10,fi[Ca.left]=Lt.lw.slideLeftIn10,fi[Ca.right]=Lt.lw.slideRightIn10,fi),Ai=0,Ti=0,gi={opacity:0,filter:"opacity(0)",pointerEvents:"none"},yi=["role","aria-roledescription"],vi={preventDismissOnLostFocus:!1,preventDismissOnScroll:!1,preventDismissOnResize:!1,isBeakVisible:!0,beakWidth:16,gapSpace:0,minPagePadding:8,directionalHint:ha.bottomAutoEdge},bi=(0,ve.Z)({disableCaching:!0});function xi(e,t,n,r){var o,a=e.calloutMaxHeight,i=e.finalHeight,s=e.directionalHint,l=e.directionalHintFixed,c=e.hidden,u=e.gapSpace,d=e.beakWidth,p=e.isBeakVisible,h=e.coverTarget,f=_.useState(),C=f[0],G=f[1],m=null!==(o=null===r||void 0===r?void 0:r.elementPosition)&&void 0!==o?o:{},A=m.top,T=m.bottom,g=(null===n||void 0===n?void 0:n.current)?ii(n.current):void 0;return _.useEffect((function(){var e,n,o=null!==(e=t())&&void 0!==e?e:{},i=o.top,s=o.bottom;(null===r||void 0===r?void 0:r.targetEdge)===Ca.top&&(null===g||void 0===g?void 0:g.top)&&!h&&(s=g.top-function(e,t,n){return oi(e,t,n)}(p,d,u)),"number"===typeof A&&s?n=s-A:"number"===typeof T&&"number"===typeof i&&s&&(n=s-i-T),G(!a&&!c||a&&n&&a>n?n:a||void 0)}),[T,a,i,s,l,t,c,r,A,u,d,p,g,h]),C}function wi(e,t,n,r,o,a){var i,s=_.useState(),l=s[0],c=s[1],u=_.useRef(0),d=_.useRef(),p=ui(),h=e.hidden,f=e.target,C=e.finalHeight,G=e.calloutMaxHeight,m=e.onPositioned,A=e.directionalHint,T=e.hideOverflow,g=e.preferScrollResizePositioning,y=No(),v=_.useRef();v.current!==a.current&&(v.current=a.current,i=a.current?null===y||void 0===y?void 0:y.getComputedStyle(a.current):void 0);var b=null===i||void 0===i?void 0:i.overflowY;return _.useEffect((function(){if(!h){var a=p.requestAnimationFrame((function(){var a,i,s,p;if(t.current&&n){var h=(0,V.Cl)((0,V.Cl)({},e),{target:r.current,bounds:o()}),A=n.cloneNode(!0);A.style.maxHeight=G?"".concat(G):"",A.style.visibility="hidden",null===(a=n.parentElement)||void 0===a||a.appendChild(A);var v=d.current===f?l:void 0,x=g&&!(T||"clip"===b||"hidden"===b),w=C?si(h,t.current,A,v,y):function(e,t,n,r,o,a,i){return ai(e,t,n,r,o,a,void 0,i)}(h,t.current,A,v,x,void 0,y);null===(i=n.parentElement)||void 0===i||i.removeChild(A),!l&&w||l&&w&&(p=w,!_i((s=l).elementPosition,p.elementPosition)||!_i(s.beakPosition.elementPosition,p.beakPosition.elementPosition))&&u.current<5?(u.current++,c(w)):u.current>0&&(u.current=0,null===m||void 0===m||m(l))}}),n);return d.current=f,function(){p.cancelAnimationFrame(a),d.current=void 0}}c(void 0),u.current=0}),[h,A,p,n,G,t,r,C,o,m,l,e,f,T,g,b,y]),l}var ki=_.memo(_.forwardRef((function(e,t){var n=Aa(vi,e),r=n.styles,o=n.style,a=n.ariaLabel,i=n.ariaDescribedBy,s=n.ariaLabelledBy,l=n.className,c=n.isBeakVisible,u=n.children,d=n.beakWidth,p=n.calloutWidth,h=n.calloutMaxWidth,f=n.calloutMinWidth,C=n.doNotLayer,G=n.finalHeight,m=n.hideOverflow,A=void 0===m?!!G:m,T=n.backgroundColor,g=n.calloutMaxHeight,y=n.onScroll,v=n.shouldRestoreFocus,b=void 0===v||v,x=n.target,w=n.hidden,k=n.onLayerMounted,I=n.popupProps,S=_.useRef(null),N=ln(_.useRef(null),null===I||void 0===I?void 0:I.ref),E=_.useState(null),R=E[0],D=E[1],F=_.useCallback((function(e){D(e)}),[]),M=ln(S,t),O=Gi(n.target,{current:R}),L=O[0],P=O[1],z=function(e,t,n){var r=e.bounds,o=e.minPagePadding,a=void 0===o?vi.minPagePadding:o,i=e.target,s=_.useState(!1),l=s[0],c=s[1],u=_.useRef(),d=_.useCallback((function(){if(!u.current||l){var e="function"===typeof r?n?r(i,n):void 0:r;!e&&n&&(e=function(e,t){return function(e,t){var n=void 0;if(t.getWindowSegments&&(n=t.getWindowSegments()),void 0===n||n.length<=1)return{top:0,left:0,right:t.innerWidth,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight};var r=0,o=0;if(null!==e&&e.getBoundingClientRect){var a=e.getBoundingClientRect();r=(a.left+a.right)/2,o=(a.top+a.bottom)/2}else null!==e&&(r=e.left||e.x,o=e.top||e.y);for(var i={top:0,left:0,right:0,bottom:0,width:0,height:0},s=0,l=n;s<l.length;s++){var c=l[s];r&&c.left<=r&&c.right>=r&&o&&c.top<=o&&c.bottom>=o&&(i={top:c.top,left:c.left,right:c.right,bottom:c.bottom,width:c.width,height:c.height})}return i}(e,t)}(t.current,n),e={top:e.top+a,left:e.left+a,right:e.right-a,bottom:e.bottom-a,width:e.width-2*a,height:e.height-2*a}),u.current=e,l&&c(!1)}return u.current}),[r,a,i,t,n,l]),p=ui();return di(n,"resize",p.debounce((function(){c(!0)}),500,{leading:!0})),d}(n,L,P),B=wi(n,S,R,L,z,N),H=xi(n,z,L,B),W=function(e,t,n,r,o){var a=e.hidden,i=e.onDismiss,s=e.preventDismissOnScroll,l=e.preventDismissOnResize,c=e.preventDismissOnLostFocus,u=e.dismissOnTargetClick,d=e.shouldDismissOnWindowFocus,p=e.preventDismissOnEvent,h=_.useRef(!1),f=ui(),C=Xo([function(){h.current=!0},function(){h.current=!1}]),G=!!t;return _.useEffect((function(){var e=function(e){G&&!s&&m(e)},t=function(e){l||p&&p(e)||null===i||void 0===i||i(e)},C=function(e){c||m(e)},m=function(e){var t=e.composedPath?e.composedPath():[],a=t.length>0?t[0]:e.target,s=n.current&&!Ze(n.current,a);if(s&&h.current)h.current=!1;else if(!r.current&&s||e.target!==o&&s&&(!r.current||"stopPropagation"in r.current||u||a!==r.current&&!Ze(r.current,a))){if(p&&p(e))return;null===i||void 0===i||i(e)}},A=function(e){d&&((!p||p(e))&&(p||c)||(null===o||void 0===o?void 0:o.document.hasFocus())||null!==e.relatedTarget||null===i||void 0===i||i(e))},T=new Promise((function(n){f.setTimeout((function(){if(!a&&o){var r=[ba(o,"scroll",e,!0),ba(o,"resize",t,!0),ba(o.document.documentElement,"focus",C,!0),ba(o.document.documentElement,"click",C,!0),ba(o,"blur",A,!0)];n((function(){r.forEach((function(e){return e()}))}))}}),0)}));return function(){T.then((function(e){return e()}))}}),[a,f,n,r,o,i,d,u,c,l,s,G,p]),C}(n,B,S,L,P),U=W[0],j=W[1],K=(null===B||void 0===B?void 0:B.elementPosition.top)&&(null===B||void 0===B?void 0:B.elementPosition.bottom),q=(0,V.Cl)((0,V.Cl)({},null===B||void 0===B?void 0:B.elementPosition),{maxHeight:H});if(K&&(q.bottom=void 0),function(e,t,n){var r=e.hidden,o=e.setInitialFocus,a=ui(),i=!!t;_.useEffect((function(){if(!r&&o&&i&&n){var e=a.requestAnimationFrame((function(){return Tt(n)}),n);return function(){return a.cancelAnimationFrame(e)}}}),[r,i,a,n,o])}(n,B,R),_.useEffect((function(){w||null===k||void 0===k||k()}),[w]),!P)return null;var X=A,Y=c&&!!x,Z=bi(r,{theme:n.theme,className:l,overflowYHidden:X,calloutWidth:p,positions:B,beakWidth:d,backgroundColor:T,calloutMaxWidth:h,calloutMinWidth:f,doNotLayer:C}),J=(0,V.Cl)((0,V.Cl)({maxHeight:g||"100%"},o),X&&{overflowY:"hidden"}),Q=n.hidden?{visibility:"hidden"}:void 0;return _.createElement("div",{ref:M,className:Z.container,style:Q},_.createElement("div",(0,V.Cl)({},Te(n,Ae,yi),{className:ke(Z.root,B&&B.targetEdge&&mi[B.targetEdge]),style:B?(0,V.Cl)({},q):gi,tabIndex:-1,ref:F}),Y&&_.createElement("div",{className:Z.beak,style:Ii(B)}),Y&&_.createElement("div",{className:Z.beakCurtain}),_.createElement(Ci,(0,V.Cl)({role:n.role,"aria-roledescription":n["aria-roledescription"],ariaDescribedBy:i,ariaLabel:a,ariaLabelledBy:s,className:Z.calloutMain,onDismiss:n.onDismiss,onMouseDown:U,onMouseUp:j,onRestoreFocus:n.onRestoreFocus,onScroll:y,shouldRestoreFocus:b,style:J},I,{ref:N}),u)))})),(function(e,t){return!(t.shouldUpdateWhenHidden||!e.hidden||!t.hidden)||Qe(e,t)}));function Ii(e){var t,n,r=(0,V.Cl)((0,V.Cl)({},null===(t=null===e||void 0===e?void 0:e.beakPosition)||void 0===t?void 0:t.elementPosition),{display:(null===(n=null===e||void 0===e?void 0:e.beakPosition)||void 0===n?void 0:n.hideBeak)?"none":void 0});return r.top||r.bottom||r.left||r.right||(r.left=Ti,r.top=Ai),r}function _i(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=e[n],o=t[n];if(void 0===r||void 0===o)return!1;if(r.toFixed(2)!==o.toFixed(2))return!1}return!0}function Si(e){return{height:e,width:e}}ki.displayName="CalloutContentBase";var Ni={container:"ms-Callout-container",root:"ms-Callout",beak:"ms-Callout-beak",beakCurtain:"ms-Callout-beakCurtain",calloutMain:"ms-Callout-main"},Ei=(0,ye.I)(ki,(function(e){var t,n=e.theme,r=e.className,o=e.overflowYHidden,a=e.calloutWidth,i=e.beakWidth,s=e.backgroundColor,l=e.calloutMaxWidth,c=e.calloutMinWidth,u=e.doNotLayer,d=(0,Lt.Km)(Ni,n),p=n.semanticColors,h=n.effects;return{container:[d.container,{position:"relative"}],root:[d.root,n.fonts.medium,{position:"absolute",display:"flex",zIndex:u?Lt.nA.Layer:void 0,boxSizing:"border-box",borderRadius:h.roundedCorner2,boxShadow:h.elevation16,selectors:(t={},t[Lt.up]={borderWidth:1,borderStyle:"solid",borderColor:"WindowText"},t)},(0,Lt.QN)(),r,!!a&&{width:a},!!l&&{maxWidth:l},!!c&&{minWidth:c}],beak:[d.beak,{position:"absolute",backgroundColor:p.menuBackground,boxShadow:"inherit",border:"inherit",boxSizing:"border-box",transform:"rotate(45deg)"},Si(i),s&&{backgroundColor:s}],beakCurtain:[d.beakCurtain,{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:p.menuBackground,borderRadius:h.roundedCorner2}],calloutMain:[d.calloutMain,{backgroundColor:p.menuBackground,overflowX:"hidden",overflowY:"auto",position:"relative",width:"100%",borderRadius:h.roundedCorner2},o&&{overflowY:"hidden"},s&&{backgroundColor:s}]}}),void 0,{scope:"CalloutContent"}),Ri=_.forwardRef((function(e,t){var n=e.layerProps,r=e.doNotLayer,o=(0,V.Tt)(e,["layerProps","doNotLayer"]),a=_.createElement(Ei,(0,V.Cl)({},o,{doNotLayer:r,ref:t}));return r?a:_.createElement(Wn,(0,V.Cl)({},n),a)}));Ri.displayName="Callout";var Di,Fi=function(e){var t=e.item,n=e.classNames,r=t.iconProps;return _.createElement(Gn,(0,V.Cl)({},r,{className:n.icon}))},Mi=function(e){var t=e.item;return e.hasIcons?t.onRenderIcon?t.onRenderIcon(e,Fi):Fi(e):null},Oi=function(e){var t=e.onCheckmarkClick,n=e.item,r=e.classNames,o=Ta(n);if(t){return _.createElement(Gn,{iconName:!1!==n.canCheck&&o?"CheckMark":"",className:r.checkmarkIcon,onClick:function(e){return t(n,e)}})}return null},Li=function(e){var t=e.item,n=e.classNames;return t.text||t.name?_.createElement("span",{className:n.label},t.text||t.name):null},Pi=function(e){var t=e.item,n=e.classNames;return t.secondaryText?_.createElement("span",{className:n.secondaryText},t.secondaryText):null},zi=function(e){var t=e.item,n=e.classNames,r=e.theme;return ga(t)?_.createElement(Gn,(0,V.Cl)({iconName:(0,xe.jI)(r)?"ChevronLeft":"ChevronRight"},t.submenuIconProps,{className:n.subMenuIcon})):null},Bi=function(e){function t(t){var n=e.call(this,t)||this;return n.openSubMenu=function(){var e=n.props,t=e.item,r=e.openSubMenu,o=e.getSubmenuTarget;if(o){var a=o();ga(t)&&r&&a&&r(t,a)}},n.dismissSubMenu=function(){var e=n.props,t=e.item,r=e.dismissSubMenu;ga(t)&&r&&r()},n.dismissMenu=function(e){var t=n.props.dismissMenu;t&&t(void 0,e)},W(n),n}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.classNames,r=t.onRenderContent||this._renderLayout;return _.createElement("div",{className:t.split?n.linkContentMenu:n.linkContent},r(this.props,{renderCheckMarkIcon:Oi,renderItemIcon:Mi,renderItemName:Li,renderSecondaryText:Pi,renderSubMenuIcon:zi}))},t.prototype._renderLayout=function(e,t){return _.createElement(_.Fragment,null,t.renderCheckMarkIcon(e),t.renderItemIcon(e),t.renderItemName(e),t.renderSecondaryText(e),t.renderSubMenuIcon(e))},t}(_.Component),Vi=(0,be.J9)((function(e){return(0,Lt.l8)({wrapper:{display:"inline-flex",height:"100%",alignItems:"center"},divider:{width:1,height:"100%",backgroundColor:e.palette.neutralTertiaryAlt}})})),Hi=36,Wi=(0,Lt.L6)(0,Lt.mm),Ui=(0,be.J9)((function(e){var t,n,r,o,a,i=e.semanticColors,s=e.fonts,l=e.palette,c=i.menuItemBackgroundHovered,u=i.menuItemTextHovered,d=i.menuItemBackgroundPressed,p=i.bodyDivider,h={item:[s.medium,{color:i.bodyText,position:"relative",boxSizing:"border-box"}],divider:{display:"block",height:"1px",backgroundColor:p,position:"relative"},root:[(0,Lt.gm)(e),s.medium,{color:i.bodyText,backgroundColor:"transparent",border:"none",width:"100%",height:Hi,lineHeight:Hi,display:"block",cursor:"pointer",padding:"0px 8px 0 4px",textAlign:"left"}],rootDisabled:{color:i.disabledBodyText,cursor:"default",pointerEvents:"none",selectors:(t={},t[Lt.up]={color:"GrayText",opacity:1},t)},rootHovered:{backgroundColor:c,color:u,selectors:{".ms-ContextualMenu-icon":{color:l.themeDarkAlt},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootFocused:{backgroundColor:l.white},rootChecked:{selectors:{".ms-ContextualMenu-checkmarkIcon":{color:l.neutralPrimary}}},rootPressed:{backgroundColor:d,selectors:{".ms-ContextualMenu-icon":{color:l.themeDark},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootExpanded:{backgroundColor:d,color:i.bodyTextChecked,selectors:(n={".ms-ContextualMenu-submenuIcon":(r={},r[Lt.up]={color:"inherit"},r)},n[Lt.up]=(0,V.Cl)({},(0,Lt.Qg)()),n)},linkContent:{whiteSpace:"nowrap",height:"inherit",display:"flex",alignItems:"center",maxWidth:"100%"},anchorLink:{padding:"0px 8px 0 4px",textRendering:"auto",color:"inherit",letterSpacing:"normal",wordSpacing:"normal",textTransform:"none",textIndent:"0px",textShadow:"none",textDecoration:"none",boxSizing:"border-box"},label:{margin:"0 4px",verticalAlign:"middle",display:"inline-block",flexGrow:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},secondaryText:{color:e.palette.neutralSecondary,paddingLeft:"20px",textAlign:"right"},icon:{display:"inline-block",minHeight:"1px",maxHeight:Hi,fontSize:Lt.fF.medium,width:Lt.fF.medium,margin:"0 4px",verticalAlign:"middle",flexShrink:"0",selectors:(o={},o[Wi]={fontSize:Lt.fF.large,width:Lt.fF.large},o)},iconColor:{color:i.menuIcon},iconDisabled:{color:i.disabledBodyText},checkmarkIcon:{color:i.bodySubtext},subMenuIcon:{height:Hi,lineHeight:Hi,color:l.neutralSecondary,textAlign:"center",display:"inline-block",verticalAlign:"middle",flexShrink:"0",fontSize:Lt.fF.small,selectors:(a={":hover":{color:l.neutralPrimary},":active":{color:l.neutralPrimary}},a[Wi]={fontSize:Lt.fF.medium},a)},splitButtonFlexContainer:[(0,Lt.gm)(e),{display:"flex",height:Hi,flexWrap:"nowrap",justifyContent:"center",alignItems:"flex-start"}]};return(0,Lt.TW)(h)})),ji="28px",Ki=(0,Lt.L6)(0,Lt.mm),qi=(0,be.J9)((function(e){var t;return(0,Lt.l8)(Vi(e),{wrapper:{position:"absolute",right:28,selectors:(t={},t[Ki]={right:32},t)},divider:{height:16,width:1}})})),Xi={item:"ms-ContextualMenu-item",divider:"ms-ContextualMenu-divider",root:"ms-ContextualMenu-link",isChecked:"is-checked",isExpanded:"is-expanded",isDisabled:"is-disabled",linkContent:"ms-ContextualMenu-linkContent",linkContentMenu:"ms-ContextualMenu-linkContent",icon:"ms-ContextualMenu-icon",iconColor:"ms-ContextualMenu-iconColor",checkmarkIcon:"ms-ContextualMenu-checkmarkIcon",subMenuIcon:"ms-ContextualMenu-submenuIcon",label:"ms-ContextualMenu-itemText",secondaryText:"ms-ContextualMenu-secondaryText",splitMenu:"ms-ContextualMenu-splitMenu",screenReaderText:"ms-ContextualMenu-screenReaderText"},Yi=(0,be.J9)((function(e,t,n,r,o,a,i,s,l,c,u,d){var p,h,f,C,G=Ui(e),m=(0,Lt.Km)(Xi,e);return(0,Lt.l8)({item:[m.item,G.item,i],divider:[m.divider,G.divider,s],root:[m.root,G.root,r&&[m.isChecked,G.rootChecked],o&&G.anchorLink,n&&[m.isExpanded,G.rootExpanded],t&&[m.isDisabled,G.rootDisabled],!t&&!n&&[{selectors:(p={":hover":G.rootHovered,":active":G.rootPressed},p[".".concat(Ee.Y2," &:focus, .").concat(Ee.Y2," &:focus:hover")]=G.rootFocused,p[".".concat(Ee.Y2," &:hover")]={background:"inherit;"},p)}],d],splitPrimary:[G.root,{width:"calc(100% - ".concat(ji,")")},r&&["is-checked",G.rootChecked],(t||u)&&["is-disabled",G.rootDisabled],!(t||u)&&!r&&[{selectors:(h={":hover":G.rootHovered},h[":hover ~ .".concat(m.splitMenu)]=G.rootHovered,h[":active"]=G.rootPressed,h[".".concat(Ee.Y2," &:focus, .").concat(Ee.Y2," &:focus:hover")]=G.rootFocused,h[".".concat(Ee.Y2," &:hover")]={background:"inherit;"},h)}]],splitMenu:[m.splitMenu,G.root,{flexBasis:"0",padding:"0 8px",minWidth:ji},n&&["is-expanded",G.rootExpanded],t&&["is-disabled",G.rootDisabled],!t&&!n&&[{selectors:(f={":hover":G.rootHovered,":active":G.rootPressed},f[".".concat(Ee.Y2," &:focus, .").concat(Ee.Y2," &:focus:hover")]=G.rootFocused,f[".".concat(Ee.Y2," &:hover")]={background:"inherit;"},f)}]],anchorLink:G.anchorLink,linkContent:[m.linkContent,G.linkContent],linkContentMenu:[m.linkContentMenu,G.linkContent,{justifyContent:"center"}],icon:[m.icon,a&&G.iconColor,G.icon,l,t&&[m.isDisabled,G.iconDisabled]],iconColor:G.iconColor,checkmarkIcon:[m.checkmarkIcon,a&&G.checkmarkIcon,G.icon,l],subMenuIcon:[m.subMenuIcon,G.subMenuIcon,c,n&&{color:e.palette.neutralPrimary},t&&[G.iconDisabled]],label:[m.label,G.label],secondaryText:[m.secondaryText,G.secondaryText],splitContainer:[G.splitButtonFlexContainer,!t&&!r&&[{selectors:(C={},C[".".concat(Ee.Y2," &:focus, .").concat(Ee.Y2," &:focus:hover")]=G.rootFocused,C)}]],screenReaderText:[m.screenReaderText,G.screenReaderText,Lt.dX,{visibility:"hidden"}]})})),Zi=function(e){var t=e.theme,n=e.disabled,r=e.expanded,o=e.checked,a=e.isAnchorLink,i=e.knownIcon,s=e.itemClassName,l=e.dividerClassName,c=e.iconClassName,u=e.subMenuClassName,d=e.primaryDisabled,p=e.className;return Yi(t,n,r,o,a,i,s,l,c,u,d,p)},Ji=(0,ye.I)(Bi,Zi,void 0,{scope:"ContextualMenuItem"}),Qi=function(e){function t(t){var n=e.call(this,t)||this;return n._onItemMouseEnter=function(e){var t=n.props,r=t.item,o=t.onItemMouseEnter;o&&o(r,e,e.currentTarget)},n._onItemClick=function(e){var t=n.props,r=t.item,o=t.onItemClickBase;o&&o(r,e,e.currentTarget)},n._onItemMouseLeave=function(e){var t=n.props,r=t.item,o=t.onItemMouseLeave;o&&o(r,e)},n._onItemKeyDown=function(e){var t=n.props,r=t.item,o=t.onItemKeyDown;o&&o(r,e)},n._onItemMouseMove=function(e){var t=n.props,r=t.item,o=t.onItemMouseMove;o&&o(r,e,e.currentTarget)},n._getSubmenuTarget=function(){},W(n),n}return(0,V.C6)(t,e),t.prototype.shouldComponentUpdate=function(e){return!Qe(e,this.props)},t}(_.Component),$i="ktp",es="-",ts="ktp-layer-id";function ns(e){var t=(0,_.useRef)();return(0,_.useEffect)((function(){t.current=e})),t.current}!function(e){e.KEYTIP_ADDED="keytipAdded",e.KEYTIP_REMOVED="keytipRemoved",e.KEYTIP_UPDATED="keytipUpdated",e.PERSISTED_KEYTIP_ADDED="persistedKeytipAdded",e.PERSISTED_KEYTIP_REMOVED="persistedKeytipRemoved",e.PERSISTED_KEYTIP_EXECUTE="persistedKeytipExecute",e.ENTER_KEYTIP_MODE="enterKeytipMode",e.EXIT_KEYTIP_MODE="exitKeytipMode"}(Di||(Di={}));var rs=function(){function e(){this.keytips={},this.persistedKeytips={},this.sequenceMapping={},this.inKeytipMode=!1,this.shouldEnterKeytipMode=!0,this.delayUpdatingKeytipChange=!1}return e.getInstance=function(){return this._instance},e.prototype.init=function(e){this.delayUpdatingKeytipChange=e},e.prototype.register=function(e,t){void 0===t&&(t=!1);var n=e;t||(n=this.addParentOverflow(e),this.sequenceMapping[n.keySequences.toString()]=n);var r=this._getUniqueKtp(n);if(t?this.persistedKeytips[r.uniqueID]=r:this.keytips[r.uniqueID]=r,this.inKeytipMode||!this.delayUpdatingKeytipChange){var o=t?Di.PERSISTED_KEYTIP_ADDED:Di.KEYTIP_ADDED;tt.raise(this,o,{keytip:n,uniqueID:r.uniqueID})}return r.uniqueID},e.prototype.update=function(e,t){var n=this.addParentOverflow(e),r=this._getUniqueKtp(n,t),o=this.keytips[t];o&&(r.keytip.visible=o.keytip.visible,this.keytips[t]=r,delete this.sequenceMapping[o.keytip.keySequences.toString()],this.sequenceMapping[r.keytip.keySequences.toString()]=r.keytip,!this.inKeytipMode&&this.delayUpdatingKeytipChange||tt.raise(this,Di.KEYTIP_UPDATED,{keytip:r.keytip,uniqueID:r.uniqueID}))},e.prototype.unregister=function(e,t,n){void 0===n&&(n=!1),n?delete this.persistedKeytips[t]:delete this.keytips[t],!n&&delete this.sequenceMapping[e.keySequences.toString()];var r=n?Di.PERSISTED_KEYTIP_REMOVED:Di.KEYTIP_REMOVED;!this.inKeytipMode&&this.delayUpdatingKeytipChange||tt.raise(this,r,{keytip:e,uniqueID:t})},e.prototype.enterKeytipMode=function(){tt.raise(this,Di.ENTER_KEYTIP_MODE)},e.prototype.exitKeytipMode=function(){tt.raise(this,Di.EXIT_KEYTIP_MODE)},e.prototype.getKeytips=function(){var e=this;return Object.keys(this.keytips).map((function(t){return e.keytips[t].keytip}))},e.prototype.addParentOverflow=function(e){var t=(0,V.fX)([],e.keySequences,!0);if(t.pop(),0!==t.length){var n=this.sequenceMapping[t.toString()];if(n&&n.overflowSetSequence)return(0,V.Cl)((0,V.Cl)({},e),{overflowSetSequence:n.overflowSetSequence})}return e},e.prototype.menuExecute=function(e,t){tt.raise(this,Di.PERSISTED_KEYTIP_EXECUTE,{overflowButtonSequences:e,keytipSequences:t})},e.prototype._getUniqueKtp=function(e,t){return void 0===t&&(t=st()),{keytip:(0,V.Cl)({},e),uniqueID:t}},e._instance=new e,e}();function os(e){return e.reduce((function(e,t){return e+es+t.split("").join(es)}),$i)}function as(e){var t=_.useRef(),n=e.keytipProps?(0,V.Cl)({disabled:e.disabled},e.keytipProps):void 0,r=Xo(rs.getInstance()),o=ns(e);sn((function(){t.current&&n&&((null===o||void 0===o?void 0:o.keytipProps)!==e.keytipProps||(null===o||void 0===o?void 0:o.disabled)!==e.disabled)&&r.update(n,t.current)})),sn((function(){return n&&(t.current=r.register(n)),function(){n&&r.unregister(n,t.current)}}),[]);var a={ariaDescribedBy:void 0,keytipId:void 0};return n&&(a=function(e,t,n){var r=e.addParentOverflow(t),o=ca(n,function(e){var t=" "+ts;return e.length?t+" "+os(e):t}(r.keySequences)),a=(0,V.fX)([],r.keySequences,!0);r.overflowSetSequence&&(a=function(e,t){var n=t.length,r=(0,V.fX)([],t,!0).pop();return function(e,t,n){var r=e.slice();return r.splice(t,0,n),r}((0,V.fX)([],e,!0),n-1,r)}(a,r.overflowSetSequence));var i=os(a);return{ariaDescribedBy:o,keytipId:i}}(r,n,e.ariaDescribedBy)),a}var is=function(e){var t,n=e.children,r=as((0,V.Tt)(e,["children"])),o=r.keytipId,a=r.ariaDescribedBy;return n(((t={})["data-ktp-target"]=o,t["data-ktp-execute-target"]=o,t["aria-describedby"]=a,t))},ss=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._anchor=_.createRef(),t._getMemoizedMenuButtonKeytipProps=(0,be.J9)((function(e){return(0,V.Cl)((0,V.Cl)({},e),{hasMenu:!0})})),t._getSubmenuTarget=function(){return t._anchor.current?t._anchor.current:void 0},t._onItemClick=function(e){var n=t.props,r=n.item,o=n.onItemClick;o&&o(r,e)},t._renderAriaDescription=function(e,n){return e?_.createElement("span",{id:t._ariaDescriptionId,className:n},e):null},t}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.item,r=t.classNames,o=t.index,a=t.focusableElementIndex,i=t.totalItemCount,s=t.hasCheckmarks,l=t.hasIcons,c=t.expandedMenuItemKey,u=t.onItemClick,d=t.openSubMenu,p=t.dismissSubMenu,h=t.dismissMenu,f=Ji;this.props.item.contextualMenuItemAs&&(f=Nr(this.props.item.contextualMenuItemAs,f)),this.props.contextualMenuItemAs&&(f=Nr(this.props.contextualMenuItemAs,f));var C=n.rel;n.target&&"_blank"===n.target.toLowerCase()&&(C=C||"nofollow noopener noreferrer");var G=ga(n),m=Te(n,re),A=ya(n),T=n.itemProps,g=n.ariaDescription,y=n.keytipProps;y&&G&&(y=this._getMemoizedMenuButtonKeytipProps(y)),g&&(this._ariaDescriptionId=st());var v=ca(n.ariaDescribedBy,g?this._ariaDescriptionId:void 0,m["aria-describedby"]),b={"aria-describedby":v};return _.createElement("div",null,_.createElement(is,{keytipProps:n.keytipProps,ariaDescribedBy:v,disabled:A},(function(t){return _.createElement("a",(0,V.Cl)({},b,m,t,{ref:e._anchor,href:n.href,target:n.target,rel:C,className:r.root,role:"menuitem","aria-haspopup":G||void 0,"aria-expanded":G?n.key===c:void 0,"aria-posinset":a+1,"aria-setsize":i,"aria-disabled":ya(n),style:n.style,onClick:e._onItemClick,onMouseEnter:e._onItemMouseEnter,onMouseLeave:e._onItemMouseLeave,onMouseMove:e._onItemMouseMove,onKeyDown:G?e._onItemKeyDown:void 0}),_.createElement(f,(0,V.Cl)({componentRef:n.componentRef,item:n,classNames:r,index:o,onCheckmarkClick:s&&u?u:void 0,hasIcons:l,openSubMenu:d,dismissSubMenu:p,dismissMenu:h,getSubmenuTarget:e._getSubmenuTarget},T)),e._renderAriaDescription(g,r.screenReaderText))})))},t}(Qi),ls=(0,ve.Z)(),cs=_.forwardRef((function(e,t){var n=e.styles,r=e.theme,o=e.getClassNames,a=e.className,i=ls(n,{theme:r,getClassNames:o,className:a});return _.createElement("span",{className:i.wrapper,ref:t},_.createElement("span",{className:i.divider}))}));cs.displayName="VerticalDividerBase";var us,ds=(0,ye.I)(cs,(function(e){var t=e.theme,n=e.getClassNames,r=e.className;if(!t)throw new Error("Theme is undefined or null.");if(n){var o=n(t);return{wrapper:[o.wrapper],divider:[o.divider]}}return{wrapper:[{display:"inline-flex",height:"100%",alignItems:"center"},r],divider:[{width:1,height:"100%",backgroundColor:t.palette.neutralTertiaryAlt}]}}),void 0,{scope:"VerticalDivider"}),ps=function(e){function t(t){var n=e.call(this,t)||this;return n._getMemoizedMenuButtonKeytipProps=(0,be.J9)((function(e){return(0,V.Cl)((0,V.Cl)({},e),{hasMenu:!0})})),n._onItemKeyDown=function(e){var t=n.props,r=t.item,o=t.onItemKeyDown;e.which===we.c.enter?(n._executeItemClick(e),e.preventDefault(),e.stopPropagation()):o&&o(r,e)},n._getSubmenuTarget=function(){return n._splitButton},n._renderAriaDescription=function(e,t){return e?_.createElement("span",{id:n._ariaDescriptionId,className:t},e):null},n._onItemMouseEnterPrimary=function(e){var t=n.props,r=t.item,o=t.onItemMouseEnter;o&&o((0,V.Cl)((0,V.Cl)({},r),{subMenuProps:void 0,items:void 0}),e,n._splitButton)},n._onItemMouseEnterIcon=function(e){var t=n.props,r=t.item,o=t.onItemMouseEnter;o&&o(r,e,n._splitButton)},n._onItemMouseMovePrimary=function(e){var t=n.props,r=t.item,o=t.onItemMouseMove;o&&o((0,V.Cl)((0,V.Cl)({},r),{subMenuProps:void 0,items:void 0}),e,n._splitButton)},n._onItemMouseMoveIcon=function(e){var t=n.props,r=t.item,o=t.onItemMouseMove;o&&o(r,e,n._splitButton)},n._onIconItemClick=function(e){var t=n.props,r=t.item,o=t.onItemClickBase;o&&o(r,e,n._splitButton?n._splitButton:e.currentTarget)},n._executeItemClick=function(e){var t=n.props,r=t.item,o=t.executeItemClick,a=t.onItemClick;if(!r.disabled&&!r.isDisabled)return n._processingTouch&&!r.canCheck&&a?a(r,e):void(o&&o(r,e))},n._onTouchStart=function(e){n._splitButton&&!("onpointerdown"in n._splitButton)&&n._handleTouchAndPointerEvent(e)},n._onPointerDown=function(e){"touch"===e.pointerType&&(n._handleTouchAndPointerEvent(e),e.preventDefault(),e.stopImmediatePropagation())},n._async=new Xe(n),n._events=new tt(n),n._dismissLabelId=st(),n}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){this._splitButton&&"onpointerdown"in this._splitButton&&this._events.on(this._splitButton,"pointerdown",this._onPointerDown,!0)},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.render=function(){var e,t=this,n=this.props,r=n.item,o=n.classNames,a=n.index,i=n.focusableElementIndex,s=n.totalItemCount,l=n.hasCheckmarks,c=n.hasIcons,u=n.onItemMouseLeave,d=n.expandedMenuItemKey,p=ga(r),h=r.keytipProps;h&&(h=this._getMemoizedMenuButtonKeytipProps(h));var f=r.ariaDescription;f&&(this._ariaDescriptionId=st());var C=null!==(e=Ta(r))&&void 0!==e?e:void 0;return _.createElement(is,{keytipProps:h,disabled:ya(r)},(function(e){return _.createElement("div",{"data-ktp-target":e["data-ktp-target"],ref:function(e){return t._splitButton=e},role:va(r),"aria-label":r.ariaLabel,className:o.splitContainer,"aria-disabled":ya(r),"aria-expanded":p?r.key===d:void 0,"aria-haspopup":!0,"aria-describedby":ca(r.ariaDescribedBy,f?t._ariaDescriptionId:void 0,e["aria-describedby"]),"aria-checked":C,"aria-posinset":i+1,"aria-setsize":s,onMouseEnter:t._onItemMouseEnterPrimary,onMouseLeave:u?u.bind(t,(0,V.Cl)((0,V.Cl)({},r),{subMenuProps:null,items:null})):void 0,onMouseMove:t._onItemMouseMovePrimary,onKeyDown:t._onItemKeyDown,onClick:t._executeItemClick,onTouchStart:t._onTouchStart,tabIndex:0,"data-is-focusable":!0,"aria-roledescription":r["aria-roledescription"]},t._renderSplitPrimaryButton(r,o,a,l,c),t._renderSplitDivider(r),t._renderSplitIconButton(r,o,a,e),t._renderAriaDescription(f,o.screenReaderText))}))},t.prototype._renderSplitPrimaryButton=function(e,t,n,r,o){var a=this.props,i=a.contextualMenuItemAs,s=void 0===i?Ji:i,l=a.onItemClick,c={key:e.key,disabled:ya(e)||e.primaryDisabled,name:e.name,text:e.text||e.name,secondaryText:e.secondaryText,className:t.splitPrimary,canCheck:e.canCheck,isChecked:e.isChecked,checked:e.checked,iconProps:e.iconProps,id:this._dismissLabelId,onRenderIcon:e.onRenderIcon,data:e.data,"data-is-focusable":!1},u=e.itemProps;return _.createElement("button",(0,V.Cl)({},Te(c,oe)),_.createElement(s,(0,V.Cl)({"data-is-focusable":!1,item:c,classNames:t,index:n,onCheckmarkClick:r&&l?l:void 0,hasIcons:o},u)))},t.prototype._renderSplitDivider=function(e){var t=e.getSplitButtonVerticalDividerClassNames||qi;return _.createElement(ds,{getClassNames:t})},t.prototype._renderSplitIconButton=function(e,t,n,r){var o=this.props,a=o.onItemMouseLeave,i=o.onItemMouseDown,s=o.openSubMenu,l=o.dismissSubMenu,c=o.dismissMenu,u=Ji;this.props.item.contextualMenuItemAs&&(u=Nr(this.props.item.contextualMenuItemAs,u)),this.props.contextualMenuItemAs&&(u=Nr(this.props.contextualMenuItemAs,u));var d={onClick:this._onIconItemClick,disabled:ya(e),className:t.splitMenu,subMenuProps:e.subMenuProps,submenuIconProps:e.submenuIconProps,split:!0,key:e.key,"aria-labelledby":this._dismissLabelId},p=(0,V.Cl)((0,V.Cl)({},Te(d,oe)),{onMouseEnter:this._onItemMouseEnterIcon,onMouseLeave:a?a.bind(this,e):void 0,onMouseDown:function(t){return i?i(e,t):void 0},onMouseMove:this._onItemMouseMoveIcon,"data-is-focusable":!1,"data-ktp-execute-target":r["data-ktp-execute-target"],"aria-haspopup":!0}),h=e.itemProps;return _.createElement("button",(0,V.Cl)({},p),_.createElement(u,(0,V.Cl)({componentRef:e.componentRef,item:d,classNames:t,index:n,hasIcons:!1,openSubMenu:s,dismissSubMenu:l,dismissMenu:c,getSubmenuTarget:this._getSubmenuTarget},h)))},t.prototype._handleTouchAndPointerEvent=function(e){var t=this,n=this.props.onTap;n&&n(e),this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout((function(){t._processingTouch=!1,t._lastTouchTimeoutId=void 0}),500)},t}(Qi),hs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._btn=_.createRef(),t._getMemoizedMenuButtonKeytipProps=(0,be.J9)((function(e){return(0,V.Cl)((0,V.Cl)({},e),{hasMenu:!0})})),t._renderAriaDescription=function(e,n){return e?_.createElement("span",{id:t._ariaDescriptionId,className:n},e):null},t._getSubmenuTarget=function(){return t._btn.current?t._btn.current:void 0},t}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.item,r=t.classNames,o=t.index,a=t.focusableElementIndex,i=t.totalItemCount,s=t.hasCheckmarks,l=t.hasIcons,c=t.contextualMenuItemAs,u=t.expandedMenuItemKey,d=t.onItemMouseDown,p=t.onItemClick,h=t.openSubMenu,f=t.dismissSubMenu,C=t.dismissMenu,G=Ji;n.contextualMenuItemAs&&(G=Nr(n.contextualMenuItemAs,G)),c&&(G=Nr(c,G));var m=Ta(n),A=null!==m,T=va(n),g=ga(n),y=n.itemProps,v=n.ariaLabel,b=n.ariaDescription,x=Te(n,oe);delete x.disabled;var w=n.role||T;b&&(this._ariaDescriptionId=st());var k=ca(n.ariaDescribedBy,b?this._ariaDescriptionId:void 0,x["aria-describedby"]),I={className:r.root,onClick:this._onItemClick,onKeyDown:g?this._onItemKeyDown:void 0,onMouseEnter:this._onItemMouseEnter,onMouseLeave:this._onItemMouseLeave,onMouseDown:function(e){return d?d(n,e):void 0},onMouseMove:this._onItemMouseMove,href:n.href,title:n.title,"aria-label":v,"aria-describedby":k,"aria-haspopup":g||void 0,"aria-expanded":g?n.key===u:void 0,"aria-posinset":a+1,"aria-setsize":i,"aria-disabled":ya(n),"aria-checked":"menuitemcheckbox"!==w&&"menuitemradio"!==w||!A?void 0:!!m,"aria-selected":"menuitem"===w&&A?!!m:void 0,role:w,style:n.style},S=n.keytipProps;return S&&g&&(S=this._getMemoizedMenuButtonKeytipProps(S)),_.createElement(is,{keytipProps:S,ariaDescribedBy:k,disabled:ya(n)},(function(t){return _.createElement("button",(0,V.Cl)({ref:e._btn},x,I,t),_.createElement(G,(0,V.Cl)({componentRef:n.componentRef,item:n,classNames:r,index:o,onCheckmarkClick:s&&p?p:void 0,hasIcons:l,openSubMenu:h,dismissSubMenu:f,dismissMenu:C,getSubmenuTarget:e._getSubmenuTarget},y)),e._renderAriaDescription(b,r.screenReaderText))}))},t}(Qi);!function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e[e.xLarge=3]="xLarge",e[e.xxLarge=4]="xxLarge",e[e.xxxLarge=5]="xxxLarge",e[e.unknown=999]="unknown"}(us||(us={}));var fs,Cs,Gs=[479,639,1023,1365,1919,99999999];function ms(){var e;return null!==(e=null!==fs&&void 0!==fs?fs:Cs)&&void 0!==e?e:us.large}function As(e){try{return e.document.documentElement.clientWidth}catch(t){return e.innerWidth}}function Ts(e){var t=us.small;if(e){try{for(;As(e)>Gs[t];)t++}catch(n){t=ms()}Cs=t}else{if(void 0===fs)throw new Error("Content was rendered in a server environment without providing a default responsive mode. Call setResponsiveMode to define what the responsive mode is.");t=fs}return t}var gs=_.createContext({}),ys=(0,ve.Z)(),vs=(0,ve.Z)(),bs={items:[],shouldFocusOnMount:!0,gapSpace:0,directionalHint:ha.bottomAutoEdge,beakWidth:16};function xs(e){for(var t=0,n=0,r=e;n<r.length;n++){var o=r[n];if(o.itemType!==ua.Divider&&o.itemType!==ua.Header)t+=o.customOnRenderListLength?o.customOnRenderListLength:1}return t}function ws(e,t){var n=null===t||void 0===t?void 0:t.target,r=e.subMenuProps?e.subMenuProps.items:e.items;if(r){for(var o=[],a=0,i=r;a<i.length;a++){var s=i[a];if(s.preferMenuTargetAsEventTarget){var l=s.onClick,c=(0,V.Tt)(s,["onClick"]);o.push((0,V.Cl)((0,V.Cl)({},c),{onClick:Ms(l,n)}))}else o.push(s)}return o}}var ks="ContextualMenu",Is=(0,be.J9)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Lt.pB.apply(void 0,(0,V.fX)([t,Zi],e,!1))}}));function _s(e,t){var n=e.hidden,r=e.items,o=e.theme,a=e.className,i=e.id,s=e.target,l=_.useState(),c=l[0],u=l[1],d=_.useState(),p=d[0],h=d[1],f=_.useState(),C=f[0],G=f[1],m=oa(ks,i),A=_.useCallback((function(){G(void 0),u(void 0),h(void 0)}),[]),T=_.useCallback((function(e,t,n){var r=e.key;c!==r&&(t.focus(),G(n),u(r),h(t))}),[c]);_.useEffect((function(){n&&A()}),[n,A]);var g=function(e,t){var n=_.useRef(!1);_.useEffect((function(){return n.current=!0,function(){n.current=!1}}),[]);var r=function(r,o){o?e(r,o):n.current&&t()};return r}(t,A);return[c,T,function(){var e=Fs(c,r),t=null;if(e&&(t={items:ws(e,{target:s}),target:p,onDismiss:g,isSubMenu:!0,id:m,shouldFocusOnMount:!0,shouldFocusOnContainer:C,directionalHint:(0,xe.jI)(o)?ha.leftTopEdge:ha.rightTopEdge,className:a,gapSpace:0,isBeakVisible:!1},e.subMenuProps&&$e(t,e.subMenuProps),e.preferMenuTargetAsEventTarget)){var n=e.onItemClick;t.onItemClick=Ms(n,s)}return t},g]}function Ss(e,t,n,r){var o=e.theme,a=e.isSubMenu,i=e.focusZoneProps,s=void 0===i?{}:i,l=s.checkForNoWrap,c=s.direction,u=void 0===c?ct.vertical:c,d=_.useRef(),p=function(e,n,r){var o=!1;return n(e)&&(t(e,r),e.preventDefault(),e.stopPropagation(),o=!0),o},h=function(e){return e.which===we.c.escape||function(e){var t=(0,xe.jI)(o)?we.c.right:we.c.left;return!(e.which!==t||!a)&&!(u!==ct.vertical&&(!l||It(e.target,"data-no-horizontal-wrap")))}(e)||e.which===we.c.up&&(e.altKey||e.metaKey)},f=function(e){d.current=Es(e);var t=e.which===we.c.escape&&(fa()||ma());return p(e,h,t)},C=function(e){var t=d.current&&Es(e);return d.current=!1,!!t&&!(ma()||fa())};return[f,function(e){return p(e,C,!0)},function(e){if(!f(e)&&n.current){var t,r,o=!(!e.altKey&&!e.metaKey),a=e.which===we.c.up,i=e.which===we.c.down;if(!o&&(a||i)){var s=a?(t=n.current,r=n.current.lastChild,gt(t,r,!0,!1,!0,!0)):function(e,t,n){return yt(e,t,!0,!1,!1,n)}(n.current,n.current.firstChild,!0);s&&(s.focus(),e.preventDefault(),e.stopPropagation())}}},function(e,t){var n=(0,xe.jI)(o)?we.c.left:we.c.right;e.disabled||t.which!==n&&t.which!==we.c.enter&&(t.which!==we.c.down||!t.altKey&&!t.metaKey)||(r(e,t.currentTarget),t.preventDefault())}]}var Ns=_.memo(_.forwardRef((function(e,t){var n,r=Aa(bs,e),o=(r.ref,(0,V.Tt)(r,["ref"])),a=_.useRef(null),i=ui(),s=oa(ks,o.id),l=function(e,t){var n;return null===(n=o.onDismiss)||void 0===n?void 0:n.call(o,e,t)},c=Gi(o.target,a),u=c[0],d=c[1],p=function(e,t,n){var r=e.hidden,o=e.onRestoreFocus,a=_.useRef(),i=_.useCallback((function(e){var t,n;o?o(e):(null===e||void 0===e?void 0:e.documentContainsFocus)&&(null===(n=null===(t=a.current)||void 0===t?void 0:t.focus)||void 0===n||n.call(t))}),[o]);return sn((function(){var e,o;if(r)a.current&&(i({originalElement:a.current,containsFocus:!0,documentContainsFocus:(null===(o=(0,Je.Y)())||void 0===o?void 0:o.hasFocus())||!1}),a.current=void 0);else{var s=null===t||void 0===t?void 0:t.document.activeElement;(null===(e=n.current)||void 0===e?void 0:e.contains(s))||"BODY"===s.tagName||(a.current=s)}}),[r,null===t||void 0===t?void 0:t.document.activeElement,i,n]),[i]}(o,d,a)[0],h=_s(o,l),f=h[0],C=h[1],G=h[2],m=h[3],A=function(e){var t=e.delayUpdateFocusOnHover,n=e.hidden,r=_.useRef(!t),o=_.useRef(!1);_.useEffect((function(){r.current=!t,o.current=!n&&!t&&o.current}),[t,n]);var a=_.useCallback((function(){t&&(r.current=!1)}),[t]);return[r,o,a]}(o),T=A[0],g=A[1],y=A[2],v=function(e){var t=_.useRef(!0),n=_.useRef();return[function(){t.current||void 0===n.current?t.current=!1:(e.clearTimeout(n.current),n.current=void 0),n.current=e.setTimeout((function(){t.current=!0}),250)},t]}(i),b=v[0],x=v[1],w=function(e,t){var n=e.subMenuHoverDelay,r=void 0===n?250:n,o=_.useRef(void 0),a=function(){void 0!==o.current&&(t.clearTimeout(o.current),o.current=void 0)};return[a,function(e){o.current=t.setTimeout((function(){e(),a()}),r)},o]}(o,i),k=w[0],I=w[1],S=w[2],N=function(e,t){var n=_.useState(ms()),r=n[0],o=n[1],a=_.useCallback((function(){var t=Ts((0,_e.z)(e.current));r!==t&&o(t)}),[e,r]);return di(_o(),"resize",a),_.useEffect((function(){void 0===t&&a()}),[t]),null!==t&&void 0!==t?t:r}(a,o.responsiveMode);!function(e,t){var n=e.hidden,r=void 0!==n&&n,o=e.onMenuDismissed,a=e.onMenuOpened,i=ns(r),s=_.useRef(a),l=_.useRef(o),c=_.useRef(e);s.current=a,l.current=o,c.current=e,_.useEffect((function(){var e,t;r&&!1===i?null===(e=l.current)||void 0===e||e.call(l,c.current):r||!1===i||null===(t=s.current)||void 0===t||t.call(s,c.current)}),[r,i]),_.useEffect((function(){return function(){var e;return null===(e=l.current)||void 0===e?void 0:e.call(l,c.current)}}),[])}(o);var E=Ss(o,l,a,C),R=E[0],D=E[1],F=E[2],M=E[3],O=function(e,t,n,r,o,a,i,s,l,c,u,d,p){var h=e.target,f=function(){return!t.current||!a.current},C=function(e,t,n){var r=n||t.currentTarget;e.key!==i&&(c(),void 0===i&&r.focus(),ga(e)?(t.stopPropagation(),l((function(){r.focus(),u(e,r,!0)}))):l((function(){d(t),r.focus()})))},G=function(t,n,r){var o=ws(t,{target:h});if(c(),ga(t)||o&&o.length){if(t.key!==i){var a="boolean"===typeof e.shouldFocusOnContainer?e.shouldFocusOnContainer:"mouse"===n.nativeEvent.pointerType;u(t,r,a)}}else m(t,n);n.stopPropagation(),n.preventDefault()},m=function(t,n){if(!t.disabled&&!t.isDisabled){t.preferMenuTargetAsEventTarget&&Os(n,h);var r=!1;t.onClick?r=!!t.onClick(n,t):e.onItemClick&&(r=!!e.onItemClick(n,t)),!r&&n.defaultPrevented||p(n,!0)}};return[function(e,t,n){o.current&&(a.current=!0),f()||C(e,t,n)},function(e,i,s){var l=i.currentTarget;o.current&&(a.current=!0,t.current&&void 0===n.current&&l!==(null===r||void 0===r?void 0:r.document.activeElement)&&C(e,i,s))},function(e,t){var n;if(!f()&&(c(),void 0===i))if(s.current.setActive)try{s.current.setActive()}catch(r){}else null===(n=s.current)||void 0===n||n.focus()},function(e,t){G(e,t,t.currentTarget)},function(e,t){m(e,t),t.stopPropagation()},m,G]}(o,x,S,d,T,g,f,a,I,k,C,m,l),L=O[0],P=O[1],z=O[2],B=O[3],H=O[4],W=O[5],U=O[6],j=function(e,t,n){var r=0,o=e.items,a=e.totalItemCount,i=e.hasCheckmarks,s=e.hasIcons;return _.createElement("ul",{className:t.list,onKeyDown:R,onKeyUp:D,role:"presentation"},o.map((function(e,n){var o=K(e,n,r,a,i,s,t);if(e.itemType!==ua.Divider&&e.itemType!==ua.Header){var l=e.customOnRenderListLength?e.customOnRenderListLength:1;r+=l}return o})))},K=function(e,t,n,r,a,i,s){var l,c,u=[],d=e.iconProps||{iconName:"None"},p=e.getItemClassNames,h=e.itemProps,C=h?h.styles:void 0,G=e.itemType===ua.Divider?e.className:void 0,m=e.submenuIconProps?e.submenuIconProps.className:"";if(p)c=p(o.theme,ya(e),f===e.key,!!Ta(e),!!e.href,"None"!==d.iconName,e.className,G,d.className,m,e.primaryDisabled);else{var A={theme:o.theme,disabled:ya(e),expanded:f===e.key,checked:!!Ta(e),isAnchorLink:!!e.href,knownIcon:"None"!==d.iconName,itemClassName:e.className,dividerClassName:G,iconClassName:d.className,subMenuClassName:m,primaryDisabled:e.primaryDisabled};c=vs(Is(null===(l=s.subComponentStyles)||void 0===l?void 0:l.menuItem,C),A)}switch("-"!==e.text&&"-"!==e.name||(e.itemType=ua.Divider),e.itemType){case ua.Divider:u.push(Y(t,c));break;case ua.Header:u.push(Y(t,c));var T=J(e,c,s,t,a,i);u.push(X(T,e.key||t,c,e.title));break;case ua.Section:u.push(q(e,c,s,t,a,i));break;default:var g=function(){return Z(e,c,t,n,r,a,i)},y=o.onRenderContextualMenuItem?o.onRenderContextualMenuItem(e,g):g();u.push(X(y,e.key||t,c,e.title))}return _.createElement(_.Fragment,{key:e.key},u)},q=function(e,t,n,r,o,a){var i=e.sectionProps;if(i){var l,c;if(i.title){var u=void 0,d="";if("string"===typeof i.title){var p=s+i.title.replace(/\s/g,"");u={key:"section-".concat(i.title,"-title"),itemType:ua.Header,text:i.title,id:p},d=p}else{var h=i.title.id||s+i.title.key.replace(/\s/g,"");u=(0,V.Cl)((0,V.Cl)({},i.title),{id:h}),d=h}u&&(c={role:"group","aria-labelledby":d},l=J(u,t,n,r,o,a))}if(i.items&&i.items.length>0){var f=0;return _.createElement("li",{role:"presentation",key:i.key||e.key||"section-".concat(r)},_.createElement("div",(0,V.Cl)({},c),_.createElement("ul",{className:n.list,role:"presentation"},i.topDivider&&Y(r,t,!0,!0),l&&X(l,e.key||r,t,e.title),i.items.map((function(e,t){var r=K(e,t,f,xs(i.items),o,a,n);if(e.itemType!==ua.Divider&&e.itemType!==ua.Header){var s=e.customOnRenderListLength?e.customOnRenderListLength:1;f+=s}return r})),i.bottomDivider&&Y(r,t,!1,!0))))}}},X=function(e,t,n,r){return _.createElement("li",{role:"presentation",title:r,key:t,className:n.item},e)},Y=function(e,t,n,r){return r||e>0?_.createElement("li",{role:"separator",key:"separator-"+e+(void 0===n?"":n?"-top":"-bottom"),className:t.divider,"aria-hidden":"true"}):null},Z=function(e,t,n,r,a,i,s){if(e.onRender)return e.onRender((0,V.Cl)({"aria-posinset":r+1,"aria-setsize":a},e),l);var c={item:e,classNames:t,index:n,focusableElementIndex:r,totalItemCount:a,hasCheckmarks:i,hasIcons:s,contextualMenuItemAs:o.contextualMenuItemAs,onItemMouseEnter:L,onItemMouseLeave:z,onItemMouseMove:P,onItemMouseDown:Rs,executeItemClick:W,onItemKeyDown:M,expandedMenuItemKey:f,openSubMenu:C,dismissSubMenu:m,dismissMenu:l};if(e.href){var u=ss;return e.contextualMenuItemWrapperAs&&(u=Nr(e.contextualMenuItemWrapperAs,u)),_.createElement(u,(0,V.Cl)({},c,{onItemClick:H}))}if(e.split&&ga(e)){var d=ps;return e.contextualMenuItemWrapperAs&&(d=Nr(e.contextualMenuItemWrapperAs,d)),_.createElement(d,(0,V.Cl)({},c,{onItemClick:B,onItemClickBase:U,onTap:k}))}var p=hs;return e.contextualMenuItemWrapperAs&&(p=Nr(e.contextualMenuItemWrapperAs,p)),_.createElement(p,(0,V.Cl)({},c,{onItemClick:B,onItemClickBase:U}))},J=function(e,t,n,r,a,i){var s=Ji;e.contextualMenuItemAs&&(s=Nr(e.contextualMenuItemAs,s)),o.contextualMenuItemAs&&(s=Nr(o.contextualMenuItemAs,s));var l=e.itemProps,c=e.id,u=l&&Te(l,Ae);return _.createElement("div",(0,V.Cl)({id:c,className:n.header},u,{style:e.style}),_.createElement(s,(0,V.Cl)({item:e,classNames:t,index:r,onCheckmarkClick:a?B:void 0,hasIcons:i},l)))},Q=o.isBeakVisible,$=o.items,ee=o.labelElementId,te=o.id,ne=o.className,re=o.beakWidth,oe=o.directionalHint,ae=o.directionalHintForRTL,ie=o.alignTargetEdge,se=o.gapSpace,le=o.coverTarget,ce=o.ariaLabel,ue=o.doNotLayer,de=o.target,pe=o.bounds,he=o.useTargetWidth,fe=o.useTargetAsMinWidth,Ce=o.directionalHintFixed,Ge=o.shouldFocusOnMount,me=o.shouldFocusOnContainer,ge=o.title,ye=o.styles,ve=o.theme,be=o.calloutProps,xe=o.onRenderSubMenu,we=void 0===xe?Ds:xe,Ie=o.onRenderMenuList,Se=void 0===Ie?function(e,t){return j(e,Re)}:Ie,Ne=o.focusZoneProps,Ee=o.getMenuClassNames,Re=Ee?Ee(ve,ne):ys(ye,{theme:ve,className:ne}),De=function e(t){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.iconProps)return!0;if(o.itemType===ua.Section&&o.sectionProps&&e(o.sectionProps.items))return!0}return!1}($);var Fe,Me=(0,V.Cl)((0,V.Cl)({direction:ct.vertical,handleTabKey:ut,isCircularNavigation:!0},Ne),{className:ke(Re.root,null===(n=o.focusZoneProps)||void 0===n?void 0:n.className)}),Oe=function(e){return e.some((function(e){return!!e.canCheck||!(!e.sectionProps||!e.sectionProps.items.some((function(e){return!0===e.canCheck})))}))}($),Le=f&&!0!==o.hidden?G():null;Q=void 0===Q?N<=us.medium:Q;var ze=u.current;if((he||fe)&&ze&&ze.offsetWidth){var Be=ze.getBoundingClientRect().width-2;he?Fe={width:Be}:fe&&(Fe={minWidth:Be})}if($&&$.length>0){var Ve=xs($),He=Re.subComponentStyles?Re.subComponentStyles.callout:void 0;return _.createElement(gs.Consumer,null,(function(e){return _.createElement(Ri,(0,V.Cl)({styles:He,onRestoreFocus:p},be,{target:de||e.target,isBeakVisible:Q,beakWidth:re,directionalHint:oe,directionalHintForRTL:ae,gapSpace:se,coverTarget:le,doNotLayer:ue,className:ke("ms-ContextualMenu-Callout",be&&be.className),setInitialFocus:Ge,onDismiss:o.onDismiss||e.onDismiss,onScroll:b,bounds:pe,directionalHintFixed:Ce,alignTargetEdge:ie,hidden:o.hidden||e.hidden,ref:t}),_.createElement("div",{style:Fe,ref:a,id:te,className:Re.container,tabIndex:me?0:-1,onKeyDown:F,onKeyUp:D,onFocusCapture:y,"aria-label":ce,"aria-labelledby":ee,role:"menu"},ge&&_.createElement("div",{className:Re.title}," ",ge," "),$&&$.length?function(e,t){var n=o.focusZoneAs,r=void 0===n?en:n;return _.createElement(r,(0,V.Cl)({},t),e)}(Se({ariaLabel:ce,items:$,totalItemCount:Ve,hasCheckmarks:Oe,hasIcons:De,defaultMenuItemRenderer:function(e){return function(e,t){var n=e.index,r=e.focusableElementIndex,o=e.totalItemCount,a=e.hasCheckmarks,i=e.hasIcons;return K(e,n,r,o,a,i,t)}(e,Re)},labelElementId:ee},(function(e,t){return j(e,Re)})),Me):null,Le&&we(Le,Ds)),_.createElement(Pe,null))}))}return null})),(function(e,t){return!(t.shouldUpdateWhenHidden||!e.hidden||!t.hidden)||Qe(e,t)}));function Es(e){return e.which===we.c.alt||"Meta"===e.key}function Rs(e,t){var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,e,t)}function Ds(e,t){throw Error("ContextualMenuBase: onRenderSubMenu callback is null or undefined. Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.")}function Fs(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.itemType===ua.Section&&o.sectionProps){var a=Fs(e,o.sectionProps.items);if(a)return a}else if(o.key&&o.key===e)return o}}function Ms(e,t){return e?function(n,r){return Os(n,t),e(n,r)}:e}function Os(e,t){e&&t&&(e.persist(),t instanceof Event?e.target=t.target:t instanceof Element&&(e.target=t))}Ns.displayName="ContextualMenuBase";var Ls={root:"ms-ContextualMenu",container:"ms-ContextualMenu-container",list:"ms-ContextualMenu-list",header:"ms-ContextualMenu-header",title:"ms-ContextualMenu-title",isopen:"is-open"};function Ps(e){return _.createElement(zs,(0,V.Cl)({},e))}var zs=(0,ye.I)(Ns,(function(e){var t=e.className,n=e.theme,r=(0,Lt.Km)(Ls,n),o=n.fonts,a=n.semanticColors,i=n.effects;return{root:[n.fonts.medium,r.root,r.isopen,{backgroundColor:a.menuBackground,minWidth:"180px"},t],container:[r.container,{selectors:{":focus":{outline:0}}}],list:[r.list,r.isopen,{listStyleType:"none",margin:"0",padding:"0"}],header:[r.header,o.small,{fontWeight:Lt.BO.semibold,color:a.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:Hi,lineHeight:Hi,cursor:"default",padding:"0px 6px",userSelect:"none",textAlign:"left"}],title:[r.title,{fontSize:o.mediumPlus.fontSize,paddingRight:"14px",paddingLeft:"14px",paddingBottom:"5px",paddingTop:"5px",backgroundColor:a.menuItemBackgroundPressed}],subComponentStyles:{callout:{root:{boxShadow:i.elevation8}},menuItem:{}}}}),(function(e){return{onRenderSubMenu:e.onRenderSubMenu?Kn(e.onRenderSubMenu,Ps):Ps}}),{scope:"ContextualMenu"}),Bs=zs;Bs.displayName="ContextualMenu";var Vs={msButton:"ms-Button",msButtonHasMenu:"ms-Button--hasMenu",msButtonIcon:"ms-Button-icon",msButtonMenuIcon:"ms-Button-menuIcon",msButtonLabel:"ms-Button-label",msButtonDescription:"ms-Button-description",msButtonScreenReaderText:"ms-Button-screenReaderText",msButtonFlexContainer:"ms-Button-flexContainer",msButtonTextContainer:"ms-Button-textContainer"},Hs=(0,be.J9)((function(e,t,n,r,o,a,i,s,l,c,u){var d,p,h=(0,Lt.Km)(Vs,e||{}),f=c&&!u;return(0,Lt.l8)({root:[h.msButton,t.root,r,l&&["is-checked",t.rootChecked],f&&["is-expanded",t.rootExpanded,{selectors:(d={},d[":hover .".concat(h.msButtonIcon)]=t.iconExpandedHovered,d[":hover .".concat(h.msButtonMenuIcon)]=t.menuIconExpandedHovered||t.rootExpandedHovered,d[":hover"]=t.rootExpandedHovered,d)}],s&&[Vs.msButtonHasMenu,t.rootHasMenu],i&&["is-disabled",t.rootDisabled],!i&&!f&&!l&&{selectors:(p={":hover":t.rootHovered},p[":hover .".concat(h.msButtonLabel)]=t.labelHovered,p[":hover .".concat(h.msButtonIcon)]=t.iconHovered,p[":hover .".concat(h.msButtonDescription)]=t.descriptionHovered,p[":hover .".concat(h.msButtonMenuIcon)]=t.menuIconHovered,p[":focus"]=t.rootFocused,p[":active"]=t.rootPressed,p[":active .".concat(h.msButtonIcon)]=t.iconPressed,p[":active .".concat(h.msButtonDescription)]=t.descriptionPressed,p[":active .".concat(h.msButtonMenuIcon)]=t.menuIconPressed,p)},i&&l&&[t.rootCheckedDisabled],!i&&l&&{selectors:{":hover":t.rootCheckedHovered,":active":t.rootCheckedPressed}},n],flexContainer:[h.msButtonFlexContainer,t.flexContainer],textContainer:[h.msButtonTextContainer,t.textContainer],icon:[h.msButtonIcon,o,t.icon,f&&t.iconExpanded,l&&t.iconChecked,i&&t.iconDisabled],label:[h.msButtonLabel,t.label,l&&t.labelChecked,i&&t.labelDisabled],menuIcon:[h.msButtonMenuIcon,a,t.menuIcon,l&&t.menuIconChecked,i&&!u&&t.menuIconDisabled,!i&&!f&&!l&&{selectors:{":hover":t.menuIconHovered,":active":t.menuIconPressed}},f&&["is-expanded",t.menuIconExpanded]],description:[h.msButtonDescription,t.description,l&&t.descriptionChecked,i&&t.descriptionDisabled],screenReaderText:[h.msButtonScreenReaderText,t.screenReaderText]})})),Ws=(0,be.J9)((function(e,t,n,r,o){return{root:(0,Lt.Zq)(e.splitButtonMenuButton,n&&[e.splitButtonMenuButtonExpanded],t&&[e.splitButtonMenuButtonDisabled],r&&!t&&[e.splitButtonMenuButtonChecked],o&&!t&&[{selectors:{":focus":e.splitButtonMenuFocused}}]),splitButtonContainer:(0,Lt.Zq)(e.splitButtonContainer,!t&&r&&[e.splitButtonContainerChecked,{selectors:{":hover":e.splitButtonContainerCheckedHovered}}],!t&&!r&&[{selectors:{":hover":e.splitButtonContainerHovered,":focus":e.splitButtonContainerFocused}}],t&&e.splitButtonContainerDisabled),icon:(0,Lt.Zq)(e.splitButtonMenuIcon,t&&e.splitButtonMenuIconDisabled,!t&&o&&e.splitButtonMenuIcon),flexContainer:(0,Lt.Zq)(e.splitButtonFlexContainer),divider:(0,Lt.Zq)(e.splitButtonDivider,(o||t)&&e.splitButtonDividerDisabled)}})),Us=function(e){function t(t){var n=e.call(this,t)||this;return n._buttonElement=_.createRef(),n._splitButtonContainer=_.createRef(),n._mergedRef=ht(),n._renderedVisibleMenu=!1,n._getMemoizedMenuButtonKeytipProps=(0,be.J9)((function(e){return(0,V.Cl)((0,V.Cl)({},e),{hasMenu:!0})})),n._onRenderIcon=function(e,t){var r=n.props.iconProps;if(r&&(void 0!==r.iconName||r.imageProps)){var o=r.className,a=r.imageProps,i=(0,V.Tt)(r,["className","imageProps"]);if(r.styles)return _.createElement(Gn,(0,V.Cl)({className:ke(n._classNames.icon,o),imageProps:a},i));if(r.iconName)return _.createElement(on,(0,V.Cl)({className:ke(n._classNames.icon,o)},i));if(a)return _.createElement(pa,(0,V.Cl)({className:ke(n._classNames.icon,o),imageProps:a},i))}return null},n._onRenderTextContents=function(){var e=n.props,t=e.text,r=e.children,o=e.secondaryText,a=void 0===o?n.props.description:o,i=e.onRenderText,s=void 0===i?n._onRenderText:i,l=e.onRenderDescription,c=void 0===l?n._onRenderDescription:l;return t||"string"===typeof r||a?_.createElement("span",{className:n._classNames.textContainer},s(n.props,n._onRenderText),c(n.props,n._onRenderDescription)):[s(n.props,n._onRenderText),c(n.props,n._onRenderDescription)]},n._onRenderText=function(){var e=n.props.text,t=n.props.children;return void 0===e&&"string"===typeof t&&(e=t),n._hasText()?_.createElement("span",{key:n._labelId,className:n._classNames.label,id:n._labelId},e):null},n._onRenderChildren=function(){var e=n.props.children;return"string"===typeof e?null:e},n._onRenderDescription=function(e){var t=e.secondaryText,r=void 0===t?n.props.description:t;return r?_.createElement("span",{key:n._descriptionId,className:n._classNames.description,id:n._descriptionId},r):null},n._onRenderAriaDescription=function(){var e=n.props.ariaDescription;return e?_.createElement("span",{className:n._classNames.screenReaderText,id:n._ariaDescriptionId},e):null},n._onRenderMenuIcon=function(e){var t=n.props.menuIconProps;return _.createElement(on,(0,V.Cl)({iconName:"ChevronDown"},t,{className:n._classNames.menuIcon}))},n._onRenderMenu=function(e){var t=n.props.menuAs?Nr(n.props.menuAs,Bs):Bs;return _.createElement(t,(0,V.Cl)({},e))},n._onDismissMenu=function(e){var t=n.props.menuProps;t&&t.onDismiss&&t.onDismiss(e),e&&e.defaultPrevented||n._dismissMenu()},n._dismissMenu=function(){n._menuShouldFocusOnMount=void 0,n._menuShouldFocusOnContainer=void 0,n.setState({menuHidden:!0})},n._openMenu=function(e,t){void 0===t&&(t=!0),n.props.menuProps&&(n._menuShouldFocusOnContainer=e,n._menuShouldFocusOnMount=t,n._renderedVisibleMenu=!0,n.setState({menuHidden:!1}))},n._onToggleMenu=function(e){var t=!0;n.props.menuProps&&!1===n.props.menuProps.shouldFocusOnMount&&(t=!1),n.state.menuHidden?n._openMenu(e,t):n._dismissMenu()},n._onSplitContainerFocusCapture=function(e){var t=n._splitButtonContainer.current;!t||e.target&&Mt(e.target,t)||t.focus()},n._onSplitButtonPrimaryClick=function(e){n.state.menuHidden||n._dismissMenu();var t=n._processingTouch&&!n.props.toggle;!t&&n.props.onClick?n.props.onClick(e):t&&n._onMenuClick(e)},n._onKeyDown=function(e){!n.props.disabled||e.which!==we.c.enter&&e.which!==we.c.space?n.props.disabled||(n.props.menuProps?n._onMenuKeyDown(e):void 0!==n.props.onKeyDown&&n.props.onKeyDown(e)):(e.preventDefault(),e.stopPropagation())},n._onKeyUp=function(e){n.props.disabled||void 0===n.props.onKeyUp||n.props.onKeyUp(e)},n._onKeyPress=function(e){n.props.disabled||void 0===n.props.onKeyPress||n.props.onKeyPress(e)},n._onMouseUp=function(e){n.props.disabled||void 0===n.props.onMouseUp||n.props.onMouseUp(e)},n._onMouseDown=function(e){n.props.disabled||void 0===n.props.onMouseDown||n.props.onMouseDown(e)},n._onClick=function(e){n.props.disabled||(n.props.menuProps?n._onMenuClick(e):void 0!==n.props.onClick&&n.props.onClick(e))},n._onSplitButtonContainerKeyDown=function(e){e.which===we.c.enter||e.which===we.c.space?n._buttonElement.current&&(n._buttonElement.current.click(),e.preventDefault(),e.stopPropagation()):n._onMenuKeyDown(e)},n._onMenuKeyDown=function(e){var t;if(!n.props.disabled){n.props.onKeyDown&&n.props.onKeyDown(e);var r=e.which===we.c.up,o=e.which===we.c.down;if(!e.defaultPrevented&&n._isValidMenuOpenKey(e)){var a=n.props.onMenuClick;a&&a(e,n.props),n._onToggleMenu(!1),e.preventDefault(),e.stopPropagation()}if(e.which!==we.c.enter&&e.which!==we.c.space||(0,Ee.Fy)(!0,e.target,null===(t=n.context)||void 0===t?void 0:t.registeredProviders),!e.altKey&&!e.metaKey&&(r||o))if(!n.state.menuHidden&&n.props.menuProps)(void 0!==n._menuShouldFocusOnMount?n._menuShouldFocusOnMount:n.props.menuProps.shouldFocusOnMount)||(e.preventDefault(),e.stopPropagation(),n._menuShouldFocusOnMount=!0,n.forceUpdate())}},n._onTouchStart=function(){n._isSplitButton&&n._splitButtonContainer.current&&!("onpointerdown"in n._splitButtonContainer.current)&&n._handleTouchAndPointerEvent()},n._onMenuClick=function(e){var t=n.props,r=t.onMenuClick,o=t.menuProps;r&&r(e,n.props);var a="boolean"===typeof(null===o||void 0===o?void 0:o.shouldFocusOnContainer)?o.shouldFocusOnContainer:"mouse"===e.nativeEvent.pointerType;e.defaultPrevented||(n._onToggleMenu(a),e.preventDefault(),e.stopPropagation())},W(n),n._async=new Xe(n),n._events=new tt(n),n.props.split,n._labelId=st(),n._descriptionId=st(),n._ariaDescriptionId=st(),n.state={menuHidden:!0},n}return(0,V.C6)(t,e),Object.defineProperty(t.prototype,"_isSplitButton",{get:function(){return!!this.props.menuProps&&!!this.props.onClick&&!0===this.props.split},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this.props,n=t.ariaDescription,r=t.ariaLabel,o=t.ariaHidden,a=t.className,i=t.disabled,s=t.allowDisabledFocus,l=t.primaryDisabled,c=t.secondaryText,u=void 0===c?this.props.description:c,d=t.href,p=t.iconProps,h=t.menuIconProps,f=t.styles,C=t.checked,G=t.variantClassName,m=t.theme,A=t.toggle,T=t.getClassNames,g=t.role,y=this.state.menuHidden,v=i||l;this._classNames=T?T(m,a,G,p&&p.className,h&&h.className,v,C,!y,!!this.props.menuProps,this.props.split,!!s):Hs(m,f,a,G,p&&p.className,h&&h.className,v,!!this.props.menuProps,C,!y,this.props.split);var b=this,x=b._ariaDescriptionId,w=b._labelId,k=b._descriptionId,I=!v&&!!d,_=I?"a":"button",S=Te($e(I?{}:{type:"button"},this.props.rootProps,this.props),I?re:oe,["disabled"]),N=r||S["aria-label"],E=void 0;n?E=x:u&&this.props.onRenderDescription!==la?E=k:S["aria-describedby"]&&(E=S["aria-describedby"]);var R=void 0;S["aria-labelledby"]?R=S["aria-labelledby"]:E&&!N&&(R=this._hasText()?w:void 0);var D=!(!1===this.props["data-is-focusable"]||i&&!s||this._isSplitButton),F="menuitemcheckbox"===g||"checkbox"===g,M=F||!0===A?!!C:void 0,O=$e(S,((e={className:this._classNames.root,ref:this._mergedRef(this.props.elementRef,this._buttonElement),disabled:v&&!s,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onClick:this._onClick,"aria-label":N,"aria-labelledby":R,"aria-describedby":E,"aria-disabled":v,"data-is-focusable":D})[F?"aria-checked":"aria-pressed"]=M,e));if(o&&(O["aria-hidden"]=!0),this._isSplitButton)return this._onRenderSplitButtonContent(_,O);if(this.props.menuProps){var L=this.props.menuProps.id,P=void 0===L?"".concat(this._labelId,"-menu"):L;$e(O,{"aria-expanded":!y,"aria-controls":y?null:P,"aria-haspopup":!0})}return this._onRenderContent(_,O)},t.prototype.componentDidMount=function(){this._isSplitButton&&this._splitButtonContainer.current&&("onpointerdown"in this._splitButtonContainer.current&&this._events.on(this._splitButtonContainer.current,"pointerdown",this._onPointerDown,!0),"onpointerup"in this._splitButtonContainer.current&&this.props.onPointerUp&&this._events.on(this._splitButtonContainer.current,"pointerup",this.props.onPointerUp,!0))},t.prototype.componentDidUpdate=function(e,t){this.props.onAfterMenuDismiss&&!t.menuHidden&&this.state.menuHidden&&this.props.onAfterMenuDismiss()},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.focus=function(){var e,t;this._isSplitButton&&this._splitButtonContainer.current?((0,Ee.Fy)(!0,void 0,null===(e=this.context)||void 0===e?void 0:e.registeredProviders),this._splitButtonContainer.current.focus()):this._buttonElement.current&&((0,Ee.Fy)(!0,void 0,null===(t=this.context)||void 0===t?void 0:t.registeredProviders),this._buttonElement.current.focus())},t.prototype.dismissMenu=function(){this._dismissMenu()},t.prototype.openMenu=function(e,t){this._openMenu(e,t)},t.prototype._onRenderContent=function(e,t){var n=this,r=this.props,o=e,a=r.menuIconProps,i=r.menuProps,s=r.onRenderIcon,l=void 0===s?this._onRenderIcon:s,c=r.onRenderAriaDescription,u=void 0===c?this._onRenderAriaDescription:c,d=r.onRenderChildren,p=void 0===d?this._onRenderChildren:d,h=r.onRenderMenu,f=void 0===h?this._onRenderMenu:h,C=r.onRenderMenuIcon,G=void 0===C?this._onRenderMenuIcon:C,m=r.disabled,A=r.keytipProps;A&&i&&(A=this._getMemoizedMenuButtonKeytipProps(A));var T=function(e){return _.createElement(o,(0,V.Cl)({},t,e),_.createElement("span",{className:n._classNames.flexContainer,"data-automationid":"splitbuttonprimary"},l(r,n._onRenderIcon),n._onRenderTextContents(),u(r,n._onRenderAriaDescription),p(r,n._onRenderChildren),!n._isSplitButton&&(i||a||n.props.onRenderMenuIcon)&&G(n.props,n._onRenderMenuIcon),i&&!i.doNotLayer&&n._shouldRenderMenu()&&f(n._getMenuProps(i),n._onRenderMenu)))},g=A?_.createElement(is,{keytipProps:this._isSplitButton?void 0:A,ariaDescribedBy:t["aria-describedby"],disabled:m},(function(e){return T(e)})):T();return i&&i.doNotLayer?_.createElement(_.Fragment,null,g,this._shouldRenderMenu()&&f(this._getMenuProps(i),this._onRenderMenu)):_.createElement(_.Fragment,null,g,_.createElement(Pe,null))},t.prototype._shouldRenderMenu=function(){var e=this.state.menuHidden,t=this.props,n=t.persistMenu,r=t.renderPersistedMenuHiddenOnMount;return!e||!(!n||!this._renderedVisibleMenu&&!r)},t.prototype._hasText=function(){return null!==this.props.text&&(void 0!==this.props.text||"string"===typeof this.props.children)},t.prototype._getMenuProps=function(e){var t=this.props.persistMenu,n=this.state.menuHidden;return e.ariaLabel||e.labelElementId||!this._hasText()||(e=(0,V.Cl)((0,V.Cl)({},e),{labelElementId:this._labelId})),(0,V.Cl)((0,V.Cl)({id:this._labelId+"-menu",directionalHint:ha.bottomLeftEdge},e),{shouldFocusOnContainer:this._menuShouldFocusOnContainer,shouldFocusOnMount:this._menuShouldFocusOnMount,hidden:t?n:void 0,className:ke("ms-BaseButton-menuhost",e.className),target:this._isSplitButton?this._splitButtonContainer.current:this._buttonElement.current,onDismiss:this._onDismissMenu})},t.prototype._onRenderSplitButtonContent=function(e,t){var n=this,r=this.props,o=r.styles,a=void 0===o?{}:o,i=r.disabled,s=r.allowDisabledFocus,l=r.checked,c=r.getSplitButtonClassNames,u=r.primaryDisabled,d=r.menuProps,p=r.toggle,h=r.role,f=r.primaryActionButtonProps,C=this.props.keytipProps,G=this.state.menuHidden,m=c?c(!!i,!G,!!l,!!s):a&&Ws(a,!!i,!G,!!l,!!u);$e(t,{onClick:void 0,onPointerDown:void 0,onPointerUp:void 0,tabIndex:-1,"data-is-focusable":!1}),C&&d&&(C=this._getMemoizedMenuButtonKeytipProps(C));var A=Te(t,[],["disabled"]);f&&$e(t,f);var T=function(r){return _.createElement("div",(0,V.Cl)({},A,{"data-ktp-target":r?r["data-ktp-target"]:void 0,role:h||"button","aria-disabled":i,"aria-haspopup":!0,"aria-expanded":!G,"aria-pressed":p?!!l:void 0,"aria-describedby":ca(t["aria-describedby"],r?r["aria-describedby"]:void 0),className:m&&m.splitButtonContainer,onKeyDown:n._onSplitButtonContainerKeyDown,onTouchStart:n._onTouchStart,ref:n._splitButtonContainer,"data-is-focusable":!0,onClick:i||u?void 0:n._onSplitButtonPrimaryClick,tabIndex:!i&&!u||s?0:void 0,"aria-roledescription":t["aria-roledescription"],onFocusCapture:n._onSplitContainerFocusCapture}),_.createElement("span",{style:{display:"flex",width:"100%"}},n._onRenderContent(e,t),n._onRenderSplitButtonMenuButton(m,r),n._onRenderSplitButtonDivider(m)))};return C?_.createElement(is,{keytipProps:C,disabled:i},(function(e){return T(e)})):T()},t.prototype._onRenderSplitButtonDivider=function(e){if(e&&e.divider){return _.createElement("span",{className:e.divider,"aria-hidden":!0,onClick:function(e){e.stopPropagation()}})}return null},t.prototype._onRenderSplitButtonMenuButton=function(e,n){var r=this.props,o=r.allowDisabledFocus,a=r.checked,i=r.disabled,s=r.splitButtonMenuProps,l=r.splitButtonAriaLabel,c=r.primaryDisabled,u=this.state.menuHidden,d=this.props.menuIconProps;void 0===d&&(d={iconName:"ChevronDown"});var p=(0,V.Cl)((0,V.Cl)({},s),{styles:e,checked:a,disabled:i,allowDisabledFocus:o,onClick:this._onMenuClick,menuProps:void 0,iconProps:(0,V.Cl)((0,V.Cl)({},d),{className:this._classNames.menuIcon}),ariaLabel:l,"aria-haspopup":!0,"aria-expanded":!u,"data-is-focusable":!1});return _.createElement(t,(0,V.Cl)({},p,{"data-ktp-execute-target":n?n["data-ktp-execute-target"]:n,onMouseDown:this._onMouseDown,tabIndex:c&&!o?0:-1}))},t.prototype._onPointerDown=function(e){var t=this.props.onPointerDown;t&&t(e),"touch"===e.pointerType&&(this._handleTouchAndPointerEvent(),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._handleTouchAndPointerEvent=function(){var e=this;void 0!==this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout((function(){e._processingTouch=!1,e._lastTouchTimeoutId=void 0,e.state.menuHidden&&e.focus()}),500)},t.prototype._isValidMenuOpenKey=function(e){return this.props.menuTriggerKeyCode?e.which===this.props.menuTriggerKeyCode:!!this.props.menuProps&&(e.which===we.c.down&&(e.altKey||e.metaKey))},t.defaultProps={baseClassName:"ms-Button",styles:{},split:!1},t.contextType=Oe,t}(_.Component);var js=n(9044);function Ks(e,t,n){return function(r){var o,a=((o=function(o){function a(e){var t=o.call(this,e)||this;return t._styleCache={},t._onSettingChanged=t._onSettingChanged.bind(t),t}return(0,V.C6)(a,o),a.prototype.componentDidMount=function(){gn.X.observe(this._onSettingChanged)},a.prototype.componentWillUnmount=function(){gn.X.unobserve(this._onSettingChanged)},a.prototype.render=function(){var o=this;return _.createElement(yn.z.Consumer,null,(function(a){var i=gn.X.getSettings(t,e,a.customizations),s=o.props;if(i.styles&&"function"===typeof i.styles&&(i.styles=i.styles((0,V.Cl)((0,V.Cl)({},i),s))),n&&i.styles){if(o._styleCache.default!==i.styles||o._styleCache.component!==s.styles){var l=(0,js.T)(i.styles,s.styles);o._styleCache.default=i.styles,o._styleCache.component=s.styles,o._styleCache.merged=l}return _.createElement(r,(0,V.Cl)({},i,s,{styles:o._styleCache.merged}))}return _.createElement(r,(0,V.Cl)({},i,s))}))},a.prototype._onSettingChanged=function(){this.forceUpdate()},a}(_.Component)).displayName="Customized"+e,o);return function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(r,a)}}var qs={outline:0},Xs=function(e){return{fontSize:e,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},Ys=(0,be.J9)((function(e){var t,n,r=e.semanticColors,o=e.effects,a=e.fonts,i=r.buttonBorder,s=r.disabledBackground,l=r.disabledText,c={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[(0,Lt.gm)(e,{inset:1,highContrastStyle:c,borderColor:"transparent"}),e.fonts.medium,{border:"1px solid "+i,borderRadius:o.roundedCorner2,boxSizing:"border-box",cursor:"pointer",display:"inline-block",padding:"0 16px",textDecoration:"none",textAlign:"center",userSelect:"none",selectors:{":active > span":{position:"relative",left:0,top:0}}}],rootDisabled:[(0,Lt.gm)(e,{inset:1,highContrastStyle:c,borderColor:"transparent"}),{backgroundColor:s,borderColor:s,color:l,cursor:"default",selectors:{":hover":qs,":focus":qs}}],iconDisabled:{color:l,selectors:(t={},t[Lt.up]={color:"GrayText"},t)},menuIconDisabled:{color:l,selectors:(n={},n[Lt.up]={color:"GrayText"},n)},flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:Xs(a.mediumPlus.fontSize),menuIcon:Xs(a.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:Lt.dX}})),Zs=(0,be.J9)((function(e,t){var n,r,o,a=Ys(e),i={root:{padding:"0 4px",height:"40px",color:e.palette.neutralPrimary,backgroundColor:"transparent",border:"1px solid transparent",selectors:(n={},n[Lt.up]={borderColor:"Window"},n)},rootHovered:{color:e.palette.themePrimary,selectors:(r={},r[Lt.up]={color:"Highlight"},r)},iconHovered:{color:e.palette.themePrimary},rootPressed:{color:e.palette.black},rootExpanded:{color:e.palette.themePrimary},iconPressed:{color:e.palette.themeDarker},rootDisabled:{color:e.palette.neutralTertiary,backgroundColor:"transparent",borderColor:"transparent",selectors:(o={},o[Lt.up]={color:"GrayText"},o)},rootChecked:{color:e.palette.black},iconChecked:{color:e.palette.themeDarker},flexContainer:{justifyContent:"flex-start"},icon:{color:e.palette.themeDarkAlt},iconDisabled:{color:"inherit"},menuIcon:{color:e.palette.neutralSecondary},textContainer:{flexGrow:0}};return(0,Lt.TW)(a,i,t)})),Js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,n=e.theme;return _.createElement(Us,(0,V.Cl)({},this.props,{variantClassName:"ms-Button--action ms-Button--command",styles:Zs(n,t),onRenderDescription:la}))},t=(0,V.Cg)([Ks("ActionButton",["theme","styles"],!0)],t)}(_.Component),Qs=Js;function $s(e,t){void 0===t&&(t=null);var n=_.useRef({ref:function(){var e=function(e){n.ref.current!==e&&(n.cleanup&&(n.cleanup(),n.cleanup=void 0),n.ref.current=e,null!==e&&(n.cleanup=n.callback(e)))};return e.current=t,e}(),callback:e}).current;return n.callback=e,n.ref}var el=function(e){var t=e.onOverflowItemsChanged,n=e.rtl,r=e.pinnedIndex,o=_.useRef(),a=_.useRef(),i=$s((function(e){var t=function(e,t){if("undefined"!==typeof ResizeObserver){var n=new ResizeObserver(t);return Array.isArray(e)?e.forEach((function(e){return n.observe(e)})):n.observe(e),function(){return n.disconnect()}}var r=function(){return t(void 0)},o=(0,_e.z)(Array.isArray(e)?e[0]:e);if(!o)return function(){};var a=o.requestAnimationFrame(r);return o.addEventListener("resize",r,!1),function(){o.cancelAnimationFrame(a),o.removeEventListener("resize",r,!1)}}(e,(function(t){a.current=t?t[0].contentRect.width:e.clientWidth,o.current&&o.current()}));return function(){t(),a.current=void 0}})),s=$s((function(e){return i(e.parentElement),function(){return i(null)}}));return sn((function(){var e=i.current,l=s.current;if(e&&l){for(var c=[],u=0;u<e.children.length;u++){var d=e.children[u];d instanceof HTMLElement&&d!==l&&c.push(d)}var p=[],h=0;o.current=function(){var e=a.current;if(void 0!==e){for(var t=c.length-1;t>=0;t--){if(void 0===p[t]){var o=n?e-c[t].offsetLeft:c[t].offsetLeft+c[t].offsetWidth;t+1<c.length&&t+1===r&&(h=p[t+1]-o),t===c.length-2&&(h+=l.offsetWidth),p[t]=o+h}if(e>p[t])return void C(t+1)}C(0)}};var f=c.length,C=function(e){f!==e&&(f=e,t(e,c.map((function(t,n){return{ele:t,isOverflowing:n>=e&&n!==r}}))))},G=void 0;if(void 0!==a.current){var m=(0,_e.z)(e);if(m){var A=m.requestAnimationFrame(o.current);G=function(){return m.cancelAnimationFrame(A)}}}return function(){G&&G(),C(c.length),o.current=void 0}}})),{menuButtonRef:s}},tl=(0,ve.Z)(),nl=function(e,t){var n={links:[],keyToIndexMapping:{},keyToTabIdMapping:{}};return _.Children.forEach(_.Children.toArray(e.children),(function(r,o){if(rl(r)){var a=r.props,i=a.linkText,s=(0,V.Tt)(a,["linkText"]),l=r.props.itemKey||o.toString();n.links.push((0,V.Cl)((0,V.Cl)({headerText:i},s),{itemKey:l})),n.keyToIndexMapping[l]=o,n.keyToTabIdMapping[l]=function(e,t,n,r){return e.getTabId?e.getTabId(n,r):t+"-Tab".concat(r)}(e,t,l,o)}else r&&(0,ia.R)("The children of a Pivot component must be of type PivotItem to be rendered.")})),n},rl=function(e){var t;return _.isValidElement(e)&&(null===(t=e.type)||void 0===t?void 0:t.name)===ge.name},ol=_.forwardRef((function(e,t){var n,r=_.useRef(null),o=_.useRef(null),a=oa("Pivot"),i=aa(e.selectedKey,e.defaultSelectedKey),s=i[0],l=i[1],c=e.componentRef,u=e.theme,d=e.linkSize,p=e.linkFormat,h=e.overflowBehavior,f=e.overflowAriaLabel,C=e.focusZoneProps,G=e.overflowButtonAs,m={"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"]},A=Te(e,Ae,["aria-label","aria-labelledby"]),T=nl(e,a);_.useImperativeHandle(c,(function(){return{focus:function(){var e;null===(e=r.current)||void 0===e||e.focus()}}}));var g=function(e){if(!e)return null;var t=e.itemCount,r=e.itemIcon,o=e.headerText;return _.createElement("span",{className:n.linkContent},void 0!==r&&_.createElement("span",{className:n.icon},_.createElement(Gn,{iconName:r})),void 0!==o&&_.createElement("span",{className:n.text}," ",e.headerText),void 0!==t&&_.createElement("span",{className:n.count}," (",t,")"))},y=function(e,t,r,o){var a,i=t.itemKey,s=t.headerButtonProps,l=t.onRenderItemLink,c=e.keyToTabIdMapping[i],u=r===i;a=l?l(t,g):g(t);var d=t.headerText||"";d+=t.itemCount?" ("+t.itemCount+")":"",d+=t.itemIcon?" xx":"";var p=t.role&&"tab"!==t.role?{role:t.role}:{role:"tab","aria-selected":u};return _.createElement(Qs,(0,V.Cl)({},s,p,{id:c,key:i,className:ke(o,u&&n.linkIsSelected),onClick:function(e){return v(i,e)},onKeyDown:function(e){return b(i,e)},"aria-label":t.ariaLabel,name:t.headerText,keytipProps:t.keytipProps,"data-content":d}),a)},v=function(e,t){t.preventDefault(),x(e,t)},b=function(e,t){t.which===we.c.enter&&(t.preventDefault(),x(e))},x=function(t,n){var r;if(l(t),T=nl(e,a),e.onLinkClick&&T.keyToIndexMapping[t]>=0){var i=T.keyToIndexMapping[t],s=_.Children.toArray(e.children)[i];rl(s)&&e.onLinkClick(s,n)}null===(r=o.current)||void 0===r||r.dismissMenu()};n=tl(e.styles,{theme:u,linkSize:d,linkFormat:p});var w=function(){return null===(e=s)||void 0!==e&&void 0!==T.keyToIndexMapping[e]?s:T.links.length?T.links[0].itemKey:void 0;var e}(),k=w?T.keyToIndexMapping[w]:0,I=T.links.map((function(e){return y(T,e,w,n.link)})),S=_.useMemo((function(){return{items:[],alignTargetEdge:!0,directionalHint:ha.bottomRightEdge}}),[]),N=el({onOverflowItemsChanged:function(e,t){t.forEach((function(e){var t=e.ele,n=e.isOverflowing;return t.dataset.isOverflowing="".concat(n)})),S.items=T.links.slice(e).filter((function(e){return e.itemKey!==w})).map((function(t,r){return t.role="menuitem",{key:t.itemKey||"".concat(e+r),onRender:function(){return y(T,t,w,n.linkInMenu)}}}))},rtl:(0,xe.jI)(u),pinnedIndex:k}).menuButtonRef,E=G||Qs;return _.createElement("div",(0,V.Cl)({ref:t},A),_.createElement(en,(0,V.Cl)({componentRef:r,role:"tablist"},m,{direction:ct.horizontal},C,{className:ke(n.root,null===C||void 0===C?void 0:C.className)}),I,"menu"===h&&_.createElement(E,{className:ke(n.link,n.overflowMenuButton),elementRef:N,componentRef:o,menuProps:S,menuIconProps:{iconName:"More",style:{color:"inherit"}},ariaLabel:f,role:"tab"})),w&&T.links.map((function(t){return(!0===t.alwaysRender||w===t.itemKey)&&function(t,r){if(e.headersOnly||!t)return null;var o=T.keyToIndexMapping[t],a=T.keyToTabIdMapping[t];return _.createElement("div",{role:"tabpanel",hidden:!r,key:t,"aria-hidden":!r,"aria-labelledby":a,className:n.itemContainer},_.Children.toArray(e.children)[o])}(t.itemKey,w===t.itemKey)})))}));ol.displayName="Pivot";var al={count:"ms-Pivot-count",icon:"ms-Pivot-icon",linkIsSelected:"is-selected",link:"ms-Pivot-link",linkContent:"ms-Pivot-linkContent",root:"ms-Pivot",rootIsLarge:"ms-Pivot--large",rootIsTabs:"ms-Pivot--tabs",text:"ms-Pivot-text",linkInMenu:"ms-Pivot-linkInMenu",overflowMenuButton:"ms-Pivot-overflowMenuButton"},il=function(e,t,n){var r,o,a;void 0===n&&(n=!1);var i=e.linkSize,s=e.linkFormat,l=e.theme,c=l.semanticColors,u=l.fonts,d="large"===i,p="tabs"===s;return[u.medium,{color:c.actionLink,padding:"0 8px",position:"relative",backgroundColor:"transparent",border:0,borderRadius:0,selectors:{":hover":{backgroundColor:c.buttonBackgroundHovered,color:c.buttonTextHovered,cursor:"pointer"},":active":{backgroundColor:c.buttonBackgroundPressed,color:c.buttonTextHovered},":focus":{outline:"none"}}},!n&&[{display:"inline-block",lineHeight:44,height:44,marginRight:8,textAlign:"center",selectors:(r={},r[".".concat(Ee.Y2," &:focus")]={outline:"1px solid ".concat(c.focusBorder)},r[".".concat(Ee.Y2," &:focus:after")]={content:"attr(data-content)",position:"relative",border:0},r[":before"]={backgroundColor:"transparent",bottom:0,content:'""',height:2,left:8,position:"absolute",right:8,transition:"left ".concat(Lt.cs.durationValue2," ").concat(Lt.cs.easeFunction2,",\n                        right ").concat(Lt.cs.durationValue2," ").concat(Lt.cs.easeFunction2)},r[":after"]={color:"transparent",content:"attr(data-content)",display:"block",fontWeight:Lt.BO.bold,height:1,overflow:"hidden",visibility:"hidden"},r)},d&&{fontSize:u.large.fontSize},p&&[{marginRight:0,height:44,lineHeight:44,backgroundColor:c.buttonBackground,padding:"0 10px",verticalAlign:"top",selectors:(o={":focus":{outlineOffset:"-2px"}},o[".".concat(Ee.Y2," &:focus::before")]={height:"auto",background:"transparent",transition:"none"},o["&:hover, &:focus"]={color:c.buttonTextCheckedHovered},o["&:active, &:hover"]={color:c.primaryButtonText,backgroundColor:c.primaryButtonBackground},o["&.".concat(t.linkIsSelected)]={backgroundColor:c.primaryButtonBackground,color:c.primaryButtonText,fontWeight:Lt.BO.regular,selectors:(a={":before":{backgroundColor:"transparent",transition:"none",position:"absolute",top:0,left:0,right:0,bottom:0,content:'""',height:0},":hover":{backgroundColor:c.primaryButtonBackgroundHovered,color:c.primaryButtonText},":active":{backgroundColor:c.primaryButtonBackgroundPressed,color:c.primaryButtonText}},a[Lt.up]=(0,V.Cl)({fontWeight:Lt.BO.semibold,color:"HighlightText",background:"Highlight"},(0,Lt.Qg)()),a)},o[".".concat(Ee.Y2," &.").concat(t.linkIsSelected,":focus")]={outlineColor:c.primaryButtonText},o)}]]]},sl=(0,ye.I)(ol,(function(e){var t,n,r,o,a=e.className,i=e.linkSize,s=e.linkFormat,l=e.theme,c=l.semanticColors,u=l.fonts,d=(0,Lt.Km)(al,l),p="large"===i,h="tabs"===s;return{root:[d.root,u.medium,Lt.S8,{position:"relative",color:c.link,whiteSpace:"nowrap"},p&&d.rootIsLarge,h&&d.rootIsTabs,a],itemContainer:{selectors:{"&[hidden]":{display:"none"}}},link:(0,V.fX)((0,V.fX)([d.link],il(e,d),!0),[(t={},t["&[data-is-overflowing='true']"]={display:"none"},t)],!1),overflowMenuButton:[d.overflowMenuButton,(n={visibility:"hidden",position:"absolute",right:0},n[".".concat(d.link,"[data-is-overflowing='true'] ~ &")]={visibility:"visible",position:"relative"},n)],linkInMenu:(0,V.fX)((0,V.fX)([d.linkInMenu],il(e,d,!0),!0),[{textAlign:"left",width:"100%",height:36,lineHeight:36}],!1),linkIsSelected:[d.link,d.linkIsSelected,{fontWeight:Lt.BO.semibold,selectors:(r={":before":{backgroundColor:c.inputBackgroundChecked,selectors:(o={},o[Lt.up]={backgroundColor:"Highlight"},o)},":hover::before":{left:0,right:0}},r[Lt.up]={color:"Highlight"},r)}],linkContent:[d.linkContent,{flex:"0 1 100%",selectors:{"& > * ":{marginLeft:4},"& > *:first-child":{marginLeft:0}}}],text:[d.text,{display:"inline-block",verticalAlign:"top"}],count:[d.count,{display:"inline-block",verticalAlign:"top"}],icon:d.icon}}),void 0,{scope:"Pivot"}),ll=(0,ve.Z)({cacheSize:100}),cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.as,n=void 0===t?"label":t,r=e.children,o=e.className,a=e.disabled,i=e.styles,s=e.required,l=e.theme,c=ll(i,{className:o,disabled:a,required:s,theme:l});return _.createElement(n,(0,V.Cl)({},Te(this.props,Ae),{className:c.root}),r)},t}(_.Component),ul=(0,ye.I)(cl,(function(e){var t,n=e.theme,r=e.className,o=e.disabled,a=e.required,i=n.semanticColors,s=Lt.BO.semibold,l=i.bodyText,c=i.disabledBodyText,u=i.errorText;return{root:["ms-Label",n.fonts.medium,{fontWeight:s,color:l,boxSizing:"border-box",boxShadow:"none",margin:0,display:"block",padding:"5px 0",wordWrap:"break-word",overflowWrap:"break-word"},o&&{color:c,selectors:(t={},t[Lt.up]=(0,V.Cl)({color:"GrayText"},(0,Lt.Qg)()),t)},a&&{selectors:{"::after":{content:"' *'",color:u,paddingRight:12}}},r]}}),void 0,{scope:"Label"});var dl,pl=function(){var e,t=(0,_e.z)();return!!(null===(e=null===t||void 0===t?void 0:t.navigator)||void 0===e?void 0:e.userAgent)&&t.navigator.userAgent.indexOf("rv:11.0")>-1},hl=(0,ve.Z)(),fl="TextField",Cl=function(e){function t(t){var n=e.call(this,t)||this;n._textElement=_.createRef(),n._onFocus=function(e){n.props.onFocus&&n.props.onFocus(e),n.setState({isFocused:!0},(function(){n.props.validateOnFocusIn&&n._validate(n.value)}))},n._onBlur=function(e){n.props.onBlur&&n.props.onBlur(e),n.setState({isFocused:!1},(function(){n.props.validateOnFocusOut&&n._validate(n.value)}))},n._onRenderLabel=function(e){var t=e.label,r=e.required,o=n._classNames.subComponentStyles?n._classNames.subComponentStyles.label:void 0;return t?_.createElement(ul,{required:r,htmlFor:n._id,styles:o,disabled:e.disabled,id:n._labelId},e.label):null},n._onRenderDescription=function(e){return e.description?_.createElement("span",{className:n._classNames.description},e.description):null},n._onRevealButtonClick=function(e){n.setState((function(e){return{isRevealingPassword:!e.isRevealingPassword}}))},n._onInputChange=function(e){var t,r,o=e.target.value,a=Gl(n.props,n.state)||"";void 0!==o&&o!==n._lastChangeValue&&o!==a?(n._lastChangeValue=o,null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e,o),n._isControlled||n.setState({uncontrolledValue:o})):n._lastChangeValue=void 0},W(n),n._async=new Xe(n),n._fallbackId=st(fl),n._descriptionId=st(fl+"Description"),n._labelId=st(fl+"Label"),n._prefixId=st(fl+"Prefix"),n._suffixId=st(fl+"Suffix"),n._warnControlledUsage();var r=t.defaultValue,o=void 0===r?"":r;return"number"===typeof o&&(o=String(o)),n.state={uncontrolledValue:n._isControlled?void 0:o,isFocused:!1,errorMessage:""},n._delayedValidate=n._async.debounce(n._validate,n.props.deferredValidationTime),n._lastValidation=0,n}return(0,V.C6)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return Gl(this.props,this.state)},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this._adjustInputHeight(),this.props.validateOnLoad&&this._validate(this.value)},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.getSnapshotBeforeUpdate=function(e,t){return{selection:[this.selectionStart,this.selectionEnd]}},t.prototype.componentDidUpdate=function(e,t,n){var r=this.props,o=(n||{}).selection,a=void 0===o?[null,null]:o,i=a[0],s=a[1];!!e.multiline!==!!r.multiline&&t.isFocused&&(this.focus(),null!==i&&null!==s&&i>=0&&s>=0&&this.setSelectionRange(i,s)),e.value!==r.value&&(this._lastChangeValue=void 0);var l=Gl(e,t),c=this.value;l!==c&&(this._warnControlledUsage(e),this.state.errorMessage&&!r.errorMessage&&this.setState({errorMessage:""}),this._adjustInputHeight(),ml(r)&&this._delayedValidate(c))},t.prototype.render=function(){var e=this.props,t=e.borderless,n=e.className,r=e.disabled,o=e.invalid,a=e.iconProps,i=e.inputClassName,s=e.label,l=e.multiline,c=e.required,u=e.underlined,d=e.prefix,p=e.resizable,h=e.suffix,f=e.theme,C=e.styles,G=e.autoAdjustHeight,m=e.canRevealPassword,A=e.revealPasswordAriaLabel,T=e.type,g=e.onRenderPrefix,y=void 0===g?this._onRenderPrefix:g,v=e.onRenderSuffix,b=void 0===v?this._onRenderSuffix:v,x=e.onRenderLabel,w=void 0===x?this._onRenderLabel:x,k=e.onRenderDescription,I=void 0===k?this._onRenderDescription:k,S=this.state,N=S.isFocused,E=S.isRevealingPassword,R=this._errorMessage,D="boolean"===typeof o?o:!!R,F=!!m&&"password"===T&&function(){if("boolean"!==typeof dl){var e=(0,_e.z)();if(null===e||void 0===e?void 0:e.navigator){var t=/Edg/.test(e.navigator.userAgent||"");dl=!(pl()||t)}else dl=!0}return dl}(),M=this._classNames=hl(C,{theme:f,className:n,disabled:r,focused:N,required:c,multiline:l,hasLabel:!!s,hasErrorMessage:D,borderless:t,resizable:p,hasIcon:!!a,underlined:u,inputClassName:i,autoAdjustHeight:G,hasRevealButton:F});return _.createElement("div",{ref:this.props.elementRef,className:M.root},_.createElement("div",{className:M.wrapper},w(this.props,this._onRenderLabel),_.createElement("div",{className:M.fieldGroup},(void 0!==d||this.props.onRenderPrefix)&&_.createElement("div",{className:M.prefix,id:this._prefixId},y(this.props,this._onRenderPrefix)),l?this._renderTextArea():this._renderInput(),a&&_.createElement(Gn,(0,V.Cl)({className:M.icon},a)),F&&_.createElement("button",{"aria-label":A,className:M.revealButton,onClick:this._onRevealButtonClick,"aria-pressed":!!E,type:"button"},_.createElement("span",{className:M.revealSpan},_.createElement(Gn,{className:M.revealIcon,iconName:E?"Hide":"RedEye"}))),(void 0!==h||this.props.onRenderSuffix)&&_.createElement("div",{className:M.suffix,id:this._suffixId},b(this.props,this._onRenderSuffix)))),this._isDescriptionAvailable&&_.createElement("span",{id:this._descriptionId},I(this.props,this._onRenderDescription),R&&_.createElement("div",{role:"alert"},_.createElement($r,null,this._renderErrorMessage()))))},t.prototype.focus=function(){this._textElement.current&&this._textElement.current.focus()},t.prototype.blur=function(){this._textElement.current&&this._textElement.current.blur()},t.prototype.select=function(){this._textElement.current&&this._textElement.current.select()},t.prototype.setSelectionStart=function(e){this._textElement.current&&(this._textElement.current.selectionStart=e)},t.prototype.setSelectionEnd=function(e){this._textElement.current&&(this._textElement.current.selectionEnd=e)},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._textElement.current?this._textElement.current.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._textElement.current?this._textElement.current.selectionEnd:-1},enumerable:!1,configurable:!0}),t.prototype.setSelectionRange=function(e,t){this._textElement.current&&this._textElement.current.setSelectionRange(e,t)},t.prototype._warnControlledUsage=function(e){this._id,this.props,null!==this.props.value||this._hasWarnedNullValue||(this._hasWarnedNullValue=!0,(0,ia.R)("Warning: 'value' prop on '".concat(fl,"' should not be null. Consider using an ")+"empty string to clear the component or undefined to indicate an uncontrolled component."))},Object.defineProperty(t.prototype,"_id",{get:function(){return this.props.id||this._fallbackId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isControlled",{get:function(){return void 0!==(e=this.props)[t="value"]&&null!==e[t];var e,t},enumerable:!1,configurable:!0}),t.prototype._onRenderPrefix=function(e){var t=e.prefix;return _.createElement("span",{style:{paddingBottom:"1px"}},t)},t.prototype._onRenderSuffix=function(e){var t=e.suffix;return _.createElement("span",{style:{paddingBottom:"1px"}},t)},Object.defineProperty(t.prototype,"_errorMessage",{get:function(){var e=this.props.errorMessage;return(void 0===e?this.state.errorMessage:e)||""},enumerable:!1,configurable:!0}),t.prototype._renderErrorMessage=function(){var e=this._errorMessage;return e?"string"===typeof e?_.createElement("p",{className:this._classNames.errorMessage},_.createElement("span",{"data-automation-id":"error-message"},e)):_.createElement("div",{className:this._classNames.errorMessage,"data-automation-id":"error-message"},e):null},Object.defineProperty(t.prototype,"_isDescriptionAvailable",{get:function(){var e=this.props;return!!(e.onRenderDescription||e.description||this._errorMessage)},enumerable:!1,configurable:!0}),t.prototype._renderTextArea=function(){var e=this.props.invalid,t=void 0===e?!!this._errorMessage:e,n=Te(this.props,ie,["defaultValue"]),r=this.props["aria-labelledby"]||(this.props.label?this._labelId:void 0);return _.createElement("textarea",(0,V.Cl)({id:this._id},n,{ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-labelledby":r,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":t,"aria-label":this.props.ariaLabel,readOnly:this.props.readOnly,onFocus:this._onFocus,onBlur:this._onBlur}))},t.prototype._renderInput=function(){var e=this.props,t=e.ariaLabel,n=e.invalid,r=void 0===n?!!this._errorMessage:n,o=e.onRenderPrefix,a=e.onRenderSuffix,i=e.prefix,s=e.suffix,l=e.type,c=void 0===l?"text":l,u=[];e.label&&u.push(this._labelId),(void 0!==i||o)&&u.push(this._prefixId),(void 0!==s||a)&&u.push(this._suffixId);var d=(0,V.Cl)((0,V.Cl)({type:this.state.isRevealingPassword?"text":c,id:this._id},Te(this.props,ae,["defaultValue","type"])),{"aria-labelledby":this.props["aria-labelledby"]||(u.length>0?u.join(" "):void 0),ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-label":t,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":r,onFocus:this._onFocus,onBlur:this._onBlur}),p=function(e){return _.createElement("input",(0,V.Cl)({},e))};return(this.props.onRenderInput||p)(d,p)},t.prototype._validate=function(e){var t=this;if(this._latestValidateValue!==e||!ml(this.props)){this._latestValidateValue=e;var n=this.props.onGetErrorMessage,r=n&&n(e||"");if(void 0!==r)if("string"!==typeof r&&"then"in r){var o=++this._lastValidation;r.then((function(n){o===t._lastValidation&&t.setState({errorMessage:n}),t._notifyAfterValidate(e,n)}))}else this.setState({errorMessage:r}),this._notifyAfterValidate(e,r);else this._notifyAfterValidate(e,"")}},t.prototype._notifyAfterValidate=function(e,t){e===this.value&&this.props.onNotifyValidationResult&&this.props.onNotifyValidationResult(t,e)},t.prototype._adjustInputHeight=function(){var e,t;if(this._textElement.current&&this.props.autoAdjustHeight&&this.props.multiline){var n=null===(t=null===(e=this.props.scrollContainerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.scrollTop,r=this._textElement.current;r.style.height="",r.style.height=r.scrollHeight+"px",n&&(this.props.scrollContainerRef.current.scrollTop=n)}},t.defaultProps={resizable:!0,deferredValidationTime:200,validateOnLoad:!0},t}(_.Component);function Gl(e,t){var n=e.value,r=void 0===n?t.uncontrolledValue:n;return"number"===typeof r?String(r):r}function ml(e){return!(e.validateOnFocusIn||e.validateOnFocusOut)}var Al={root:"ms-TextField",description:"ms-TextField-description",errorMessage:"ms-TextField-errorMessage",field:"ms-TextField-field",fieldGroup:"ms-TextField-fieldGroup",prefix:"ms-TextField-prefix",suffix:"ms-TextField-suffix",wrapper:"ms-TextField-wrapper",revealButton:"ms-TextField-reveal",multiline:"ms-TextField--multiline",borderless:"ms-TextField--borderless",underlined:"ms-TextField--underlined",unresizable:"ms-TextField--unresizable",required:"is-required",disabled:"is-disabled",active:"is-active"};function Tl(e){var t=e.underlined,n=e.disabled,r=e.focused,o=e.theme,a=o.palette,i=o.fonts;return function(){var e;return{root:[t&&n&&{color:a.neutralTertiary},t&&{fontSize:i.medium.fontSize,marginRight:8,paddingLeft:12,paddingRight:0,lineHeight:"22px",height:32},t&&r&&{selectors:(e={},e[Lt.up]={height:31},e)}]}}}var gl=(0,ye.I)(Cl,(function(e){var t,n,r,o,a,i,s,l,c,u,d,p,h=e.theme,f=e.className,C=e.disabled,G=e.focused,m=e.required,A=e.multiline,T=e.hasLabel,g=e.borderless,y=e.underlined,v=e.hasIcon,b=e.resizable,x=e.hasErrorMessage,w=e.inputClassName,k=e.autoAdjustHeight,I=e.hasRevealButton,_=h.semanticColors,S=h.effects,N=h.fonts,E=(0,Lt.Km)(Al,h),R={background:_.disabledBackground,color:C?_.disabledText:_.inputPlaceholderText,display:"flex",alignItems:"center",padding:"0 10px",lineHeight:1,whiteSpace:"nowrap",flexShrink:0,selectors:(t={},t[Lt.up]={background:"Window",color:C?"GrayText":"WindowText"},t)},D=[{color:_.inputPlaceholderText,opacity:1,selectors:(n={},n[Lt.up]={color:"GrayText"},n)}],F={color:_.disabledText,selectors:(r={},r[Lt.up]={color:"GrayText"},r)};return{root:[E.root,N.medium,m&&E.required,C&&E.disabled,G&&E.active,A&&E.multiline,g&&E.borderless,y&&E.underlined,Lt.S8,{position:"relative"},f],wrapper:[E.wrapper,y&&[{display:"flex",borderBottom:"1px solid ".concat(x?_.errorText:_.inputBorder),width:"100%"},C&&{borderBottomColor:_.disabledBackground,selectors:(o={},o[Lt.up]=(0,V.Cl)({borderColor:"GrayText"},(0,Lt.Qg)()),o)},!C&&{selectors:{":hover":{borderBottomColor:x?_.errorText:_.inputBorderHovered,selectors:(a={},a[Lt.up]=(0,V.Cl)({borderBottomColor:"Highlight"},(0,Lt.Qg)()),a)}}},G&&[{position:"relative"},(0,Lt.Sq)(x?_.errorText:_.inputFocusBorderAlt,0,"borderBottom")]]],fieldGroup:[E.fieldGroup,Lt.S8,{border:"1px solid ".concat(_.inputBorder),borderRadius:S.roundedCorner2,background:_.inputBackground,cursor:"text",height:32,display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},A&&{minHeight:"60px",height:"auto",display:"flex"},!G&&!C&&{selectors:{":hover":{borderColor:_.inputBorderHovered,selectors:(i={},i[Lt.up]=(0,V.Cl)({borderColor:"Highlight"},(0,Lt.Qg)()),i)}}},G&&!y&&(0,Lt.Sq)(x?_.errorText:_.inputFocusBorderAlt,S.roundedCorner2),C&&{borderColor:_.disabledBackground,selectors:(s={},s[Lt.up]=(0,V.Cl)({borderColor:"GrayText"},(0,Lt.Qg)()),s),cursor:"default"},g&&{border:"none"},g&&G&&{border:"none",selectors:{":after":{border:"none"}}},y&&{flex:"1 1 0px",border:"none",textAlign:"left"},y&&C&&{backgroundColor:"transparent"},x&&!y&&{borderColor:_.errorText,selectors:{"&:hover":{borderColor:_.errorText}}},!T&&m&&{selectors:(l={":before":{content:"'*'",color:_.errorText,position:"absolute",top:-5,right:-10}},l[Lt.up]={selectors:{":before":{color:"WindowText",right:-14}}},l)}],field:[N.medium,E.field,Lt.S8,{borderRadius:0,border:"none",background:"none",backgroundColor:"transparent",color:_.inputText,padding:"0 8px",width:"100%",minWidth:0,textOverflow:"ellipsis",outline:0,selectors:(c={"&:active, &:focus, &:hover":{outline:0},"::-ms-clear":{display:"none"}},c[Lt.up]={background:"Window",color:C?"GrayText":"WindowText"},c)},(0,Lt.CX)(D),A&&!b&&[E.unresizable,{resize:"none"}],A&&{minHeight:"inherit",lineHeight:17,flexGrow:1,paddingTop:6,paddingBottom:6,overflow:"auto",width:"100%"},A&&k&&{overflow:"hidden"},v&&!I&&{paddingRight:24},A&&v&&{paddingRight:40},C&&[{backgroundColor:_.disabledBackground,color:_.disabledText,borderColor:_.disabledBackground},(0,Lt.CX)(F)],y&&{textAlign:"left"},G&&!g&&{selectors:(u={},u[Lt.up]={paddingLeft:11,paddingRight:11},u)},G&&A&&!g&&{selectors:(d={},d[Lt.up]={paddingTop:4},d)},w],icon:[A&&{paddingRight:24,alignItems:"flex-end"},{pointerEvents:"none",position:"absolute",bottom:6,right:8,top:"auto",fontSize:Lt.fF.medium,lineHeight:18},C&&{color:_.disabledText}],description:[E.description,{color:_.bodySubtext,fontSize:N.xSmall.fontSize}],errorMessage:[E.errorMessage,Lt.lw.slideDownIn20,N.small,{color:_.errorText,margin:0,paddingTop:5,display:"flex",alignItems:"center"}],prefix:[E.prefix,R],suffix:[E.suffix,R],revealButton:[E.revealButton,"ms-Button","ms-Button--icon",(0,Lt.gm)(h,{inset:1}),{height:30,width:32,border:"none",padding:"0px 4px",backgroundColor:"transparent",color:_.link,selectors:{":hover":{outline:0,color:_.primaryButtonBackgroundHovered,backgroundColor:_.buttonBackgroundHovered,selectors:(p={},p[Lt.up]={borderColor:"Highlight",color:"Highlight"},p)},":focus":{outline:0}}},v&&{marginRight:28}],revealSpan:{display:"flex",height:"100%",alignItems:"center"},revealIcon:{margin:"0px 4px",pointerEvents:"none",bottom:6,right:8,top:"auto",fontSize:Lt.fF.medium,lineHeight:18},subComponentStyles:{label:Tl(e)}}}),void 0,{scope:"TextField"}),yl=(0,be.J9)((function(e,t){var n,r,o,a,i,s,l,c,u,d,p,h,f,C=e.effects,G=e.palette,m=e.semanticColors,A={left:-2,top:-2,bottom:-2,right:-2,border:"none"},T={position:"absolute",width:1,right:31,top:8,bottom:8},g={splitButtonContainer:[(0,Lt.gm)(e,{highContrastStyle:A,inset:2,pointerEvents:"none"}),{display:"inline-flex",selectors:{".ms-Button--default":{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"none",flexGrow:"1"},".ms-Button--primary":{borderTopRightRadius:"0",borderBottomRightRadius:"0",border:"none",flexGrow:"1",selectors:(n={},n[Lt.up]=(0,V.Cl)({color:"WindowText",backgroundColor:"Window",border:"1px solid WindowText",borderRightWidth:"0"},(0,Lt.Qg)()),n[":hover"]={border:"none"},n[":active"]={border:"none"},n)},".ms-Button--primary + .ms-Button":{border:"none",selectors:(r={},r[Lt.up]={border:"1px solid WindowText",borderLeftWidth:"0"},r)}}}],splitButtonContainerHovered:{selectors:{".ms-Button--primary":{selectors:(o={},o[Lt.up]={color:"Window",backgroundColor:"Highlight"},o)},".ms-Button.is-disabled":{color:m.buttonTextDisabled,selectors:(a={},a[Lt.up]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},a)}}},splitButtonContainerChecked:{selectors:{".ms-Button--primary":{selectors:(i={},i[Lt.up]=(0,V.Cl)({color:"Window",backgroundColor:"WindowText"},(0,Lt.Qg)()),i)}}},splitButtonContainerCheckedHovered:{selectors:{".ms-Button--primary":{selectors:(s={},s[Lt.up]=(0,V.Cl)({color:"Window",backgroundColor:"WindowText"},(0,Lt.Qg)()),s)}}},splitButtonContainerFocused:{outline:"none!important"},splitButtonMenuButton:(l={padding:6,height:"auto",boxSizing:"border-box",borderRadius:0,borderTopRightRadius:C.roundedCorner2,borderBottomRightRadius:C.roundedCorner2,border:"1px solid ".concat(G.neutralSecondaryAlt),borderLeft:"none",outline:"transparent",userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",verticalAlign:"top",width:32,marginLeft:-1,marginTop:0,marginRight:0,marginBottom:0},l[Lt.up]={".ms-Button-menuIcon":{color:"WindowText"}},l),splitButtonDivider:(0,V.Cl)((0,V.Cl)({},T),{selectors:(c={},c[Lt.up]={backgroundColor:"WindowText"},c)}),splitButtonDividerDisabled:(0,V.Cl)((0,V.Cl)({},T),{selectors:(u={},u[Lt.up]={backgroundColor:"GrayText"},u)}),splitButtonMenuButtonDisabled:{pointerEvents:"none",border:"none",selectors:(d={":hover":{cursor:"default"},".ms-Button--primary":{selectors:(p={},p[Lt.up]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},p)},".ms-Button-menuIcon":{selectors:(h={},h[Lt.up]={color:"GrayText"},h)}},d[Lt.up]={color:"GrayText",border:"1px solid GrayText",backgroundColor:"Window"},d)},splitButtonFlexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},splitButtonContainerDisabled:{outline:"none",border:"none",selectors:(f={},f[Lt.up]=(0,V.Cl)({color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},(0,Lt.Qg)()),f)},splitButtonMenuFocused:(0,V.Cl)({},(0,Lt.gm)(e,{highContrastStyle:A,inset:2}))};return(0,Lt.TW)(g,t)})),vl=(0,be.J9)((function(e,t){var n,r=Ys(e),o=yl(e),a=e.palette,i={root:{padding:"0 4px",width:"32px",height:"32px",backgroundColor:"transparent",border:"none",color:e.semanticColors.link},rootHovered:{color:a.themeDarkAlt,backgroundColor:a.neutralLighter,selectors:(n={},n[Lt.up]={borderColor:"Highlight",color:"Highlight"},n)},rootHasMenu:{width:"auto"},rootPressed:{color:a.themeDark,backgroundColor:a.neutralLight},rootExpanded:{color:a.themeDark,backgroundColor:a.neutralLight},rootChecked:{color:a.themeDark,backgroundColor:a.neutralLight},rootCheckedHovered:{color:a.themeDark,backgroundColor:a.neutralQuaternaryAlt},rootDisabled:{color:a.neutralTertiaryAlt}};return(0,Lt.TW)(r,i,o,t)})),bl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,n=e.theme;return _.createElement(Us,(0,V.Cl)({},this.props,{variantClassName:"ms-Button--icon",styles:vl(n,t),onRenderText:la,onRenderDescription:la}))},t=(0,V.Cg)([Ks("IconButton",["theme","styles"],!0)],t)}(_.Component);function xl(e,t,n){void 0===n&&(n=10);var r=Math.pow(n,t);return Math.round(e*r)/r}var wl,kl=(0,be.J9)((function(e){var t,n=e.semanticColors,r=n.disabledText,o=n.disabledBackground;return{backgroundColor:o,pointerEvents:"none",cursor:"default",color:r,selectors:(t={":after":{borderColor:o}},t[Lt.up]={color:"GrayText"},t)}})),Il=(0,be.J9)((function(e,t,n){var r,o,a,i=e.palette,s=e.semanticColors,l=e.effects,c=i.neutralSecondary,u=s.buttonText,d=s.buttonText,p=s.buttonBackgroundHovered,h=s.buttonBackgroundPressed,f={root:{outline:"none",display:"block",height:"50%",width:23,padding:0,backgroundColor:"transparent",textAlign:"center",cursor:"default",color:c,selectors:{"&.ms-DownButton":{borderRadius:"0 0 ".concat(l.roundedCorner2," 0")},"&.ms-UpButton":{borderRadius:"0 ".concat(l.roundedCorner2," 0 0")}}},rootHovered:{backgroundColor:p,color:u},rootChecked:{backgroundColor:h,color:d,selectors:(r={},r[Lt.up]={backgroundColor:"Highlight",color:"HighlightText"},r)},rootPressed:{backgroundColor:h,color:d,selectors:(o={},o[Lt.up]={backgroundColor:"Highlight",color:"HighlightText"},o)},rootDisabled:{opacity:.5,selectors:(a={},a[Lt.up]={color:"GrayText",opacity:1},a)},icon:{fontSize:8,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}};return(0,Lt.TW)(f,{},n)}));!function(e){e[e.down=-1]="down",e[e.notSpinning=0]="notSpinning",e[e.up=1]="up"}(wl||(wl={}));var _l=(0,ve.Z)(),Sl={disabled:!1,label:"",step:1,labelPosition:Ga.start,incrementButtonIcon:{iconName:"ChevronUpSmall"},decrementButtonIcon:{iconName:"ChevronDownSmall"}},Nl=function(){},El=function(e,t){var n=t.min,r=t.max;return"number"===typeof r&&(e=Math.min(e,r)),"number"===typeof n&&(e=Math.max(e,n)),e},Rl=_.forwardRef((function(e,t){var n=Aa(Sl,e),r=n.disabled,o=n.label,a=n.min,i=n.max,s=n.step,l=n.defaultValue,c=n.value,u=n.precision,d=n.labelPosition,p=n.iconProps,h=n.incrementButtonIcon,f=n.incrementButtonAriaLabel,C=n.decrementButtonIcon,G=n.decrementButtonAriaLabel,m=n.ariaLabel,A=n.ariaDescribedBy,T=n.upArrowButtonStyles,g=n.downArrowButtonStyles,y=n.theme,v=n.ariaPositionInSet,b=n.ariaSetSize,x=n.ariaValueNow,w=n.ariaValueText,k=n.className,I=n.inputProps,S=n.onDecrement,N=n.onIncrement,E=n.iconButtonProps,R=n.onValidate,D=n.onChange,F=n.styles,M=_.useRef(null),O=oa("input"),L=oa("Label"),P=_.useState(!1),z=P[0],B=P[1],H=_.useState(wl.notSpinning),W=H[0],U=H[1],j=ui(),K=_.useMemo((function(){return null!==u&&void 0!==u?u:Math.max(function(e){var t=/[1-9]([0]+$)|\.([0-9]*)/.exec(String(e));return t?t[1]?-t[1].length:t[2]?t[2].length:0:0}(s),0)}),[u,s]),q=aa(c,null!==l&&void 0!==l?l:String(a||0),D),X=q[0],Y=q[1],Z=_.useState(),J=Z[0],Q=Z[1],$=_.useRef({stepTimeoutHandle:-1,latestValue:void 0,latestIntermediateValue:void 0}).current;$.latestValue=X,$.latestIntermediateValue=J;var ee=ns(c);_.useEffect((function(){c!==ee&&void 0!==J&&Q(void 0)}),[c,ee,J]);var te=_l(F,{theme:y,disabled:r,isFocused:z,keyboardSpinDirection:W,labelPosition:d,className:k}),ne=Te(n,Ae,["onBlur","onFocus","className","onChange"]),re=_.useCallback((function(e){var t=$.latestIntermediateValue;if(void 0!==t&&t!==$.latestValue){var n=void 0;R?n=R(t,e):t&&t.trim().length&&!isNaN(Number(t))&&(n=String(El(Number(t),{min:a,max:i}))),void 0!==n&&n!==$.latestValue&&Y(n,e)}Q(void 0)}),[$,i,a,R,Y]),oe=_.useCallback((function(){$.stepTimeoutHandle>=0&&(j.clearTimeout($.stepTimeoutHandle),$.stepTimeoutHandle=-1),($.spinningByMouse||W!==wl.notSpinning)&&($.spinningByMouse=!1,U(wl.notSpinning))}),[$,W,j]),ae=_.useCallback((function(e,t){if(t.persist(),void 0!==$.latestIntermediateValue)return"keydown"!==t.type&&"mousedown"!==t.type||re(t),void j.requestAnimationFrame((function(){ae(e,t)}));var n=e($.latestValue||"",t);void 0!==n&&n!==$.latestValue&&Y(n,t);var r=$.spinningByMouse;$.spinningByMouse="mousedown"===t.type,$.spinningByMouse&&($.stepTimeoutHandle=j.setTimeout((function(){ae(e,t)}),r?75:400))}),[$,j,re,Y]),ie=_.useCallback((function(e){if(N)return N(e);var t=El(Number(e)+Number(s),{max:i});return t=xl(t,K),String(t)}),[K,i,N,s]),se=_.useCallback((function(e){if(S)return S(e);var t=El(Number(e)-Number(s),{min:a});return t=xl(t,K),String(t)}),[K,a,S,s]),le=_.useCallback((function(e){(r||e.which===we.c.up||e.which===we.c.down)&&oe()}),[r,oe]),ce=_.useCallback((function(e){ae(ie,e)}),[ie,ae]),ue=_.useCallback((function(e){ae(se,e)}),[se,ae]);!function(e,t,n){_.useImperativeHandle(e.componentRef,(function(){return{get value(){return n},focus:function(){t.current&&t.current.focus()}}}),[t,n])}(n,M,X),Dl(n);var de=!!X&&!isNaN(Number(X)),pe=(p||o)&&_.createElement("div",{className:te.labelWrapper},p&&_.createElement(Gn,(0,V.Cl)({},p,{className:te.icon,"aria-hidden":"true"})),o&&_.createElement(ul,{id:L,htmlFor:O,className:te.label,disabled:r},o));return _.createElement("div",{className:te.root,ref:t},d!==Ga.bottom&&pe,_.createElement("div",(0,V.Cl)({},ne,{className:te.spinButtonWrapper,"aria-label":m&&m,"aria-posinset":v,"aria-setsize":b,"data-ktp-target":!0}),_.createElement("input",(0,V.Cl)({value:null!==J&&void 0!==J?J:X,id:O,onChange:Nl,onInput:function(e){Q(e.target.value)},className:te.input,type:"text",autoComplete:"off",role:"spinbutton","aria-labelledby":o&&L,"aria-valuenow":null!==x&&void 0!==x?x:de?Number(X):void 0,"aria-valuetext":null!==w&&void 0!==w?w:de?void 0:X,"aria-valuemin":a,"aria-valuemax":i,"aria-describedby":A,onBlur:function(e){var t;re(e),B(!1),null===(t=n.onBlur)||void 0===t||t.call(n,e)},ref:M,onFocus:function(e){var t;M.current&&(($.spinningByMouse||W!==wl.notSpinning)&&oe(),M.current.select(),B(!0),null===(t=n.onFocus)||void 0===t||t.call(n,e))},onKeyDown:function(e){if(e.which!==we.c.up&&e.which!==we.c.down&&e.which!==we.c.enter||(e.preventDefault(),e.stopPropagation()),r)oe();else{var t=wl.notSpinning;switch(e.which){case we.c.up:t=wl.up,ae(ie,e);break;case we.c.down:t=wl.down,ae(se,e);break;case we.c.enter:re(e);break;case we.c.escape:Q(void 0)}W!==t&&U(t)}},onKeyUp:le,disabled:r,"aria-disabled":r,"data-lpignore":!0,"data-ktp-execute-target":!0},I)),_.createElement("span",{className:te.arrowButtonsContainer},_.createElement(bl,(0,V.Cl)({styles:Il(y,!0,T),className:"ms-UpButton",checked:W===wl.up,disabled:r,iconProps:h,onMouseDown:ce,onMouseLeave:oe,onMouseUp:oe,tabIndex:-1,ariaLabel:f,"data-is-focusable":!1},E)),_.createElement(bl,(0,V.Cl)({styles:Il(y,!1,g),className:"ms-DownButton",checked:W===wl.down,disabled:r,iconProps:C,onMouseDown:ue,onMouseLeave:oe,onMouseUp:oe,tabIndex:-1,ariaLabel:G,"data-is-focusable":!1},E)))),d===Ga.bottom&&pe)}));Rl.displayName="SpinButton";var Dl=function(e){0},Fl=(0,ye.I)(Rl,(function(e){var t,n,r,o,a=e.theme,i=e.className,s=e.labelPosition,l=e.disabled,c=e.isFocused,u=a.palette,d=a.semanticColors,p=a.effects,h=a.fonts,f=d.inputBorder,C=d.inputBackground,G=d.inputBorderHovered,m=d.inputFocusBorderAlt,A=d.inputText,T=u.white,g=d.inputBackgroundChecked,y=d.disabledText;return{root:[h.medium,{outline:"none",width:"100%",minWidth:86},i],labelWrapper:[{display:"inline-flex",alignItems:"center"},s===Ga.start&&{height:32,float:"left",marginRight:10},s===Ga.end&&{height:32,float:"right",marginLeft:10},s===Ga.top&&{marginBottom:-1}],icon:[{padding:"0 5px",fontSize:Lt.fF.large},l&&{color:y}],label:{pointerEvents:"none",lineHeight:Lt.fF.large},spinButtonWrapper:[(0,V.Cl)((0,V.Cl)({display:"flex",position:"relative",boxSizing:"border-box",height:32,minWidth:86},(0,Lt.Sq)(f,p.roundedCorner2,"border",0)),{":after":(t={borderWidth:"1px"},t[Lt.up]={borderColor:"GrayText"},t)}),(s===Ga.top||s===Ga.bottom)&&{width:"100%"},!l&&[{":hover:after":(n={borderColor:G},n[Lt.up]={borderColor:"Highlight"},n)},c&&{":hover:after, :after":(r={borderColor:m,borderWidth:"2px"},r[Lt.up]={borderColor:"Highlight"},r)}],l&&kl(a)],input:["ms-spinButton-input",{boxSizing:"border-box",boxShadow:"none",borderStyle:"none",flex:1,margin:0,fontSize:h.medium.fontSize,fontFamily:"inherit",color:A,backgroundColor:C,height:"100%",padding:"0 8px 0 9px",outline:0,display:"block",minWidth:61,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"text",userSelect:"text",borderRadius:"".concat(p.roundedCorner2," 0 0 ").concat(p.roundedCorner2)},!l&&{selectors:{"::selection":{backgroundColor:g,color:T,selectors:(o={},o[Lt.up]={backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},o)}}},l&&kl(a)],arrowButtonsContainer:[{display:"block",height:"100%",cursor:"default"},l&&kl(a)]}}),void 0,{scope:"SpinButton"}),Ml=V.Cl;function Ol(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e;return o.isSlot?0===(n=_.Children.toArray(n)).length?o(t):o((0,V.Cl)((0,V.Cl)({},t),{children:n})):_.createElement.apply(S,(0,V.fX)([e,t],n,!1))}function Ll(e,t){void 0===t&&(t={});var n=t.defaultProp,r=void 0===n?"children":n;return function(t,n,o,a,i){if(_.isValidElement(n))return n;var s=function(e,t){var n,r;"string"===typeof t||"number"===typeof t||"boolean"===typeof t?((n={})[e]=t,r=n):r=t;return r}(r,n),l=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o={},a=[],i=0,s=n;i<s.length;i++){var l=s[i];a.push(l&&l.className),Ml(o,l)}return o.className=(0,Et.e)([e,a],{rtl:(0,xe.jI)(t)}),o}(a,i,t,s);if(o){if(o.component){var c=o.component;return _.createElement(c,(0,V.Cl)({},l))}if(o.render)return o.render(l,e)}return _.createElement(e,(0,V.Cl)({},l))}}var Pl=(0,be.J9)((function(e){return Ll(e)}));function zl(e,t){var n={},r=e,o=function(e){if(t.hasOwnProperty(e)){var o=function(n){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(o.length>0)throw new Error("Any module using getSlots must use withSlots. Please see withSlots javadoc for more info.");return function(e,t,n,r,o,a){return void 0!==e.create?e.create(t,n,r,o):Pl(e)(t,n,r,o,a)}(t[e],n,r[e],r.slots&&r.slots[e],r._defaultStyles&&r._defaultStyles[e],r.theme)};o.isSlot=!0,n[e]=o}};for(var a in t)o(a);return n}function Bl(e,t){void 0===t&&(t={});var n=t.factoryOptions,r=(void 0===n?{}:n).defaultProp,o=function(n){var r=function(e,t,n){var r=["theme","styles","tokens"];return gn.X.getSettings(n||r,e,t.customizations)}(t.displayName,_.useContext(yn.z),t.fields),o=t.state;o&&(n=(0,V.Cl)((0,V.Cl)({},n),o(n)));var a=n.theme||r.theme,i=Vl(n,a,t.tokens,r.tokens,n.tokens),s=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return Lt.TW.apply(void 0,r.map((function(r){return"function"===typeof r?r(e,t,n):r})))}(n,a,i,t.styles,r.styles,n.styles),l=(0,V.Cl)((0,V.Cl)({},n),{styles:s,tokens:i,_defaultStyles:s,theme:a});return e(l)};return o.displayName=t.displayName||e.name,r&&(o.create=Ll(o,{defaultProp:r})),Ml(o,t.statics),o}function Vl(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o={},a=0,i=n;a<i.length;a++){var s=i[a];s&&(s="function"===typeof s?s(e,t):s,Array.isArray(s)&&(s=Vl.apply(void 0,(0,V.fX)([e,t],s,!1))),Ml(o,s))}return o}var Hl={root:"ms-StackItem"},Wl={start:"flex-start",end:"flex-end"},Ul=function(e,t){return t.spacing.hasOwnProperty(e)?t.spacing[e]:e},jl=function(e){var t=parseFloat(e),n=isNaN(t)?0:t,r=isNaN(t)?"":t.toString();return{value:n,unit:e.substring(r.toString().length)||"px"}},Kl=function(e,t){if(void 0===e||"number"===typeof e||""===e)return e;var n=e.split(" ");return n.length<2?Ul(e,t):n.reduce((function(e,n){return Ul(e,t)+" "+Ul(n,t)}))},ql={start:"flex-start",end:"flex-end"},Xl={root:"ms-Stack",inner:"ms-Stack-inner",child:"ms-Stack-child"},Yl=Bl((function(e){var t=e.children,n=Te(e,J);return null==t?null:Ol(zl(e,{root:"div"}).root,(0,V.Cl)({},n),t)}),{displayName:"StackItem",styles:function(e,t,n){var r=e.grow,o=e.shrink,a=e.disableShrink,i=e.align,s=e.verticalFill,l=e.order,c=e.className,u=e.basis,d=void 0===u?"auto":u,p=(0,Lt.Km)(Hl,t);return{root:[t.fonts.medium,p.root,{flexBasis:d,margin:n.margin,padding:n.padding,height:s?"100%":"auto",width:"auto"},r&&{flexGrow:!0===r?1:r},(a||!r&&!o)&&{flexShrink:0},o&&!a&&{flexShrink:1},i&&{alignSelf:Wl[i]||i},l&&{order:l},c]}}});function Zl(e,t){var n=t.disableShrink,r=t.enableScopedSelectors,o=t.doNotRenderFalsyValues,a=_.Children.toArray(e);return a=_.Children.map(a,(function(e){if(!e)return o?null:e;if(!_.isValidElement(e))return e;if(e.type===_.Fragment)return e.props.children?Zl(e.props.children,{disableShrink:n,enableScopedSelectors:r,doNotRenderFalsyValues:o}):null;var t,a=e,i={};(t=e)&&"object"===typeof t&&t.type&&t.type.displayName===Yl.displayName&&(i={shrink:!n});var s=a.props.className;return _.cloneElement(a,(0,V.Cl)((0,V.Cl)((0,V.Cl)((0,V.Cl)({},i),a.props),s&&{className:s}),r&&{className:ke(Xl.child,s)}))}))}var Jl=Bl((function(e){var t=e.as,n=void 0===t?"div":t,r=e.disableShrink,o=void 0!==r&&r,a=e.doNotRenderFalsyValues,i=void 0!==a&&a,s=e.enableScopedSelectors,l=void 0!==s&&s,c=e.wrap,u=(0,V.Tt)(e,["as","disableShrink","doNotRenderFalsyValues","enableScopedSelectors","wrap"]),d=Zl(e.children,{disableShrink:o,enableScopedSelectors:l,doNotRenderFalsyValues:i}),p=Te(u,J),h=zl(e,{root:n,inner:"div"});return Ol(h.root,(0,V.Cl)({},p),c?Ol(h.inner,null,d):d)}),{displayName:"Stack",styles:function(e,t,n){var r,o,a,i,s,l,c,u,d,p,h,f,C,G=e.className,m=e.disableShrink,A=e.enableScopedSelectors,T=e.grow,g=e.horizontal,y=e.horizontalAlign,v=e.reversed,b=e.verticalAlign,x=e.verticalFill,w=e.wrap,k=(0,Lt.Km)(Xl,t),I=n&&n.childrenGap?n.childrenGap:e.gap,_=n&&n.maxHeight?n.maxHeight:e.maxHeight,S=n&&n.maxWidth?n.maxWidth:e.maxWidth,N=n&&n.padding?n.padding:e.padding,E=function(e,t){if(void 0===e||""===e)return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if("number"===typeof e)return{rowGap:{value:e,unit:"px"},columnGap:{value:e,unit:"px"}};var n=e.split(" ");if(n.length>2)return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if(2===n.length)return{rowGap:jl(Ul(n[0],t)),columnGap:jl(Ul(n[1],t))};var r=jl(Ul(e,t));return{rowGap:r,columnGap:r}}(I,t),R=E.rowGap,D=E.columnGap,F="".concat(-.5*D.value).concat(D.unit),M="".concat(-.5*R.value).concat(R.unit),O={textOverflow:"ellipsis"},L="> "+(A?"."+Xl.child:"*"),P=((r={})["".concat(L,":not(.").concat(Hl.root,")")]={flexShrink:0},r);return w?{root:[k.root,{flexWrap:"wrap",maxWidth:S,maxHeight:_,width:"auto",overflow:"visible",height:"100%"},y&&(o={},o[g?"justifyContent":"alignItems"]=ql[y]||y,o),b&&(a={},a[g?"alignItems":"justifyContent"]=ql[b]||b,a),G,{display:"flex"},g&&{height:x?"100%":"auto"}],inner:[k.inner,(i={display:"flex",flexWrap:"wrap",marginLeft:F,marginRight:F,marginTop:M,marginBottom:M,overflow:"visible",boxSizing:"border-box",padding:Kl(N,t),width:0===D.value?"100%":"calc(100% + ".concat(D.value).concat(D.unit,")"),maxWidth:"100vw"},i[L]=(0,V.Cl)({margin:"".concat(.5*R.value).concat(R.unit," ").concat(.5*D.value).concat(D.unit)},O),i),m&&P,y&&(s={},s[g?"justifyContent":"alignItems"]=ql[y]||y,s),b&&(l={},l[g?"alignItems":"justifyContent"]=ql[b]||b,l),g&&(c={flexDirection:v?"row-reverse":"row",height:0===R.value?"100%":"calc(100% + ".concat(R.value).concat(R.unit,")")},c[L]={maxWidth:0===D.value?"100%":"calc(100% - ".concat(D.value).concat(D.unit,")")},c),!g&&(u={flexDirection:v?"column-reverse":"column",height:"calc(100% + ".concat(R.value).concat(R.unit,")")},u[L]={maxHeight:0===R.value?"100%":"calc(100% - ".concat(R.value).concat(R.unit,")")},u)]}:{root:[k.root,(d={display:"flex",flexDirection:g?v?"row-reverse":"row":v?"column-reverse":"column",flexWrap:"nowrap",width:"auto",height:x?"100%":"auto",maxWidth:S,maxHeight:_,padding:Kl(N,t),boxSizing:"border-box"},d[L]=O,d),m&&P,T&&{flexGrow:!0===T?1:T},y&&(p={},p[g?"justifyContent":"alignItems"]=ql[y]||y,p),b&&(h={},h[g?"alignItems":"justifyContent"]=ql[b]||b,h),g&&D.value>0&&(f={},f["".concat(L,v?":not(:last-child)":":not(:first-child)")]={marginLeft:"".concat(D.value).concat(D.unit)},f),!g&&R.value>0&&(C={},C["".concat(L,v?":not(:last-child)":":not(:first-child)")]={marginTop:"".concat(R.value).concat(R.unit)},C),G]}},statics:{Item:Yl}});var Ql,$l,ec,tc,nc,rc,oc,ac,ic,sc,lc,cc,uc,dc,pc=(0,be.J9)((function(e,t,n){var r=Ys(e),o=yl(e),a={root:{minWidth:"80px",height:"32px"},label:{fontWeight:Lt.BO.semibold}};return(0,Lt.TW)(r,a,n?function(e){var t,n,r,o,a,i,s,l,c,u=e.palette,d=e.semanticColors;return{root:{backgroundColor:d.primaryButtonBackground,border:"1px solid ".concat(d.primaryButtonBackground),color:d.primaryButtonText,selectors:(t={},t[Lt.up]=(0,V.Cl)({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},(0,Lt.Qg)()),t[".".concat(Ee.Y2," &:focus")]={selectors:{":after":{border:"none",outlineColor:u.white}}},t)},rootHovered:{backgroundColor:d.primaryButtonBackgroundHovered,border:"1px solid ".concat(d.primaryButtonBackgroundHovered),color:d.primaryButtonTextHovered,selectors:(n={},n[Lt.up]={color:"Window",backgroundColor:"Highlight",borderColor:"Highlight"},n)},rootPressed:{backgroundColor:d.primaryButtonBackgroundPressed,border:"1px solid ".concat(d.primaryButtonBackgroundPressed),color:d.primaryButtonTextPressed,selectors:(r={},r[Lt.up]=(0,V.Cl)({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},(0,Lt.Qg)()),r)},rootExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootChecked:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootCheckedHovered:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootDisabled:{color:d.primaryButtonTextDisabled,backgroundColor:d.primaryButtonBackgroundDisabled,selectors:(o={},o[Lt.up]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},o)},splitButtonContainer:{selectors:(a={},a[Lt.up]={border:"none"},a)},splitButtonDivider:(0,V.Cl)((0,V.Cl)({},{position:"absolute",width:1,right:31,top:8,bottom:8}),{backgroundColor:u.white,selectors:(i={},i[Lt.up]={backgroundColor:"Window"},i)}),splitButtonMenuButton:{backgroundColor:d.primaryButtonBackground,color:d.primaryButtonText,selectors:(s={},s[Lt.up]={backgroundColor:"Canvas"},s[":hover"]={backgroundColor:d.primaryButtonBackgroundHovered,selectors:(l={},l[Lt.up]={color:"Highlight"},l)},s)},splitButtonMenuButtonDisabled:{backgroundColor:d.primaryButtonBackgroundDisabled,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundDisabled}}},splitButtonMenuButtonChecked:{backgroundColor:d.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundPressed}}},splitButtonMenuButtonExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundPressed}}},splitButtonMenuIcon:{color:d.primaryButtonText},splitButtonMenuIconDisabled:{color:u.neutralTertiary,selectors:(c={},c[Lt.up]={color:"GrayText"},c)}}}(e):function(e){var t,n,r,o,a,i=e.semanticColors,s=e.palette,l=i.buttonBackground,c=i.buttonBackgroundPressed,u=i.buttonBackgroundHovered,d=i.buttonBackgroundDisabled,p=i.buttonText,h=i.buttonTextHovered,f=i.buttonTextDisabled,C=i.buttonTextChecked,G=i.buttonTextCheckedHovered;return{root:{backgroundColor:l,color:p},rootHovered:{backgroundColor:u,color:h,selectors:(t={},t[Lt.up]={borderColor:"Highlight",color:"Highlight"},t)},rootPressed:{backgroundColor:c,color:C},rootExpanded:{backgroundColor:c,color:C},rootChecked:{backgroundColor:c,color:C},rootCheckedHovered:{backgroundColor:c,color:G},rootDisabled:{color:f,backgroundColor:d,selectors:(n={},n[Lt.up]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},n)},splitButtonContainer:{selectors:(r={},r[Lt.up]={border:"none"},r)},splitButtonMenuButton:{color:s.white,backgroundColor:"transparent",selectors:{":hover":{backgroundColor:s.neutralLight,selectors:(o={},o[Lt.up]={color:"Highlight"},o)}}},splitButtonMenuButtonDisabled:{backgroundColor:i.buttonBackgroundDisabled,selectors:{":hover":{backgroundColor:i.buttonBackgroundDisabled}}},splitButtonDivider:(0,V.Cl)((0,V.Cl)({},{position:"absolute",width:1,right:31,top:8,bottom:8}),{backgroundColor:s.neutralTertiaryAlt,selectors:(a={},a[Lt.up]={backgroundColor:"WindowText"},a)}),splitButtonDividerDisabled:{backgroundColor:e.palette.neutralTertiaryAlt},splitButtonMenuButtonChecked:{backgroundColor:s.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:s.neutralQuaternaryAlt}}},splitButtonMenuButtonExpanded:{backgroundColor:s.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:s.neutralQuaternaryAlt}}},splitButtonMenuIcon:{color:i.buttonText},splitButtonMenuIconDisabled:{color:i.buttonTextDisabled}}}(e),o,t)})),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.primary,n=void 0!==t&&t,r=e.styles,o=e.theme;return _.createElement(Us,(0,V.Cl)({},this.props,{variantClassName:n?"ms-Button--primary":"ms-Button--default",styles:pc(o,r,n),onRenderDescription:la}))},t=(0,V.Cg)([Ks("DefaultButton",["theme","styles"],!0)],t)}(_.Component),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,V.C6)(t,e),t.prototype.render=function(){return _.createElement(hc,(0,V.Cl)({},this.props,{primary:!0,onRenderDescription:la}))},t=(0,V.Cg)([Ks("PrimaryButton",["theme","styles"],!0)],t)}(_.Component),Cc=n(3694),Gc=n(0);Array.prototype.slice;function mc(e){return function(){return e}}function Ac(e){this._context=e}function Tc(e){return new Ac(e)}function gc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};const yc=Math.PI,vc=2*yc,bc=1e-6,xc=vc-bc;function wc(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class kc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?wc:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return wc;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(Ql||(Ql=gc(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append($l||($l=gc(["Z"]))))}lineTo(e,t){this._append(ec||(ec=gc(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(tc||(tc=gc(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,o,a){this._append(nc||(nc=gc(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+o,this._y1=+a)}arcTo(e,t,n,r,o){if(e=+e,t=+t,n=+n,r=+r,(o=+o)<0)throw new Error("negative radius: ".concat(o));let a=this._x1,i=this._y1,s=n-e,l=r-t,c=a-e,u=i-t,d=c*c+u*u;if(null===this._x1)this._append(rc||(rc=gc(["M",",",""])),this._x1=e,this._y1=t);else if(d>bc)if(Math.abs(u*s-l*c)>bc&&o){let p=n-a,h=r-i,f=s*s+l*l,C=p*p+h*h,G=Math.sqrt(f),m=Math.sqrt(d),A=o*Math.tan((yc-Math.acos((f+d-C)/(2*G*m)))/2),T=A/m,g=A/G;Math.abs(T-1)>bc&&this._append(ac||(ac=gc(["L",",",""])),e+T*c,t+T*u),this._append(ic||(ic=gc(["A",",",",0,0,",",",",",""])),o,o,+(u*p>c*h),this._x1=e+g*s,this._y1=t+g*l)}else this._append(oc||(oc=gc(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,o,a){if(e=+e,t=+t,a=!!a,(n=+n)<0)throw new Error("negative radius: ".concat(n));let i=n*Math.cos(r),s=n*Math.sin(r),l=e+i,c=t+s,u=1^a,d=a?r-o:o-r;null===this._x1?this._append(sc||(sc=gc(["M",",",""])),l,c):(Math.abs(this._x1-l)>bc||Math.abs(this._y1-c)>bc)&&this._append(lc||(lc=gc(["L",",",""])),l,c),n&&(d<0&&(d=d%vc+vc),d>xc?this._append(cc||(cc=gc(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-i,t-s,n,n,u,this._x1=l,this._y1=c):d>bc&&this._append(uc||(uc=gc(["A",",",",0,",",",",",",",""])),n,n,+(d>=yc),u,this._x1=e+n*Math.cos(o),this._y1=t+n*Math.sin(o)))}rect(e,t,n,r){this._append(dc||(dc=gc(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function Ic(e){return e[0]}function _c(e){return e[1]}function Sc(e,t){var n=mc(!0),r=null,o=Tc,a=null,i=function(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new kc(t)}(s);function s(s){var l,c,u,d=(s=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(s)).length,p=!1;for(null==r&&(a=o(u=i())),l=0;l<=d;++l)!(l<d&&n(c=s[l],l,s))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(c,l,s),+t(c,l,s));if(u)return a=null,u+""||null}return e="function"===typeof e?e:void 0===e?Ic:mc(e),t="function"===typeof t?t:void 0===t?_c:mc(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:mc(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:mc(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:mc(!!e),s):n},s.curve=function(e){return arguments.length?(o=e,null!=r&&(a=o(r)),s):o},s.context=function(e){return arguments.length?(null==e?r=a=null:a=o(r=e),s):r},s}kc.prototype;var Nc,Ec,Rc=n(1544),Dc=n(5056),Fc=n(5665),Mc=n(1751),Oc=n(2520),Lc={host:"ms-HoverCard-host"};!function(e){e[e.hover=0]="hover",e[e.hotKey=1]="hotKey"}(Nc||(Nc={})),function(e){e.plain="PlainCard",e.expanding="ExpandingCard"}(Ec||(Ec={}));var Pc,zc={root:"ms-ExpandingCard-root",compactCard:"ms-ExpandingCard-compactCard",expandedCard:"ms-ExpandingCard-expandedCard",expandedCardScroll:"ms-ExpandingCard-expandedCardScrollRegion"};function Bc(e){var t=_.useRef((function(){throw new Error("Cannot call an event handler while rendering")}));return sn((function(){t.current=e}),[e]),Xo((function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(void 0,e)}}))}!function(e){e[e.compact=0]="compact",e[e.expanded=1]="expanded"}(Pc||(Pc={}));var Vc={disabled:!1,disableFirstFocus:!1,forceFocusInsideTrap:!0,isClickableOutsideFocusTrap:!1,"data-tabster":'{"uncontrolled": {"completely": true}}'},Hc=_.forwardRef((function(e,t){var n,r=_.useRef(null),o=_.useRef(null),a=_.useRef(null),i=ln(r,t),s=So(),l=No(),c=null===(n=ns(!1))||void 0===n||n,u=Aa(Vc,e),d=Xo({hasFocus:!1,focusStackId:oa("ftz-",u.id)}),p=u.children,h=u.componentRef,f=u.disabled,C=u.disableFirstFocus,G=u.forceFocusInsideTrap,m=u.focusPreviouslyFocusedInnerElement,A=u.firstFocusableSelector,T=u.firstFocusableTarget,g=u.disableRestoreFocus,y=void 0===g?u.ignoreExternalFocusing:g,v=u.isClickableOutsideFocusTrap,b=u.enableAriaHiddenSiblings,x={"aria-hidden":!0,style:{pointerEvents:"none",position:"fixed"},tabIndex:f?-1:0,"data-is-visible":!0,"data-is-focus-trap-zone-bumper":!0},w=_.useCallback((function(e){e!==o.current&&e!==a.current&&St(e)}),[]),k=Bc((function(){if(r.current){var e=d.previouslyFocusedElementInTrapZone;if(m&&e&&Ze(r.current,e))w(e);else{var t=null;if("string"===typeof T)t=r.current.querySelector(T);else if(T)t=T(r.current);else if(A){var n="string"===typeof A?A:A();t=r.current.querySelector("."+n)}t||(t=yt(r.current,r.current.firstChild,!1,!1,!1,!0)),t&&w(t)}}})),I=function(e){if(!f&&r.current){var t,n,i,s=e===d.hasFocus?(t=r.current,n=a.current,void 0===(i=!1)&&(i=!0),gt(t,n,i,!1,!0,!0,!1,!0)):function(e,t,n,r){return void 0===r&&(r=!0),yt(e,t,r,!1,!1,n,!1,!0)}(r.current,o.current,!0,!1);s&&(s===o.current||s===a.current?k():s.focus())}},S=Bc((function(e){if(Hc.focusStack=Hc.focusStack.filter((function(e){return d.focusStackId!==e})),s){var t=s.activeElement;y||"function"!==typeof(null===e||void 0===e?void 0:e.focus)||!Ze(r.current,t)&&t!==s.body||w(e)}})),N=Bc((function(e){if(!f&&d.focusStackId===Hc.focusStack.slice(-1)[0]){var t=e.target;t&&!Ze(r.current,t)&&(s&&s.activeElement===s.body?setTimeout((function(){s&&s.activeElement===s.body&&(k(),d.hasFocus=!0)}),0):(k(),d.hasFocus=!0),e.preventDefault(),e.stopPropagation())}}));return _.useEffect((function(){var e=[];return G&&e.push(ba(l,"focus",N,!0)),v||e.push(ba(l,"click",N,!0)),function(){e.forEach((function(e){return e()}))}}),[G,v,l]),_.useEffect((function(){if(!f&&(c||G)&&r.current){Hc.focusStack.push(d.focusStackId);var e=u.elementToFocusOnDismiss||s.activeElement;return C||Ze(r.current,e)||k(),function(){return S(e)}}}),[G,f]),_.useEffect((function(){if(!f&&b)return ci(r.current)}),[f,b,r]),function(e){var t=_.useRef(e);t.current=e,_.useEffect((function(){return function(){var e;null===(e=t.current)||void 0===e||e.call(t)}}),[])}((function(){delete d.previouslyFocusedElementInTrapZone})),function(e,t,n){_.useImperativeHandle(e,(function(){return{get previouslyFocusedElement(){return t},focus:n}}),[n,t])}(h,d.previouslyFocusedElementInTrapZone,k),_.createElement("div",(0,V.Cl)({"aria-labelledby":u.ariaLabelledBy},Te(u,Ae),{ref:i,onFocusCapture:function(e){var t;null===(t=u.onFocusCapture)||void 0===t||t.call(u,e),e.target===o.current?I(!0):e.target===a.current&&I(!1),d.hasFocus=!0,e.target!==e.currentTarget&&e.target!==o.current&&e.target!==a.current&&(d.previouslyFocusedElementInTrapZone=e.target)},onBlurCapture:function(e){var t;null===(t=u.onBlurCapture)||void 0===t||t.call(u,e);var n=e.relatedTarget;null===e.relatedTarget&&(n=s.activeElement),Ze(r.current,n)||(d.hasFocus=!1)}}),_.createElement("div",(0,V.Cl)({},x,{ref:o})),p,_.createElement("div",(0,V.Cl)({},x,{ref:a})))}));Hc.displayName="FocusTrapZone",Hc.focusStack=[];var Wc=function(e){return _.createElement(Ri,(0,V.Cl)({},e),_.createElement(Hc,(0,V.Cl)({disabled:e.hidden},e.focusTrapProps),e.children))},Uc=function(e){var t=e.gapSpace,n=void 0===t?0:t,r=e.directionalHint,o=void 0===r?ha.bottomLeftEdge:r,a=e.directionalHintFixed,i=e.targetElement,s=e.firstFocus,l=e.trapFocus,c=e.onLeave,u=e.className,d=e.finalHeight,p=e.content,h=e.calloutProps,f=(0,V.Cl)((0,V.Cl)((0,V.Cl)({},Te(e,Ae)),{className:u,target:i,isBeakVisible:!1,directionalHint:o,directionalHintFixed:a,finalHeight:d,minPagePadding:24,onDismiss:c,gapSpace:n}),h);return _.createElement(_.Fragment,null,l?_.createElement(Wc,(0,V.Cl)({},f,{focusTrapProps:{forceFocusInsideTrap:!1,isClickableOutsideFocusTrap:!0,disableFirstFocus:!s}}),p):_.createElement(Ri,(0,V.Cl)({},f),p))},jc=(0,ve.Z)(),Kc=function(e){function t(t){var n=e.call(this,t)||this;return n._expandedElem=_.createRef(),n._onKeyDown=function(e){e.which===we.c.escape&&n.props.onLeave&&n.props.onLeave(e)},n._onRenderCompactCard=function(){return _.createElement("div",{className:n._classNames.compactCard},n.props.onRenderCompactCard(n.props.renderData))},n._onRenderExpandedCard=function(){return!n.state.firstFrameRendered&&n._async.requestAnimationFrame((function(){n.setState({firstFrameRendered:!0})})),_.createElement("div",{className:n._classNames.expandedCard,ref:n._expandedElem},_.createElement("div",{className:n._classNames.expandedCardScroll},n.props.onRenderExpandedCard&&n.props.onRenderExpandedCard(n.props.renderData)))},n._checkNeedsScroll=function(){var e=n.props.expandedCardHeight;n._async.requestAnimationFrame((function(){n._expandedElem.current&&n._expandedElem.current.scrollHeight>=e&&n.setState({needsScroll:!0})}))},n._async=new Xe(n),W(n),n.state={firstFrameRendered:!1,needsScroll:!1},n}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){this._checkNeedsScroll()},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.render=function(){var e=this.props,t=e.styles,n=e.compactCardHeight,r=e.expandedCardHeight,o=e.theme,a=e.mode,i=e.className,s=this.state,l=s.needsScroll,c=s.firstFrameRendered,u=n+r;this._classNames=jc(t,{theme:o,compactCardHeight:n,className:i,expandedCardHeight:r,needsScroll:l,expandedCardFirstFrameRendered:a===Pc.expanded&&c});var d=_.createElement("div",{onMouseEnter:this.props.onEnter,onMouseLeave:this.props.onLeave,onKeyDown:this._onKeyDown},this._onRenderCompactCard(),this._onRenderExpandedCard());return _.createElement(Uc,(0,V.Cl)({},this.props,{content:d,finalHeight:u,className:this._classNames.root}))},t.defaultProps={compactCardHeight:156,expandedCardHeight:384,directionalHintFixed:!0},t}(_.Component),qc=(0,ye.I)(Kc,(function(e){var t,n=e.theme,r=e.needsScroll,o=e.expandedCardFirstFrameRendered,a=e.compactCardHeight,i=e.expandedCardHeight,s=e.className,l=n.palette,c=(0,Lt.Km)(zc,n);return{root:[c.root,{width:320,pointerEvents:"none",selectors:(t={},t[Lt.up]={border:"1px solid WindowText"},t)},s],compactCard:[c.compactCard,{pointerEvents:"auto",position:"relative",height:a}],expandedCard:[c.expandedCard,{height:1,overflowY:"hidden",pointerEvents:"auto",transition:"height 0.467s cubic-bezier(0.5, 0, 0, 1)",selectors:{":before":{content:'""',position:"relative",display:"block",top:0,left:24,width:272,height:1,backgroundColor:l.neutralLighter}}},o&&{height:i}],expandedCardScroll:[c.expandedCardScroll,r&&{height:"100%",boxSizing:"border-box",overflowY:"auto"}]}}),void 0,{scope:"ExpandingCard"}),Xc={root:"ms-PlainCard-root"};var Yc,Zc=(0,ve.Z)(),Jc=function(e){function t(t){var n=e.call(this,t)||this;return n._onKeyDown=function(e){e.which===we.c.escape&&n.props.onLeave&&n.props.onLeave(e)},W(n),n}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,n=e.theme,r=e.className;this._classNames=Zc(t,{theme:n,className:r});var o=_.createElement("div",{onMouseEnter:this.props.onEnter,onMouseLeave:this.props.onLeave,onKeyDown:this._onKeyDown},this.props.onRenderPlainCard(this.props.renderData));return _.createElement(Uc,(0,V.Cl)({},this.props,{content:o,className:this._classNames.root}))},t}(_.Component),Qc=(0,ye.I)(Jc,(function(e){var t,n=e.theme,r=e.className;return{root:[(0,Lt.Km)(Xc,n).root,{pointerEvents:"auto",selectors:(t={},t[Lt.up]={border:"1px solid WindowText"},t)},r]}}),void 0,{scope:"PlainCard"}),$c=(0,ve.Z)(),eu=function(e){function t(t){var n=e.call(this,t)||this;return n._hoverCard=_.createRef(),n.dismiss=function(e){n._async.clearTimeout(n._openTimerId),n._async.clearTimeout(n._dismissTimerId),e?n._dismissTimerId=n._async.setTimeout((function(){n._setDismissedState()}),n.props.cardDismissDelay):n._setDismissedState()},n._cardOpen=function(e){n._shouldBlockHoverCard()||"keydown"===e.type&&e.which!==n.props.openHotKey||(n._async.clearTimeout(n._dismissTimerId),"mouseenter"===e.type&&(n._currentMouseTarget=e.currentTarget),n._executeCardOpen(e))},n._executeCardOpen=function(e){n._async.clearTimeout(n._openTimerId),n._openTimerId=n._async.setTimeout((function(){n.setState((function(t){return t.isHoverCardVisible?t:{isHoverCardVisible:!0,mode:Pc.compact,openMode:"keydown"===e.type?Nc.hotKey:Nc.hover}}))}),n.props.cardOpenDelay)},n._cardDismiss=function(e,t){if(e){if(!(t instanceof MouseEvent))return;if("keydown"===t.type&&t.which!==we.c.escape)return;n.props.sticky||n._currentMouseTarget!==t.currentTarget&&t.which!==we.c.escape||n.dismiss(!0)}else{if(n.props.sticky&&!(t instanceof MouseEvent)&&t.nativeEvent instanceof MouseEvent&&"mouseleave"===t.type)return;n.dismiss(!0)}},n._setDismissedState=function(){n.setState({isHoverCardVisible:!1,mode:Pc.compact,openMode:Nc.hover})},n._instantOpenAsExpanded=function(e){n._async.clearTimeout(n._dismissTimerId),n.setState((function(e){return e.isHoverCardVisible?e:{isHoverCardVisible:!0,mode:Pc.expanded}}))},n._setEventListeners=function(){var e=n.props,t=e.trapFocus,r=e.instantOpenOnClick,o=e.eventListenerTarget,a=o?n._getTargetElement(o):n._getTargetElement(n.props.target),i=n._nativeDismissEvent;a&&(n._events.on(a,"mouseenter",n._cardOpen),n._events.on(a,"mouseleave",i),t?n._events.on(a,"keydown",n._cardOpen):(n._events.on(a,"focus",n._cardOpen),n._events.on(a,"blur",i)),r?n._events.on(a,"click",n._instantOpenAsExpanded):(n._events.on(a,"mousedown",i),n._events.on(a,"keydown",i)))},W(n),n._async=new Xe(n),n._events=new tt(n),n._nativeDismissEvent=n._cardDismiss.bind(n,!0),n._childDismissEvent=n._cardDismiss.bind(n,!1),n.state={isHoverCardVisible:!1,mode:Pc.compact,openMode:Nc.hover},n}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){this._setEventListeners()},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.componentDidUpdate=function(e,t){var n=this;e.target!==this.props.target&&(this._events.off(),this._setEventListeners()),t.isHoverCardVisible!==this.state.isHoverCardVisible&&(this.state.isHoverCardVisible?(this._async.setTimeout((function(){n.setState({mode:Pc.expanded},(function(){n.props.onCardExpand&&n.props.onCardExpand()}))}),this.props.expandedCardOpenDelay),this.props.onCardVisible&&this.props.onCardVisible()):(this.setState({mode:Pc.compact}),this.props.onCardHide&&this.props.onCardHide()))},t.prototype.render=function(){var e=this.props,t=e.expandingCardProps,n=e.children,r=e.id,o=e.setAriaDescribedBy,a=void 0===o||o,i=e.styles,s=e.theme,l=e.className,c=e.type,u=e.plainCardProps,d=e.trapFocus,p=e.setInitialFocus,h=this.state,f=h.isHoverCardVisible,C=h.mode,G=h.openMode,m=r||st("hoverCard");this._classNames=$c(i,{theme:s,className:l});var A=(0,V.Cl)((0,V.Cl)({},Te(this.props,Ae)),{id:m,trapFocus:!!d,firstFocus:p||G===Nc.hotKey,targetElement:this._getTargetElement(this.props.target),onEnter:this._cardOpen,onLeave:this._childDismissEvent}),T=(0,V.Cl)((0,V.Cl)((0,V.Cl)({},t),A),{mode:C}),g=(0,V.Cl)((0,V.Cl)({},u),A);return _.createElement("div",{className:this._classNames.host,ref:this._hoverCard,"aria-describedby":a&&f?m:void 0,"data-is-focusable":!this.props.target},n,f&&(c===Ec.expanding?_.createElement(qc,(0,V.Cl)({},T)):_.createElement(Qc,(0,V.Cl)({},g))))},t.prototype._getTargetElement=function(e){switch(typeof e){case"string":return(0,Je.Y)().querySelector(e);case"object":return e;default:return this._hoverCard.current||void 0}},t.prototype._shouldBlockHoverCard=function(){return!(!this.props.shouldBlockHoverCard||!this.props.shouldBlockHoverCard())},t.defaultProps={cardOpenDelay:500,cardDismissDelay:100,expandedCardOpenDelay:1500,instantOpenOnClick:!1,setInitialFocus:!1,openHotKey:we.c.c,type:Ec.expanding},t}(_.Component),tu=(0,ye.I)(eu,(function(e){var t=e.className,n=e.theme;return{host:[(0,Lt.Km)(Lc,n).host,t]}}),void 0,{scope:"HoverCard"});!function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(Yc||(Yc={}));var nu=function(e){void 0===e&&(e=function(){var e={};return{getCachedMeasurement:function(t){if(t&&t.cacheKey&&e.hasOwnProperty(t.cacheKey))return e[t.cacheKey]},addMeasurementToCache:function(t,n){t.cacheKey&&(e[t.cacheKey]=n)}}}());var t,n=e;function r(e,t){var r=n.getCachedMeasurement(e);if(void 0!==r)return r;var o=t();return n.addMeasurementToCache(e,o),o}function o(e,o,a){for(var i=e,s=r(e,a);s>t;){var l=o(i);if(void 0===l)return{renderedData:i,resizeDirection:void 0,dataToMeasure:void 0};if(void 0===(s=n.getCachedMeasurement(l)))return{dataToMeasure:l,resizeDirection:"shrink"};i=l}return{renderedData:i,resizeDirection:void 0,dataToMeasure:void 0}}return{getNextState:function(e,a,i,s){if(void 0!==s||void 0!==a.dataToMeasure){if(s){if(t&&a.renderedData&&!a.dataToMeasure)return(0,V.Cl)((0,V.Cl)({},a),function(e,n,r,o){var a;return a=e>t?o?{resizeDirection:"grow",dataToMeasure:o(r)}:{resizeDirection:"shrink",dataToMeasure:n}:{resizeDirection:"shrink",dataToMeasure:r},t=e,(0,V.Cl)((0,V.Cl)({},a),{measureContainer:!1})}(s,e.data,a.renderedData,e.onGrowData));t=s}var l=(0,V.Cl)((0,V.Cl)({},a),{measureContainer:!1});return a.dataToMeasure&&(l="grow"===a.resizeDirection&&e.onGrowData?(0,V.Cl)((0,V.Cl)({},l),function(e,a,i,s){for(var l=e,c=r(e,i);c<t;){var u=a(l);if(void 0===u)return{renderedData:l,resizeDirection:void 0,dataToMeasure:void 0};if(void 0===(c=n.getCachedMeasurement(u)))return{dataToMeasure:u};l=u}return(0,V.Cl)({resizeDirection:"shrink"},o(l,s,i))}(a.dataToMeasure,e.onGrowData,i,e.onReduceData)):(0,V.Cl)((0,V.Cl)({},l),o(a.dataToMeasure,e.onReduceData,i))),l}},shouldRenderDataForMeasurement:function(e){return!(!e||void 0!==n.getCachedMeasurement(e))},getInitialResizeGroupState:function(e){return{dataToMeasure:(0,V.Cl)({},e),resizeDirection:"grow",measureContainer:!0}}}},ru=_.createContext({isMeasured:!1}),ou={position:"fixed",visibility:"hidden"},au={position:"relative"};function iu(e,t){var n;switch(t.type){case"resizeData":return(0,V.Cl)({},t.value);case"dataToMeasure":return(0,V.Cl)((0,V.Cl)({},e),{dataToMeasure:t.value,resizeDirection:"grow",measureContainer:!0});default:return(0,V.Cl)((0,V.Cl)({},e),((n={})[t.type]=t.value,n))}}function su(e,t){var n=Xo(nu),r=_.useRef(null),o=_.useRef(null),a=_.useRef(!1),i=ui(),s=function(e,t,n){var r=Xo((function(){return t.getInitialResizeGroupState(e.data)})),o=_.useReducer(iu,r),a=o[0],i=o[1];_.useEffect((function(){i({type:"dataToMeasure",value:e.data})}),[e.data]);var s=_.useRef(r);return s.current=(0,V.Cl)({},a),[s,_.useCallback((function(e){e&&i({type:"resizeData",value:e})}),[]),_.useCallback((function(){n.current&&i({type:"measureContainer",value:!0})}),[n])]}(e,n,t),l=s[0],c=s[1],u=s[2];_.useEffect((function(){var t;l.current.renderedData&&(a.current=!0,null===(t=e.dataDidRender)||void 0===t||t.call(e,l.current.renderedData))})),_.useEffect((function(){i.requestAnimationFrame((function(){var i=void 0;if(l.current.measureContainer&&t.current){var s=t.current.getBoundingClientRect();i=e.direction===Yc.vertical?s.height:s.width}var u=n.getNextState(e,l.current,(function(){var t=a.current?o:r;if(!t.current)return 0;var n=t.current.getBoundingClientRect();return e.direction===Yc.vertical?n.height:n.width}),i);c(u)}),t.current)})),di(_o(),"resize",i.debounce(u,16,{leading:!0}));var d=n.shouldRenderDataForMeasurement(l.current.dataToMeasure),p=!a.current&&d;return[l.current.dataToMeasure,l.current.renderedData,u,r,o,d,p]}var lu={isMeasured:!0},cu=_.forwardRef((function(e,t){var n=_.useRef(null),r=ln(n,t),o=su(e,n),a=o[0],i=o[1],s=o[2],l=o[3],c=o[4],u=o[5],d=o[6];_.useImperativeHandle(e.componentRef,(function(){return{remeasure:s}}),[s]);var p=e.className,h=e.onRenderData,f=Te(e,Ae,["data"]);return _.createElement("div",(0,V.Cl)({},f,{className:p,ref:r}),_.createElement("div",{style:au},u&&!d&&_.createElement("div",{style:ou,ref:c},_.createElement(ru.Provider,{value:lu},h(a))),_.createElement("div",{ref:l,style:d?ou:void 0,"data-automation-id":"visibleContent"},d?h(a):i&&h(i))))}));cu.displayName="ResizeGroupBase";var uu=cu,du=function(e,t,n){for(var r=0,o=e;r<o.length;r++){var a=o[r];n[t.register(a,!0)]=a}},pu=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.unregister(t[o],o,!0),delete t[o]}},hu=function(e){var t=rs.getInstance(),n=e.className,r=e.overflowItems,o=e.keytipSequences,a=e.itemSubMenuProvider,i=e.onRenderOverflowButton,s=Xo({}),l=_.useCallback((function(e){return a?a(e):e.subMenuProps?e.subMenuProps.items:void 0}),[a]),c=_.useMemo((function(){var e=[],n=[];return o?null===r||void 0===r||r.forEach((function(r){var a,i=r.keytipProps;if(i){var s={content:i.content,keySequences:i.keySequences,disabled:i.disabled||!(!r.disabled&&!r.isDisabled),hasDynamicChildren:i.hasDynamicChildren,hasMenu:i.hasMenu};i.hasDynamicChildren||l(r)?(s.onExecute=t.menuExecute.bind(t,o,null===(a=null===r||void 0===r?void 0:r.keytipProps)||void 0===a?void 0:a.keySequences),s.hasOverflowSubMenu=!0):s.onExecute=i.onExecute,e.push(s);var c=(0,V.Cl)((0,V.Cl)({},r),{keytipProps:(0,V.Cl)((0,V.Cl)({},i),{overflowSetSequence:o})});null===n||void 0===n||n.push(c)}else null===n||void 0===n||n.push(r)})):n=r,{modifiedOverflowItems:n,keytipsToRegister:e}}),[r,l,t,o]),u=c.modifiedOverflowItems;return function(e,t,n){var r=ns(e);_.useEffect((function(){r&&(pu(n,r),du(t,n,e))})),_.useEffect((function(){return du(t,n,e),function(){pu(n,e)}}),[])}(s,c.keytipsToRegister,t),_.createElement("div",{className:n},i(u))},fu=(0,ve.Z)(),Cu=function(e,t){var n=function(){var e;return(null!==(e=So())&&void 0!==e?e:"undefined"!==typeof document)?document:void 0}();_.useImperativeHandle(e.componentRef,(function(){return{focus:function(e,n){var r=!1;return t.current&&(r=Tt(t.current,n)),r},focusElement:function(e){var r=!1;return!!e&&(t.current&&Ze(t.current,e)&&(e.focus(),r=(null===n||void 0===n?void 0:n.activeElement)===e),r)}}}),[t,n])},Gu=_.forwardRef((function(e,t){var n=_.useRef(null),r=ln(n,t);Cu(e,n);var o=e.items,a=e.overflowItems,i=e.className,s=e.styles,l=e.vertical,c=e.role,u=e.overflowSide,d=void 0===u?"end":u,p=e.onRenderItem,h=fu(s,{className:i,vertical:l}),f=!!a&&a.length>0;return _.createElement("div",(0,V.Cl)({},Te(e,Ae),{role:c||"group","aria-orientation":"menubar"===c?!0===l?"vertical":"horizontal":void 0,className:h.root,ref:r}),"start"===d&&f&&_.createElement(hu,(0,V.Cl)({},e,{className:h.overflowButton})),o&&o.map((function(e,t){return _.createElement("div",{className:h.item,key:e.key,role:"none"},p(e))})),"end"===d&&f&&_.createElement(hu,(0,V.Cl)({},e,{className:h.overflowButton})))}));Gu.displayName="OverflowSet";var mu,Au,Tu={flexShrink:0,display:"inherit"},gu=(0,ye.I)(Gu,(function(e){var t=e.className;return{root:["ms-OverflowSet",{position:"relative",display:"flex",flexWrap:"nowrap"},e.vertical&&{flexDirection:"column"},t],item:["ms-OverflowSet-item",Tu],overflowButton:["ms-OverflowSet-overflowButton",Tu]}}),void 0,{scope:"OverflowSet"}),yu=n(5070),vu=((mu={})["".concat(yu.ON[yu.ON.circle])]="M1 6 A5 5 0 1 0  12 6 M1 6 A5 5 0 0 1  12 6",mu["".concat(yu.ON[yu.ON.square])]="M1 1 L12 1 L12 12  L1 12 L1 1 Z",mu["".concat(yu.ON[yu.ON.triangle])]="M6 10L8.74228e-07 -1.04907e-06L12 0L6 10Z",mu["".concat(yu.ON[yu.ON.pyramid])]="M6 10L8.74228e-07 -1.04907e-06L12 0L6 10Z",mu["".concat(yu.ON[yu.ON.diamond])]="M2 2 L10 2 L10 10  L2 10 L2 2 Z",mu["".concat(yu.ON[yu.ON.hexagon])]="M9 0H3L0 5L3 10H9L12 5L9 0Z",mu["".concat(yu.ON[yu.ON.pentagon])]="M6.06061 0L0 4.21277L2.30303 11H9.69697L12 4.21277L6.06061 0Z",mu["".concat(yu.ON[yu.ON.octagon])]="M7.08333 0H2.91667L0 2.91667V7.08333L2.91667 10H7.08333L10 7.08333V2.91667L7.08333 0Z",mu["".concat(yu.TL[yu.TL.dottedLine])]="M0 6 H3 M5 6 H8 M10 6 H13",mu),bu=function(e){var t=e.svgProps,n=e.pathProps,r=e.shape,o=e.classNameForNonSvg;return-1===Object.keys(vu).indexOf(r)?_.createElement("div",{className:o}):_.createElement("svg",(0,V.Cl)({width:14,height:14,viewBox:"-1 -1 14 14"},t,{transform:"rotate(".concat(r===yu.ON[yu.ON.diamond]?45:r===yu.ON[yu.ON.pyramid]?180:0,", 0, 0)")}),_.createElement("path",(0,V.Cl)({d:vu[r]},n)))},xu=(0,ve.Z)(),wu=function(e){function t(t){var n,r,o=this;(o=e.call(this,t)||this)._isLegendSelected=!1,o._onRenderData=function(e){var t=o.props,n=t.overflowProps,r=t.allowFocusOnLegends,a=void 0===r||r,i=t.canSelectMultipleLegends,s=void 0!==i&&i,l={root:{justifyContent:o.props.centerLegends?"center":"unset",flexWrap:"wrap"}};return _.createElement(en,(0,V.Cl)({},a&&{role:"listbox","aria-label":"Legends","aria-multiselectable":s}),_.createElement(gu,(0,V.Cl)({items:e.primary,overflowItems:e.overflow,onRenderItem:o._renderButton,onRenderOverflowButton:o._renderOverflowItems},n,{styles:(0,V.Cl)((0,V.Cl)({},l),null===n||void 0===n?void 0:n.styles)})))},o._onReduceData=function(e){if(0!==e.primary.length){var t=(0,V.fX)((0,V.fX)([],e.primary.slice(-1),!0),e.overflow,!0);return{primary:e.primary.slice(0,-1),overflow:t}}},o._onGrowData=function(e){if(0!==e.overflow.length){var t=e.overflow.slice(1);return{primary:(0,V.fX)((0,V.fX)([],e.primary,!0),e.overflow.slice(0,1),!0),overflow:t}}},o._canSelectMultipleLegends=function(e){var t=(0,V.Cl)({},o.state.selectedLegends);return t[e.title]?delete t[e.title]:(t[e.title]=!0,Object.keys(t).length===o.props.legends.length&&(t={})),o.setState({selectedLegends:t}),t},o._canSelectOnlySingleLegend=function(e){var t;return o.state.selectedLegends[e.title]?(o.setState({selectedLegends:{}}),!1):(o.setState({selectedLegends:(t={},t[e.title]=!0,t)}),!0)},o._onClick=function(e,t){var n,r,a,i=o.props.canSelectMultipleLegends,s=[];if(void 0!==i&&i){var l=o._canSelectMultipleLegends(e);s=Object.keys(l)}else{s=o._canSelectOnlySingleLegend(e)?[e.title]:[]}null===(r=(n=o.props).onChange)||void 0===r||r.call(n,s,t,e),null===(a=e.action)||void 0===a||a.call(e)},o._onRenderCompactCard=function(e){var t=o.props,n=t.allowFocusOnLegends,r=void 0===n||n,a=t.className,i=t.styles,s=t.theme,l=t.canSelectMultipleLegends,c=void 0!==l&&l,u=[],d=xu(i,{theme:s,className:a});return e.renderData.forEach((function(e,t){var n=o._renderButton(e,t,!0);u.push(n)})),_.createElement(en,(0,V.Cl)({},r&&{role:"listbox","aria-label":"Legends","aria-multiselectable":c},{direction:ct.vertical},o.props.focusZonePropsInHoverCard,{className:d.hoverCardRoot}),u)},o._renderOverflowItems=function(e){var t=o.props.allowFocusOnLegends,n=void 0===t||t,r=[];e.forEach((function(e,t){r.push({key:t.toString(),name:e.title,onClick:e.action})}));var a={renderData:e},i=o.props,s=i.theme,l=i.className,c=i.styles,u=i.overflowText,d=xu(c,{theme:s,className:l}),p={onRenderPlainCard:o._onRenderCompactCard,renderData:a},h=u||"more";return _.createElement(tu,{type:Ec.plain,plainCardProps:p,instantOpenOnClick:!0,onCardHide:function(){o.setState({isHoverCardVisible:!1});var t=function(e,t){var n=pt(e,t);if(!(n<0))return e[n]}(e,(function(e){return e.title===o.state.activeLegend}));t&&(o.setState({activeLegend:""}),t.onMouseOutAction&&t.onMouseOutAction())},setInitialFocus:!0,trapFocus:!0,onCardVisible:o._hoverCardVisible,styles:d.subComponentStyles.hoverCardStyles,cardDismissDelay:300,target:o._hoverCardRef},_.createElement("div",(0,V.Cl)({className:d.overflowIndicationTextStyle,ref:function(e){return o._hoverCardRef=e}},n&&{role:"button","aria-expanded":o.state.isHoverCardVisible,"aria-label":"".concat(r.length," ").concat(h)},{"data-is-focusable":n}),r.length," ",h))},o._hoverCardVisible=function(){o.setState({isHoverCardVisible:!0})},o._onHoverOverLegend=function(e){e.hoverAction&&(o.setState({activeLegend:e.title}),e.hoverAction())},o._onLeave=function(e){e.onMouseOutAction&&(o.setState({activeLegend:""}),e.onMouseOutAction())},o._renderButton=function(e,t,n){var r=o.props.allowFocusOnLegends,a=void 0===r||r,i={title:e.title,color:e.color,shape:e.shape,action:e.action,hoverAction:e.hoverAction,onMouseOutAction:e.onMouseOutAction,stripePattern:e.stripePattern,isLineLegendInBarChart:e.isLineLegendInBarChart,opacity:e.opacity},s=o._getColor(i.title,i.color),l=o.props,c=l.theme,u=l.className,d=l.styles,p=xu(d,{theme:c,className:u,colorOnSelectedState:s,borderColor:i.color,overflow:n,stripePattern:i.stripePattern,isLineLegendInBarChart:i.isLineLegendInBarChart,opacity:i.opacity}),h=function(){o._onHoverOverLegend(i)},f=function(){o._onLeave(i)},C=o._getShape(p,i,s);return _.createElement("button",(0,V.Cl)({},a&&{"aria-selected":!!o.state.selectedLegends[i.title],role:"option","aria-label":"".concat(i.title),"aria-setsize":e["aria-setsize"],"aria-posinset":e["aria-posinset"]},e.nativeButtonProps&&(0,V.Cl)({},e.nativeButtonProps),{key:t,className:p.legend,onClick:function(e){o._onClick(i,e)},onMouseOver:h,onMouseOut:f,onFocus:h,onBlur:f,"data-is-focusable":a}),C,_.createElement("div",{className:p.text},i.title))};var a={};return t.canSelectMultipleLegends?a=(null===(r=t.defaultSelectedLegends)||void 0===r?void 0:r.reduce((function(e,t){var n;return(0,V.Cl)(((n={})[t]=!0,n),e)}),{}))||{}:t.defaultSelectedLegend&&((n={})[t.defaultSelectedLegend]=!0,a=n),o.state={activeLegend:"",isHoverCardVisible:!1,selectedLegends:a},o}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.theme,n=e.className,r=e.styles;this._classNames=xu(r,{theme:t,className:n}),this._isLegendSelected=Object.keys(this.state.selectedLegends).length>0;var o=this._generateData();return _.createElement("div",{className:this._classNames.root},this.props.enabledWrapLines?this._onRenderData(o):_.createElement(uu,{data:o,onReduceData:this._onReduceData,onRenderData:this._onRenderData,onGrowData:this._onGrowData}))},t.prototype._generateData=function(){var e=this,t=this.props.allowFocusOnLegends,n=void 0===t||t;return{primary:this.props.legends.map((function(t,r){return(0,V.Cl)((0,V.Cl)({},n&&{nativeButtonProps:Te(t,oe,["title"]),"aria-setsize":e.props.legends.length,"aria-posinset":r+1}),{title:t.title,action:t.action,hoverAction:t.hoverAction,onMouseOutAction:t.onMouseOutAction,color:t.color,shape:t.shape,stripePattern:t.stripePattern,isLineLegendInBarChart:t.isLineLegendInBarChart,opacity:t.opacity,key:r})})),overflow:[]}},t.prototype._getShape=function(e,t,n){var r={className:e.shape},o={fill:n,strokeWidth:2,stroke:t.color};return _.createElement(bu,{svgProps:r,pathProps:o,shape:t.shape,classNameForNonSvg:e.rect})},t.prototype._getColor=function(e,t){var n=this.props.theme;return this._isLegendSelected?this.state.selectedLegends[e]?t:n.semanticColors.buttonBackground:this.state.activeLegend===e||""===this.state.activeLegend?t:n.semanticColors.buttonBackground},t}(_.Component),ku=(0,ye.I)(wu,(function(e){var t,n,r=e.className,o=e.theme,a=e.isLineLegendInBarChart,i=void 0!==a&&a,s=o,l=s.palette,c=s.fonts,u={inset:void 0,position:void 0,highContrastStyle:{outlineColor:o.semanticColors.focusBorder},borderColor:"transparent",outlineColor:void 0};return{root:[{whiteSpace:"nowrap",width:"100%",alignItems:"center",margin:"-8px 0 0 -8px"},r],legend:[(0,Lt.gm)(o,u),{display:"flex",alignItems:"center",cursor:"pointer",border:"none",padding:"8px",background:"none",textTransform:"capitalize"}],rect:{selectors:(t={},t[Lt.up]={content:"linear-gradient(to right, ".concat(e.colorOnSelectedState,", ").concat(e.colorOnSelectedState,")"),opacity:e.colorOnSelectedState===o.semanticColors.buttonBackground?"0.6":""},t),width:"12px",height:i?"4px":"12px",backgroundColor:e.stripePattern?"":e.colorOnSelectedState,marginRight:"8px",border:"1px solid",borderColor:e.borderColor?e.borderColor:null===o||void 0===o?void 0:o.semanticColors.buttonBorder,content:e.stripePattern?"repeating-linear-gradient(135deg, transparent, transparent 3px, ".concat(e.colorOnSelectedState," 1px, ").concat(e.colorOnSelectedState," 4px)"):""},shape:[{marginRight:"8px"}],triangle:{width:"0",height:"0",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"10.4px solid",borderTopColor:e.colorOnSelectedState,marginRight:"8px",opacity:e.colorOnSelectedState===o.semanticColors.buttonBackground?"0.6":e.opacity?e.opacity:"",selectors:(n={},n[Lt.up]={border:"0px",height:"10.4px",width:"10.4px",clipPath:"polygon(50% 100%, 0 0, 100% 0)",backgroundImage:"linear-gradient(to right, ".concat(e.colorOnSelectedState,", ").concat(e.colorOnSelectedState,")")},n)},text:(0,V.Cl)((0,V.Cl)({},c.small),{lineHeight:"16px",color:null===o||void 0===o?void 0:o.semanticColors.bodyText,opacity:e.colorOnSelectedState===o.semanticColors.buttonBackground?"0.67":""}),hoverChange:{width:"12px",height:"12px",backgroundColor:o.semanticColors.buttonBackground,marginRight:"8px",border:"1px solid",borderColor:e.borderColor?e.borderColor:l.black},overflowIndicationTextStyle:[(0,Lt.gm)(o,u),(0,V.Cl)((0,V.Cl)({cursor:"pointer",color:null===o||void 0===o?void 0:o.semanticColors.bodyText},c.small),{lineHeight:"16px",padding:"8px"})],hoverCardRoot:{padding:"8px"},subComponentStyles:{hoverCardStyles:{host:[(0,Lt.gm)(o,u)]}}}}));!function(e){e[e.zero=0]="zero",e[e.medium=1]="medium",e[e.long=2]="long"}(Au||(Au={}));var Iu,_u,Su,Nu=(0,ve.Z)(),Eu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onRenderContent=function(e){return"string"===typeof e.content?_.createElement("p",{className:t._classNames.subText},e.content):_.createElement("div",{className:t._classNames.subText},e.content)},t}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.calloutProps,r=e.directionalHint,o=e.directionalHintForRTL,a=e.styles,i=e.id,s=e.maxWidth,l=e.onRenderContent,c=void 0===l?this._onRenderContent:l,u=e.targetElement,d=e.theme;return this._classNames=Nu(a,{theme:d,className:t||n&&n.className,beakWidth:n&&n.isBeakVisible?n.beakWidth:0,gapSpace:n&&n.gapSpace,maxWidth:s}),_.createElement(Ri,(0,V.Cl)({target:u,directionalHint:r,directionalHintForRTL:o},n,Te(this.props,Ae,["id"]),{className:this._classNames.root}),_.createElement("div",{className:this._classNames.content,id:i,onFocus:this.props.onFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},c(this.props,this._onRenderContent)))},t.defaultProps={directionalHint:ha.topCenter,maxWidth:"364px",calloutProps:{isBeakVisible:!0,beakWidth:16,gapSpace:0,setInitialFocus:!0,doNotLayer:!1}},t}(_.Component),Ru=(0,ye.I)(Eu,(function(e){var t=e.className,n=e.beakWidth,r=void 0===n?16:n,o=e.gapSpace,a=void 0===o?0:o,i=e.maxWidth,s=e.theme,l=s.semanticColors,c=s.fonts,u=s.effects,d=-(Math.sqrt(r*r/2)+a)+1/window.devicePixelRatio;return{root:["ms-Tooltip",s.fonts.medium,Lt.lw.fadeIn200,{background:l.menuBackground,boxShadow:u.elevation8,padding:"8px",maxWidth:i,selectors:{":after":{content:"''",position:"absolute",bottom:d,left:d,right:d,top:d,zIndex:0}}},t],content:["ms-Tooltip-content",c.small,{position:"relative",zIndex:1,color:l.menuItemText,wordWrap:"break-word",overflowWrap:"break-word",overflow:"hidden"}],subText:["ms-Tooltip-subtext",{fontSize:"inherit",fontWeight:"inherit",color:"inherit",margin:0}]}}),void 0,{scope:"Tooltip"}),Du=function(e){function t(n){var r=e.call(this,n)||this;return r._tooltipHost=_.createRef(),r._tooltipHostId=st("tooltip-host"),r.show=function(){r._toggleTooltip(!0)},r.dismiss=function(){r._hideTooltip()},r._getTargetElement=function(){if(r._tooltipHost.current)return r._tooltipHost.current},r._onTooltipFocus=function(e){r._ignoreNextFocusEvent?r._ignoreNextFocusEvent=!1:r._onTooltipMouseEnter(e)},r._onTooltipBlur=function(e){r._ignoreNextFocusEvent=(null===document||void 0===document?void 0:document.activeElement)===e.target,r._dismissTimerId=r._async.setTimeout((function(){r._hideTooltip()}),0)},r._onTooltipMouseEnter=function(e){var n=r.props.delay;if(t._currentVisibleTooltip&&t._currentVisibleTooltip!==r&&t._currentVisibleTooltip.dismiss(),t._currentVisibleTooltip=r,r.state.isOverflowing&&(!e.target||!Mt(e.target,r._getTargetElement())))if(r._clearDismissTimer(),r._clearOpenTimer(),n!==Au.zero){var o=r._getDelayTime(n);r._openTimerId=r._async.setTimeout((function(){r._toggleTooltip(!0)}),o)}else r._toggleTooltip(!0)},r._onTooltipMouseLeave=function(e){var n=r.props.closeDelay;r._clearDismissTimer(),r._clearOpenTimer(),n?r._dismissTimerId=r._async.setTimeout((function(){r._toggleTooltip(!1)}),n):r._toggleTooltip(!1),t._currentVisibleTooltip===r&&(t._currentVisibleTooltip=void 0)},r._onTooltipKeyDown=function(e){(e.which===we.c.escape||e.ctrlKey)&&r.state.isTooltipVisible&&(r._hideTooltip(),e.stopPropagation())},r._clearDismissTimer=function(){r._async.clearTimeout(r._dismissTimerId)},r._clearOpenTimer=function(){r._async.clearTimeout(r._openTimerId)},r._hideTooltip=function(){r._clearOpenTimer(),r._clearDismissTimer(),r._toggleTooltip(!1)},r._toggleTooltip=function(e){r.state.isTooltipVisible!==e&&r.setState({isTooltipVisible:e})},r._getDelayTime=function(e){switch(e){case Au.medium:return 300;case Au.long:return 500;default:return 0}},r._wrapContent=function(){var e=r.props,t=e.content,n=e.wrapContent,o=e.maxWidth,a=void 0===o?Number.POSITIVE_INFINITY:o,i=e.maxHeight,s=!1;t&&n&&n(t,r._tooltipHostId,a,i)&&(s=!0),r.state.isOverflowing!==s&&r.setState({isOverflowing:s})},r.state={isTooltipVisible:!1,isOverflowing:!1},r._async=new Xe(r),r}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this.props,t=e.content,n=e.tooltipProps,r=e.textProps,o=e.shouldReceiveFocus,a=void 0===o||o,i=this.state.isTooltipVisible,s=(0,V.Cl)({content:t,targetElement:this._getTargetElement(),calloutProps:{onDismiss:this._hideTooltip,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave},onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave},n),l=!!this.props.isTooltipVisibleProp&&this.state.isOverflowing&&!!t||i&&!!t;return _.createElement(_.Fragment,null,_.createElement("text",(0,V.Cl)({},r,{id:this._tooltipHostId,ref:this._tooltipHost,onFocusCapture:this._onTooltipFocus,onBlurCapture:this._onTooltipBlur,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave,onKeyDown:this._onTooltipKeyDown,"data-is-focusable":a&&this.state.isOverflowing}),t),l&&_.createElement(Ru,(0,V.Cl)({},s)))},t.prototype.componentDidMount=function(){this._wrapContent()},t.prototype.componentDidUpdate=function(e){this.props.maxWidth===e.maxWidth&&this.props.maxHeight===e.maxHeight||this._wrapContent()},t.prototype.componentWillUnmount=function(){t._currentVisibleTooltip&&t._currentVisibleTooltip===this&&(t._currentVisibleTooltip=void 0),this._async.dispose()},t.defaultProps={delay:Au.medium},t}(_.Component),Fu=(0,ve.Z)(),Mu=(0,_.lazy)((function(){return Promise.resolve().then(n.bind(n,2520)).then((function(e){return{default:e.ChartHoverCard}}))})),Ou=function(e){function t(t){var n,r,o,a,i,s,l,c,u,d,p,h,f,C,G,m,A,T,g,y,v,b,x,w,k,I,S=this;return(S=e.call(this,t)||this).minLegendContainerHeight=32,S._isRtl=(0,xe.jI)(),S._isFirstRender=!0,S.isIntegralDataset=!0,S._multiValueCallout=function(e){var t=S._yValueHoverSubCountsExists(e.YValueHover);return _.createElement("div",{className:S._classNames.calloutContentRoot},_.createElement("div",{className:S._classNames.calloutDateTimeContainer,style:t?{marginBottom:"11px"}:{}},_.createElement("div",(0,V.Cl)({className:S._classNames.calloutContentX},(0,yu.Qs)(e.xAxisCalloutAccessibilityData,"text",!1)),(0,yu.Uw)(e.hoverXValue,S.props.culture))),_.createElement("div",{className:S._classNames.calloutInfoContainer,style:t?{display:"flex"}:{}},e.YValueHover&&e.YValueHover.map((function(e,n,r){var o=n+1===r.length,a=e.shouldDrawBorderBottom,i=void 0!==a&&a;return _.createElement("div",(0,V.Cl)({},(0,yu.Qs)(e.callOutAccessibilityData,"text",!1),{key:"callout-content-".concat(n),style:t?(0,V.Cl)({display:"inline-block"},i&&{borderBottom:"1px solid ".concat(S.props.theme.semanticColors.menuDivider),paddingBottom:"10px"}):(0,V.Cl)({},i&&{borderBottom:"1px solid ".concat(S.props.theme.semanticColors.menuDivider),paddingBottom:"10px"})}),S._getCalloutContent(e,n,t,o))})),!!e.descriptionMessage&&_.createElement("div",{className:S._classNames.descriptionMessage},e.descriptionMessage)))},S._getData=function(e,t){S.props.getGraphData&&S.props.getGraphData(e,t,S.state.containerHeight-S.state._removalValueForTextTuncate,S.state.containerWidth,S.xAxisElement,S.yAxisElement)},S._onChartLeave=function(){S.props.onChartMouseLeave&&S.props.onChartMouseLeave()},S._calculateChartMinWidth=function(){var e=10;if(!S.props.wrapXAxisLables&&S.props.rotateXAxisLables&&S.props.xAxisType===yu.ph.StringAxis){var t=(0,yu.XX)(S._tickValues,".".concat(S._classNames.xAxis," text"));e+=Math.ceil(t*Math.cos(Math.PI/4))}else if(S.props.showXAxisLablesTooltip){var n=S._tickValues.map((function(e){var t=S.props.noOfCharsToTruncate||4;return e.toString().length>t?"".concat(e.toString().slice(0,t),"..."):e}));t=(0,yu.XX)(n,".".concat(S._classNames.xAxis," text"));e+=Math.ceil(t)}else if(S.props.wrapXAxisLables){var r=[];S._tickValues.forEach((function(e){r.push.apply(r,e.toString().split(/\s+/))}));t=(0,yu.XX)(r,".".concat(S._classNames.xAxis," text"));e+=Math.max(Math.ceil(t),10)}else{t=(0,yu.XX)(S._tickValues,".".concat(S._classNames.xAxis," text"));e+=Math.ceil(t)}var o=S.margins.left+S.margins.right+e*(S._tickValues.length-1);if([yu.wx.GroupedVerticalBarChart,yu.wx.VerticalBarChart,yu.wx.VerticalStackedBarChart].includes(S.props.chartType)){o+=16}return o},S.state={containerHeight:0,containerWidth:0,_width:S.props.width||600,_height:S.props.height||350,_removalValueForTextTuncate:0,isRemoveValCalculated:!0,startFromX:0},S.idForGraph=st("chart_"),S.titleMargin=8,S.idForDefaultTabbableElement=st("defaultTabbableElement_"),S.margins={top:null!==(r=null===(n=S.props.margins)||void 0===n?void 0:n.top)&&void 0!==r?r:20,bottom:null!==(a=null===(o=S.props.margins)||void 0===o?void 0:o.bottom)&&void 0!==a?a:35,right:S._isRtl?null!==(s=null===(i=S.props.margins)||void 0===i?void 0:i.left)&&void 0!==s?s:40:(null!==(c=null===(l=S.props.margins)||void 0===l?void 0:l.right)&&void 0!==c?c:null===(u=S.props)||void 0===u?void 0:u.secondaryYScaleOptions)?40:20,left:S._isRtl?(null!==(p=null===(d=S.props.margins)||void 0===d?void 0:d.right)&&void 0!==p?p:null===(h=S.props)||void 0===h?void 0:h.secondaryYScaleOptions)?40:20:null!==(C=null===(f=S.props.margins)||void 0===f?void 0:f.left)&&void 0!==C?C:40},void 0!==S.props.xAxisTitle&&""!==S.props.xAxisTitle&&(S.margins.bottom=null!==(m=null===(G=S.props.margins)||void 0===G?void 0:G.bottom)&&void 0!==m?m:55),void 0!==S.props.yAxisTitle&&""!==S.props.yAxisTitle&&(S.margins.left=S._isRtl?(null!==(T=null===(A=S.props.margins)||void 0===A?void 0:A.right)&&void 0!==T?T:null===(g=S.props)||void 0===g?void 0:g.secondaryYAxistitle)?60:40:null!==(v=null===(y=S.props.margins)||void 0===y?void 0:y.left)&&void 0!==v?v:60,S.margins.right=S._isRtl?null!==(x=null===(b=S.props.margins)||void 0===b?void 0:b.left)&&void 0!==x?x:60:(null!==(k=null===(w=S.props.margins)||void 0===w?void 0:w.right)&&void 0!==k?k:null===(I=S.props)||void 0===I?void 0:I.secondaryYAxistitle)?60:40),S}return(0,V.C6)(t,e),t.prototype.componentDidMount=function(){if(this._fitParentContainer(),this.props.chartType===yu.wx.HorizontalBarChartWithAxis&&this.props.showYAxisLables&&this.yAxisElement){var e=(0,yu.XX)(this.props.points.map((function(e){return e.y})),".".concat(this._classNames.yAxis," text"));this.state.startFromX!==e&&this.setState({startFromX:e})}else 0!==this.state.startFromX&&this.setState({startFromX:0});this.isIntegralDataset=!this.props.points.some((function(e){return e.y%1!==0}))},t.prototype.componentWillUnmount=function(){cancelAnimationFrame(this._reqID)},t.prototype.componentDidUpdate=function(e){if(e.height===this.props.height&&e.width===this.props.width||this._fitParentContainer(),!this.props.wrapXAxisLables&&this.props.rotateXAxisLables&&this.props.xAxisType===yu.ph.StringAxis){var t={node:this.xAxisElement,xAxis:this._xScale},n=(0,yu.qO)(t);this.state.isRemoveValCalculated&&this.state._removalValueForTextTuncate!==n+this.margins.bottom&&n>0&&this.setState({_removalValueForTextTuncate:n+this.margins.bottom,isRemoveValCalculated:!1})}if(this.props.chartType===yu.wx.HorizontalBarChartWithAxis&&this.props.showYAxisLables&&this.yAxisElement){var r=(0,yu.XX)(this.props.points.map((function(e){return e.y})),".".concat(this._classNames.yAxis," text"));this.state.startFromX!==r&&this.setState({startFromX:r})}else 0!==this.state.startFromX&&this.setState({startFromX:0});e.points!==this.props.points&&(this.isIntegralDataset=!this.props.points.some((function(e){return e.y%1!==0})))},t.prototype.render=function(){var e,t,n,r,o,a,i,s,l,c,u=this,d=this.props,p=d.calloutProps,h=d.points,f=d.chartType,C=d.chartHoverProps,G=d.svgFocusZoneProps,m=d.svgProps,A=d.culture,T=d.dateLocalizeOptions,g=d.timeFormatLocale,y=d.customDateTimeFormatter;this.props.parentRef&&this._fitParentContainer();var v=(0,V.Cl)({},this.margins);this.props.chartType===yu.wx.HorizontalBarChartWithAxis&&(this._isRtl?v.right+=this.state.startFromX:v.left+=this.state.startFromX),this.props.getmargins&&this.props.getmargins(v);var b=null,x=null;if(this.props.enableFirstRenderOptimization&&this.chartContainer||!this.props.enableFirstRenderOptimization){this._isFirstRender=!1;var w={domainNRangeValues:(0,yu.sQ)(h,this.props.getDomainMargins?this.props.getDomainMargins(this.state.containerWidth):this.margins,this.state.containerWidth,f,this._isRtl,this.props.xAxisType,this.props.barwidth,this.props.tickValues,this.state.startFromX),containerHeight:this.state.containerHeight-this.state._removalValueForTextTuncate,margins:this.margins,xAxisElement:this.xAxisElement,showRoundOffXTickValues:!0,xAxisCount:this.props.xAxisTickCount,xAxistickSize:this.props.xAxistickSize,tickPadding:this.props.tickPadding||this.props.showXAxisLablesTooltip?5:10,xAxisPadding:this.props.xAxisPadding,xAxisInnerPadding:this.props.xAxisInnerPadding,xAxisOuterPadding:this.props.xAxisOuterPadding},k={margins:this.margins,containerWidth:this.state.containerWidth,containerHeight:this.state.containerHeight-this.state._removalValueForTextTuncate,yAxisElement:this.yAxisElement,yAxisTickFormat:this.props.yAxisTickFormat,yAxisTickCount:this.props.yAxisTickCount,yMinValue:this.props.yMinValue||0,yMaxValue:this.props.yMaxValue||0,tickPadding:10,maxOfYVal:this.props.maxOfYVal,yMinMaxValues:(0,yu.o6)(h,f,this.props.yAxisType),yAxisPadding:this.props.yAxisPadding||0},I=void 0,S=void 0;switch(this.props.xAxisType){case yu.ph.NumericAxis:I=(e=(0,yu.k9)(w,this.props.chartType,A)).xScale,S=e.tickValues;break;case yu.ph.DateAxis:I=(t=(0,yu.ev)(w,this.props.tickParams,A,T,g,y)).xScale,S=t.tickValues;break;case yu.ph.StringAxis:I=(n=(0,yu.l)(w,this.props.tickParams,this.props.datasetForXAxisDomain,A)).xScale,S=n.tickValues;break;default:I=(r=(0,yu.k9)(w,this.props.chartType,A)).xScale,S=r.tickValues}if(this._xScale=I,this._tickValues=S,this.props.wrapXAxisLables||this.props.showXAxisLablesTooltip){var N={node:this.xAxisElement,xAxis:I,showXAxisLablesTooltip:this.props.showXAxisLablesTooltip||!1,noOfCharsToTruncate:this.props.noOfCharsToTruncate||4},E=I&&(0,yu.$0)(N);this.state.isRemoveValCalculated&&this.state._removalValueForTextTuncate!==E&&this.setState({_removalValueForTextTuncate:E,isRemoveValCalculated:!1})}var R=void 0,D=void 0,F={yAxisDomainValues:[]};if(this.props.yAxisType&&this.props.yAxisType===yu.lQ.StringAxis)R=(0,yu.yN)(k,this.props.stringDatasetForYAxisDomain,this._isRtl,this.props.chartType,this.props.barwidth,A);else{if(null===(o=this.props)||void 0===o?void 0:o.secondaryYScaleOptions){var M={margins:this.margins,containerWidth:this.state.containerWidth,containerHeight:this.state.containerHeight-this.state._removalValueForTextTuncate,yAxisElement:this.yAxisElementSecondary,yAxisTickFormat:this.props.yAxisTickFormat,yAxisTickCount:this.props.yAxisTickCount,yMinValue:(null===(a=this.props.secondaryYScaleOptions)||void 0===a?void 0:a.yMinValue)||0,yMaxValue:null!==(s=null===(i=this.props.secondaryYScaleOptions)||void 0===i?void 0:i.yMaxValue)&&void 0!==s?s:100,tickPadding:10,maxOfYVal:null!==(c=null===(l=this.props.secondaryYScaleOptions)||void 0===l?void 0:l.yMaxValue)&&void 0!==c?c:100,yMinMaxValues:(0,yu.o6)(h,f),yAxisPadding:this.props.yAxisPadding};D=(0,yu.do)(M,this._isRtl,F,f,this.props.barwidth,this.isIntegralDataset,!0)}R=(0,yu.do)(k,this._isRtl,F,f,this.props.barwidth,this.isIntegralDataset)}this.props.chartType===yu.wx.HorizontalBarChartWithAxis&&R&&(0,yu.yn)(this.yAxisElement,R,this.props.noOfCharsToTruncate||4,this.props.showYAxisLablesTooltip||!1,this.state.startFromX,this._isRtl),this.props.getAxisData&&this.props.getAxisData(F),this._getData(I,R),x=this.props.children((0,V.Cl)((0,V.Cl)({},this.state),{xScale:I,yScale:R,yScaleSecondary:D})),!this.props.hideTooltip&&p.isCalloutVisible&&(b=this._generateCallout(p,C))}this._classNames=Fu(this.props.styles,{theme:this.props.theme,width:this.state._width,height:this.state._height,className:this.props.className,isRtl:this._isRtl});var O,L={width:this.state.containerWidth,height:this.state.containerHeight};O=this.props.focusZoneDirection===ct.vertical||this.props.focusZoneDirection?this.props.focusZoneDirection:ct.horizontal;var P=L.width-this.margins.left-this.margins.right-this.state.startFromX,z=L.height-this.margins.bottom-this.margins.top-this.state._removalValueForTextTuncate-this.titleMargin;return _.createElement("div",{id:this.idForGraph,className:this._classNames.root,role:"presentation",ref:function(e){return u.chartContainer=e},onMouseLeave:this._onChartLeave},!this._isFirstRender&&_.createElement("div",{id:this.idForDefaultTabbableElement}),_.createElement(en,(0,V.Cl)({direction:O,className:this._classNames.chartWrapper,defaultTabbableElement:"#".concat(this.idForDefaultTabbableElement)},G),this._isFirstRender&&_.createElement("div",{id:this.idForDefaultTabbableElement}),_.createElement("svg",(0,V.Cl)({width:L.width,height:L.height,"aria-label":this.props.chartTitle,style:{display:"block"}},m),_.createElement("g",{ref:function(e){u.xAxisElement=e},id:"xAxisGElement".concat(this.idForGraph),transform:"translate(0, ".concat(L.height-this.margins.bottom-this.state._removalValueForTextTuncate,")"),className:this._classNames.xAxis}),void 0!==this.props.xAxisTitle&&""!==this.props.xAxisTitle&&_.createElement(Du,{content:this.props.xAxisTitle,textProps:{x:this.margins.left+this.state.startFromX+P/2,y:L.height-this.titleMargin,className:this._classNames.axisTitle,textAnchor:"middle"},maxWidth:P,wrapContent:yu.Ak}),_.createElement("g",{ref:function(e){u.yAxisElement=e},id:"yAxisGElement".concat(this.idForGraph),transform:"translate(".concat(this._isRtl?L.width-this.margins.right-this.state.startFromX:this.margins.left+this.state.startFromX,", 0)"),className:this._classNames.yAxis}),this.props.secondaryYScaleOptions&&_.createElement("g",null,_.createElement("g",{ref:function(e){u.yAxisElementSecondary=e},id:"yAxisGElementSecondary".concat(this.idForGraph),transform:"translate(".concat(this._isRtl?this.margins.left:L.width-this.margins.right,", 0)"),className:this._classNames.yAxis}),void 0!==this.props.secondaryYAxistitle&&""!==this.props.secondaryYAxistitle&&_.createElement(Du,{content:this.props.secondaryYAxistitle,textProps:{x:(z-this.margins.bottom)/2+this.state._removalValueForTextTuncate,y:this._isRtl?this.state.startFromX-this.titleMargin:L.width-this.margins.right,textAnchor:"middle",transform:"translate(".concat(this._isRtl?this.margins.right/2-this.titleMargin:this.margins.right/2+this.titleMargin,",\n                   ").concat(L.height-this.margins.bottom-this.margins.top-this.titleMargin,")rotate(-90)"),className:this._classNames.axisTitle},maxWidth:z,wrapContent:yu.Ak})),x,void 0!==this.props.yAxisTitle&&""!==this.props.yAxisTitle&&_.createElement(Du,{content:this.props.yAxisTitle,textProps:{x:(z-this.margins.bottom)/2+this.state._removalValueForTextTuncate,y:this._isRtl?L.width-this.margins.right/2+this.titleMargin:this.margins.left/2+this.state.startFromX-this.titleMargin,textAnchor:"middle",transform:"translate(0,\n                   ".concat(L.height-this.margins.bottom-this.margins.top-this.titleMargin,")rotate(-90)"),className:this._classNames.axisTitle},maxWidth:z,wrapContent:yu.Ak}))),!this.props.hideLegend&&_.createElement("div",{ref:function(e){return u.legendContainer=e},className:this._classNames.legendContainer},this.props.legendBars),b&&_.createElement(_.Suspense,{fallback:_.createElement("div",null,"Loading...")},b))},t.prototype._generateCallout=function(e,t){return _.createElement(Ri,(0,V.Cl)({hidden:!(!this.props.hideTooltip&&e.isCalloutVisible),shouldUpdateWhenHidden:!0},e),this.props.customizedCallout&&this.props.customizedCallout,!this.props.customizedCallout&&this.props.isCalloutForStack&&this._multiValueCallout(e),!this.props.customizedCallout&&!this.props.isCalloutForStack&&_.createElement(Mu,(0,V.Cl)({XValue:e.XValue,Legend:e.legend,YValue:e.YValue,color:e.color,culture:this.props.culture},t)))},t.prototype._yValueHoverSubCountsExists=function(e){return!!e&&e.some((function(e){return e.yAxisCalloutData&&"string"!==typeof e.yAxisCalloutData}))},t.prototype._getCalloutContent=function(e,t,n,r){var o,a=r?{}:{marginRight:"16px"},i=void 0!==e.index&&-1!==e.index,s=Fu(this.props.styles,{theme:this.props.theme,width:this.state._width,height:this.state._height,className:this.props.className,isRtl:this._isRtl,lineColor:e.color,toDrawShape:i}),l=this.props.culture,c=(0,yu.Uw)(e.y,l);if(e.yAxisCalloutData&&"string"!==typeof e.yAxisCalloutData){var u=e.yAxisCalloutData;return _.createElement("div",{style:a},_.createElement("div",{className:"ms-fontWeight-semibold",style:{fontSize:"12pt"}},e.legend," (",c,")"),Object.keys(u).map((function(e){return _.createElement("div",{key:e,className:s.calloutBlockContainer},_.createElement("div",{className:s.calloutlegendText}," ",(0,yu.Uw)(e,l)),_.createElement("div",{className:s.calloutContentY},(0,yu.Uw)(u[e],l)))})))}return _.createElement("div",{style:n?a:{}},n&&_.createElement("div",{className:"ms-fontWeight-semibold",style:{fontSize:"12pt"}},e.legend," (",c,")"),_.createElement("div",{id:"".concat(t,"_").concat(e.y),className:s.calloutBlockContainer},i&&_.createElement(bu,{svgProps:{className:s.shapeStyles},pathProps:{fill:e.color},shape:yu.ON[e.index%Object.keys(yu.Ay).length]}),_.createElement("div",null,_.createElement("div",{className:s.calloutlegendText}," ",e.legend),_.createElement("div",{className:s.calloutContentY},(0,yu.Uw)(e.yAxisCalloutData?e.yAxisCalloutData:null!==(o=e.y)&&void 0!==o?o:e.data,l)))))},t.prototype._fitParentContainer=function(){var e=this,t=this.state,n=t.containerWidth,r=t.containerHeight;this._reqID=requestAnimationFrame((function(){var t;if(e.props.hideLegend)t=0;else{var o=e.legendContainer&&getComputedStyle(e.legendContainer);t=(e.legendContainer&&e.legendContainer.getBoundingClientRect().height||e.minLegendContainerHeight)+parseFloat(o&&o.marginTop||"0")+parseFloat(o&&o.marginBottom||"0")}if(e.props.parentRef||e.chartContainer){var a=e.props.parentRef?e.props.parentRef:e.chartContainer,i=e.props.enableReflow&&!e._isFirstRender?Math.max(a.getBoundingClientRect().width,e._calculateChartMinWidth()):a.getBoundingClientRect().width,s=a.getBoundingClientRect().height>t?a.getBoundingClientRect().height:350;(n!==i||r!==s-t)&&e.setState({containerWidth:i,containerHeight:s-t})}}))},t}(_.Component);!function(e){e.shade30="#004578",e.shade20="#005a9e",e.shade10="#106ebe",e.primary="#0078d4",e.tint10="#2b88d8",e.tint20="#c7e0f4",e.tint30="#deecf9",e.tint40="#eff6fc"}(Iu||(Iu={})),function(e){e.black="#000000",e.gray220="#11100f",e.gray210="#161514",e.gray200="#1b1a19",e.gray190="#201f1e",e.gray180="#252423",e.gray170="#292827",e.gray160="#323130",e.gray150="#3b3a39",e.gray140="#484644",e.gray130="#605e5c",e.gray120="#797775",e.gray110="#8a8886",e.gray100="#979593",e.gray90="#a19f9d",e.gray80="#b3b0ad",e.gray70="#bebbb8",e.gray60="#c8c6c4",e.gray50="#d2d0ce",e.gray40="#e1dfdd",e.gray30="#edebe9",e.gray20="#f3f2f1",e.gray10="#faf9f8",e.white="#ffffff"}(_u||(_u={})),function(e){e.pinkRed10="#750b1c",e.red20="#a4262c",e.red10="#d13438",e.redOrange20="#603d30",e.redOrange10="#da3b01",e.orange30="#8e562e",e.orange20="#ca5010",e.orange10="#ffaa44",e.yellow10="#fce100",e.orangeYellow20="#986f0b",e.orangeYellow10="#c19c00",e.yellowGreen10="#8cbd18",e.green20="#0b6a0b",e.green10="#498205",e.greenCyan10="#00ad56",e.cyan40="#005e50",e.cyan30="#005b70",e.cyan20="#038387",e.cyan10="#00b7c3",e.cyanBlue20="#004e8c",e.cyanBlue10="#0078d4",e.blue10="#4f6bed",e.blueMagenta40="#373277",e.blueMagenta30="#5c2e91",e.blueMagenta20="#8764b8",e.blueMagenta10="#8378de",e.magenta20="#881798",e.magenta10="#c239b3",e.magentaPink20="#9b0062",e.magentaPink10="#e3008c",e.gray40="#393939",e.gray30="#7a7574",e.gray20="#69797e",e.gray10="#a0aeb2"}(Su||(Su={}));var Lu,Pu=pl(),zu=(0,ye.I)(Ou,(function(e){var t,n,r,o,a,i,s,l,c=e.className,u=e.theme,d=e.isRtl,p=e.shouldHighlight,h=e.href,f=e.lineColor,C=void 0===f?"transparent":f,G=e.toDrawShape,m=u.fonts;return{root:[u.fonts.medium,{display:"flex",width:"100%",height:"100%",flexDirection:"column",overflow:"hidden"},c],chartWrapper:{overflow:"auto"},axisTitle:[u.fonts.xSmall,{textAlign:"center",fontWeight:Lt.BO.semibold,fontStyle:"normal",lineHeight:Lt.s.medium,color:_u.gray160,fill:u.semanticColors.bodyText}],xAxis:{selectors:{text:[u.fonts.tiny,{fill:u.semanticColors.bodyText,fontWeight:"600",selectors:(t={},t[Lt.NK]={fill:"rgb(179, 179, 179)"},t)}],line:{opacity:.2,stroke:u.semanticColors.bodyText,width:"1px",selectors:(n={},n[Lt.NK]={opacity:.1,stroke:"rgb(179, 179, 179)"},n)},path:{display:"none"}}},yAxis:{selectors:{text:[u.fonts.tiny,{fill:u.semanticColors.bodyText,fontWeight:"600",selectors:(r={},r[Lt.NK]={fill:"rgb(179, 179, 179)"},r)}],path:{display:"none"},line:{opacity:.2,stroke:u.semanticColors.bodyText,selectors:(o={},o[Lt.NK]={opacity:.1,stroke:"rgb(179, 179, 179)"},o)},g:[d&&!Pu&&{textAnchor:"end"}]}},opacityChangeOnHover:{opacity:p?"":"0.1",cursor:h?"pointer":"default"},legendContainer:[{marginTop:"8px",marginLeft:"20px"}],calloutContentRoot:[{display:"grid",overflow:"hidden",padding:"11px 16px 10px 16px",backgroundColor:u.semanticColors.bodyBackground,backgroundBlendMode:"normal, luminosity"}],calloutDateTimeContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},calloutContentX:[(0,V.Cl)((0,V.Cl)({},m.small),{lineHeight:"16px",opacity:"0.8",color:u.semanticColors.bodySubtext})],calloutBlockContainer:[u.fonts.mediumPlus,{marginTop:"13px",color:u.semanticColors.bodyText},!G&&{selectors:(a={},a[Lt.up]={forcedColorAdjust:"none"},a),borderLeft:"4px solid ".concat(C),paddingLeft:"8px"},G&&{display:"flex"}],shapeStyles:{marginRight:"8px"},calloutlegendText:(0,V.Cl)((0,V.Cl)({},m.small),{lineHeight:"16px",selectors:(i={},i[Lt.NK]={color:"rgb(255, 255, 255)"},i),color:u.semanticColors.bodySubtext}),calloutContentY:[(0,V.Cl)((0,V.Cl)({},m.mediumPlus),{fontWeight:"bold",lineHeight:"22px",selectors:(s={},s[Lt.NK]={color:"rgb(255, 255, 255)"},s)})],descriptionMessage:[u.fonts.small,{selectors:(l={},l[Lt.NK]={color:"rgb(255, 255, 255)"},l),color:u.semanticColors.bodyText,marginTop:"10px",paddingTop:"10px",borderTop:"1px solid ".concat(u.semanticColors.menuDivider)}]}}));!function(e){e.show="visibility",e.hide="hidden"}(Lu||(Lu={}));var Bu=(0,ve.Z)(),Vu=function(e){function t(t){var n=e.call(this,t)||this;return n._isRtl=(0,xe.jI)(),n._createLine=function(e,t,r,o,a){var i;void 0===r&&(r=0),void 0===o&&(o=0);var s=n._xAxisType===yu.ph.StringAxis,l=n._getScales(r,o).xBarScale,c=n._createColors(),u=n.props.theme,d=n.props,p=d.data,h=d.lineLegendColor,f=void 0===h?u.palette.yellow:h,C=d.lineLegendText,G=[],m=[];p&&p.forEach((function(e,t){var n;e.lineData&&e.lineData.y&&G.push({x:e.x,y:e.lineData.y,useSecondaryYScale:null!==(n=e.lineData.useSecondaryYScale)&&void 0!==n&&n,point:e,index:t})}));var A=Sc().x((function(t){return s?l(t.x)+.5*l.bandwidth():e(t.x)})).y((function(e){return e.useSecondaryYScale&&a?a(e.y):t(e.y)})),T=!(!n._legendHighlighted(C)&&!n._noLegendHighlighted()),g=(null===(i=n.props.lineOptions)||void 0===i?void 0:i.lineBorderWidth)?Number.parseFloat(n.props.lineOptions.lineBorderWidth.toString()):0;g>0&&m.push(_.createElement("path",{key:st("_VBC_line_"),id:st("_VBC_line_"),opacity:T?1:.1,d:A(G),fill:"transparent",strokeLinecap:"square",strokeWidth:3+2*g,stroke:u.semanticColors.bodyBackground})),m.push(_.createElement("path",{key:st("_VBC_line_"),id:st("_VBC_line_"),opacity:T?1:.1,d:A(G),fill:"transparent",strokeLinecap:"square",strokeWidth:3,stroke:f}));var y=G.map((function(r,o){var i;return _.createElement("circle",{key:o,id:st("_VBC_point_"),cx:s?l(r.x)+.5*l.bandwidth():e(r.x),cy:r.useSecondaryYScale&&a?a(r.y):t(r.y),onMouseOver:n._onBarHover.bind(n,r.point,c(r.y)),onMouseOut:n._onBarLeave,r:8,stroke:f,fill:n.props.theme.semanticColors.bodyBackground,strokeWidth:3,visibility:n.state.activeXdataPoint===r.x?Lu.show:Lu.hide,onClick:null===(i=r.point.lineData)||void 0===i?void 0:i.onClick})}));return _.createElement(_.Fragment,null,m,y)},n._checkForLine=function(){return n.props.data.some((function(e){var t;return void 0!==(null===(t=null===e||void 0===e?void 0:e.lineData)||void 0===t?void 0:t.y)}))},n._getMargins=function(e){n.margins=e},n._renderContentForBothLineAndBars=function(e){var t=n._getCalloutContentForLineAndBar(e),r=t.YValueHover,o=t.hoverXValue,a=r.map((function(e,t){return _.createElement(Oc.ChartHoverCard,(0,V.Cl)({key:t,Legend:e.legend},0===t&&{XValue:"".concat(o||e.data)},{color:e.color,YValue:e.data||e.y,culture:n.props.culture}))}));return _.createElement(_.Fragment,null,a)},n._renderContentForOnlyBars=function(e){var t=n.props.useSingleColor,r=void 0!==t&&t;return _.createElement(_.Fragment,null,_.createElement(Oc.ChartHoverCard,{XValue:e.xAxisCalloutData||e.x,Legend:e.legend,YValue:e.yAxisCalloutData||e.y,color:!r&&e.color?e.color:n._createColors()(e.y),culture:n.props.culture}))},n._renderCallout=function(e){return e?n._isHavingLine?n._renderContentForBothLineAndBars(e):n._renderContentForOnlyBars(e):null},n._getCustomizedCallout=function(){return n.props.onRenderCalloutPerDataPoint?n.props.onRenderCalloutPerDataPoint(n.state.dataPointCalloutProps,n._renderCallout):null},n._getGraphData=function(e,t,r,o,a){return n._bars=n._xAxisType===yu.ph.NumericAxis?n._createNumericBars(r,o,a):n._xAxisType===yu.ph.DateAxis?n._createDateBars(r,o,a):n._createStringBars(r,o,a)},n._refCallback=function(e,t){n._refArray.push({index:t,refElement:e})},n._getCalloutContentForLineAndBar=function(e){var t,r,o,a,i=[],s=n.props,l=s.theme,c=s.useSingleColor,u=void 0!==c&&c,d=n.props,p=d.data,h=d.lineLegendText,f=d.lineLegendColor,C=void 0===f?l.palette.yellow:f,G=p.filter((function(t){return t.x===e.x}));n._isHavingLine&&void 0!==(null===(t=G[0].lineData)||void 0===t?void 0:t.y)&&i.push({legend:h,color:C,y:null===(r=G[0].lineData)||void 0===r?void 0:r.y,data:null===(o=G[0].lineData)||void 0===o?void 0:o.yAxisCalloutData,yAxisCalloutData:null===(a=G[0].lineData)||void 0===a?void 0:a.yAxisCalloutData}),i.push({legend:G[0].legend,y:G[0].y,color:u?n._createColors()(1):G[0].color?G[0].color:n._createColors()(G[0].y),data:G[0].yAxisCalloutData,yAxisCalloutData:G[0].yAxisCalloutData});var m=e.x instanceof Date?e.x.toLocaleString():e.x.toString();return{YValueHover:i,hoverXValue:e.xAxisCalloutData||m}},n._onBarLeave=function(){},n._handleChartMouseLeave=function(){n._calloutAnchorPoint=null,n.setState({isCalloutVisible:!1,activeXdataPoint:null,YValueHover:[],hoverXValue:""})},n._onBarFocus=function(e,t,r){var o=n._getCalloutContentForLineAndBar(e),a=o.YValueHover,i=o.hoverXValue;n._refArray.forEach((function(o,s){o.index===e.legend&&t===s&&n.setState({refSelected:o.refElement,isCalloutVisible:""===n.state.selectedLegend||n.state.selectedLegend===e.legend,calloutLegend:e.legend,dataForHoverCard:e.y,color:e.color||r,xCalloutValue:e.xAxisCalloutData||(e.x instanceof Date?e.x.toLocaleDateString():e.x.toString()),yCalloutValue:e.yAxisCalloutData,dataPointCalloutProps:e,activeXdataPoint:e.x,YValueHover:a,hoverXValue:i,callOutAccessibilityData:e.callOutAccessibilityData})}))},n._getScales=function(e,t){var r,o=(0,Dc.A)().domain([0,n._yMax]).range([0,e-n.margins.bottom-n.margins.top]);if(n._xAxisType===yu.ph.NumericAxis){var a=(0,Cc.A)(n._points,(function(e){return e.x})),i=(0,Gc.A)(n._points,(function(e){return e.x}));r=(0,Dc.A)().domain(n._isRtl?[a,i]:[i,a]).nice().range([n.margins.left+n._domainMargin,t-n.margins.right-n._barWidth-n._domainMargin])}else if(n._xAxisType===yu.ph.DateAxis){var s=(0,Gc.A)(n._points,(function(e){return e.x})),l=(0,Cc.A)(n._points,(function(e){return e.x}));r=(0,Fc.A)().domain([s,l]).range([n.margins.left+n._domainMargin+n._barWidth/2,t-n.margins.right-n._barWidth/2-n._domainMargin])}else r=(0,Mc.A)().domain(n._xAxisLabels).range(n._isRtl?[t-n.margins.right-n._domainMargin,n.margins.left+n._domainMargin]:[n.margins.left+n._domainMargin,t-n.margins.right-n._domainMargin]).paddingInner(2/3);return{xBarScale:r,yBarScale:o}},n._closeCallout=function(){n.setState({isCalloutVisible:!1})},n._getLegendData=function(e,t){var r=n.props,o=r.theme,a=r.useSingleColor,i=n.props,s=i.lineLegendText,l=i.lineLegendColor,c=void 0===l?o.palette.yellow:l,u=[];if(e.forEach((function(e,t){var r=a?n._createColors()(1):e.color,o={title:e.legend,color:r,action:function(){n._onLegendClick(e.legend)},hoverAction:function(){n._handleChartMouseLeave(),n._onLegendHover(e.legend)},onMouseOutAction:function(){n._onLegendLeave()}};u.push(o)})),n._isHavingLine&&s&&c){var d={title:s,color:c,action:function(){n._onLegendClick(s)},hoverAction:function(){n._handleChartMouseLeave(),n._onLegendHover(s)},onMouseOutAction:function(){n._onLegendLeave()},isLineLegendInBarChart:!0};u.unshift(d)}return _.createElement(ku,(0,V.Cl)({legends:u,enabledWrapLines:n.props.enabledLegendsWrapLines,overflowProps:n.props.legendsOverflowProps,focusZonePropsInHoverCard:n.props.focusZonePropsForLegendsInHoverCard,overflowText:n.props.legendsOverflowText},n.props.legendProps))},n._getAxisData=function(e){if(e&&e.yAxisDomainValues.length){var t=e.yAxisDomainValues;n._yMax=Math.max(t[t.length-1],n.props.yMaxValue||0)}},n._legendHighlighted=function(e){return n.state.selectedLegend===e||""===n.state.selectedLegend&&n.state.activeLegend===e},n._noLegendHighlighted=function(){return""===n.state.selectedLegend&&""===n.state.activeLegend},n._getAriaLabel=function(e){var t,r,o,a=e.xAxisCalloutData?e.xAxisCalloutData:e.x instanceof Date?e.x.toLocaleString():e.x,i=e.legend,s=e.yAxisCalloutData||e.y,l=n.props.lineLegendText||"Line",c=(null===(t=e.lineData)||void 0===t?void 0:t.yAxisCalloutData)||(null===(r=e.lineData)||void 0===r?void 0:r.y);return(null===(o=e.callOutAccessibilityData)||void 0===o?void 0:o.ariaLabel)||"".concat(a,". ")+(i?"".concat(i,", "):"")+"".concat(s,".")+("undefined"!==typeof c?" ".concat(l,", ").concat(c,"."):"")},n._getDomainMargins=function(e){if(n._xAxisType===yu.ph.StringAxis){var t=e-(n.margins.left+8)-(n.margins.right+8),r=Math.min(n.props.barWidth||16,24),o=(3*n._xAxisLabels.length-2)*r;if(n._domainMargin=8,t>=o)n._domainMargin+=(t-o)/2;else r=t/(3*n._xAxisLabels.length-2);n._barWidth=r}return(0,V.Cl)((0,V.Cl)({},n.margins),{left:n.margins.left+n._domainMargin,right:n.margins.right+n._domainMargin})},n.state={color:"",dataForHoverCard:0,isCalloutVisible:!1,refSelected:null,selectedLegend:"",activeLegend:"",xCalloutValue:"",yCalloutValue:"",activeXdataPoint:null,YValueHover:[],hoverXValue:"",calloutLegend:""},n._isHavingLine=n._checkForLine(),n._calloutId=st("callout"),n._tooltipId=st("VCTooltipID_"),n._refArray=[],n._xAxisType=n.props.data&&n.props.data.length>0?(0,yu.Gl)(n.props.data[0].x,!0):yu.ph.StringAxis,n._domainMargin=8,n._emptyChartId=st("_VBC_empty"),n}return(0,V.C6)(t,e),t.prototype.render=function(){var e=this;this._adjustProps(),this._xAxisLabels=this._points.map((function(e){return e.x})),this._yMax=Math.max((0,Cc.A)(this._points,(function(e){return e.y})),this.props.yMaxValue||0);var t=this._getLegendData(this._points,this.props.theme.palette);this._classNames=Bu(this.props.styles,{theme:this.props.theme,legendColor:this.state.color});var n=(0,V.Cl)((0,V.Cl)((0,V.Cl)((0,V.Cl)({isCalloutVisible:this.state.isCalloutVisible,directionalHint:ha.topAutoEdge,id:"toolTip".concat(this._calloutId),target:this.state.refSelected,isBeakVisible:!1},this._isHavingLine&&{YValueHover:this.state.YValueHover,hoverXValue:this.state.hoverXValue}),{gapSpace:15,color:this.state.color,legend:this.state.calloutLegend,XValue:this.state.xCalloutValue,YValue:this.state.yCalloutValue?this.state.yCalloutValue:this.state.dataForHoverCard,onDismiss:this._closeCallout,preventDismissOnLostFocus:!0}),this.props.calloutProps),(0,yu.Qs)(this.state.callOutAccessibilityData)),r={tickValues:this.props.tickValues,tickFormat:this.props.tickFormat};return this._isChartEmpty()?_.createElement("div",{id:this._emptyChartId,role:"alert",style:{opacity:"0"},"aria-label":"Graph has no data to display"}):_.createElement(zu,(0,V.Cl)({},this.props,{points:this._points,chartType:yu.wx.VerticalBarChart,xAxisType:this._xAxisType,calloutProps:n,tickParams:r},this._isHavingLine&&{isCalloutForStack:!0},{legendBars:t,datasetForXAxisDomain:this._xAxisLabels,barwidth:this._barWidth,focusZoneDirection:ct.horizontal,customizedCallout:this._getCustomizedCallout(),getmargins:this._getMargins,getGraphData:this._getGraphData,getAxisData:this._getAxisData,onChartMouseLeave:this._handleChartMouseLeave,getDomainMargins:this._getDomainMargins},this._xAxisType!==yu.ph.NumericAxis&&{xAxisInnerPadding:2/3,xAxisOuterPadding:0},{children:function(t){return _.createElement(_.Fragment,null,_.createElement("g",null,e._bars),e._isHavingLine&&_.createElement("g",null,e._createLine(t.xScale,t.yScale,t.containerHeight,t.containerWidth,t.yScaleSecondary)))}}))},t.prototype._adjustProps=function(){this._points=this.props.data||[],this._barWidth=this.props.barWidth||16;var e=this.props.theme.palette;this._colors=this.props.colors||[e.blueLight,e.blue,e.blueMid,e.blueDark],this._isHavingLine=this._checkForLine()},t.prototype._createColors=function(){var e=this,t=this._colors.length<=1?1:1/(this._colors.length-1),n=this.props.useSingleColor;if(void 0!==n&&n)return function(t){var n=e.props,r=n.theme,o=n.colors;return o&&o.length>0?o[0]:r.palette.blueLight};for(var r=[],o=0;o<this._colors.length;o++)r.push(t*o*this._yMax);return(0,Dc.A)().domain(r).range(this._colors)},t.prototype._onBarHover=function(e,t,n){n.persist();var r=this._getCalloutContentForLineAndBar(e),o=r.YValueHover,a=r.hoverXValue;this._calloutAnchorPoint!==e&&(this._calloutAnchorPoint=e,this.setState({refSelected:n,isCalloutVisible:""===this.state.selectedLegend||this.state.selectedLegend===e.legend,dataForHoverCard:e.y,calloutLegend:e.legend,color:e.color||t,xCalloutValue:e.xAxisCalloutData||(e.x instanceof Date?e.x.toLocaleDateString():e.x.toString()),yCalloutValue:e.yAxisCalloutData,dataPointCalloutProps:e,activeXdataPoint:e.x,YValueHover:o,hoverXValue:a,callOutAccessibilityData:e.callOutAccessibilityData}))},t.prototype._createNumericBars=function(e,t,n){var r=this,o=this.props.useSingleColor,a=void 0!==o&&o,i=this._getScales(e,t),s=i.xBarScale,l=i.yBarScale,c=this._createColors(),u=this._points.map((function(t,n){var o=!(!r._legendHighlighted(t.legend)&&!r._noLegendHighlighted());r._classNames=Bu(r.props.styles,{theme:r.props.theme,legendColor:r.state.color,shouldHighlight:o});var i=Math.max(l(t.y),0),u=0;if(i<=0)return _.createElement(_.Fragment,{key:t.x}," ");u=i<=Math.ceil(l(r._yMax)/100)?Math.ceil(l(r._yMax)/100):i;var d=s(t.x),p=e-r.margins.bottom-u;return _.createElement("g",{key:t.x},_.createElement("rect",{id:st("_VBC_bar_"),x:d,className:r._classNames.opacityChangeOnHover,y:p,width:r._barWidth,"data-is-focusable":!r.props.hideTooltip,height:u,ref:function(e){r._refCallback(e,t.legend)},onClick:t.onClick,onMouseOver:r._onBarHover.bind(r,t,c(t.y)),"aria-label":r._getAriaLabel(t),role:"img",onMouseLeave:r._onBarLeave,onFocus:r._onBarFocus.bind(r,t,n,c(t.y)),onBlur:r._onBarLeave,fill:t.color&&!a?t.color:c(t.y)}),r._renderBarLabel(d,p,t.y,t.legend))}));if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(h){}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var d=(0,Rc.Lt)(n).call(s);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(h){}var p={tooltipCls:this._classNames.tooltip,id:this._tooltipId,xAxis:d};d&&(0,yu.bX)(p)}return u},t.prototype._createStringBars=function(e,t,n){var r=this,o=this._getScales(e,t),a=o.xBarScale,i=o.yBarScale,s=this._createColors(),l=this._points.map((function(t,n){var o=Math.max(i(t.y),0),l=0;if(o<=0)return _.createElement(_.Fragment,{key:t.x instanceof Date?t.x.getTime():t.x}," ");l=o<=Math.ceil(i(r._yMax)/100)?Math.ceil(i(r._yMax)/100):o;var c=a(t.x),u=e-r.margins.bottom-l;return _.createElement("g",{key:t.x instanceof Date?t.x.getTime():t.x,transform:"translate(".concat(.5*(a.bandwidth()-r._barWidth),", 0)")},_.createElement("rect",{id:st("_VBC_bar_"),x:c,y:u,width:r._barWidth,height:l,"aria-label":r._getAriaLabel(t),role:"img",ref:function(e){r._refCallback(e,t.legend)},onClick:t.onClick,onMouseOver:r._onBarHover.bind(r,t,s(t.y)),onMouseLeave:r._onBarLeave,onBlur:r._onBarLeave,"data-is-focusable":!r.props.hideTooltip,onFocus:r._onBarFocus.bind(r,t,n,s(t.y)),fill:t.color?t.color:s(t.y)}),r._renderBarLabel(c,u,t.y,t.legend))}));if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(d){}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var c=(0,Rc.Lt)(n).call(a);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(d){}var u={tooltipCls:this._classNames.tooltip,id:this._tooltipId,xAxis:c,showTooltip:this.props.showXAxisLablesTooltip};c&&(0,yu.bX)(u)}return l},t.prototype._createDateBars=function(e,t,n){var r=this,o=this.props.useSingleColor,a=void 0!==o&&o,i=this._getScales(e,t),s=i.xBarScale,l=i.yBarScale,c=this._createColors(),u=this._points.map((function(t,n){var o=!(!r._legendHighlighted(t.legend)&&!r._noLegendHighlighted());r._classNames=Bu(r.props.styles,{theme:r.props.theme,legendColor:r.state.color,shouldHighlight:o});var i=Math.max(l(t.y),0),u=0;if(i<=0)return _.createElement(_.Fragment,{key:t.x instanceof Date?t.x.getTime():t.x}," ");u=i<=Math.ceil(l(r._yMax)/100)?Math.ceil(l(r._yMax)/100):i;var d=s(t.x)-r._barWidth/2,p=e-r.margins.bottom-u;return _.createElement("g",{key:t.x instanceof Date?t.x.getTime():t.x},_.createElement("rect",{id:st("_VBC_bar_"),x:d,className:r._classNames.opacityChangeOnHover,y:p,width:r._barWidth,"data-is-focusable":!r.props.hideTooltip,height:u,ref:function(e){r._refCallback(e,t.legend)},onClick:t.onClick,onMouseOver:r._onBarHover.bind(r,t,c(t.y)),"aria-label":r._getAriaLabel(t),role:"img",onMouseLeave:r._onBarLeave,onFocus:r._onBarFocus.bind(r,t,n,c(t.y)),onBlur:r._onBarLeave,fill:t.color&&!a?t.color:c(t.y)}),r._renderBarLabel(d,p,t.y,t.legend))}));if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(h){}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var d=(0,Rc.Lt)(n).call(s);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch(h){}var p={tooltipCls:this._classNames.tooltip,id:this._tooltipId,xAxis:d};d&&(0,yu.bX)(p)}return u},t.prototype._onLegendClick=function(e){this.state.selectedLegend===e?this.setState({selectedLegend:""}):this.setState({selectedLegend:e})},t.prototype._onLegendHover=function(e){this.setState({activeLegend:e})},t.prototype._onLegendLeave=function(){this.setState({activeLegend:""})},t.prototype._renderBarLabel=function(e,t,n,r){return this.props.hideLabels||this._barWidth<16||!this._legendHighlighted(r)&&!this._noLegendHighlighted()?null:_.createElement("text",{x:e+this._barWidth/2,y:t-6,textAnchor:"middle",className:this._classNames.barLabel,"aria-hidden":!0},(0,yu.Pw)(n))},t.prototype._isChartEmpty=function(){return 0===this._points.length||(0,Cc.A)(this._points,(function(e){return e.y}))<=0&&!this._isHavingLine},t}(_.Component),Hu=(0,ye.I)(Vu,(function(e){var t=e.shouldHighlight,n=e.theme;return{opacityChangeOnHover:{opacity:t?"":"0.1"},xAxisTicks:[],yAxisTicks:[{transform:"scaleX(-1)"}],yAxisDomain:[{transform:"scaleX(-1)"}],tooltip:(0,V.Cl)((0,V.Cl)({},n.fonts.medium),{display:"flex",flexDirection:"column",padding:"8px",position:"absolute",textAlign:"center",top:"0px",background:n.semanticColors.bodyBackground,borderRadius:"2px",pointerEvents:"none"}),barLabel:{fontSize:Lt.s.small,fontWeight:Lt.BO.semibold,fill:n.palette.neutralPrimary}}}));class Wu{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Uu{refCount(e){return ju("refCount")}incRef(e){return ju("incRef")}timerAvailable(){return!0}time(e){return ju("time")}read(e){return ju("read")}readSync(e){return ju("readSync")}readToGPU(e,t){return ju("readToGPU")}numDataIds(){return ju("numDataIds")}disposeData(e,t){return ju("disposeData")}write(e,t,n){return ju("write")}move(e,t,n,r,o){return ju("move")}createTensorFromGPUData(e,t,n){return ju("createTensorFromGPUData")}memory(){return ju("memory")}floatPrecision(){return ju("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return ju("dispose")}}function ju(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Ku(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Yu(e,t,n)}function qu(e,t,n){return Math.max(e,Math.min(t,n))}function Xu(e){return e%2===0?e:e+1}function Yu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Zu(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Ju(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Zu(ed(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function Qu(e){Zu(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function $u(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function ed(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function td(e){return e%1===0}function nd(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function rd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function od(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((o,a)=>{let i=0;const s=()=>{if(e())return void o();i++;const l=t(i);null!=n&&i>=n?a():null!=r?r(s,l):setTimeout(s,l)};s()}))}function ad(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const o=e.slice();return o[r]=t/n,o}function id(e,t){const n=t.length;return Zu((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),Zu(e.every((e=>td(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function sd(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:id(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function ld(e,t){return cd(e,t)}function cd(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function ud(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function dd(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function pd(e){return"string"===typeof e||e instanceof String}function hd(e){return"number"===typeof e}function fd(e){return Array.isArray(e)?fd(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":hd(e)?"float32":pd(e)?"string":"boolean"===typeof e?"bool":"float32"}function Cd(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Gd(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function md(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Ad(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)o[t]=n[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)o[t]=Ad(e+t*s,i,n,r)}return o}function Td(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Ad(0,e,t,n)}function gd(e,t){const n=yd(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function yd(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function vd(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return Td(e,new Float32Array(n));if("int32"===t)return Td(e,new Int32Array(n));if("bool"===t)return Td(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function bd(e){e.forEach((t=>{Zu(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function xd(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function wd(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function kd(e){return e&&e.then&&"function"===typeof e.then}const Id="tfjsflags";class _d{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Sd,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Nd().getBool("IS_TEST")||Nd().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Nd().getBool("IS_TEST")||Nd().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(kd(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(Id in e){e[Id].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function Sd(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function Nd(){return Rd}let Ed,Rd=null;function Dd(){if(null==Ed){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Ed=e}return Ed}function Fd(e,t){const n=function(){const e=Dd();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Md="Abs",Od="Acos",Ld="Acosh",Pd="Add",zd="AddN",Bd="All",Vd="Any",Hd="ArgMax",Wd="ArgMin",Ud="Asin",jd="Asinh",Kd="Atan",qd="Atanh",Xd="Atan2",Yd="AvgPool",Zd="AvgPoolGrad",Jd="AvgPool3D",Qd="AvgPool3DGrad",$d="BatchMatMul",ep="BatchToSpaceND",tp="Bincount",np="BitwiseAnd",rp="BroadcastArgs",op="Cast",ap="Ceil",ip="ClipByValue",sp="Complex",lp="ComplexAbs",cp="Concat",up="Conv2D",dp="Conv2DBackpropFilter",pp="Conv2DBackpropInput",hp="Conv3D",fp="Conv3DBackpropFilterV2",Cp="Conv3DBackpropInputV2",Gp="Cos",mp="Cosh",Ap="Cumprod",Tp="Cumsum",gp="CropAndResize",yp="DenseBincount",vp="DepthToSpace",bp="DepthwiseConv2dNative",xp="DepthwiseConv2dNativeBackpropFilter",wp="DepthwiseConv2dNativeBackpropInput",kp="Diag",Ip="Dilation2D",_p="Dilation2DBackpropInput",Sp="Dilation2DBackpropFilter",Np="Draw",Ep="RealDiv",Rp="Einsum",Dp="Elu",Fp="EluGrad",Mp="Erf",Op="Equal",Lp="Exp",Pp="ExpandDims",zp="Expm1",Bp="FFT",Vp="Fill",Hp="FlipLeftRight",Wp="Floor",Up="FloorDiv",jp="FusedBatchNorm",Kp="GatherV2",qp="GatherNd",Xp="Greater",Yp="GreaterEqual",Zp="Identity",Jp="IFFT",Qp="Imag",$p="IsFinite",eh="IsInf",th="IsNan",nh="LeakyRelu",rh="Less",oh="LessEqual",ah="LinSpace",ih="Log",sh="Log1p",lh="LogicalAnd",ch="LogicalNot",uh="LogicalOr",dh="LRN",ph="LRNGrad",hh="Max",fh="Maximum",Ch="MaxPool",Gh="MaxPoolGrad",mh="MaxPool3D",Ah="MaxPool3DGrad",Th="MaxPoolWithArgmax",gh="Mean",yh="Min",vh="Minimum",bh="MirrorPad",xh="Mod",wh="Multinomial",kh="Multiply",Ih="Neg",_h="NotEqual",Sh="NonMaxSuppressionV3",Nh="NonMaxSuppressionV4",Eh="NonMaxSuppressionV5",Rh="OnesLike",Dh="OneHot",Fh="Pack",Mh="PadV2",Oh="Pow",Lh="Prelu",Ph="Prod",zh="RaggedGather",Bh="RaggedRange",Vh="RaggedTensorToTensor",Hh="Range",Wh="Real",Uh="Reciprocal",jh="Relu",Kh="Reshape",qh="ResizeNearestNeighbor",Xh="ResizeNearestNeighborGrad",Yh="ResizeBilinear",Zh="ResizeBilinearGrad",Jh="Relu6",Qh="Reverse",$h="Round",ef="Rsqrt",tf="ScatterNd",nf="TensorScatterUpdate",rf="SearchSorted",of="Select",af="Selu",sf="Slice",lf="Sin",cf="Sinh",uf="Sign",df="Sigmoid",pf="Softplus",hf="Sqrt",ff="Sum",Cf="SpaceToBatchND",Gf="SplitV",mf="Softmax",Af="SparseFillEmptyRows",Tf="SparseReshape",gf="SparseSegmentMean",yf="SparseSegmentSum",vf="SparseToDense",bf="SquaredDifference",xf="Square",wf="StaticRegexReplace",kf="StridedSlice",If="StringNGrams",_f="StringSplit",Sf="StringToHashBucketFast",Nf="Sub",Ef="Tan",Rf="Tanh",Df="Tile",Ff="TopK",Mf="Transform",Of="Transpose",Lf="Unique",Pf="Unpack",zf="UnsortedSegmentSum",Bf="ZerosLike",Vf="Step",Hf="FromPixels",Wf="RotateWithOffset",Uf="_FusedMatMul",jf="FusedConv2D",Kf="FusedDepthwiseConv2D";function qf(){Nd().getBool("IS_TEST")||Nd().getBool("PROD")||console.warn(...arguments)}function Xf(){Nd().getBool("IS_TEST")||Nd().getBool("PROD")||console.log(...arguments)}const Yf=Fd("kernelRegistry",(()=>new Map)),Zf=Fd("gradRegistry",(()=>new Map));function Jf(e,t){const n=nC(e,t);return Yf.get(n)}function Qf(e){return Zf.get(e)}function $f(e){const t=Yf.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[a,i]=o,[s]=a.split("_");s===e&&n.push(i)}return n}function eC(e){const{kernelName:t,backendName:n}=e,r=nC(t,n);Yf.has(r)&&qf("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Yf.set(r,e)}function tC(e){const{kernelName:t}=e;Zf.has(t)&&Nd().getBool("DEBUG")&&qf("Overriding the gradient for '".concat(t,"'")),Zf.set(t,e)}function nC(e,t){return"".concat(t,"_").concat(e)}function rC(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var oC=n(7353);const aC=n.n(oC)()||oC;function iC(e){return aC.fromString(e,!0,16)}const sC=iC("c3a5c85c97cb3127"),lC=iC("b492b66fbe98f273"),cC=iC("9ae16a3b2f90404f");function uC(e){return e.xor(e.shru(47))}function dC(e,t,n){const r=e.slice(t,t+n);return aC.fromBytes(Array.from(r),!0,!0)}function pC(e,t){return dC(e,t,8)}function hC(e,t){return dC(e,t,4)}function fC(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function CC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iC("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function GC(e,t,n,r){return function(e,t,n,r,o,a){o=o.add(e),a=fC(a.add(o).add(r),21);const i=o;return o=(o=o.add(t)).add(n),a=a.add(fC(o,44)),[o.add(r),a.add(i)]}(pC(e,t),pC(e,t+8),pC(e,t+16),pC(e,t+24),n,r)}function mC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=aC.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=cC.add(2*t),r=pC(e,0).add(cC),o=pC(e,t-8);return CC(fC(o,37).mul(n).add(r),fC(r,25).add(o).mul(n),n)}if(t>=4){const n=cC.add(2*t);return CC(hC(e,0).shl(3).add(t),hC(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return uC(cC.mul(n).xor(sC.mul(r))).mul(cC)}return cC}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=cC.add(2*t),r=pC(e,0).mul(lC),o=pC(e,8),a=pC(e,t-8).mul(n),i=pC(e,t-16).mul(cC);return CC(fC(r.add(o),43).add(fC(a,30)).add(i),r.add(fC(o.add(cC),18)).add(a),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=cC.add(2*t),r=pC(e,0).mul(cC),o=pC(e,8),a=pC(e,t-8).mul(n),i=pC(e,t-16).mul(cC),s=fC(r.add(o),43).add(fC(a,30)).add(i),l=CC(s,r.add(fC(o.add(cC),18)).add(a),n),c=pC(e,16).mul(n),u=pC(e,24),d=s.add(pC(e,t-32)).mul(n),p=l.add(pC(e,t-24)).mul(n);return CC(fC(c.add(u),43).add(fC(d,30)).add(p),c.add(fC(u.add(r),18)).add(d),n)}(e,t);let r=n,o=n.mul(lC).add(113),a=uC(o.mul(cC).add(113)).mul(cC),i=[aC.UZERO,aC.UZERO],s=[aC.UZERO,aC.UZERO];r=r.mul(cC).add(pC(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=fC(r.add(o).add(i[0]).add(pC(e,l+8)),37).mul(lC),o=fC(o.add(i[1]).add(pC(e,l+48)),42).mul(lC),r=r.xor(s[1]),o=o.add(i[0]).add(pC(e,l+40)),a=fC(a.add(s[0]),33).mul(lC),i=GC(e,l,i[1].mul(lC),r.add(s[0])),s=GC(e,l+32,a.add(s[1]),o.add(pC(e,l+16))),[a,r]=[r,a],l+=64}while(l!==c);const d=lC.add(a.and(255).shl(1));return l=u,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=fC(r.add(o).add(i[0]).add(pC(e,l+8)),37).mul(d),o=fC(o.add(i[1]).add(pC(e,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),o=o.add(i[0].mul(9).add(pC(e,l+40))),a=fC(a.add(s[0]),33).mul(d),i=GC(e,l,i[1].mul(d),r.add(s[0])),s=GC(e,l+32,a.add(s[1]),o.add(pC(e,l+16))),[a,r]=[r,a],CC(CC(i[0],s[0],d).add(uC(o).mul(sC)).add(a),CC(i[1],s[1],d).add(r),d)}function AC(e,t){return"string"===t?yC(e):TC([e],t)}function TC(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=xC(e)),Nd().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function gC(){return Nd().platform.now()}function yC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nd().platform.encode(e,t)}function vC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nd().platform.decode(e,t)}function bC(e){return null!=Nd().platform.isTypedArray?Nd().platform.isTypedArray(e):rC(e)}function xC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||kd(e)||null==e||bC(e)&&n)t.push(e);else if(Array.isArray(e)||bC(e))for(let r=0;r<e.length;++r)xC(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let o=0;o<=r;o++)xC(e[o],t,n)}return t}class wC{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new IC)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let a;const i=gC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();a=Promise.resolve({kernelMs:gC()-i})}if(Nd().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{kC(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function kC(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class IC{logKernelProfile(e,t,n,r,o,a){const i="number"===typeof r?rd("".concat(r,"ms"),9):r.error,s=rd(e,25),l=t.rank,c=t.size,u=rd(t.shape.toString(),14);let d="";for(const p in o){const e=o[p];if(null!=e){const n=e.shape||t.shape,r=n.length;d+="".concat(p,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(a),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const _C=20,SC=3,NC=7;function EC(e,t,n,r){const o=md(t),a=function(e,t,n,r){const o=$u(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,l="complex64"===n?MC(e):e;if(s>1)for(let c=0;c<o/a;c++){const e=c*a;for(let t=0;t<a;t++)i[t]=Math.max(i[t],RC(l[e+t],0,n).length)}return i}(e,t,n,o),i=t.length,s=FC(e,t,n,o,a),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(i)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function RC(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(NC))," + ")+"".concat(parseFloat(e[1].toFixed(NC)),"j"):pd(e)?"'".concat(e,"'"):"bool"===n?DC(e):parseFloat(e.toFixed(NC)).toString(),rd(r,t)}function DC(e){return 0===e?"false":"true"}function FC(e,t,n,r,o){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[RC(MC(e)[0],0,n)]}return"bool"===n?[DC(e[0])]:[e[0].toString()]}if(1===l){if(s>_C){const t=SC*i;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((s-SC)*i,s*i));return"complex64"===n&&(r=MC(r),a=MC(a)),["["+r.map(((e,t)=>RC(e,o[t],n))).join(", ")+", ..., "+a.map(((e,t)=>RC(e,o[s-SC+t],n))).join(", ")+"]"]}return["["+("complex64"===n?MC(e):Array.from(e)).map(((e,t)=>RC(e,o[t],n))).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),d=r[0]*i,p=[];if(s>_C){for(let t=0;t<SC;t++){const r=t*d,a=r+d;p.push(...FC(e.slice(r,a),c,n,u,o,!1))}p.push("...");for(let t=s-SC;t<s;t++){const r=t*d,a=r+d;p.push(...FC(e.slice(r,a),c,n,u,o,t===s-1))}}else for(let C=0;C<s;C++){const t=C*d,r=t+d;p.push(...FC(e.slice(t,r),c,n,u,o,C===s-1))}const h=2===l?",":"";p[0]="["+(s>0?p[0]+h:"");for(let C=1;C<p.length-1;C++)p[C]=" "+p[C]+h;let f=",\n";for(let C=2;C<l;C++)f+="\n";return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":f),p}function MC(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class OC{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=$u(e),null!=n){const e=n.length;Zu(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||cd(t,this.size),this.strides=md(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Zu(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const a of t){if(a<0||a>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let o=t[t.length-1];for(let a=0;a<t.length-1;++a)o+=this.strides[a]*t[a];return this.values[o]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return LC().makeTensor(this.values,this.shape,this.dtype)}}let LC=null,PC=null,zC=null;class BC{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=$u(e),this.strides=md(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return PC.buffer(this.shape,this.dtype,e)}bufferSync(){return PC.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Td(this.shape,e,"complex64"===this.dtype)}arraySync(){return Td(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=LC().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>vC(e)))}catch(Ie){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),LC().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=LC().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>vC(e)))}catch(Ie){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await LC().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),LC().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return PC.print(this,e)}clone(){return this.throwIfDisposed(),PC.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return EC(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),PC.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),LC().makeVariable(this,e,t,n)}}function VC(){return Fd("Tensor",(()=>BC))}Object.defineProperty(BC,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),VC();class HC extends BC{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!ed(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));LC().disposeTensor(this),this.dataId=e.dataId,LC().incRef(this,null)}dispose(){LC().disposeVariable(this),this.isDisposedInternal=!0}}var WC,UC,jC,KC,qC;Object.defineProperty(HC,Symbol.hasInstance,{value:e=>e instanceof BC&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(WC||(WC={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(UC||(UC={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(jC||(jC={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(KC||(KC={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(qC||(qC={}));const XC={float32:KC,int32:UC,bool:jC,complex64:qC};function YC(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return XC[e][t]}function ZC(e){return YC(e,"int32")}function JC(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function QC(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function $C(e,t){if(e.dtype===t.dtype)return[e,t];const n=YC(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function eG(e,t){return t.some((t=>t.id===e.id))}function tG(e){const t=[];return nG(e,t,new Set),t}function nG(e,t,n){if(null==e)return;if(e instanceof BC)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const a in o){const e=o[a];n.has(e)||(n.add(e),nG(e,t,n))}}function rG(e){return null!=e.kernelName}class oG{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class aG{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new oG}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(qf("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new wC(this.backendInstance),!0}setupRegisteredKernels(){$f(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){$f(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof Uu||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,qf("Initialization of backend ".concat(e," failed")),qf(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return qf("Initialization of backend ".concat(e," failed")),qf(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return aG.nextTensorId++}nextVariableId(){return aG.nextVariableId++}clone(e){const t=sG.runKernel(Zp,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return sG.runKernel(op,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=Jf(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=rG(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(rG(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const l=Jf(t,this.backendName);Zu(null!=l,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),i=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const c=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,d=rG(e)?null:e.backwardsFunc;let p;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(l,c,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs):t=i()})),r&&this.addTapeNode(l,c,t,d,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map((e=>null!=c[e]?c[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=Qf(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let a;r.saveAllInputs?(Zu(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&pd(e[0])&&(o=e.map((e=>yC(e))));const a=r.write(o,t,n),i=new BC(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,a=new BC(r,o,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new HC(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name ".concat(o.name," was already registered"));return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*dd(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof HC||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*dd(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=Qf(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=yd(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=tG(e),n=new Set(t.map((e=>e.id)));for(let o=0;o<this.state.activeScope.track.length;o++){const e=this.state.activeScope.track[o];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Zu(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));Zu(o instanceof BC,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],a=n.inputs;for(const e in a){const i=a[e];let s=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[n.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(a[t.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(o[t.id]&&i[t.id]){const e={};for(const o in t.inputs){const n=t.inputs[o];r[n.id]&&(e[o]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=gd($u(e),"float32");return sG.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(o.dtype,"'"));const i=a.inputs[t];if(!ed(o.shape,i.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=r(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),lG);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){var t=this;return Zu(Cd(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a;Zu(r.every((e=>e instanceof BC)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};r.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(a=e(...r,n),Zu(a.value instanceof BC,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),Zu(Cd(a.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),a.value),backwardsFunc:(e,t)=>{const n=a.gradFunc(e,t),o=Array.isArray(n)?n:[n];Zu(o.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),Zu(o.every((e=>e instanceof BC)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return o.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=gC(),n=await this.backend.time(e);return n.wallMs=gC()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new oG;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function iG(){const e=Dd();if(null==e._tfengine){const t=new _d(e);e._tfengine=new aG(t)}var t;return t=e._tfengine.ENV,Rd=t,LC=()=>e._tfengine,e._tfengine}aG.nextTensorId=0,aG.nextVariableId=0;const sG=iG();function lG(e,t){const n={a:e,b:t};return sG.runKernel(Pd,n)}let cG;function uG(e){if(void 0!==cG)return cG;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function dG(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const pG=Nd();function hG(e,t){let n=e;if(bC(e))return"string"===t?[]:[e.length];if(JC(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(QC(e))return[e.buffer.size/(null==t?4:dd(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||bC(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Nd().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&fG(e,r,[]),r}function fG(e,t,n){if(n=n||[],!Array.isArray(e)&&!bC(e))return void Zu(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));Zu(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),Zu(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const r=t.slice(1);for(let o=0;o<e.length;++o)fG(e[o],r,n.concat(o))}function CG(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function GG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof VC())return CG(r,e.dtype,t,n),e;let o=fd(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),CG(r,o,t,n),null==e||!bC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const a=hG(e,o);bC(e)||Array.isArray(e)||(e=[e]);const i="string"!==o?TC(e,o):xC(e,[],!0);return sG.makeTensor(i,a,o)}function mG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,o)=>GG(e,"".concat(t,"[").concat(o,"]"),n,r)))}pG.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),pG.registerFlag("IS_BROWSER",(()=>dG())),pG.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),pG.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),pG.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),pG.registerFlag("PROD",(()=>!1)),pG.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>pG.getBool("DEBUG"))),pG.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),pG.registerFlag("IS_TEST",(()=>!1)),pG.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>pG.getBool("DEBUG"))),pG.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),pG.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),pG.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const AG="__op";function TG(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=AG;const o=function(){sG.startScope(n);try{const e=r(...arguments);return kd(e)&&console.error("Cannot return a Promise inside of tidy."),sG.endScope(e),e}catch(e){throw sG.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}const gG=TG({complex_:function(e,t){const n=GG(e,"real","complex"),r=GG(t,"imag","complex");Ju(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const o={real:n,imag:r};return sG.runKernel(sp,o)}});function yG(e,t,n,r){if(null==r)r=fd(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(QC(e)||JC(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return sG.backend.createTensorFromGPUData(e,t||n,r)}if(!bC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){bd(t);const e=$u(t),r=$u(n);Zu(e===r,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r)));for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==$u(t.slice(o));Zu(n[o]===t[o]||!r,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return bC(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?TC(e,r):xC(e,[],!0),sG.makeTensor(e,t,r)}function vG(e,t,n){return yG(e,t,hG(e,n),n)}const bG={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class xG{static join(e){return new xG(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>bC(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=t+r.byteLength;this.shards.push({buffer:r,start:t,end:o}),t=o}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),o=new Uint8Array(r);let a=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],r=e+a-n.start,s=a,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(o.set(c,s),a+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,a=t(e[o]);if(0===a)return o;a<0?r=o:n=o+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function wG(){return sG}function kG(){return sG.memory()}function IG(e,t){return sG.tidy(e,t)}function _G(e){tG(e).forEach((e=>e.dispose()))}function SG(e){return sG.keep(e)}function NG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return sG.registerBackend(e,t,n)}function EG(){return sG.backend}zC=function(e){Nd().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const RG=4;async function DG(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));const l={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+RG*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=RG,r.set(e,o),o+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:BG(await Promise.all(r)),specs:n}}function FG(e,t){const n=new xG(e),r={};let o=0;for(const a of t){const e=MG(a,((e,t)=>n.slice(o+e,o+t)));r[a.name]=LG(a,n.slice(o,o+e)),o+=e}return r}function MG(e,t){const n=$u(e.shape);let r;if("quantization"in e){const t=e.quantization;r=bG[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=RG+new Uint32Array(t(e,e+RG))[0];return e}r=bG[e.dtype]}return n*r}async function OG(e,t){const n=$u(e.shape);let r;if("quantization"in e){const t=e.quantization;r=bG[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=RG+new Uint32Array(await t(e,e+RG))[0];return e}r=bG[e.dtype]}return n*r}function LG(e,t){const n=e.name,r=e.dtype,o=e.shape,a=$u(o);let i,s=0;if("quantization"in e){const o=e.quantization;if("uint8"===o.dtype||"uint16"===o.dtype){if(!("min"in o)||!("scale"in o))throw new Error("Weight ".concat(e.name," with quantization ").concat(o.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==o.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(o.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==r)throw new Error("Weight ".concat(e.name," is quantized with ").concat(o.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}const l=bG[o.dtype],c="uint8"===o.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===o.dtype||"uint16"===o.dtype){i=new Float32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];i[e]=t*o.scale+o.min}}else{if("float16"!==o.dtype)throw new Error("Unsupported quantization type ".concat(o.dtype," ")+"for weight type float32.");{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),a=new Uint32Array(o);for(let i=0;i<r.length;i++){const o=r[i],s=e[n[o>>10]+(1023&o)]+t[o>>10];a[i]=s}return new Float32Array(o)}}();i=e(c)}}else{if("int32"!==r)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));if("uint8"!==o.dtype&&"uint16"!==o.dtype)throw new Error("Unsupported quantization type ".concat(o.dtype," ")+"for weight type int32.");i=new Int32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];i[e]=Math.round(t*o.scale+o.min)}}s+=a*l}else if("string"===r){const n=$u(e.shape);i=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+RG))[0];s+=RG;const n=new Uint8Array(t.slice(s,s+e));i.push(n),s+=e}}else{const e=bG[r];if("float32"===r)i=new Float32Array(t);else if("int32"===r)i=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){i=new Float32Array(t);const e=new Float32Array(i.length/2),n=new Float32Array(i.length/2);for(let t=0;t<e.length;t++)e[t]=i[2*t],n[t]=i[2*t+1];const r=vG(e,o,"float32"),a=vG(n,o,"float32"),s=gG(r,a);return r.dispose(),a.dispose(),s}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r))}i=new Uint8Array(t)}s+=a*e}return vG(i,o,r)}async function PG(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:o}=await e.read();if(t&&null==o){const e=n-r.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}const a=new Uint8Array(r.length+o.byteLength);a.set(r,0),a.set(new Uint8Array(o),r.length),r=a}return r.buffer}async function zG(e,t){const n={},r=e.getReader();let o=new ArrayBuffer(0);for(const a of t){const e=await OG(a,(async(e,t)=>(o=await PG(r,o,t),o.slice(e,t))));o=await PG(r,o,e);const t=o.slice(0,e);o=o.slice(e);const i=LG(a,t);if(n[a.name]=i,"webgpu"===sG.backendName){const e=EG();"uploadToGPU"in e&&$u(i.shape)>=Nd().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(i.dataId)}}return n}function BG(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const VG="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function HG(e){return VG?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function WG(e){return xG.join(e)}function UG(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function jG(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function KG(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function qG(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),KG(e,n,r)}function XG(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:HG(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:HG(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new xG(e.weightData).byteLength}}function YG(e){const t=[];for(const n of e)t.push(...n.weights);return t}class ZG{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==ZG.instance&&(ZG.instance=new ZG),ZG.instance}static registerSaveRouter(e){ZG.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ZG.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ZG.getHandlers(e,"save")}static getLoadHandlers(e,t){return ZG.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?ZG.getInstance().loadRouters:ZG.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const JG=e=>ZG.registerSaveRouter(e),QG=e=>ZG.registerLoadRouter(e),$G=e=>ZG.getSaveHandlers(e),em=(e,t)=>ZG.getLoadHandlers(e,t),tm="tensorflowjs",nm="models_store",rm="model_info_store";function om(){if(!Nd().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function am(e){const t=e.result;t.createObjectStore(nm,{keyPath:"modelPath"}),t.createObjectStore(rm,{keyPath:"modelPath"})}class im{constructor(e){if(this.indexedDB=om(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(tm,1);r.onupgradeneeded=()=>am(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(nm,"readonly"),r=t.objectStore(nm).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{t.weightData=xG.join(t.weightData);const r=XG(t),i=o.transaction(rm,"readwrite");let s,l,c=i.objectStore(rm);try{s=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(a){return n(a)}s.onsuccess=()=>{l=o.transaction(nm,"readwrite");const s=l.objectStore(nm);let u;try{u=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(a){return n(a)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=i.objectStore(rm);const t=c.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(u.error)),t.onerror=e=>(o.close(),n(u.error))}},s.onerror=e=>(o.close(),n(s.error)),i.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}im.URL_SCHEME="indexeddb://";const sm=e=>{return Nd().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(im.URL_SCHEME)?(t=e.slice(im.URL_SCHEME.length),new im(t)):null;var t};ZG.registerSaveRouter(sm),ZG.registerLoadRouter(sm);class lm{constructor(){this.indexedDB=om()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(tm,1);n.onupgradeneeded=()=>am(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(rm,"readonly"),a=o.objectStore(rm).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(im.URL_SCHEME)?t.slice(im.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(tm,1);r.onupgradeneeded=()=>am(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(rm,"readwrite"),i=a.objectStore(rm),s=i.get(e);let l;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=i.delete(e),a=()=>{l=o.transaction(nm,"readwrite");const r=l.objectStore(nm).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const cm="/",um="tensorflowjs_models",dm="info",pm="model_topology",hm="weight_specs",fm="weight_data",Cm="model_metadata";function Gm(e){return{info:[um,e,dm].join(cm),topology:[um,e,pm].join(cm),weightSpecs:[um,e,hm].join(cm),weightData:[um,e,fm].join(cm),modelMetadata:[um,e,Cm].join(cm)}}function mm(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Am(e){const t=e.split(cm);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(cm)}class Tm{constructor(e){if(!Nd().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Gm(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=XG(e),a=xG.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(VG)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(a));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:o}}catch(t){throw mm(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(o.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(o.weightSpecsBytes,", ")+"weightDataBytes=".concat(o.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(VG){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(a),t}}Tm.URL_SCHEME="localstorage://";const gm=e=>{return Nd().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Tm.URL_SCHEME)?(t=e.slice(Tm.URL_SCHEME.length),new Tm(t)):null;var t};ZG.registerSaveRouter(gm),ZG.registerLoadRouter(gm);class ym{constructor(){Zu(Nd().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Zu("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=um+cm,n=cm+dm;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[Am(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=Gm(e=(t=e).startsWith(Tm.URL_SCHEME)?t.slice(Tm.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return mm(n),r}}const vm="://";class bm{constructor(){this.managers={}}static getInstance(){return null==bm.instance&&(bm.instance=new bm),bm.instance}static registerManager(e,t){Zu(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(vm)&&(e=e.slice(0,e.indexOf(vm))),Zu(e.length>0,(()=>"scheme must not be an empty string."));const n=bm.getInstance();Zu(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=bm.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(bm.getInstance().managers)}}function xm(e){if(-1===e.indexOf(vm))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(bm.getSchemes().join(",")));return{scheme:e.split(vm)[0],path:e.split(vm)[1]}}async function wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Zu(e!==t,(()=>"Old path and new path are the same: '".concat(e,"'")));const r=ZG.getLoadHandlers(e);Zu(r.length>0,(()=>"Copying failed because no load handler is found for source URL ".concat(e,"."))),Zu(r.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(e,".")));const o=r[0],a=ZG.getSaveHandlers(t);Zu(a.length>0,(()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,"."))),Zu(a.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(t,".")));const i=a[0],s=xm(e).scheme,l=xm(e).path,c=s===xm(e).scheme,u=await o.load();n&&c&&await bm.getManager(s).removeModel(l);const d=await i.save(u);return n&&!c&&await bm.getManager(s).removeModel(l),d.modelArtifactsInfo}async function km(){const e=bm.getSchemes(),t={};for(const n of e){const e=await bm.getManager(n).listModels();for(const r in e){t[n+vm+r]=e[r]}}return t}async function Im(e){const t=xm(e);return bm.getManager(t.scheme).removeModel(t.path)}async function _m(e,t){return wm(e,t,!1)}async function Sm(e,t){return wm(e,t,!0)}class Nm{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&Nd().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return rC(e)}}if(Nd().get("IS_BROWSER")){Nd().setPlatform("browser",new Nm);try{bm.registerManager(Tm.URL_SCHEME,new ym)}catch(fJ){}try{bm.registerManager(im.URL_SCHEME,new lm)}catch(fJ){}}const Em=()=>n(5817);let Rm;class Dm{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Nd().global.fetch?Nd().global.fetch(e,t):(null==Rm&&(Rm=Em()),Rm(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function Fm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",bd(e),new OC(e,t,n)}Nd().get("IS_NODE")&&!Nd().get("IS_BROWSER")&&Nd().setPlatform("node",new Dm);const Mm=TG({cast_:function(e,t){const n=GG(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:t};return sG.runKernel(op,r,o)}});const Om=TG({clone_:function(e){const t={x:GG(e,"x","clone","string_or_numeric")};return sG.runKernel(Zp,t)}});function Lm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}iG();PC={buffer:Fm,cast:Mm,clone:Om,print:Lm};const Pm=TG({add_:function(e,t){let n=GG(e,"a","add"),r=GG(t,"b","add");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(Pd,o)}});const zm=TG({floorDiv_:function(e,t){let n=GG(e,"a","floorDiv"),r=GG(t,"b","floorDiv");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(Up,o)}});const Bm=TG({div_:function(e,t){let n=GG(e,"a","div"),r=GG(t,"b","div");if([n,r]=$C(n,r),"int32"===n.dtype&&"int32"===r.dtype)return zm(n,r);const o={a:n,b:r};return sG.runKernel(Ep,o,{})}});const Vm=TG({mul_:function(e,t){let n=GG(e,"a","mul"),r=GG(t,"b","mul");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(kh,o)}});const Hm=TG({sqrt_:function(e){const t={x:GG(e,"x","sqrt","float32")};return sG.runKernel(hf,t)}});const Wm=TG({square_:function(e){const t=GG(e,"x","square");return sG.runKernel("Square",{x:t},{})}});const Um=TG({zerosLike_:function(e){const t={x:GG(e,"x","zerosLike")};return sG.runKernel(Bf,t)}});function jm(e){return sG.customGrad(e)}function Km(e,t){if((bC(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&bC(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return yG(e,[],[],t)}const qm=new Map,Xm=new Map;class Ym{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Zm{constructor(){this.classNameMap={}}static getMap(){return null==Zm.instance&&(Zm.instance=new Zm),Zm.instance}static register(e){Zm.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Jm(e,t,n){Zu(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Zu("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Zu(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return Zm.register(e),qm.set(r,e),Xm.set(e,r),e}class Qm extends Ym{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:o}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:o[e.name]})));this.applyGradients(e)}else this.applyGradients(o);return _G(o),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Zu(Cd(e),(()=>"The f passed in variableGrads(f) must be a function")),Zu(null==t||Array.isArray(t)&&t.every((e=>e instanceof HC)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in sG.registeredVariables)t.push(sG.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,o=t.length;t=t.filter((e=>e.trainable)),Zu(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."));const{value:a,grads:i}=sG.gradients(e,t,null,!0);Zu(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),Zu(0===a.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(a.rank," tensor")));const s={};return t.forEach(((e,t)=>{null!=i[t]&&(s[e.name]=i[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:a,grads:s}}(e,t)}dispose(){null!=this.iterations_&&_G(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Km(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Qm,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class $m extends Qm{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=sG.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=sG.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:IG((()=>Um(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:IG((()=>Um(r).variable(false)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;IG((()=>{const e=Pm(Vm(a,this.rho),Vm(Wm(o),1-this.rho)),t=Vm(Bm(Hm(Pm(i,this.epsilon)),Hm(Pm(a,this.epsilon))),o),n=Pm(Vm(i,this.rho),Vm(Wm(t),1-this.rho));a.assign(e),i.assign(n);const s=Pm(Vm(t,-this.learningRate),r);r.assign(s)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(_G(this.accumulatedGrads.map((e=>e.variable))),_G(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function eA(e,t,n){bd(e);const r={shape:e,value:t,dtype:n=n||fd(t)};return sG.runKernel(Vp,{},r)}class tA extends Qm{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=sG.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:IG((()=>eA(r.shape,this.initialAccumulatorValue).variable(e)))}}const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable;IG((()=>{const e=Pm(a,Wm(o));a.assign(e);const t=Pm(Vm(Bm(o,Hm(Pm(e,sG.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&_G(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const nA=TG({pow_:function(e,t){let n=GG(e,"base","pow"),r=GG(t,"exp","pow");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(Oh,o)}});const rA=TG({sub_:function(e,t){let n=GG(e,"a","sub"),r=GG(t,"b","sub");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(Nf,o)}});class oA extends Qm{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],IG((()=>{this.accBeta1=Km(t).variable(),this.accBeta2=Km(n).variable()})),null==r&&(this.epsilon=sG.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);IG((()=>{const n=rA(1,this.accBeta1),r=rA(1,this.accBeta2);t.forEach(((t,o)=>{const a=sG.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:IG((()=>Um(a).variable(false)))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:"".concat(t,"/v"),variable:IG((()=>Um(a).variable(false)))});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,l=this.accumulatedSecondMoment[o].variable,c=Pm(Vm(s,this.beta1),Vm(i,1-this.beta1)),u=Pm(Vm(l,this.beta2),Vm(Wm(i),1-this.beta2)),d=Bm(c,n),p=Bm(u,r);s.assign(c),l.assign(u);const h=Pm(Vm(Bm(d,Pm(Hm(p),this.epsilon)),-this.learningRate),a);a.assign(h)})),this.accBeta1.assign(Vm(this.accBeta1,this.beta1)),this.accBeta2.assign(Vm(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&_G(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&_G(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),IG((()=>{this.accBeta1.assign(nA(this.beta1,this.iterations_+1)),this.accBeta2.assign(nA(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const aA=TG({abs_:function(e){const t=GG(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return sG.runKernel(lp,e)}{const e={x:t};return sG.runKernel(Md,e)}}});function iA(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function sA(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function lA(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let a=e[e.length-o-1];null==a&&(a=1);let i=t[t.length-o-1];if(null==i&&(i=1),1===a)r[n-o-1]=i;else if(1===i)r[n-o-1]=a;else{if(a!==i){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-o-1]=a}}return r}const cA=TG({maximum_:function(e,t){let n=GG(e,"a","maximum"),r=GG(t,"b","maximum");[n,r]=$C(n,r),"bool"===n.dtype&&(n=Mm(n,"int32"),r=Mm(r,"int32")),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(fh,o)}});class uA extends Qm{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],IG((()=>{this.iteration=Km(0).variable(),this.accBeta1=Km(t).variable()})),null==r&&(this.epsilon=sG.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);IG((()=>{const n=rA(1,this.accBeta1),r=Bm(-this.learningRate,Pm(Vm(this.iteration,this.decay),1));t.forEach(((t,o)=>{const a=sG.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:Um(a).variable(false)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:"".concat(t,"/v"),variable:Um(a).variable(false)});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,l=this.accumulatedWeightedInfNorm[o].variable,c=Pm(Vm(s,this.beta1),Vm(i,1-this.beta1)),u=Vm(l,this.beta2),d=aA(i),p=cA(u,d);s.assign(c),l.assign(p);const h=Pm(Vm(Bm(r,n),Bm(c,Pm(p,this.epsilon))),a);a.assign(h)})),this.iteration.assign(Pm(this.iteration,1)),this.accBeta1.assign(Vm(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&_G(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&_G(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class dA extends Qm{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=sG.registeredVariables[t];IG((()=>{const e=Pm(Vm(this.c,r),o);o.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=SG(Km(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class pA extends dA{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Km(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=sG.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:IG((()=>Um(r).variable(e)))}}const o=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&IG((()=>{let e;const t=Pm(Vm(this.m,o),a);e=this.useNesterov?Pm(Vm(this.c,Pm(a,Vm(t,this.m))),r):Pm(Vm(this.c,t),r),o.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&_G(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class hA extends Qm{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,null==r&&(this.epsilon=sG.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=sG.registeredVariables[t],o=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:IG((()=>Um(r).variable(o)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:IG((()=>Um(r).variable(o)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:IG((()=>Um(r).variable(o)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;IG((()=>{const e=Pm(Vm(i,this.decay),Vm(Wm(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=Pm(Vm(t,this.decay),Vm(a,1-this.decay)),l=Bm(Vm(a,this.learningRate),Hm(rA(e,Pm(Wm(o),this.epsilon)))),c=Pm(Vm(s,this.momentum),l);i.assign(e),t.assign(o),s.assign(c);const u=rA(r,c);r.assign(u)}else{const e=Pm(Vm(i,this.decay),Vm(Wm(a),1-this.decay)),t=Pm(Vm(s,this.momentum),Bm(Vm(a,this.learningRate),Hm(Pm(e,this.epsilon))));i.assign(e),s.assign(t);const n=rA(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&_G(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&_G(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&_G(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const fA=[$m,tA,oA,uA,pA,hA,dA];function CA(e){return new Promise((e=>setTimeout(e))).then(e)}class GA{constructor(e){if(!Nd().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(GA.URL_SCHEME)&&(e=e.slice(GA.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=xG.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=jG(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await CA((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await CA((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:XG(e)}}}}GA.URL_SCHEME="downloads://";class mA{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),o=r.modelTopology;if(null==o)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:o});const a=qG(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const a of e)t.push(...a.weights),n.push(...a.paths);const r=this.checkManifestAndWeightFiles(e),o=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(o).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;n(t)},o.onerror=t=>r("Failed to weights data from file of path '".concat(e,"'.")),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>UG(e.name))),r={};for(const o of e)o.paths.forEach((e=>{const o=UG(e);if(-1!==t.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(o,"'"));if(t.push(o),-1===n.indexOf(o))throw new Error("Weight file with basename '".concat(o,"' is not provided."));r[e]=this.weightsFiles[n.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return r}}function AA(e){return new mA(e)}function TA(e,t,n,r){!function(e){Zu(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Zu(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),Zu(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),Zu(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++o/e.length*(r-n);return t(i),a})),a))))}async function gA(e,t){null==t&&(t={});const n=null==t.fetchFunc?Nd().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await TA(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await TA(o,t.onProgress,.5,1)}async function yA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return vA((e=>gA(e,{requestInit:r})))(e,t,n)}function vA(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const o=t.map((()=>!1)),a={},i=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,c=bG[l]*$u(e.shape),u=()=>{o[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((t,n)=>{t===e.name&&(u(),i[n]=!0)})):u(),s.push(e.name),n+=c}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."))}const l=o.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),c=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)}))}));const u=await e(c),d={};let p=0;return l.forEach((e=>{const n=t[e].paths.length,r=new xG(u.slice(p,p+n));a[e].forEach((e=>{const t=FG(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)d[n]=t[n]})),p+=n})),d}}ZG.registerSaveRouter((e=>Nd().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(GA.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new GA(e)}(e.slice(GA.URL_SCHEME.length)):null));class bA{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Zu("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Nd().platform.fetch,Zu(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Zu(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=jG(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=xG.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:XG(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(o){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return qG(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=YG(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?Nd().platform.fetch:t.fetchFunc;let o,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;a<e.length;){if(!o){const n=(await r(e[a],t.requestInit,{isBinary:!0})).body;o=n.getReader()}const{done:s,value:l}=await o.read();if(!s)return void n.enqueue(l);a++,o=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,a/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,a=[],i=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):a.push(o+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(i)),a}async loadWeights(e){const t=await this.getWeightUrls(e);return[YG(e),await gA(t,this.loadOptions)]}}function xA(e){return null!=e.match(bA.URL_SCHEME_REGEX)}bA.URL_SCHEME_REGEX=/^https?:\/\//;const wA=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>xA(e))):xA(e),n)return kA(e,t)}return null};function kA(e,t){return new bA(e,t)}function IA(e,t){return kA(e,t)}ZG.registerSaveRouter(wA),ZG.registerLoadRouter(wA);class _A{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class SA{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class NA{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function EA(e,t,n,r){return new NA(RA(...arguments))}function RA(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new _A(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _A({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _A({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function DA(e){return new SA(e)}function FA(e){return new SA(e)}function MA(e,t,n){if(Qu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=hG(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return yG(e,t,r,n)}const OA=-2,LA=-1;function PA(e,t,n){const r=e.shape.length;Zu(r===t.length,(()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,")."))),Zu(r===n.length,(()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")));for(let o=0;o<r;++o)Zu(t[o]+n[o]<=e.shape[o],(()=>"Error in slice".concat(r,"D: begin[").concat(o,"] + size[").concat(o,"] ")+"(".concat(t[o]+n[o],") would overflow input.shape[").concat(o,"] (").concat(e.shape[o],")")))}function zA(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function BA(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function VA(e,t,n,r){const o=[...e];for(let a=o.length;a<r.length;a++)o.push(1);for(let a=0;a<n;a++)0===a?o[t]=1:(o.splice(t,0,1),o.pop());return o}function HA(e,t,n){return n<=e?n:n-(t-1)}function WA(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function UA(e,t,n,r,o,a,i,s,l){const c=e.length;let u=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=jA(i,l,c,r,e),d=KA(s,l,c,o,e),p=VA(a,l,c,e)}else for(let h=0;h<c;h++)u[h]=XA(i,r,a,e,h,l),d[h]=YA(s,o,a,e,h,l),p[h]=qA(a,h,l);return{begin:u,end:d,strides:p}}function jA(e,t,n,r,o){const a=[...o],i=WA(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=0;else{const o=HA(t,n,s);let i=r[o];e&1<<o&&(i=0),a[s]=i}return a}function KA(e,t,n,r,o){const a=[...o],i=WA(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const o=HA(t,n,s);let i=r[o];e&1<<o&&(i=Number.MAX_SAFE_INTEGER),a[s]=i}for(let s=0;s<a.length;s++){const e=o[s];a[s]<0&&(a[s]+=e),a[s]=qu(0,a[s],o[s])}return a}function qA(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function XA(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=qu(0,i,l-1),i}function YA(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=s>0?qu(0,i,l):qu(-1,i,l-1),i}function ZA(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function JA(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function QA(e,t,n){let r;const o=e.shape.length;let a;return r="number"===typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{Zu(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==n?new Array(o).fill(-1):"number"===typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,a=a.map(((t,n)=>t>=0?t:(Zu(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-r[n]))),[r,a]}function $A(e,t,n,r,o,a,i,s,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};for(let A=0;A<d.dims;A++)u&&0!==(1<<A&s)&&d.numAddAxisAfterEllipsis++,1<<A&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(OA),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(LA),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);let h=!0,f=!0,C=!0;const G=[],m=[];for(let A=0;A<e.length;++A){if(0===p.strides[A])throw Error("strides[".concat(A,"] must be non-zero"));const t=!!(p.shrinkAxisMask&1<<A),n=e[A];if(-1===n){G.push(t?1:-1);continue}const r=[p.beginMask&1<<A,p.endMask&1<<A],o=[p.strides[A]>0?0:-1,p.strides[A]>0?n:n-1];if(t&&p.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");C=C&&1===p.strides[A];const a=!!(p.beginMask&1<<A&&p.endMask&1<<A);if(p.beginValid&&p.endValid){if(t){const e=p.begin[A]<0?n+p.begin[A]:p.begin[A];if(p.begin[A]=e,p.end[A]=p.begin[A]+1,e<0||e>=n)throw Error("slice index ".concat(p.begin[A]," of dimension ").concat(A," out of bounds."))}else p.begin[A]=eT(p.begin[A],0,p.strides[A],n,r,o),p.end[A]=eT(p.end[A],1,p.strides[A],n,r,o);const e=1===p.strides[A]&&0===p.begin[A]&&p.end[A]===n;h=h&&e,f=f&&(0===A&&1===p.strides[A]||e)}else h=h&&1===p.strides[A]&&a,f=f&&(0===A&&1===p.strides[A]||a);let i,s=!1;if(p.beginValid&&p.endValid?(i=p.end[A]-p.begin[A],s=!0):t?(i=1,s=!0):a&&n>=0&&(i=p.strides[A]<0?-n:n,s=!0),s){let e;e=0===i||i<0!==p.strides[A]<0?0:Math.trunc(i/p.strides[A])+(i%p.strides[A]!==0?1:0),G.push(e)}else G.push(-1)}for(let A=0;A<p.finalShapeGatherIndices.length;++A){const e=p.finalShapeGatherIndices[A];e>=0?m.push(G[e]):e===OA&&m.push(1)}return{finalShapeSparse:m.filter(((e,t)=>p.finalShapeGatherIndices[t]!==OA)),finalShape:m,isIdentity:h,sliceDim0:f,isSimpleSlice:C,begin:p.begin,end:p.end,strides:p.strides}}function eT(e,t,n,r,o,a){if(o[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}const tT=TG({acos_:function(e){const t={x:GG(e,"x","acos")};return sG.runKernel(Od,t)}});const nT=TG({acosh_:function(e){const t={x:GG(e,"x","acosh")};return sG.runKernel(Ld,t)}});const rT=TG({addN_:function(e){Zu(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),Zu(e.length>=1,(()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)));const t=e.map(((e,t)=>GG(e,"tensors".concat(t),"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!ed(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return sG.runKernel(zd,r)}});const oT=TG({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:GG(e,"x","all","bool")},o={axis:t,keepDims:n};return sG.runKernel(Bd,r,o)}});const aT=TG({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:GG(e,"x","any","bool")},o={axis:t,keepDims:n};return sG.runKernel(Vd,r,o)}});const iT=TG({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:GG(e,"x","argMax")},r={axis:t};return sG.runKernel(Hd,n,r)}});const sT=TG({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:GG(e,"x","argMin")},r={axis:t};return sG.runKernel(Wd,n,r)}});const lT=TG({asin_:function(e){const t={x:GG(e,"x","asin")};return sG.runKernel(Ud,t)}});const cT=TG({asinh_:function(e){const t={x:GG(e,"x","asinh")};return sG.runKernel(jd,t)}});const uT=TG({atan_:function(e){const t={x:GG(e,"x","atan")};return sG.runKernel(Kd,t)}});const dT=TG({atan2_:function(e,t){let n=GG(e,"a","atan2"),r=GG(t,"b","atan2");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(Xd,o)}});const pT=TG({atanh_:function(e){const t={x:GG(e,"x","atanh")};return sG.runKernel(qd,t)}});function hT(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5?arguments[5]:void 0;return GT(e,[...t,e[3]],n,a,r,null,null,kT(o))}function fT(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=TT(t);let c;if("channelsLast"===i)c=[s,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));c=[s,l,e[1],e[1]]}return GT(e,c,n,r,o,a,!1,i)}function CT(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,c]=gT(t);let u,d;if("NDHWC"===i)d="channelsLast",u=[s,l,c,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat ".concat(i));d="channelsFirst",u=[s,l,c,e[1],e[1]]}return mT(e,u,n,r,o,!1,d,a)}function GT(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,d,c,u]=e}const[p,h,,f]=t,[C,G]=TT(n),[m,A]=TT(r),T=yT(p,m),g=yT(h,A),{padInfo:y,outHeight:v,outWidth:b}=function(e,t,n,r,o,a,i,s,l){let c,u,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=AT(e,t,n));const a=e[0],i=e[1],s=vT((a-t+2*r)/n+1,o),l=vT((i-t+2*r)/n+1,o);return[s,l]}([t,n],a,r,e,s);u=o[0],d=o[1]}else if("same"===e){u=Math.ceil(t/r),d=Math.ceil(n/o);const e=Math.max(0,(u-1)*r+a-t),s=Math.max(0,(d-1)*o+i-n),l=Math.floor(e/2),p=e-l,h=Math.floor(s/2);c={top:l,bottom:p,left:h,right:s-h,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-a+1)/r),d=Math.ceil((n-i+1)/o);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const p="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],C="channelsLast"===l?e[2][1]:e[3][1];c={top:p,bottom:h,left:f,right:C,type:0===p&&0===h&&0===f&&0===C?"VALID":"EXPLICIT"},u=vT((t-a+p+h)/r+1,s),d=vT((n-i+f+C)/o+1,s)}}return{padInfo:c,outHeight:u,outWidth:d}}(o,c,u,C,G,T,g,a,s),x=i?f*d:f;let w;return"channelsFirst"===s?w=[l,x,v,b]:"channelsLast"===s&&(w=[l,v,b,x]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:u,inChannels:d,outHeight:v,outWidth:b,outChannels:x,padInfo:y,strideHeight:C,strideWidth:G,filterHeight:p,filterWidth:h,effectiveFilterHeight:T,effectiveFilterWidth:g,dilationHeight:m,dilationWidth:A,inShape:e,outShape:w,filterShape:t}}function mT(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,c,u,d,p]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,c,u,d,p]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[l,p,c,u,d]=e}const[h,f,C,,G]=t,[m,A,T]=gT(n),[g,y,v]=gT(r),b=yT(h,g),x=yT(f,y),w=yT(C,v),{padInfo:k,outDepth:I,outHeight:_,outWidth:S}=function(e,t,n,r,o,a,i,s,l,c,u){let d,p,h,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const C=function(e,t,n,r,o,a){null==o&&(o=AT(e,t[0],r[0]));const i=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*o>=t[s]&&(i[s]=vT((e[s]-t[s]+2*o)/r[s]+1,a));return i}([t,n,r,1],[s,l,c],1,[o,a,i],e,u);p=C[0],h=C[1],f=C[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{p=Math.ceil(t/o),h=Math.ceil(n/a),f=Math.ceil(r/i);const e=(p-1)*o+s-t,u=(h-1)*a+l-n,C=(f-1)*i+c-r,G=Math.floor(e/2),m=e-G,A=Math.floor(u/2),T=u-A,g=Math.floor(C/2);d={top:A,bottom:T,left:g,right:C-g,front:G,back:m,type:"SAME"}}}return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}(o,c,u,d,m,A,T,b,x,w,s),N=a?G*p:G;let E;return"channelsFirst"===i?E=[l,N,I,_,S]:"channelsLast"===i&&(E=[l,I,_,S,N]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:I,outHeight:_,outWidth:S,outChannels:N,padInfo:k,strideDepth:m,strideHeight:A,strideWidth:T,filterDepth:h,filterHeight:f,filterWidth:C,effectiveFilterDepth:b,effectiveFilterHeight:x,effectiveFilterWidth:w,dilationDepth:g,dilationHeight:y,dilationWidth:v,inShape:e,outShape:E,filterShape:t}}function AT(e,t,n){const r=yT(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function TT(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function gT(e){return"number"===typeof e?[e,e,e]:e}function yT(e,t){return t<=1?e:e+(e-1)*(t-1)}function vT(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function bT(e){const[t,n,r]=TT(e);return 1===t&&1===n&&1===r}function xT(e,t){return bT(e)||bT(t)}function wT(e){return TT(e).every((e=>e>0))}function kT(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function IT(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Zu(td(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{Zu(td(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}const _T=TG({reshape_:function(e,t){const n={x:GG(e,"x","reshape","string_or_numeric")},r={shape:t};return sG.runKernel(Kh,n,r)}});const ST=TG({avgPool_:function(e,t,n,r,o){const a=GG(e,"x","avgPool","float32");Zu(xT(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let i=a,s=!1;3===a.rank&&(s=!0,i=_T(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Zu(4===i.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,"."))),IT("avgPool",r,o);const l={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let u=sG.runKernel(Yd,l,c);return u=Mm(u,a.dtype),s?_T(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const NT=TG({avgPool3d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=GG(e,"x","avgPool3d","float32");let s=i,l=!1;4===i.rank&&(l=!0,s=_T(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Zu(5===s.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),Zu("NDHWC"===a,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(a))),Zu("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),IT("avgPool3d",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a};let d=sG.runKernel(Jd,c,u);return d=Mm(d,s.dtype),l?_T(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const ET=TG({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Zu(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=mG(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Om(n[0]);const r=n,o={axis:t};return sG.runKernel(cp,r,o)}});const RT=TG({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=GG(e,"a","matMul"),a=GG(t,"b","matMul");[o,a]=$C(o,a);const i={a:o,b:a},s={transposeA:n,transposeB:r};return sG.runKernel($d,i,s)}});const DT=TG({sigmoid_:function(e){const t={x:GG(e,"x","sigmoid","float32")};return sG.runKernel(df,t)}});const FT=TG({slice_:function(e,t,n){const r=GG(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const o={x:r},a={begin:t,size:n};return sG.runKernel(sf,o,a)}});const MT=TG({tanh_:function(e){const t={x:GG(e,"x","tanh","float32")};return sG.runKernel(Rf,t)}});const OT=TG({basicLSTMCell_:function(e,t,n,r,o,a){const i=GG(e,"forgetBias","basicLSTMCell"),s=GG(t,"lstmKernel","basicLSTMCell"),l=GG(n,"lstmBias","basicLSTMCell"),c=GG(r,"data","basicLSTMCell"),u=GG(o,"c","basicLSTMCell"),d=GG(a,"h","basicLSTMCell"),p=ET([c,d],1),h=RT(p,s),f=Pm(h,l),C=f.shape[0],G=f.shape[1]/4,m=[C,G],A=FT(f,[0,0],m),T=FT(f,[0,G],m),g=FT(f,[0,2*G],m),y=FT(f,[0,3*G],m),v=Pm(Vm(DT(A),MT(T)),Vm(u,DT(Pm(i,g))));return[v,Vm(MT(v),DT(y))]}});const LT=TG({batchToSpaceND_:function(e,t,n){const r=GG(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));Zu(r.rank>=1+t.length,(()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length))),Zu(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),Zu(r.shape[0]%o===0,(()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(o)));const a={x:r},i={blockShape:t,crops:n};return sG.runKernel(ep,a,i)}});const PT=TG({batchNorm_:function(e,t,n,r,o,a){null==a&&(a=.001);const i=GG(e,"x","batchNorm"),s=GG(t,"mean","batchNorm"),l=GG(n,"variance","batchNorm");let c,u;null!=o&&(c=GG(o,"scale","batchNorm")),null!=r&&(u=GG(r,"offset","batchNorm")),Zu(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Zu(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Zu(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const d={x:function(e){let t;return t=0===e.rank||1===e.rank?_T(e,[1,1,1,e.size]):2===e.rank?_T(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?_T(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),scale:c,offset:u,mean:s,variance:l},p={varianceEpsilon:a},h=sG.runKernel(jp,d,p);return _T(h,i.shape)}});const zT=TG({batchNorm2d_:function(e,t,n,r,o,a){const i=GG(e,"x","batchNorm"),s=GG(t,"mean","batchNorm"),l=GG(n,"variance","batchNorm");let c,u;return null!=o&&(c=GG(o,"scale","batchNorm")),null!=r&&(u=GG(r,"offset","batchNorm")),Zu(2===i.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,"."))),Zu(2===s.rank||1===s.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,"."))),Zu(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&Zu(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&Zu(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),PT(i,s,l,u,c,a)}});const BT=TG({batchNorm3d_:function(e,t,n,r,o,a){const i=GG(e,"x","batchNorm"),s=GG(t,"mean","batchNorm"),l=GG(n,"variance","batchNorm");let c,u;return null!=o&&(c=GG(o,"scale","batchNorm")),null!=r&&(u=GG(r,"offset","batchNorm")),Zu(3===i.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,"."))),Zu(3===s.rank||1===s.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,"."))),Zu(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&Zu(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&Zu(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),PT(i,s,l,u,c,a)}});const VT=TG({batchNorm4d_:function(e,t,n,r,o,a){const i=GG(e,"x","batchNorm"),s=GG(t,"mean","batchNorm"),l=GG(n,"variance","batchNorm");let c,u;return null!=o&&(c=GG(o,"scale","batchNorm")),null!=r&&(u=GG(r,"offset","batchNorm")),Zu(4===i.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,"."))),Zu(4===s.rank||1===s.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,"."))),Zu(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=c&&Zu(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=u&&Zu(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),PT(i,s,l,u,c,a)}});const HT=TG({bincount_:function(e,t,n){const r=GG(e,"x","bincount"),o=GG(t,"weights","bincount");Zu("int32"===r.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype))),Zu(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),Zu(o.size===r.size||0===o.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(o.shape,".")));const a={x:r,weights:o},i={size:n};return sG.runKernel(tp,a,i)}});const WT=TG({bitwiseAnd_:function(e,t){const n=GG(e,"x","bitwiseAnd"),r=GG(t,"y","bitwiseAnd");if(!ed(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));const o={a:n,b:r};return sG.runKernel(np,o)}});const UT=TG({broadcastArgs_:function(e,t){const n=GG(e,"s0","broadcastArgs","int32"),r=GG(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));const o={s0:n,s1:r};return sG.runKernel(rp,o)}});const jT=TG({broadcastTo_:function(e,t){let n=GG(e,"broadcastTo","x");const r=n.shape;if(bd(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=_T(n,e)}const o=n.shape,a=Array.from(t);for(let l=t.length-1;l>=0;l--)if(o[l]===t[l])a[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return Om(n);const i={x:n},s={reps:a};return sG.runKernel(Df,i,s)}});const KT=TG({ceil_:function(e){const t={x:GG(e,"x","ceil","float32")};return sG.runKernel(ap,t)}});const qT=TG({clipByValue_:function(e,t,n){const r=GG(e,"x","clipByValue");if(Zu(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return eA(r.shape,t,r.dtype);const o={x:r},a={clipValueMin:t,clipValueMax:n};return sG.runKernel(ip,o,a)}});const XT=TG({concat1d_:function(e){return ET(e,0)}});const YT=TG({concat2d_:function(e,t){return ET(e,t)}});const ZT=TG({concat3d_:function(e,t){return ET(e,t)}});const JT=TG({concat4d_:function(e,t){return ET(e,t)}});const QT=TG({conv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=GG(e,"x","conv2d","float32"),l=GG(t,"filter","conv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=_T(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Zu(4===c.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,"."))),Zu(4===l.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."))),IT("conv2d",r,i);const d="NHWC"===o?c.shape[3]:c.shape[1];Zu(d===l.shape[2],(()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],"."))),Zu(xT(n,a),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(a,"'"))),Zu(wT(a),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),Zu(wT(n),(()=>"Error in conv2D: Strides should be larger than 0."));const p={x:c,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=sG.runKernel(up,p,h);return u?_T(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const $T=TG({conv1d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=GG(e,"x","conv1d"),l=GG(t,"filter","conv1d");let c=s,u=!1;2===s.rank&&(u=!0,c=_T(s,[1,s.shape[0],s.shape[1]])),Zu(3===c.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,"."))),Zu(3===l.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,"."))),IT("conv1d",r,i),Zu(c.shape[2]===l.shape[1],(()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],"."))),Zu(xT(n,a),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(a,"'"))),Zu(wT(a),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),Zu(wT(n),(()=>"Error in conv1D: Stride should be larger than 0.")),Zu("NWC"===o,(()=>"Error in conv1d: got dataFormat of ".concat(o," but only NWC is currently supported.")));const d=_T(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=_T(c,[c.shape[0],1,c.shape[1],c.shape[2]]),h=QT(p,d,[1,n],r,"NHWC",[1,a],i);return _T(h,u?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});const eg=TG({conv2DBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;Zu(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let s=e,l=t,c=!1;3===t.rank&&(c=!0,l=_T(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Zu(4===s.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,"."))),Zu(4===l.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank))),Zu(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const u="NHWC"===a?s[3]:s[1],d="NHWC"===a?l.shape[3]:l.shape[1];Zu(u===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),Zu(d===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),IT("conv2dDerInput",o,i);const p={dy:l,filter:n},h={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:s},f=sG.runKernel(pp,p,h);return c?_T(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const tg=TG({conv2dTranspose_:function(e,t,n,r,o,a){const i=GG(e,"x","conv2dTranspose"),s=GG(t,"filter","conv2dTranspose");return eg(n,i,s,r,o,"NHWC",a)}});const ng=TG({conv3d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=GG(e,"x","conv3d"),s=GG(t,"filter","conv3d");let l=i,c=!1;4===i.rank&&(c=!0,l=_T(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Zu(5===l.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,"."))),Zu(5===s.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,"."))),Zu(l.shape[4]===s.shape[3],(()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],"."))),Zu(xT(n,a),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(a,"'"))),Zu("NDHWC"===o,(()=>"Error in conv3d: got dataFormat of ".concat(o," but only NDHWC is currently supported."))),Zu(wT(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),Zu(wT(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:l,filter:s},d={strides:n,pad:r,dataFormat:o,dilations:a},p=sG.runKernel(hp,u,d);return c?_T(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const rg=TG({conv3DBackpropInput_:function(e,t,n,r,o){Zu(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=_T(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],c=i.shape[4];Zu(5===a.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(a.length,"."))),Zu(5===i.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank))),Zu(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),Zu(l===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),Zu(c===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const u={dy:i,filter:n},d={pad:o,strides:r,inputShape:a},p=sG.runKernel(Cp,u,d);return s?_T(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const og=TG({conv3dTranspose_:function(e,t,n,r,o){const a=GG(e,"x","conv3dTranspose"),i=GG(t,"filter","conv3dTranspose");return rg(n,a,i,r,o)}});const ag=TG({cos_:function(e){const t={x:GG(e,"x","cos","float32")};return sG.runKernel(Gp,t)}});const ig=TG({cosh_:function(e){const t={x:GG(e,"x","cosh","float32")};return sG.runKernel(mp,t)}});const sg=TG({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:GG(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return sG.runKernel(Ap,o,a)}});const lg=TG({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:GG(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return sG.runKernel(Tp,o,a)}});const cg=TG({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=GG(e,"x","denseBincount"),a=GG(t,"weights","denseBincount");Zu("int32"===o.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(o.dtype))),Zu(o.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(o.rank,"."))),Zu(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),Zu(a.size===o.size||0===a.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(o.shape,", weights shape: ")+"".concat(a.shape,".")));const i={x:o,weights:a},s={size:n,binaryOutput:r};return sG.runKernel(yp,i,s)}});const ug=TG({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=GG(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];Zu(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),Zu(o*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape))),Zu(a*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape))),Zu(i%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)));const s={x:r},l={blockSize:t,dataFormat:n};return sG.runKernel(vp,s,l)}});const dg=TG({depthwiseConv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=GG(e,"x","depthwiseConv2d","float32"),l=GG(t,"filter","depthwiseConv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=_T(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Zu(4===c.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,"."))),Zu(4===l.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")));const d="NHWC"===o?c.shape[3]:c.shape[1];Zu(d===l.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],"."))),IT("depthwiseConv2d",r,i);const p={x:c,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},f=sG.runKernel(bp,p,h);return u?_T(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const pg=TG({diag_:function(e){const t={x:GG(e,"x","diag")};return sG.runKernel(kp,t)}});const hg=TG({dilation2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=GG(e,"x","dilation2d"),s=GG(t,"filter","dilation2d");Zu(3===i.rank||4===i.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,"."))),Zu(3===s.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,"."))),Zu("NHWC"===a,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(a)));let l=i,c=!1;3===i.rank&&(l=_T(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),Zu(l.shape[3]===s.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(s.shape[2])));const u={x:l,filter:s},d={strides:n,pad:r,dilations:o},p=sG.runKernel(Ip,u,d);return c?_T(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const fg=TG({equal_:function(e,t){let n=GG(e,"a","equal","string_or_numeric"),r=GG(t,"b","equal","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(Op,o)}});const Cg=TG({where_:function(e,t,n){const r=GG(t,"a","where"),o=GG(n,"b","where"),a=GG(e,"condition","where","bool"),i=lA(lA(a.shape,r.shape),o.shape),s={condition:jT(a,i),t:jT(r,i),e:jT(o,i)};return sG.runKernel(of,s)}});const Gg=TG({divNoNan_:function(e,t){let n=GG(e,"a","div"),r=GG(t,"b","div");[n,r]=$C(n,r);const o=Bm(n,r),a=Um(o),i=fg(r,a);return Cg(i,a,o)}});const mg=TG({dot_:function(e,t){const n=GG(e,"t1","dot"),r=GG(t,"t2","dot");Zu((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(Zu(o===a,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(o," and ").concat(a,"."))),1===n.rank&&1===r.rank){const e=_T(n,[1,-1]),t=_T(r,[-1,1]),o=RT(e,t);return _T(o,[])}if(1===n.rank&&2===r.rank){const e=_T(n,[1,-1]),t=_T(r,[r.shape[0],r.shape[1]]),o=RT(e,t);return _T(o,[o.size])}if(2===n.rank&&1===r.rank){const e=_T(r,[-1,1]),t=RT(n,e);return _T(t,[t.size])}{const e=_T(r,[r.shape[0],r.shape[1]]);return RT(n,e)}}});const Ag=TG({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(((e,t)=>GG(e,"tensors".concat(t),"einsum"))),a={equation:e};return sG.runKernel(Rp,o,a)}});const Tg=TG({elu_:function(e){const t={x:GG(e,"x","elu","float32")};return sG.runKernel(Dp,t)}});const gg=TG({ensureShape_:function(e,t){const n=GG(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});const yg=TG({erf_:function(e){let t=GG(e,"x","erf");Zu("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Mm(t,"float32"));const n={x:t};return sG.runKernel(Mp,n)}});function vg(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function bg(e,t,n){const r=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function xg(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((t=>e[t]))]}function wg(e,t){return bg(e,t.map((e=>1)),t)}function kg(e,t,n){Zu(vg(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function Ig(e,t){if(vg(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function _g(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function Sg(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const Ng=TG({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:GG(e,"x","max")},o={reductionIndices:t,keepDims:n};return sG.runKernel(hh,r,o)}});const Eg=TG({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:GG(e,"x","min")},o={axis:t,keepDims:n};return sG.runKernel(yh,r,o)}});const Rg=TG({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=GG(e,"x","sum");"bool"===r.dtype&&(r=Mm(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return sG.runKernel(ff,o,a)}});function Dg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return aA(e);if(1!==e.rank&&null===n)return Dg(_T(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Rg(aA(e),n);if(t===1/0)return Ng(aA(e),n);if(t===-1/0)return Eg(aA(e),n);if("euclidean"===t||2===t)return Hm(Rg(nA(aA(e),Km(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Ng(Rg(aA(e),n[0]),n[1]-1);if(t===1/0)return Ng(Rg(aA(e),n[1]),n[0]);if(t===-1/0)return Eg(Rg(aA(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Hm(Rg(Wm(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const Fg=TG({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=Dg(e=GG(e,"x","norm"),t,n);let a=o.shape;if(r){const t=id(n,e.shape);a=wg(o.shape,t)}return _T(o,a)}});const Mg=TG({euclideanNorm_:function(e){return Fg(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const Og=TG({exp_:function(e){const t={x:GG(e,"x","exp")};return sG.runKernel(Lp,t)}});const Lg=TG({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=GG(e,"x","expandDims","string_or_numeric");Zu(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},o={dim:t};return sG.runKernel(Pp,r,o)}});const Pg=TG({expm1_:function(e){const t={x:GG(e,"x","expm1")};return sG.runKernel(zp,t)}});const zg=TG({tile_:function(e,t){const n=GG(e,"x","tile","string_or_numeric");Zu(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const r={x:n},o={reps:t};return sG.runKernel(Df,r,o)}});const Bg=TG({eye_:function(e,t,n){null==t&&(t=e);const r=Fm([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),o=e<=t?e:t;for(let i=0;i<o;++i)r.set(1,i,i);const a=_T(r.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return zg(Lg(a,0),[n[0],1,1]);if(2===n.length)return zg(Lg(Lg(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return zg(Lg(Lg(Lg(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const Vg=TG({floor_:function(e){const t={x:GG(e,"x","floor","float32")};return sG.runKernel(Wp,t)}});const Hg=TG({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o={x:GG(e,"x","gather"),indices:GG(t,"indices","gather","int32")},a={axis:n,batchDims:r};return sG.runKernel(Kp,o,a)}});const Wg=TG({greater_:function(e,t){let n=GG(e,"a","greater","string_or_numeric"),r=GG(t,"b","greater","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(Xp,o)}});const Ug=TG({greaterEqual_:function(e,t){let n=GG(e,"a","greaterEqual","string_or_numeric"),r=GG(t,"b","greaterEqual","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(Yp,o)}});const jg=TG({imag_:function(e){const t={input:GG(e,"input","imag")};return sG.runKernel(Qp,t)}});const Kg=TG({isFinite_:function(e){const t={x:GG(e,"x","isFinite")};return sG.runKernel($p,t)}});const qg=TG({isInf_:function(e){const t={x:GG(e,"x","isInf")};return sG.runKernel(eh,t)}});const Xg=TG({isNaN_:function(e){const t={x:GG(e,"x","isNaN")};return sG.runKernel(th,t)}});const Yg=TG({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:GG(e,"x","leakyRelu")},r={alpha:t};return sG.runKernel(nh,n,r)}});const Zg=TG({less_:function(e,t){let n=GG(e,"a","less","string_or_numeric"),r=GG(t,"b","less","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(rh,o)}});const Jg=TG({lessEqual_:function(e,t){let n=GG(e,"a","lessEqual","string_or_numeric"),r=GG(t,"b","lessEqual","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(oh,o)}});function Qg(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return sG.runKernel(ah,{},r)}const $g=TG({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const a=GG(e,"x","localResponseNormalization");Zu(4===a.rank||3===a.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(a.rank,"."))),Zu(td(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let i=a,s=!1;3===a.rank&&(s=!0,i=_T(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},c={depthRadius:t,bias:n,alpha:r,beta:o},u=sG.runKernel(dh,l,c);return s?_T(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ey=TG({log_:function(e){const t={x:GG(e,"x","log","float32")};return sG.runKernel(ih,t)}});const ty=TG({log1p_:function(e){const t={x:GG(e,"x","log1p")};return sG.runKernel(sh,t)}});const ny=TG({neg_:function(e){const t={x:GG(e,"x","neg")};return sG.runKernel(Ih,t)}});const ry=TG({softplus_:function(e){const t={x:GG(e,"x","softplus")};return sG.runKernel(pf,t)}});const oy=TG({logSigmoid_:function(e){const t=GG(e,"x","logSigmoid");return jm((e=>({value:ny(ry(ny(e))),gradFunc:t=>Vm(t,DT(ny(e)))})))(t)}});const ay=TG({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=GG(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=jm(((e,n)=>{const r=Ng(e,t,!0),o=rA(e,r),a=rA(Mm(o,"float32"),ey(Rg(Og(o),t,!0)));n([a]);return{value:a,gradFunc:(e,n)=>{const[r]=n,o=Og(r);return rA(e,Vm(Rg(e,t,!0),o))}}}));return r(n)}});const iy=TG({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=GG(e,"x","logSumExp"),o=id(t,r.shape),a=Ng(r,o,!0),i=rA(r,a),s=Og(i),l=Rg(s,o),c=ey(l),u=Pm(_T(a,c.shape),c);if(n){const e=wg(u.shape,o);return _T(u,e)}return u}});const sy=TG({logicalAnd_:function(e,t){const n=GG(e,"a","logicalAnd","bool"),r=GG(t,"b","logicalAnd","bool");lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(lh,o)}});const ly=TG({logicalNot_:function(e){const t={x:GG(e,"x","logicalNot","bool")};return sG.runKernel(ch,t)}});const cy=TG({logicalOr_:function(e,t){const n=GG(e,"a","logicalOr","bool"),r=GG(t,"b","logicalOr","bool");lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(uh,o)}});const uy=TG({logicalXor_:function(e,t){const n=GG(e,"a","logicalXor","bool"),r=GG(t,"b","logicalXor","bool");return lA(n.shape,r.shape),sy(cy(e,t),ly(sy(e,t)))}}),dy=2147483648;const py=TG({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=GG(e,"sortedSequence","searchSorted"),o=GG(t,"values","searchSorted"),a=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],s=_T(r,[-1,a]),l=_T(o,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if($u(l.shape)>=dy)throw new Error("values tensor size must less than ".concat(dy));if(s.shape[1]>=dy)throw new Error("trailing dim_size must less than ".concat(dy," for int32 output type, was ").concat(s.shape[1]));const c={sortedSequence:s,values:l},u={side:n};return sG.runKernel(rf,c,u)}});function hy(e,t){return py(e,t,"left")}const fy=TG({maxPool_:function(e,t,n,r,o){const a=GG(e,"x","maxPool");let i=a,s=!1;3===a.rank&&(s=!0,i=_T(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Zu(4===i.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,"."))),Zu(xT(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),IT("maxPool",r,o);const l={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:o},u=sG.runKernel(Ch,l,c);return s?_T(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Cy=TG({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=GG(e,"x","maxPool3d");let s=i,l=!1;4===i.rank&&(l=!0,s=_T(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Zu(5===s.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),Zu("NDHWC"===a,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(a))),IT("maxPool3d",r,o);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a},d=sG.runKernel(mh,c,u);return l?_T(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Gy=TG({maxPoolWithArgmax_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a={x:GG(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},s=sG.runKernel(Th,a,i);return{result:s[0],indexes:s[1]}}});const my=TG({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:GG(e,"x","mean")},o={axis:t,keepDims:n};return sG.runKernel(gh,r,o)}});function Ay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(bd(e),"complex64"===t){const t=Ay(e,"float32"),n=Ay(e,"float32");return gG(t,n)}const n=yd($u(e),t);return sG.makeTensor(n,e,t)}function Ty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(bd(e),"complex64"===t){const t=Ty(e,"float32"),n=Ay(e,"float32");return gG(t,n)}const n=gd($u(e),t);return sG.makeTensor(n,e,t)}function gy(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let r=GG(e,"x","meshgrid",e instanceof BC?e.dtype:"float32");if(void 0===t)return[r];let o=GG(t,"y","meshgrid",t instanceof BC?t.dtype:"float32");const a=$u(r.shape),i=$u(o.shape);return"xy"===n?(r=_T(r,[1,-1]),o=_T(o,[-1,1]),[RT(Ty([i,1],r.dtype),r),RT(o,Ty([1,a],o.dtype))]):(r=_T(r,[-1,1]),o=_T(o,[1,-1]),[RT(r,Ty([1,i],r.dtype)),RT(Ty([a,1],o.dtype),o)])}const yy=TG({minimum_:function(e,t){let n=GG(e,"a","minimum"),r=GG(t,"b","minimum");[n,r]=$C(n,r),"bool"===n.dtype&&(n=Mm(n,"int32"),r=Mm(r,"int32")),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(vh,o)}});const vy=TG({mirrorPad_:function(e,t,n){Zu("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const r=GG(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Zu(t.length===r.rank,(()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")));const o="reflect"===n?1:0;for(let s=0;s<r.rank;s++)Zu(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Zu(t[s][0]>=0&&t[s][0]<=r.shape[s]-o&&t[s][1]>=0&&t[s][1]<=r.shape[s]-o,(()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-o," or less than 0 for input of ")+"shape ".concat(r.shape)));const a={paddings:t,mode:n},i={x:r};return sG.runKernel(bh,i,a)}});const by=TG({mod_:function(e,t){let n=GG(e,"a","mod"),r=GG(t,"b","mod");[n,r]=$C(n,r);const o={a:n,b:r};return sG.runKernel(xh,o)}});const xy=TG({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=id(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=GG(e,"x","moments")).shape),r=my(e,n,t);let o=r.shape;t||(o=wg(r.shape,n));const a=Wm(rA(Mm(e,"float32"),_T(r,o)));return{mean:r,variance:my(a,n,t)}}});const wy=TG({multiRNNCell_:function(e,t,n,r){const o=GG(t,"data","multiRNNCell"),a=mG(n,"c","multiRNNCell"),i=mG(r,"h","multiRNNCell");let s=o;const l=[];for(let d=0;d<e.length;d++){const t=e[d](s,a[d],i[d]);l.push(t[0]),l.push(t[1]),s=t[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}});const ky=TG({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=GG(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(a,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();const s={logits:1===i?_T(o,[1,-1]):o},l={numSamples:t,seed:n,normalized:r},c=sG.runKernel(wh,s,l);return 1===i?_T(c,[c.size]):c}});const Iy=TG({notEqual_:function(e,t){let n=GG(e,"a","notEqual","string_or_numeric"),r=GG(t,"b","notEqual","string_or_numeric");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(_h,o)}});const _y=TG({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const a={indices:GG(e,"indices","oneHot","int32")},i={dtype:o,depth:t,onValue:n,offValue:r};return sG.runKernel(Dh,a,i)}});const Sy=TG({onesLike_:function(e){const t={x:GG(e,"x","onesLike")};return sG.runKernel(Rh,t)}});const Ny=TG({outerProduct_:function(e,t){const n=GG(e,"v1","outerProduct"),r=GG(t,"v2","outerProduct");Zu(1===n.rank&&1===r.rank,(()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const o=_T(n,[-1,1]),a=_T(r,[1,-1]);return RT(o,a)}});const Ey=TG({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=GG(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},a={x:r};return sG.runKernel(Mh,a,o)}});const Ry=TG({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Zu(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),Ey(e,[t],n)}});const Dy=TG({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Zu(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Ey(e,t,n)}});const Fy=TG({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Zu(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Ey(e,t,n)}});const My=TG({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Zu(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Ey(e,t,n)}});const Oy=TG({spaceToBatchND_:function(e,t,n){const r=GG(e,"x","spaceToBatchND");Zu(r.rank>=1+t.length,(()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length))),Zu(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),Zu(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]===0:e),!0),(()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const o={x:r},a={blockShape:t,paddings:n};return sG.runKernel(Cf,o,a)}});const Ly=TG({pool_:function(e,t,n,r,o,a,i){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");const s=GG(e,"x","maxPool");let l=s,c=!1;3===s.rank&&(c=!0,l=_T(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Zu(xT(a,o),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(o,"'")));const u=fT(l.shape,t,a,o,r),d=[u.dilationHeight,u.dilationWidth];let p;p="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),o=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-o[t]));return r.map(((e,t)=>[o[t],a[t]]))}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const h=1===d[0]&&1===d[1],[f,C]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),a=e.concat(r,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t])),l=t.map(((e,t)=>[r[t],s[t]])),c=t.map(((e,t)=>[0,i[t]]));return[l,c]}([u.inHeight,u.inWidth],d,p),G=h?r:"valid",m=h?l:Oy(l,d,f),A=("avg"===n?()=>ST(m,t,a,G,i):()=>fy(m,t,a,G,i))(),T=h?A:LT(A,d,C);return c?_T(T,[T.shape[1],T.shape[2],T.shape[3]]):T}});const Py=TG({prelu_:function(e,t){const n={x:GG(e,"x","prelu"),alpha:GG(t,"alpha","prelu")};return sG.runKernel(Lh,n)}});const zy=TG({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=GG(e,"x","prod");"bool"===r.dtype&&(r=Mm(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return sG.runKernel(Ph,o,a)}});const By=TG({raggedGather_:function(e,t,n,r){const o={paramsNestedSplits:e.map(((e,t)=>GG(e,"tensors".concat(t),"raggedGather","int32"))),paramsDenseValues:GG(t,"paramsDenseValues","raggedGather"),indices:GG(n,"indices","raggedGather","int32")},a={outputRaggedRank:r},i=sG.runKernel(zh,o,a);return{outputNestedSplits:i.slice(0,i.length-1),outputDenseValues:i[i.length-1]}}});const Vy=TG({raggedRange_:function(e,t,n){const r=GG(e,"starts","raggedRange"),o={starts:r,limits:GG(t,"limits","raggedRange",r.dtype),deltas:GG(n,"deltas","raggedRange",r.dtype)},a=sG.runKernel(Bh,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}});const Hy=TG({raggedTensorToTensor_:function(e,t,n,r,o){const a=GG(e,"shape","raggedTensorToTensor","int32"),i=GG(t,"values","raggedTensorToTensor"),s={shape:a,values:i,defaultValue:GG(n,"defaultValue","raggedTensorToTensor",i.dtype),rowPartitionTensors:r.map(((e,t)=>GG(e,"tensors".concat(t),"raggedTensorToTensor","int32")))},l={rowPartitionTypes:o};return sG.runKernel(Vh,s,l)}});const Wy=TG({rand_:function(e,t,n){bd(e);const r=$u(e);let o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));o=new Uint8Array(r)}for(let a=0;a<r;a++)o[a]=t();return sG.makeTensor(o,e,n)}});var Uy=n(4334);class jy{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=o||Math.random();this.random=Uy.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,a;do{r=2*this.random()-1,o=2*this.random()-1,a=r*r+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Ky{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const o=r||Math.random();this.randu=Uy.alea(o.toString()),this.randn=new jy(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,o,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),o=this.randu(),o<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class qy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=Uy.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Xy=TG({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;if(bd(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));const a=new Ky(t,n,r,o),i=Fm(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Yy=TG({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(bd(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const a=new jy(t,n,r,!1,o),i=Fm(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Zy=TG({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return Yy(e,0,1,t,n)}});const Jy=TG({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;bd(e);const a=Fm(e,r),i=new qy(t,n,null,o);for(let s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});const Qy=TG({randomUniformInt_:function(e,t,n,r){return Jy(e,t,n,"int32",r)}});function $y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:r};return sG.runKernel(Hh,{},o)}const ev=TG({real_:function(e){const t={input:GG(e,"input","real")};return sG.runKernel(Wh,t)}});const tv=TG({reciprocal_:function(e){const t={x:GG(e,"x","reciprocal")};return sG.runKernel(Uh,t)}});const nv=TG({relu_:function(e){const t={x:GG(e,"x","relu")};return sG.runKernel(jh,t)}});const rv=TG({relu6_:function(e){const t={x:GG(e,"x","relu6")};return sG.runKernel(Jh,t)}});const ov=TG({reverse_:function(e,t){const n={x:GG(e,"x","reverse")},r={dims:t};return sG.runKernel(Qh,n,r)}});const av=TG({reverse1d_:function(e){const t=GG(e,"x","reverse");return Zu(1===t.rank,(()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,"."))),ov(t,0)}});const iv=TG({reverse2d_:function(e,t){const n=GG(e,"x","reverse");return Zu(2===n.rank,(()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,"."))),ov(n,t)}});const sv=TG({reverse3d_:function(e,t){const n=GG(e,"x","reverse");return Zu(3===n.rank,(()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,"."))),ov(n,t)}});const lv=TG({reverse4d_:function(e,t){const n=GG(e,"x","reverse");return Zu(4===n.rank,(()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,"."))),ov(n,t)}});const cv=TG({round_:function(e){const t={x:GG(e,"x","round")};return sG.runKernel($h,t)}});const uv=TG({rsqrt_:function(e){const t={x:GG(e,"x","rsqrt","float32")};return sG.runKernel(ef,t)}});const dv=TG({selu_:function(e){const t={x:GG(e,"x","selu")};return sG.runKernel(af,t)}});const pv=TG({separableConv2d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=GG(e,"x","separableConv2d"),l=GG(t,"depthwiseFilter","separableConv2d"),c=GG(n,"pointwiseFilter","separableConv2d");let u=s,d=!1;if(3===s.rank&&(d=!0,u=_T(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Zu(4===u.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),Zu(4===l.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),Zu(4===c.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),Zu(1===c.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],"."))),Zu(1===c.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")));const p=l.shape[2],h=l.shape[3];Zu(c.shape[2]===p*h,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(p*h,", ")+"but got ".concat(c.shape[2],".")));const f=dg(u,l,r,o,i,a),C=QT(f,c,1,"valid",i);return d?_T(C,[C.shape[1],C.shape[2],C.shape[3]]):C}});const hv=async function(e,t){const n=GG(e,"x","setdiff1d"),r=GG(t,"y","setdiff1d");Zu(n.dtype===r.dtype,(()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,")."))),Zu(1===n.rank,(()=>"x should be 1D tensor, but got x (".concat(n.shape,")."))),Zu(1===r.rank,(()=>"y should be 1D tensor, but got y (".concat(r.shape,").")));const o=await n.data(),a=await r.data(),i=new Set(a);let s=0;for(let u=0;u<o.length;u++)i.has(o[u])||s++;const l=new OC([s],n.dtype),c=new OC([s],"int32");for(let u=0,d=0;u<o.length;u++)i.has(o[u])||(l.values[d]=o[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]};const fv=TG({sign_:function(e){const t={x:GG(e,"x","sign")};return sG.runKernel(uf,t)}});const Cv=TG({sin_:function(e){const t={x:GG(e,"x","sin","float32")};return sG.runKernel(lf,t)}});const Gv=TG({sinh_:function(e){const t={x:GG(e,"x","sinh")};return sG.runKernel(cf,t)}});const mv=TG({slice1d_:function(e,t,n){const r=GG(e,"x","slice1d");return Zu(1===r.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor"))),FT(r,[t],[n])}});const Av=TG({slice2d_:function(e,t,n){const r=GG(e,"x","slice2d");return Zu(2===r.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor"))),FT(r,t,n)}});const Tv=TG({slice3d_:function(e,t,n){const r=GG(e,"x","slice3d");return Zu(3===r.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor"))),FT(r,t,n)}});const gv=TG({slice4d_:function(e,t,n){const r=GG(e,"x","slice4d");return Zu(4===r.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor"))),FT(r,t,n)}});const yv=TG({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=GG(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},o={dim:t};return sG.runKernel(mf,r,o)}});const vv=TG({fft_:function(e){Zu("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return sG.runKernel(Bp,t)}});const bv=TG({ifft_:function(e){Zu("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return sG.runKernel(Jp,t)}});const xv=TG({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const o=_T(e,[n,t]);r=bv(o)}else{const o=[n,2*(t-1)],a=_T(ev(e),[n,t]),i=_T(jg(e),[n,t]),s=ov(FT(a,[0,1],[n,t-2]),1),l=Vm(ov(FT(i,[0,1],[n,t-2]),1),Km(-1)),c=ET([a,s],1),u=ET([i,l],1),d=_T(gG(c,u),[o[0],o[1]]);r=bv(d)}if(r=ev(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=_T(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const wv=TG({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:GG(e,"x","split")},o={numOrSizeSplits:t,axis:n};return sG.runKernel(Gf,r,o)}});const kv=TG({rfft_:function(e,t){Zu("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const r=e.size/n;let o;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,o=FT(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,o=ET([e,Ay(r)],e.shape.length-1),n=t}else o=e;const a=Um(o),i=_T(gG(o,a),[r,n]),s=vv(i),l=Math.floor(n/2)+1,c=ev(s),u=jg(s),d=wv(c,[l,n-l],c.shape.length-1),p=wv(u,[l,n-l],u.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,_T(gG(d[0],p[0]),h)}});const Iv=TG({squaredDifference_:function(e,t){let n=GG(e,"a","squaredDifference"),r=GG(t,"b","squaredDifference");[n,r]=$C(n,r),lA(n.shape,r.shape);const o={a:n,b:r};return sG.runKernel(bf,o,{})}});const _v=TG({squeeze_:function(e,t){const n=GG(e,"x","squeeze","string_or_numeric");return _T(n,sd(n.shape,t).newShape)}});const Sv=TG({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=mG(e,"tensors","stack","string_or_numeric");Zu(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&Zu(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,o={axis:t};return sG.runKernel(Fh,r,o)}});const Nv=TG({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:GG(e,"x","step")},r={alpha:t};return sG.runKernel(Vf,n,r)}});const Ev=TG({stridedSlice_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:GG(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:l};return sG.runKernel(kf,c,u)}});const Rv=TG({tan_:function(e){const t={x:GG(e,"x","tan","float32")};return sG.runKernel(Ef,t)}});function Dv(e,t){Qu(e);const n=hG(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return yG(e,null,n,t)}function Fv(e,t,n){if(Qu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=hG(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return yG(e,t,r,n)}function Mv(e,t,n){if(Qu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=hG(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return yG(e,t,r,n)}function Ov(e,t,n){if(Qu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=hG(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return yG(e,t,r,n)}function Lv(e,t,n){if(Qu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=hG(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return yG(e,t=t||r,r,n)}function Pv(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(o,".");if(n.rank<o)throw new Error(a+" update.rank < ".concat(o,". "));if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < ".concat(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != ".concat(o+e.length-r));for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape[".concat(i+o,"] (").concat(n.shape[i+o],") != shape[").concat(i+o,"] (").concat(e[i+o],")"))}function zv(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Pv(n,t,e)}function Bv(e,t,n){const r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length;let i=1;for(let l=o;l<a;++l)i*=n[l];const s=o<1?1:o;return{sliceRank:o,numUpdates:$u(t.shape)/s,sliceSize:i,strides:[...md(n.slice(0,o)),1],outputSize:$u(n)}}const Vv=TG({tensorScatterUpdate_:function(e,t,n){const r=GG(e,"tensor","tensorScatterupdate"),o=GG(t,"indices","tensorScatterupdate","int32"),a=GG(n,"updates","tensorScatterupdate");if(zv(a,o,r.shape),r.dtype!==a.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(a.dtype,"."));const i={tensor:r,indices:o,updates:a};return sG.runKernel(nf,i,{})}});const Hv=TG({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=GG(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(o,") ")+"but got ".concat(t));const a={x:r},i={k:t,sorted:n},[s,l]=sG.runKernel(Ff,a,i);return{values:s,indices:l}}});const Wv=TG({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(bd(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new jy(t,n,r,!0,o),i=Fm(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const Uv=TG({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=GG(e,"x","unique","string_or_numeric");Zu(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[a,i]=sG.runKernel(Lf,r,o);return{values:a,indices:i}}});const jv=TG({unsortedSegmentSum_:function(e,t,n){const r=GG(e,"x","unsortedSegmentSum"),o=GG(t,"segmentIds","unsortedSegmentSum","int32");Zu(td(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:o},i={numSegments:n};return sG.runKernel(zf,a,i)}});const Kv=TG({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=GG(e,"x","unstack","string_or_numeric");Zu(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const r={value:n},o={axis:t};return sG.runKernel(Pf,r,o)}});function qv(e,t){return py(e,t,"right")}function Xv(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return sG.makeVariable(e,t,n,r)}function Yv(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=Fm(e,"int32"),o=Fm([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),i=a*e.length;o.values.set(t,i)}return o.toTensor()}const Zv=async function(e){const t=GG(e,"condition","whereAsync","bool"),n=await t.data(),r=Yv(t.shape,n);return e!==t&&t.dispose(),r};const Jv=async function(e,t,n){const r=GG(e,"tensor","boolMask"),o=GG(t,"mask","boolMask","bool"),a=null==n?0:n,i=o.rank,s=r.shape;Zu(i>0,(()=>"mask cannot be scalar")),Ju(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let C=a;C<a+i;C++)l*=s[C];const c=s.slice(0,a).concat([l],s.slice(a+i)),u=_T(r,c),d=_T(o,[-1]),p=await Zv(d),h=_v(p,[1]),f=Hg(u,h,a);return e!==r&&r.dispose(),t!==o&&o.dispose(),h.dispose(),u.dispose(),d.dispose(),p.dispose(),f};const Qv=TG({transpose_:function(e,t,n){const r=GG(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),Zu(r.rank===t.length,(()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{Zu(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)))})),r.rank<=1)return r.clone();const o={x:r},a={perm:t};return"complex64"===r.dtype?IG((()=>{let e=ev(r),t=jg(r);return e=sG.runKernel(Of,{x:e},a),t=sG.runKernel(Of,{x:t},a),n&&(t=ny(t)),gG(e,t)})):sG.runKernel(Of,o,a)}});const $v=TG({movingAverage_:function(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const a=GG(e,"v","movingAverage"),i=GG(t,"x","movingAverage"),s=GG(n,"decay","movingAverage");var l,c;c=i,Zu((l=a).dtype===c.dtype,(()=>"The dtypes of the first(".concat(l.dtype,") and")+" second(".concat(c.dtype,") input must match"))),Zu(ed(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const u=Km(1),d=rA(u,s);let p=Vm(rA(i,a),d);if(o){Zu(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=GG(r,"step","movingAverage");p=Bm(p,rA(u,nA(s,e)))}return Pm(a,p)}});const eb=TG({scatterND_:function(e,t,n){bd(n);const r=GG(e,"indices","scatterND","int32"),o=GG(t,"updates","scatterND");zv(o,r,n);const a={indices:r,updates:o},i={shape:n};return sG.runKernel(tf,a,i)}});const tb=TG({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;bd(n);const o=GG(e,"sparseIndices","sparseToDense","int32"),a=GG(t,"sparseValues","sparseToDense","string_or_numeric"),i=GG(r,"defaultValue","sparseToDense",a.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(a,"."));const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(o,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i);const s={sparseIndices:o,sparseValues:a,defaultValue:i},l={outputShape:n};return sG.runKernel(vf,s,l)}});const nb=TG({gatherND_:function(e,t){const n=GG(t,"indices","gatherND","int32"),r={params:GG(e,"x","gatherND","string_or_numeric"),indices:n};return sG.runKernel(qp,r)}});const rb=TG({dropout_:function(e,t,n,r){const o=GG(e,"x","dropout");if(Zu("float32"===o.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(o.dtype," tensor instead."))),Zu(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof BC?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(ed(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=Bm(Vg(Pm(Jy(a,0,1,"float32",r),i)),i);return Vm(o,s)}});function ob(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function ab(e,t,n){const r=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return Dv(o,"float32")}const ib=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=GG(e,"predictions","inTopK"),o=GG(t,"targets","inTopK");Zu(r.rank>1,(()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank))),Zu(r.rank-1===o.rank,(()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(o.rank))),Ju(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Zu(n>0&&n<=a,(()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(a,"), but got ").concat(n)));const i=await r.data(),s=await o.data(),[l,c]=[i.length/a,a],u=ld("bool",l);for(let d=0;d<l;d++){const e=d*c,t=i.subarray(e,e+c),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort(((e,t)=>t.value-e.value)),u[d]=0;for(let o=0;o<n;o++)if(r[o].index===s[d]){u[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),vG(u,o.shape,"bool")};const sb=TG({conv2DBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=_T(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=_T(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Zu(4===s.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,"."))),Zu(4===l.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,"."))),Zu(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const c="NHWC"===a?s.shape[3]:s.shape[1],u="NHWC"===a?l.shape[3]:l.shape[1];Zu(c===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],"."))),Zu(u===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],")."))),IT("conv2dDerFilter",o,i);const d={x:s,dy:l},p={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:n};return sG.runKernel(dp,d,p)}});function lb(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Vm(e,Nv(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function cb(e,t){let n=t;const r=sA(e.shape,t.shape);return r.length>0&&(n=Rg(n,r)),_T(n,e.shape)}function ub(e,t,n,r){if("linear"===t)return e;if("relu"===t)return nv(e);if("elu"===t)return Tg(e);if("relu6"===t)return rv(e);if("prelu"===t)return Py(e,n);if("leakyrelu"===t)return Yg(e,r);if("sigmoid"===t)return DT(e);throw new Error("Unknown fused activation ".concat(t,"."))}const db=(e,t)=>!(e>0)||"linear"===t;const pb=TG({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}=e;if(c=c||"linear",!1===db(sG.state.gradientDepth,c)){Zu("NHWC"===a,(()=>"Error in fused conv2d: got dataFormat of ".concat(a," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=QT(t,n,r,o,a,i,s);return null!=l&&(e=Pm(e,l)),ub(e,c,u,d)}const p=GG(t,"x","conv2d","float32"),h=GG(n,"filter","conv2d","float32");let f=p,C=!1;3===p.rank&&(C=!0,f=_T(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Zu(4===f.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,"."))),Zu(4===h.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,"."))),IT("fused conv2d",o,s);const G="NHWC"===a?f.shape[3]:f.shape[1];Zu(h.shape[2]===G,(()=>"Error in conv2d: depth of input (".concat(G,") must match ")+"input depth for filter ".concat(h.shape[2],"."))),Zu(xT(r,i),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(i,"'")));const m=GT(f.shape,h.shape,r,i,o,s);let A,T;if(null!=l&&(A=GG(l,"bias","fused conv2d"),[A]=$C(A,p),"NHWC"===a?lA(m.outShape,A.shape):(Zu(A.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(A.shape.length,"."))),Zu(0===A.shape.length||A.shape[0]===m.outChannels||1===A.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(A.shape,") is not ")+"compatible with the number of output channels "+"(".concat(m.outChannels,")"))))),null!=u){const e=u.shape;if(Zu(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)Zu(1===e[0]||e[0]===m.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(m.outChannels,").")));else if(3===e.length)try{lA(e,m.outShape)}catch(b){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(m.outShape,").");throw Error(t)}T=GG(u,"prelu weights","fused conv2d")}const g=(e,t)=>{Zu("NHWC"===a,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(a," but only NHWC is currently supported.")));const[n,s,l,u]=t,d=lb(e,l,c);Zu(bT(i),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")));const p=[eg(s.shape,d,n,r,o),sb(s,d,n.shape,r,o)];if(null!=u){const e=cb(u,d);p.push(e)}return p},y={x:f,filter:h,bias:A,preluActivationWeights:T},v={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:c,leakyreluAlpha:d};if(null==l){const e=jm(((e,t,n)=>{let r=sG.runKernel(jf,y,v);return n([t,e,r]),C&&(r=_T(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:g}}));return e(f,h)}{const e=jm(((e,t,n,r)=>{let o=sG.runKernel(jf,y,v);return r([t,e,o,n]),C&&(o=_T(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:g}}));return e(f,h,A)}}});const hb=TG({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=_T(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=_T(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:s,dy:l},u={strides:r,pad:o,dimRoundingMode:i,dilations:a,filterShape:n};return sG.runKernel(xp,c,u)}});const fb=TG({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=_T(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:s,filter:n},u={strides:r,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=sG.runKernel(wp,c,u);return l?_T(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const Cb=TG({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:d}=e;if(!1===db(sG.state.gradientDepth,c)){let e=dg(t,n,r,o,a,i,s);return null!=l&&(e=Pm(e,l)),ub(e,c,u,d)}const p=GG(t,"x","depthwiseConv2d","float32"),h=GG(n,"filter","depthwiseConv2d","float32");let f=p,C=!1;3===p.rank&&(C=!0,f=_T(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Zu(4===f.rank,(()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,"."))),Zu(4===h.rank,(()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(h.rank,"."))),Zu(f.shape[3]===h.shape[2],(()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],"."))),null==i&&(i=[1,1]),Zu(xT(r,i),(()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(i,"'"))),IT("fused depthwiseConv2d",o,s);const G=GT(f.shape,h.shape,r,i,o,s,!0);let m,A;null!=l&&(m=GG(l,"bias","fused conv2d"),[m]=$C(m,p),lA(G.outShape,m.shape)),null!=u&&(A=GG(u,"prelu weights","fused depthwiseConv2d"));const T=(e,t)=>{Zu(bT(i),(()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(i,"'")));const[n,a,l,u]=t,d=lb(e,l,c),p=fb(a.shape,d,n,r,o,i,s),h=hb(a,d,n.shape,r,o,i,s);if(null!=u){return[p,h,cb(m,d)]}return[p,h]},g={x:f,filter:h,bias:m,preluActivationWeights:A},y={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:c,leakyreluAlpha:d};if(null==l){const e=jm(((e,t,n)=>{let r=sG.runKernel(Kf,g,y);return n([t,e,r]),C&&(r=_T(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return e(f,h)}{const e=jm(((e,t,n,r)=>{let o=sG.runKernel(Kf,g,y);return r([t,e,o,n]),C&&(o=_T(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:T}}));return e(f,h,m)}}});const Gb=TG({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:o=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===db(sG.state.gradientDepth,i)){let e=RT(t,n,r,o);return null!=a&&(e=Pm(e,a)),ub(e,i,s,l)}let c=GG(t,"a","fused matMul"),u=GG(n,"b","fused matMul");[c,u]=$C(c,u);const d=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=o?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=o?u.shape[u.rank-2]:u.shape[u.rank-1],C=c.shape.slice(0,-2),G=u.shape.slice(0,-2),m=$u(C),A=$u(G);Zu(d===p,(()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const T=lA(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,f]),g=_T(c,r?[m,d,h]:[m,h,d]),y=_T(u,o?[A,f,p]:[A,p,f]);let v,b;null!=a&&(v=GG(a,"bias","fused matMul"),[v]=$C(v,c),lA(T,v.shape)),null!=s&&(b=GG(s,"prelu weights","fused matMul"));const x=(e,t)=>{const[n,s,l,c]=t,u=lb(_T(e,l.shape),l,i);let d,p;if(r||o?!r&&o?(d=RT(u,s,!1,!1),p=RT(u,n,!0,!1)):r&&!o?(d=RT(s,u,!1,!0),p=RT(n,u,!1,!1)):(d=RT(s,u,!0,!0),p=RT(u,n,!0,!0)):(d=RT(u,s,!1,!0),p=RT(n,u,!0,!1)),null!=a){return[d,p,cb(c,u)]}return[d,p]},w={a:g,b:y,bias:v,preluActivationWeights:b},k={transposeA:r,transposeB:o,activation:i,leakyreluAlpha:l};if(null==a){const e=jm(((e,t,n)=>{const r=sG.runKernel(Uf,w,k);return n([e,t,r]),{value:_T(r,T),gradFunc:x}}));return e(g,y)}{const e=jm(((e,t,n,r)=>{const o=sG.runKernel(Uf,w,k);return r([e,t,o,n]),{value:_T(o,T),gradFunc:x}}));return e(g,y,v)}}});const mb=TG({hammingWindow_:function(e){return ab(e,.54,.46)}});const Ab=TG({hannWindow_:function(e){return ab(e,.5,.5)}});const Tb=TG({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0;const i=[];for(;a+t<=e.size;)i.push(FT(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,s=ET([FT(e,a,t-r),eA([r],o)]);i.push(s),a+=n}return 0===i.length?Fv([],[0,t]):_T(ET(i),[i.length,t])}});const gb=TG({stft_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ab;null==r&&(r=ob(t));const a=Tb(e,t,n),i=Vm(a,o(t));return kv(i,r)}});const yb=TG({cropAndResize_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=GG(e,"image","cropAndResize"),s=GG(t,"boxes","cropAndResize","float32"),l=GG(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Zu(4===i.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),Zu(2===s.rank&&4===s.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,"."))),Zu(1===l.rank&&l.shape[0]===c,(()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,"."))),Zu(2===r.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,"."))),Zu(r[0]>=1&&r[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(r))),Zu("bilinear"===o||"nearest"===o,(()=>"method must be bilinear or nearest, but was ".concat(o)));const u={image:i,boxes:s,boxInd:l},d={method:o,extrapolationValue:a,cropSize:r};return sG.runKernel(gp,u,d)}});const vb=TG({flipLeftRight_:function(e){const t=GG(e,"image","flipLeftRight","float32");Zu(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return sG.runKernel(Hp,n,{})}});const bb=TG({grayscaleToRGB_:function(e){const t=GG(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Zu(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),Zu(1===r,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,zg(t,o)}});const xb=TG({rgbToGrayscale_:function(e){const t=GG(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];Zu(t.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),Zu(3===r,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")));const o=t.dtype,a=Mm(t,"float32"),i=Dv([.2989,.587,.114]);let s;switch(t.rank){case 2:s=Ag("ij,j->i",a,i);break;case 3:s=Ag("ijk,k->ij",a,i);break;case 4:s=Ag("ijkl,l->ijk",a,i);break;case 5:s=Ag("ijklm,m->ijkl",a,i);break;case 6:s=Ag("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return s=Lg(s,-1),Mm(s,o)}});const wb=TG({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=GG(e,"image","rotateWithOffset","float32");Zu(4===o.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(o.rank,".")));const a={image:o},i={radians:t,fillValue:n,center:r};return sG.runKernel(Wf,a,i)}});function kb(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),Zu(0<=r&&r<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'"))),Zu(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),Zu(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),Zu(1===t.rank,(()=>"scores must be a 1D tensor")),Zu(t.shape[0]===i,(()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0]))),Zu(0<=a&&a<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(a,"'"))),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}const Ib=TG({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=GG(e,"boxes","nonMaxSuppression","float32"),i=GG(t,"scores","nonMaxSuppression","float32"),s=kb(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return sG.runKernel(Sh,{boxes:a,scores:i},l)}});function _b(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,a=0,i=!1;for(;r<o;){a=r+(o-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||Sb)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function Sb(e,t){return e>t?1:e<t?-1:0}function Nb(e,t,n,r,o){return Db(e,t,n,r,o,0)}function Eb(e,t,n,r,o,a){return Db(e,t,n,r,o,0,!1,a,!0)}function Rb(e,t,n,r,o,a){return Db(e,t,n,r,o,a,!0)}function Db(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let G=0;G<t.length;G++)t[G]>o&&c.push({score:t[G],boxIndex:G,suppressBeginIndex:0});c.sort(Ob);const u=a>0?-.5/a:0,d=[],p=[];for(;d.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:a,suppressBeginIndex:i}=t;if(n<o)break;let s=!1;for(let l=d.length-1;l>=i;--l){const n=Fb(e,a,d[l]);if(n>=r){s=!0;break}if(t.score=t.score*Mb(r,u,n),t.score<=o)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(a),p.push(t.score)):t.score>o&&_b(c,t,Ob))}const h=d.length,f=n-h;s&&f>0&&(d.push(...new Array(f).fill(0)),p.push(...new Array(f).fill(0)));const C={selectedIndices:d};return i&&(C.selectedScores=p),l&&(C.validOutputs=h),C}function Fb(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(s-a)*(l-i),f=(d-c)*(p-u);if(h<=0||f<=0)return 0;const C=Math.max(a,c),G=Math.max(i,u),m=Math.min(s,d),A=Math.min(l,p),T=Math.max(m-C,0)*Math.max(A-G,0);return T/(h+f-T)}function Mb(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Ob(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const Lb=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=GG(e,"boxes","nonMaxSuppressionAsync"),i=GG(t,"scores","nonMaxSuppressionAsync"),s=kb(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:d}=Nb(c,u,n,r,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),Dv(d,"int32")};const Pb=TG({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=GG(e,"boxes","nonMaxSuppression"),s=GG(t,"scores","nonMaxSuppression"),l=kb(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:i,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a},d=sG.runKernel(Eh,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}});const zb=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=GG(e,"boxes","nonMaxSuppressionAsync"),s=GG(t,"scores","nonMaxSuppressionAsync"),l=kb(i,s,n,r,o,a);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([i.data(),s.data()]),u=c[0],d=c[1],{selectedIndices:p,selectedScores:h}=Rb(u,d,n,r,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Dv(p,"int32"),selectedScores:Dv(h)}};const Bb=TG({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=GG(e,"boxes","nonMaxSuppression"),s=GG(t,"scores","nonMaxSuppression"),l=kb(i,s,n,r,o,null),c={boxes:i,scores:s},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:a},d=sG.runKernel(Nh,c,u);return{selectedIndices:d[0],validOutputs:d[1]}}});const Vb=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=GG(e,"boxes","nonMaxSuppressionAsync"),s=GG(t,"scores","nonMaxSuppressionAsync"),l=kb(i,s,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[p,h]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:C}=Eb(p,h,c,u,d,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:Dv(f,"int32"),validOutputs:Km(C,"int32")}};const Hb=TG({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=GG(e,"images","resizeBilinear");Zu(3===o.rank||4===o.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),Zu(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),Zu(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=_T(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=sG.runKernel(Yh,s,l);return i?_T(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Wb=TG({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=GG(e,"images","resizeNearestNeighbor");Zu(3===o.rank||4===o.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),Zu(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),Zu("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),Zu(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=_T(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=sG.runKernel(qh,s,l);return i?_T(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Ub=TG({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=GG(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,s,l,c,u=Vm(Dv([r]),255);if(Zu(3===o.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(o.rank,"."))),Zu(3===o.shape[2]||1===o.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(o.shape[2],"."))),Zu("int32"===o.dtype||"float32"===o.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(o.dtype,"."))),Zu("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===o.shape[2]){[i,s,l]=wv(o,[1,1,1],-1);const e=Vm(i,.2989),t=Vm(s,.587),n=Vm(l,.114);c=Pm(Pm(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,o,a,i,s,l=Dv([-1]),c=Dv([0]),u=Dv([0]);for(let d=0;d<e.size-1;d++){n=FT(e,0,d+1),r=FT(e,d+1),i=Bm(Rg(n),t),s=Bm(Rg(r),t);const p=Rg(Vm(n,$y(0,n.size)));o=Bm(p,Rg(n));const h=eA(r.shape,n.size),f=Pm($y(0,r.size),h),C=Vm(r,f);a=Bm(Rg(C),Rg(r));const G=rA(o,a),m=rA(o,a),A=Vm(i,s);u=Vm(Vm(A,G),m);const T=Wg(u,c);c=Cg(T,u,c),l=Cg(T,Dv([d]),l)}return l}(HT(Mm(cv(c),"int32"),vG([]),256),a)}const d=n?Jg(c,u):Wg(c,u);return Mm(Vm(d,255),"int32")}});const jb=TG({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;const i=GG(e,"image","transform","float32"),s=GG(t,"transforms","transform","float32");Zu(4===i.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),Zu(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),Zu(null==a||2===a.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(a,".")));const l={image:i,transforms:s},c={interpolation:n,fillMode:r,fillValue:o,outputShape:a};return sG.runKernel(Mf,l,c)}});const Kb=TG({bandPart_:function(e,t,n){const r=GG(e,"a","bandPart");Zu(r.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")));const o=r.shape,[a,i]=r.shape.slice(-2);let s,l;"number"===typeof t?(Zu(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),Zu(t<=a,(()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(a,")."))),s=GG(t<0?a:t,"numLower","bandPart")):(Zu("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=Cg(Zg(t,0),a,yy(t,a))),"number"===typeof n?(Zu(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),Zu(n<=i,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,")."))),l=GG(n<0?i:n,"numUpper","bandPart")):(Zu("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=Cg(Zg(n,0),i,yy(n,i)));const c=_T($y(0,a,1,"int32"),[-1,1]),u=$y(0,i,1,"int32"),d=rA(c,u),p=sy(Jg(d,s),Ug(d,ny(l))),h=Ay([a,i],r.dtype);return _T(Sv(Kv(_T(r,[-1,a,i])).map((e=>Cg(p,e,h)))),o)}});const qb=TG({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Zu(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Zu(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=wv(e,e.shape[0],0).map((e=>_v(e,[0])));Zu(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],r=e;for(let o=0;o<e.length;++o)n.push(sG.tidy((()=>{let e=r[o];if(o>0)for(let t=0;t<o;++t){const r=Vm(Rg(Vm(n[t],e)),n[t]);e=rA(e,r)}return Bm(e,Fg(e,"euclidean"))})));return t?Sv(n,0):n}});function Xb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return sG.tidy((()=>{Zu(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],r=e.shape[1];let o=Bg(n),a=Om(e);const i=Fv([[1]],[1,1]);let s=Om(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=a,l=s,c=o;[s,a,o]=sG.tidy((()=>{const t=FT(a,[e,e],[n-e,1]),l=Fg(t),c=FT(a,[e,e],[1,1]),u=Cg(Wg(c,0),Fv([[-1]]),Fv([[1]])),d=rA(c,Vm(u,l)),p=Bm(t,d);s=1===p.shape[0]?Om(i):ET([i,FT(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const h=ny(Bm(RT(u,d),l)),f=FT(a,[e,0],[n-e,r]),C=Vm(h,s),G=Qv(s);if(0===e)a=rA(f,RT(C,RT(G,f)));else{const t=rA(f,RT(C,RT(G,f)));a=ET([FT(a,[0,0],[e,r]),t],0)}const m=Qv(C),A=FT(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=rA(A,RT(RT(A,s),m));else{const t=rA(A,RT(RT(A,s),m));o=ET([FT(o,[0,0],[n,e]),t],1)}return[s,a,o]})),_G([t,l,c])}return!t&&n>r&&(o=FT(o,[0,0],[n,r]),a=FT(a,[0,0],[r,r])),[o,a]}))}const Yb=TG({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Zu(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return Xb(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Kv(_T(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];r.forEach((e=>{const[n,r]=Xb(e,t);o.push(n),a.push(r)}));return[_T(Sv(o,0),e.shape),_T(Sv(a,0),e.shape)]}}});var Zb;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Zb||(Zb={}));const Jb=TG({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zb.SUM_BY_NONZERO_WEIGHTS;const r=GG(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=GG(t,"weights","computeWeightedLoss"));const a=null==o?r:Vm(r,o);if(n===Zb.NONE)return a;if(n===Zb.SUM)return Rg(a);if(n===Zb.MEAN){if(null==o)return my(a);{const e=r.size/o.size,t=Bm(Rg(a),Rg(o));return e>1?Bm(t,Km(e)):t}}if(n===Zb.SUM_BY_NONZERO_WEIGHTS){if(null==o)return Bm(Rg(a),Km(r.size));{const e=Vm(o,Ty(r.shape)),t=Mm(Rg(Iy(e,Km(0))),"float32");return Bm(Rg(a),t)}}throw Error("Unknown reduction: ".concat(n))}});const Qb=TG({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zb.SUM_BY_NONZERO_WEIGHTS;const o=GG(e,"labels","absoluteDifference"),a=GG(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=GG(n,"weights","absoluteDifference")),Ju(o.shape,a.shape,"Error in absoluteDifference: ");const s=aA(rA(o,a));return Jb(s,i,r)}});const $b=TG({cosineDistance_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zb.SUM_BY_NONZERO_WEIGHTS;const a=GG(e,"labels","cosineDistance"),i=GG(t,"predictions","cosineDistance");let s=null;null!=r&&(s=GG(r,"weights","cosineDistance")),Ju(a.shape,i.shape,"Error in cosineDistance: ");const l=Km(1),c=rA(l,Rg(Vm(a,i),n,!0));return Jb(c,s,o)}});const ex=TG({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zb.SUM_BY_NONZERO_WEIGHTS,o=GG(e,"labels","hingeLoss");const a=GG(t,"predictions","hingeLoss");let i=null;null!=n&&(i=GG(n,"weights","hingeLoss")),Ju(o.shape,a.shape,"Error in hingeLoss: ");const s=Km(1);o=rA(Vm(Km(2),o),s);const l=nv(rA(s,Vm(o,a)));return Jb(l,i,r)}});const tx=TG({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zb.SUM_BY_NONZERO_WEIGHTS;const a=GG(e,"labels","huberLoss"),i=GG(t,"predictions","huberLoss");let s=null;null!=n&&(s=GG(n,"weights","huberLoss")),Ju(a.shape,i.shape,"Error in huberLoss: ");const l=Km(r),c=aA(rA(i,a)),u=yy(c,l),d=rA(c,u),p=Pm(Vm(Km(.5),Wm(u)),Vm(l,d));return Jb(p,s,o)}});const nx=TG({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zb.SUM_BY_NONZERO_WEIGHTS;const a=GG(e,"labels","logLoss"),i=GG(t,"predictions","logLoss");let s=null;null!=n&&(s=GG(n,"weights","logLoss")),Ju(a.shape,i.shape,"Error in logLoss: ");const l=Km(1),c=Km(r),u=ny(Vm(a,ey(Pm(i,c)))),d=Vm(rA(l,a),ey(Pm(rA(l,i),c))),p=rA(u,d);return Jb(p,s,o)}});const rx=TG({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zb.SUM_BY_NONZERO_WEIGHTS;const o=GG(e,"labels","meanSquaredError"),a=GG(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=GG(n,"weights","meanSquaredError")),Ju(o.shape,a.shape,"Error in meanSquaredError: ");const s=Iv(o,a);return Jb(s,i,r)}});const ox=TG({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zb.SUM_BY_NONZERO_WEIGHTS,a=GG(e,"multiClassLabels","sigmoidCrossEntropy");const i=GG(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=GG(n,"weights","sigmoidCrossEntropy")),Ju(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Km(r),t=Km(1),n=Km(.5);a=Pm(Vm(a,rA(t,e)),Vm(n,e))}const l=function(e,t){const n=GG(e,"labels","sigmoidCrossEntropyWithLogits"),r=GG(t,"logits","sigmoidCrossEntropyWithLogits");Ju(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=nv(r),a=Vm(r,n),i=ty(Og(ny(aA(r))));return Pm(rA(o,a),i)}(a,i);return Jb(l,s,o)}});const ax=TG({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zb.SUM_BY_NONZERO_WEIGHTS,a=GG(e,"onehotLabels","softmaxCrossEntropy");const i=GG(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=GG(n,"weights","softmaxCrossEntropy")),Ju(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Km(r),t=Km(1),n=Km(a.shape[1]);a=Pm(Vm(a,rA(t,e)),Bm(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const r=jm(((e,t,r)=>{const o=iy(t,[n],!0),a=rA(Mm(t,"float32"),o);r([e,a]);const i=ny(Vm(a,e));return{value:Rg(i,[n]),gradFunc:(e,t)=>{const[r,o]=t,a=wg(e.shape,[n]);return[Vm(_T(e,a),rA(Mm(r,"float32"),Og(o))),Vm(_T(e,a),rA(Og(o),Mm(r,"float32")))]}}}));return r(e,t)}(a,i);return Jb(l,s,o)}});const ix=TG({sparseFillEmptyRows_:function(e,t,n,r){const o=GG(e,"indices","sparseFillEmptyRows","int32"),a=GG(t,"values","sparseFillEmptyRows"),i=GG(n,"denseShape","sparseFillEmptyRows","int32"),s=GG(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==o.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(o.shape));if(1!==a.rank)throw new Error("Values should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));const l={indices:o,values:a,denseShape:i,defaultValue:s},c=sG.runKernel(Af,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});const sx=TG({sparseReshape_:function(e,t,n){const r=GG(e,"inputIndices","sparseReshape","int32"),o=GG(t,"inputShape","sparseReshape","int32"),a=GG(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==o.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(o.shape));if(1!==a.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(a.shape));const i={inputIndices:r,inputShape:o,newShape:a},s=sG.runKernel(Tf,i);return{outputIndices:s[0],outputShape:s[1]}}});const lx=TG({sparseSegmentMean_:function(e,t,n){const r=GG(e,"data","sparseSegmentMean"),o=GG(t,"indices","sparseSegmentMean","int32"),a=GG(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(o.shape));if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(a.shape));const i={data:r,indices:o,segmentIds:a};return sG.runKernel(gf,i)}});const cx=TG({sparseSegmentSum_:function(e,t,n){const r=GG(e,"data","sparseSegmentSum"),o=GG(t,"indices","sparseSegmentSum","int32"),a=GG(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(o.shape));if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(a.shape));const i={data:r,indices:o,segmentIds:a};return sG.runKernel(yf,i)}});const ux=TG({stringNGrams_:function(e,t,n,r,o,a,i,s){const l=GG(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));const c=GG(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:o,rightPad:a,padWidth:i,preserveShortSequences:s},d={data:l,dataSplits:c},p=sG.runKernel(If,d,u);return{nGrams:p[0],nGramsSplits:p[1]}}});const dx=TG({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=GG(e,"input","stringSplit","string"),o=GG(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==o.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(o.shape));const a={skipEmpty:n},i={input:r,delimiter:o},s=sG.runKernel(_f,i,a);return{indices:s[0],values:s[1],shape:s[2]}}});const px=TG({stringToHashBucketFast_:function(e,t){const n=GG(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return sG.runKernel(Sf,o,r)}});const hx=TG({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=GG(e,"input","staticRegexReplace","string"),a={pattern:t,rewrite:n,replaceGlobal:r};return sG.runKernel(wf,{x:o},a)}}),fx={fft:vv,ifft:bv,rfft:kv,irfft:xv},Cx={hammingWindow:mb,hannWindow:Ab,frame:Tb,stft:gb},Gx={flipLeftRight:vb,grayscaleToRGB:bb,resizeNearestNeighbor:Wb,resizeBilinear:Hb,rgbToGrayscale:xb,rotateWithOffset:wb,cropAndResize:yb,nonMaxSuppression:Ib,nonMaxSuppressionAsync:Lb,nonMaxSuppressionWithScore:Pb,nonMaxSuppressionWithScoreAsync:zb,nonMaxSuppressionPadded:Bb,nonMaxSuppressionPaddedAsync:Vb,threshold:Ub,transform:jb},mx={bandPart:Kb,gramSchmidt:qb,qr:Yb},Ax={absoluteDifference:Qb,computeWeightedLoss:Jb,cosineDistance:$b,hingeLoss:ex,huberLoss:tx,logLoss:nx,meanSquaredError:rx,sigmoidCrossEntropy:ox,softmaxCrossEntropy:ax},Tx={sparseFillEmptyRows:ix,sparseReshape:sx,sparseSegmentMean:lx,sparseSegmentSum:cx},gx={stringNGrams:ux,stringSplit:dx,stringToHashBucketFast:px,staticRegexReplace:hx};const yx=class{static sgd(e){return new dA(e)}static momentum(e,t){return new pA(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new hA(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new oA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new $m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new uA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new tA(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},vx="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function bx(){return new Promise((e=>vx((()=>e()))))}function xx(e,t){const n=e[0].length;e.forEach(((e,t)=>{Zu(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),Zu(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const r=e[0];e.forEach(((e,o)=>{for(let a=0;a<n;a++)Zu(a===t||e[a]===r[a],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(o,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(o,".")))}))}function wx(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var kx;function Ix(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let o=1;o<n.length;++o){const a=n[o],i=r[r.length-n.length+o],s=r[i];if(a>=0)if(s>=0){if(s!==a)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(o+e,"] = ").concat(a," but shape[").concat(o+e,"] = ").concat(s))}else r[i]=a}return r}function _x(e){const t={FIRST_DIM_SIZE:kx.FIRST_DIM_SIZE,VALUE_ROWIDS:kx.VALUE_ROWIDS,ROW_LENGTHS:kx.ROW_LENGTHS,ROW_SPLITS:kx.ROW_SPLITS,ROW_LIMITS:kx.ROW_LIMITS,ROW_STARTS:kx.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function Sx(e){return 0===e.length?0:e[0]===kx.FIRST_DIM_SIZE?e.length-1:e.length}function Nx(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let o=0;o<Math.min(n,r-1);++o){const n=e[o],r=t[o+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(o-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(o-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(kx||(kx={}));const Ex=30;function Rx(e){return e<=Ex?e:Gd(e,Math.floor(Math.sqrt(e)))}function Dx(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Fx(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let o=0;o<n;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(n+1))}return r}function Mx(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],o=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?o.push(n):r.push(n);n.push(...r),n.push(0),n.push(...o)}return n}function Ox(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function Lx(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Px(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function zx(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===$u(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const o=t.shape,a=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const s=e.shape,l=o.slice();l.pop();let c=1;for(let d=a;d<n;++d)c*=s[d],l.push(s[d]);const u=[...md(e.shape).map((e=>e/c)),1].slice(0,a);return[l,i,c,u]}const Bx=1.7580993408473768,Vx=1.0507009873554805,Hx=.3275911,Wx=.254829592,Ux=-.284496736,jx=1.421413741,Kx=-1.453152027,qx=1.061405429;function Xx(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Yx(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Zx(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function Jx(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function Qx(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $x(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ew(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function tw(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const nw="->",rw=/->/g,ow=",",aw="...";function iw(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(rw,"").length)/nw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(nw,'").'));const[r,o]=e.split(nw);Zu(-1===r.indexOf(aw),(()=>'The ellipsis notation ("'.concat(aw,'") is not supported yet.')));const a=r.split(ow),i=a.length;if(t!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(t));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<o.length;++d){const e=o[d];if(!a.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===s.indexOf(e)&&e!==ow&&s.push(e)}const l=new Array(a.length);for(let d=0;d<i;++d){if(new Set(a[d].split("")).size!==a[d].length)throw new Error("Found duplicate axes in input component ".concat(a[d],". ")+"Support for duplicate axes in input is not implemented yet.");l[d]=[];for(let e=0;e<a[d].length;++e)l[d].push(s.indexOf(a[d][e]))}const c=s.length,u=[];for(let d=o.length;d<c;++d)u.push(d);return{allDims:s,summedDims:u,idDims:l}}function sw(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const r=[];for(let o=0;o<e;++o)-1===n[o]&&r.push(o);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function lw(e,t,n){const r=new Array(e);for(let o=0;o<n.length;++o){const e=n[o].shape;for(let n=0;n<t[o].length;++n)void 0===r[t[o][n]]?r[t[o][n]]=e[n]:Zu(r[t[o][n]]===e[n],(()=>"Expected dimension ".concat(r[t[o][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function cw(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const e=dw(t,n[i]);for(const t of e)-1===a.indexOf(t)&&(r[i].push(t),a.push(t))}return{path:n,steps:r}}function uw(e){return e.every(((e,t)=>e===t))}function dw(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Zu(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Zu(o<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}Zu(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function hw(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function fw(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Cw(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Gw(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function mw(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Aw(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Tw(e,t){const n=$u(e),r=$u(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function gw(e,t){const n=$u(e),r=$u(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function yw(){return"segment ids must be >= 0"}function vw(){return"segment ids are not increasing"}function bw(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function xw(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function ww(e,t){let n,r=!1;for(e<=Ex?(n=e,r=!0):n=Gd(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Gd(e,n+1);return n}function kw(e,t,n){const r=[],o=e.length;for(let a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}function Iw(e,t,n,r){const o=t.shape.length,a=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error("Expect batchDims in the range of [-".concat(o,", ").concat(o,"], but got ").concat(r));if(r<0&&(r+=o),r>a)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(a,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const i=e.shape[n],s=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)s.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)s.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<o;d++)s.push(t.shape[d]);for(let d=n+1;d<a;d++)s.push(e.shape[d]),u*=e.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:s}}function _w(e){try{return e.map((e=>vC(e)))}catch(fJ){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(fJ))}}function Sw(e){return e.map((e=>yC(e)))}!function(){for(const e of fA)Jm(e)}();const Nw={kernelName:Md,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,Nv(Mm(n,"float32"),-1))}}},Ew={kernelName:Od,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Wm(Mm(n,"float32")),r=Hm(rA(Km(1),t));return ny(Bm(e,r))}}}},Rw={kernelName:Ld,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Hm(rA(Wm(Mm(n,"float32")),1));return Bm(e,t)}}}},Dw={kernelName:Pd,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{let t=e;const r=sA(n.shape,o);return r.length>0&&(t=Rg(t,r)),_T(t,n.shape)},b:()=>{let t=e;const n=sA(r.shape,o);return n.length>0&&(t=Rg(t,n)),_T(t,r.shape)}}}},Fw={kernelName:zd,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},Mw={kernelName:Hd,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Um(n)}}},Ow={kernelName:Wd,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Um(n)}}},Lw={kernelName:Ud,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Hm(rA(Km(1),Wm(Mm(n,"float32")))))}}},Pw={kernelName:jd,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Hm(Pm(Km(1),Wm(Mm(n,"float32"))));return Bm(e,t)}}}},zw={kernelName:Xd,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{const t=Pm(Wm(n),Wm(r));let a=Vm(e,Bm(r,t));const i=sA(n.shape,o);return i.length>0&&(a=Rg(a,i)),_T(a,n.shape)},b:()=>{const t=Pm(Wm(n),Wm(r));let a=ny(Vm(e,Bm(n,t)));const i=sA(r.shape,o);return i.length>0&&(a=Rg(a,i)),_T(a,r.shape)}}}},Bw={kernelName:Kd,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Pm(Wm(Mm(n,"float32")),1))}}},Vw={kernelName:qd,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,rA(Km(1),Wm(Mm(n,"float32"))))}}};const Hw=TG({avgPool3dGrad_:function(e,t,n,r,o,a){const i=GG(e,"dy","avgPool3dGrad"),s=GG(t,"input","avgPool3dGrad");let l=i,c=s,u=!1;4===s.rank&&(u=!0,l=_T(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=_T(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Zu(5===l.rank,(()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,"."))),Zu(5===c.rank,(()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,"."))),IT("avgPool3dGrad",o,a);const d={dy:l,input:c},p={filterSize:n,strides:r,pad:o,dimRoundingMode:a},h=sG.runKernel(Qd,d,p);return u?_T(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Ww={kernelName:Jd,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:s}=n;return{x:()=>Hw(e,r,o,a,i,s)}}};const Uw=TG({avgPoolGrad_:function(e,t,n,r,o){const a=GG(e,"dy","avgPoolGrad"),i=GG(t,"input","avgPoolGrad");Zu(i.rank===a.rank,(()=>"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(a.rank,")")));let s=i,l=a,c=!1;3===i.rank&&(c=!0,s=_T(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=_T(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Zu(4===l.rank,(()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,"."))),Zu(4===s.rank,(()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")));const u={dy:l,input:s},d={filterSize:n,strides:r,pad:o},p=sG.runKernel(Zd,u,d);return c?_T(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),jw={kernelName:Yd,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i}=n;return{x:()=>Uw(e,r,o,a,i)}}},Kw={kernelName:$d,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,o]=t,{transposeA:a,transposeB:i}=n;return a||i?!a&&i?{a:()=>RT(e,o,!1,!1),b:()=>RT(e,r,!0,!1)}:a&&!i?{a:()=>RT(o,e,!1,!0),b:()=>RT(r,e,!1,!1)}:{a:()=>RT(o,e,!0,!0),b:()=>RT(e,r,!0,!0)}:{a:()=>RT(e,o,!1,!0),b:()=>RT(r,e,!0,!1)}}},qw={kernelName:ep,gradFunc:(e,t,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>Oy(e,r,o)}}},Xw={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,o=r.inputShape,a=r.shape,i=Array.from(a);for(let l=o.length-1;l>=0;l--)if(o[l]===a[l])i[l]=1;else if(1!==o[l])throw new Error("broadcastTo(): [".concat(o,"] cannot be broadcast to [").concat(a,"]."));const s=[];for(let l=0;l<i.length;l++)i[l]>1&&s.push(l);return{x:()=>Rg(e,s,!0)}}},Yw={kernelName:op,gradFunc:e=>({x:()=>e.clone()})},Zw={kernelName:ap,gradFunc:e=>({x:()=>Um(e)})},Jw={kernelName:ip,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:o,clipValueMax:a}=n;return{x:()=>Cg(sy(Ug(r,o),Jg(r,a)),e,Um(e))}}},Qw={kernelName:lp,inputsToSave:["x"],gradFunc:Nw.gradFunc},$w={kernelName:cp,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:o}=n,a=id(o,t[0].shape)[0],i=r.map((e=>e[a]));return wv(e,i,a).map((e=>()=>e))}},ek={kernelName:up,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{dilations:a,strides:i,pad:s,dataFormat:l}=n;return Zu(bT(a),(()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(a,"'"))),{x:()=>eg(r.shape,e,o,i,s,l),filter:()=>sb(r,e,o.shape,i,s,l)}}},tk={kernelName:pp,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{strides:a,pad:i,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>QT(e,o,a,i,s,1,l),filter:()=>sb(e,r,o.shape,a,i,s,l)}}};const nk=TG({conv3DBackpropFilter_:function(e,t,n,r,o){let a=e;4===e.rank&&(a=_T(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=_T(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Zu(5===a.rank,(()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(a.shape,"."))),Zu(5===i.rank,(()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,"."))),Zu(5===n.length,(()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,"."))),Zu(a.shape[4]===n[3],(()=>"Error in conv3dDerFilter: depth of input ".concat(a.shape[4],") must ")+"match input depth in filter (".concat(n[3],"."))),Zu(i.shape[4]===n[4],(()=>"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")));const s={x:a,dy:i},l={strides:r,pad:o,filterShape:n};return sG.runKernel(fp,s,l)}}),rk={kernelName:hp,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a}=n;Zu(bT(r),(()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")));const[i,s]=t;return{x:()=>rg(i.shape,e,s,o,a),filter:()=>nk(i,e,s.shape,o,a)}}},ok={kernelName:Gp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(ny(Cv(Mm(n,"float32"))),e)}}},ak={kernelName:mp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(Gv(Mm(n,"float32")),e)}}},ik={kernelName:Tp,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o,exclusive:a,reverse:i}=n;return{x:()=>{const t=Ig([o],r.rank);let n=lg(e,o,a,!i);return null!=t&&(n=Qv(n,t)),n}}}},sk={kernelName:bp,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a,dimRoundingMode:i}=n,s=null==r?[1,1]:r;Zu(bT(s),(()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")));const[l,c]=t;return Zu(4===l.rank,(()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,"."))),Zu(4===c.rank,(()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,"."))),Zu(l.shape[3]===c.shape[2],(()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],"."))),Zu(xT(o,s),(()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(o," and dilations ")+"'".concat(s,"'."))),IT("depthwiseConv2d",a,i),{x:()=>fb(l.shape,e,c,o,a,s,i),filter:()=>hb(l,e,c.shape,o,a,s,i)}}},lk={kernelName:Ip,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,a={x:r,filter:o,dy:e},i={x:r,filter:o,dy:e};return{x:()=>sG.runKernel(_p,a,n),filter:()=>sG.runKernel(Sp,i,n)}}},ck={kernelName:Dp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>sG.runKernel(Fp,r)}}},uk={kernelName:Mp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Vm(Og(ny(Wm(n))),2/Math.sqrt(Math.PI));return{x:()=>Vm(e,r)}}},dk={kernelName:Lp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,n)}}},pk={kernelName:Pp,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>_T(e,n.shape)}}},hk={kernelName:zp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,Og(n))}}},fk={kernelName:Wp,gradFunc:e=>({x:()=>Um(e)})},Ck={kernelName:Up,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{const t=Bm(e,Mm(r,"float32")),a=sA(n.shape,o);return a.length>0?_T(Rg(t,a),n.shape):t},b:()=>{let t=Vm(e,Mm(n,"float32"));const a=sA(r.shape,o);a.length>0&&(t=_T(Rg(t,a),r.shape));const i=Wm(r);return ny(Bm(t,Mm(i,"float32")))}}}},Gk={kernelName:jp,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[o,a,i,s]=t,l=null==s?Km(1):s,c=sA(a.shape,o.shape),u=[];if(1===a.rank){for(let e=0;e<o.shape.length-1;++e)u.push(o.shape[e]);u.push(1)}const d=rA(o,a),p=Vm(e,l),h=uv(Pm(i,Km(r))),f=Vm(Vm(Vm(h,h),h),Km(-.5));return{x:()=>1===a.rank?_T(Vm(Vm(e,zg(_T(h,[1,1,1,a.shape[0]]),u)),l),o.shape):_T(Vm(Vm(e,h),l),o.shape),mean:()=>{let e=Vm(Vm(h,Km(-1)),p);return 1===a.rank&&(e=Rg(e,c)),_T(e,a.shape)},variance:()=>{let e=Vm(Vm(f,d),p);return 1===a.rank&&(e=Rg(e,c)),_T(e,a.shape)},scale:()=>{const t=Vm(d,h);let n=Vm(e,t);return 1===a.rank&&(n=Rg(n,c)),_T(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=Rg(t,c)),_T(t,a.shape)}}}},mk={kernelName:Kp,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,o]=t,{axis:a,batchDims:i}=n,s=id(a,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,o=t.size,i=r.slice(0,s),l=i.length,c=r.slice(a,r.length).slice(1),u=c.length,d=Ak(0,l),p=Ak(l+1,l+1+u),h=Tk([i,[o],c]),f=_T(n,h),C=_T(t,[o]),G=Tk([[l],d,p]),m=Qv(f,G);let A=jv(m,C,e.shape[s]);const T=_g(G);return A=Qv(A,T),A};if(1===i){const t=r.shape[0],n=r.split(t,0);return{x:()=>{const t=Sv(n.map(((t,n)=>l(t,o.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)},indices:()=>o}}return{x:l(r,o,e),indices:()=>o}}};function Ak(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Tk(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const gk={kernelName:Yp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Um(n),b:()=>Um(r)}}},yk={kernelName:Zp,gradFunc:e=>({x:()=>Mm(e,"float32")})},vk={kernelName:$p,gradFunc:e=>({x:()=>Um(e)})},bk={kernelName:eh,gradFunc:e=>({x:()=>Um(e)})},xk={kernelName:th,gradFunc:e=>({x:()=>Um(e)})},wk={kernelName:nh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:o}=n,a=Wg(r,0);return{x:()=>Cg(a,e,Vm(e,o))}}},kk={kernelName:sh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Pm(n,1))}}},Ik={kernelName:ih,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Mm(n,"float32"))}}},_k={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;return{logits:()=>{const t=Og(r);return rA(e,Vm(Rg(e,o,!0),t))}}}};const Sk=TG({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},o={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return sG.runKernel(ph,r,o)}}),Nk={kernelName:dh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{depthRadius:a,bias:i,alpha:s,beta:l}=n;return{x:()=>Sk(r,o,e,a,i,s,l)}}};function Ek(e,t,n,r){return t.rank<n.rank&&(t=_T(t,wg(t.shape,r))),e.rank<n.rank&&(e=_T(e,wg(e.shape,r))),{x:()=>Vm(e,Mm(fg(n,t),e.dtype))}}const Rk={kernelName:hh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:o}=r,a=t[0],i=Ek(e,t[1],a,id(o,a.shape));return{x:()=>i.x()}}},Dk={kernelName:fh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Vm(e,Mm(Ug(n,r),"float32")),b:()=>Vm(e,Mm(Zg(n,r),"float32"))}}};const Fk=TG({maxPool3dGrad_:function(e,t,n,r,o,a,i){const s=GG(e,"dy","maxPool3dGrad"),l=GG(t,"input","maxPool3dGrad"),c=GG(n,"output","maxPool3dGrad");let u=s,d=l,p=c,h=!1;4===l.rank&&(h=!0,u=_T(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=_T(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=_T(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Zu(5===u.rank,(()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,"."))),Zu(5===d.rank,(()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,"."))),Zu(5===p.rank,(()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(p.rank,"."))),IT("maxPool3dGrad",a,i);const f={dy:u,input:d,output:p},C={filterSize:r,strides:o,pad:a,dimRoundingMode:i},G=sG.runKernel(Ah,f,C);return h?_T(G,[G.shape[1],G.shape[2],G.shape[3],G.shape[4]]):G}}),Mk={kernelName:mh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=n;return{x:()=>Fk(e,r,o,a,i,s,l)}}};const Ok=TG({maxPoolGrad_:function(e,t,n,r,o,a,i){const s=GG(e,"dy","maxPoolGrad"),l=GG(t,"input","maxPoolGrad"),c=GG(n,"output","maxPoolGrad");Zu(l.rank===s.rank,(()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(s.rank,")"))),Zu(4===s.rank,(()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,"."))),Zu(4===l.rank,(()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,"."))),IT("maxPoolGrad",a,i);const u={dy:s,input:l,output:c},d={filterSize:r,strides:o,pad:a,dimRoundingMode:i};return sG.runKernel(Gh,u,d)}}),Lk={kernelName:Ch,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>Ok(e,r,o,a,i,s)}}},Pk={kernelName:bh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>FT(e,a,r.shape)}}},zk={kernelName:Mh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>FT(e,a,r.shape)}}},Bk={kernelName:Oh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,o]=t,a=n,i=r,s=lA(a.shape,i.shape);return{a:()=>{const t=Mm(i,"float32");let n=Vm(e,Vm(t,nA(a,rA(t,Km(1)))));const r=sA(a.shape,s);return r.length>0&&(n=Rg(n,r)),_T(n,a.shape)},b:()=>{const t=Wg(a,0),n=Cg(t,ey(a),Um(a));let r=Vm(e,Vm(o,n));const l=sA(i.shape,s);return l.length>0&&(r=Rg(r,l)),_T(r,i.shape)}}}};function Vk(e,t,n){const r=e.shape.length,o=r-n.length,a=Ig(n,r);let i=e;null!=a&&(i=Qv(e,a));const s=i.shape.slice(),l=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const o=_T(t,r),a=sg(e,n,!0,!1),i=sg(e,n,!0,!0),s=Vm(a,i);return Vm(o,s)}(i.reshape(s),t,o);if(c=c.reshape(i.shape),null!=a){const e=_g(a);c=Qv(c,e)}return c}const Hk={kernelName:af,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Wg(n,Km(0)),r=Km(Bx),o=Km(Vx),a=Vm(e,o),i=Vm(Vm(e,r),Og(Mm(n,"float32")));return Cg(t,a,i)}}}},Wk={kernelName:Cf,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>LT(e,r,o)}}},Uk={kernelName:Gf,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>ET(e,r)}}};const jk=[Nw,Ew,Rw,Dw,Fw,Mw,Ow,Lw,Pw,zw,Bw,Vw,Ww,jw,Kw,qw,Xw,Yw,Zw,Jw,Qw,$w,tk,ek,rk,ok,ak,ik,sk,lk,{kernelName:Ep,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{const t=Bm(e,Mm(r,"float32")),a=sA(n.shape,o);return a.length>0?_T(Rg(t,a),n.shape):t},b:()=>{let t=Vm(e,Mm(n,"float32"));const a=sA(r.shape,o);a.length>0&&(t=_T(Rg(t,a),r.shape));const i=Wm(r);return ny(Bm(t,Mm(i,"float32")))}}}},ck,uk,dk,pk,hk,Ck,fk,Gk,mk,gk,yk,vk,bk,xk,wk,kk,Ik,_k,Nk,Rk,Rk,Dk,Mk,Lk,{kernelName:gh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n,a=id(o,r.shape),i=$u(xg(r.shape,a)[1]);return{x:()=>{const t=r.shape.slice();a.forEach((e=>{t[e]=1}));const n=_T(e,t);return Bm(Vm(n,Ty(r.shape,"float32")),i)}}}},{kernelName:yh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:o}=r,[a,i]=t,s=Ek(e,i,a,id(o,a.shape));return{x:()=>s.x()}}},{kernelName:vh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Vm(e,Mm(Jg(n,r),"float32")),b:()=>Vm(e,Mm(Wg(n,r),"float32"))}}},Pk,{kernelName:xh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{const t=sA(n.shape,o);return t.length>0?_T(Rg(e,t),n.shape):e},b:()=>{const t=Vm(e,ny(Vg(Bm(n,r)))),a=sA(r.shape,o);return a.length>0?_T(Rg(t,a),r.shape):t}}}},{kernelName:kh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{const t=Vm(e,Mm(r,"float32")),a=sA(n.shape,o);return a.length>0?_T(Rg(t,a),n.shape):t},b:()=>{const t=Vm(e,Mm(n,"float32")),a=sA(r.shape,o);return a.length>0?_T(Rg(t,a),r.shape):t}}}},{kernelName:Ih,gradFunc:e=>({x:()=>ny(e)})},{kernelName:Dh,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Ay(n.shape,"float32")}}},{kernelName:Rh,gradFunc:e=>({x:()=>Um(e)})},{kernelName:Fh,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return Kv(e,r).map((e=>()=>e))}},zk,zk,Bk,{kernelName:Lh,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,o=Wg(n,0);return{x:()=>Cg(o,e,Vm(e,r)),alpha:()=>{let t=Cg(o,Um(e),Vm(e,n));const a=sA(r.shape,e.shape);return a.length>0&&(t=Rg(t,a)),_T(t,r.shape)}}}},{kernelName:Ph,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;let a=[];return a=void 0===o||null===o?r.shape.map(((e,t)=>t)):"number"===typeof o?[o]:o,{x:()=>Vk(r,e,a)}}},{kernelName:Uh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,ny(Wm(n)))}}},{kernelName:Jh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Vm(Jg(n,6),Nv(n));return{x:()=>Vm(e,Mm(r,"float32"))}}},{kernelName:jh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,Mm(Nv(n),"float32"))}}},{kernelName:Kh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>_T(e,n.shape)}}},{kernelName:Yh,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>sG.runKernel(Zh,o,n)}}},{kernelName:qh,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>sG.runKernel(Xh,o,n)}}},{kernelName:Qh,gradFunc:(e,t,n)=>{const{dims:r}=n,o=id(r,e.shape);return{x:()=>ov(e,o)}}},{kernelName:$h,gradFunc:e=>({x:()=>Um(e)})},{kernelName:ef,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ny(Bm(e,Vm(nA(n,1.5),2)))}}},{kernelName:of,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Mm(Um(n),"float32"),t:()=>Vm(e,Mm(n,e.dtype)),e:()=>Vm(e,Mm(ly(n),e.dtype))}}},Hk,{kernelName:df,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,Vm(n,rA(Km(1),n)))}}},{kernelName:uf,gradFunc:e=>({x:()=>Um(e)})},{kernelName:lf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(ag(Mm(n,"float32")),e)}}},{kernelName:cf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(ig(Mm(n,"float32")),e)}}},{kernelName:sf,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:o,size:a}=n,i=r.shape,[s,l]=QA(r,o,a),c=[];for(let u=0;u<e.rank;u++)c.push([s[u],i[u]-s[u]-l[u]]);return{x:()=>Ey(e,c)}}},{kernelName:mf,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:o}=n,a=Vm(e,r);return{logits:()=>rA(a,Vm(Rg(a,[o],true),r))}}},{kernelName:pf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,DT(n))}}},Wk,Wk,Uk,Uk,{kernelName:hf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Vm(Hm(Mm(n,"float32")),2))}}},{kernelName:bf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=Km(2);return{a:()=>Vm(e,Vm(o,rA(n,r))),b:()=>Vm(e,Vm(o,rA(r,n)))}}},{kernelName:xf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(e,Vm(Mm(n,"float32"),2))}}},{kernelName:Vf,gradFunc:e=>({x:()=>Um(e)})},{kernelName:Nf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=lA(n.shape,r.shape);return{a:()=>{let t=e;const r=sA(n.shape,o);return r.length>0&&(t=Rg(t,r)),_T(t,n.shape)},b:()=>{let t=e;const n=sA(r.shape,o);return n.length>0&&(t=Rg(t,n)),_T(ny(t),r.shape)}}}},{kernelName:ff,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,o=r.shape.slice(),{axis:a}=n;id(a,r.shape).forEach((e=>{o[e]=1}));const i=_T(e,o),s=Vm(i,Ty(r.shape,"float32"));return{x:()=>s}}},{kernelName:Ef,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Bm(e,Wm(ag(n)))}}},{kernelName:Rf,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vm(rA(Km(1),Wm(n)),e)}}},{kernelName:Df,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:o}=n;return{x:()=>{let t=Um(r);if(1===r.rank)for(let n=0;n<o[0];++n)t=Pm(t,FT(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)t=Pm(t,FT(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)t=Pm(t,FT(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)for(let s=0;s<o[3];++s)t=Pm(t,FT(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:Of,gradFunc:(e,t,n)=>{const r=n,{perm:o}=r,a=_g(o);return{x:()=>Qv(e,a)}}},{kernelName:Pf,gradFunc:(e,t,n)=>{const r=n,{axis:o}=r;return{value:()=>Sv(e,o)}}},{kernelName:zf,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=cA(t,Um(t)),r=Hg(e,n);let o=Ug(t,Km(0,"int32"));const a=r.rank-o.rank;for(let s=0;s<a;++s)o=Lg(o,s+1);o=sy(o,Ty(r.shape,"bool"));const i=Um(r);return Cg(o,r,i)}(e,n)}}},{kernelName:Bf,gradFunc:e=>({x:()=>Um(e)})}];for(const n of jk)tC(n);VC().prototype.abs=function(){return this.throwIfDisposed(),aA(this)},VC().prototype.acos=function(){return this.throwIfDisposed(),tT(this)},VC().prototype.acosh=function(){return this.throwIfDisposed(),nT(this)},VC().prototype.add=function(e){return this.throwIfDisposed(),Pm(this,e)},VC().prototype.all=function(e,t){return this.throwIfDisposed(),oT(this,e,t)},VC().prototype.any=function(e,t){return this.throwIfDisposed(),aT(this,e,t)},VC().prototype.argMax=function(e){return this.throwIfDisposed(),iT(this,e)},VC().prototype.argMin=function(e){return this.throwIfDisposed(),sT(this,e)},VC().prototype.asScalar=function(){return this.throwIfDisposed(),Zu(1===this.size,(()=>"The array must have only 1 element.")),_T(this,[])},VC().prototype.asType=function(e){return this.throwIfDisposed(),Mm(this,e)},VC().prototype.as1D=function(){return this.throwIfDisposed(),_T(this,[this.size])},VC().prototype.as2D=function(e,t){return this.throwIfDisposed(),_T(this,[e,t])},VC().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),_T(this,[e,t,n])},VC().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),_T(this,[e,t,n,r])},VC().prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),_T(this,[e,t,n,r,o])},VC().prototype.asin=function(){return this.throwIfDisposed(),lT(this)},VC().prototype.asinh=function(){return this.throwIfDisposed(),cT(this)},VC().prototype.atan=function(){return this.throwIfDisposed(),uT(this)},VC().prototype.atan2=function(e){return this.throwIfDisposed(),dT(this,e)},VC().prototype.atanh=function(){return this.throwIfDisposed(),pT(this)},VC().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),ST(this,e,t,n,r)},VC().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),LT(this,e,t)},VC().prototype.batchNorm=function(e,t,n,r,o){return this.throwIfDisposed(),PT(this,e,t,n,r,o)},VC().prototype.broadcastTo=function(e){return this.throwIfDisposed(),jT(this,e)},VC().prototype.cast=function(e){return this.throwIfDisposed(),Mm(this,e)},VC().prototype.ceil=function(){return this.throwIfDisposed(),KT(this)},VC().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),qT(this,e,t)},VC().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof BC&&(e=[e]),ET([this,...e],t)},VC().prototype.conv1d=function(e,t,n,r,o,a){return this.throwIfDisposed(),$T(this,e,t,n,r,o,a)},VC().prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),tg(this,e,t,n,r,o)},VC().prototype.conv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),QT(this,e,t,n,r,o,a)},VC().prototype.cos=function(){return this.throwIfDisposed(),ag(this)},VC().prototype.cosh=function(){return this.throwIfDisposed(),ig(this)},VC().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),sg(this,e,t,n)},VC().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),lg(this,e,t,n)},VC().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ug(this,e,t)},VC().prototype.depthwiseConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),dg(this,e,t,n,r,o,a)},VC().prototype.dilation2d=function(e,t,n,r,o){return this.throwIfDisposed(),hg(this,e,t,n,r,o)},VC().prototype.divNoNan=function(e){return this.throwIfDisposed(),Gg(this,e)},VC().prototype.div=function(e){return this.throwIfDisposed(),Bm(this,e)},VC().prototype.dot=function(e){return this.throwIfDisposed(),mg(this,e)},VC().prototype.elu=function(){return this.throwIfDisposed(),Tg(this)},VC().prototype.equal=function(e){return this.throwIfDisposed(),fg(this,e)},VC().prototype.erf=function(){return this.throwIfDisposed(),yg(this)},VC().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Mg(this,e,t)},VC().prototype.exp=function(){return this.throwIfDisposed(),Og(this)},VC().prototype.expandDims=function(e){return this.throwIfDisposed(),Lg(this,e)},VC().prototype.expm1=function(){return this.throwIfDisposed(),Pg(this)},VC().prototype.fft=function(){return this.throwIfDisposed(),vv(this)},VC().prototype.flatten=function(){return this.throwIfDisposed(),_T(this,[this.size])},VC().prototype.floor=function(){return this.throwIfDisposed(),Vg(this)},VC().prototype.floorDiv=function(e){return this.throwIfDisposed(),zm(this,e)},VC().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Hg(this,e,t,n)},VC().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ug(this,e)},VC().prototype.greater=function(e){return this.throwIfDisposed(),Wg(this,e)},VC().prototype.ifft=function(){return this.throwIfDisposed(),bv(this)},VC().prototype.irfft=function(){return this.throwIfDisposed(),xv(this)},VC().prototype.isFinite=function(){return this.throwIfDisposed(),Kg(this)},VC().prototype.isInf=function(){return this.throwIfDisposed(),qg(this)},VC().prototype.isNaN=function(){return this.throwIfDisposed(),Xg(this)},VC().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Yg(this,e)},VC().prototype.lessEqual=function(e){return this.throwIfDisposed(),Jg(this,e)},VC().prototype.less=function(e){return this.throwIfDisposed(),Zg(this,e)},VC().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),$g(this,e,t,n,r)},VC().prototype.logSigmoid=function(){return this.throwIfDisposed(),oy(this)},VC().prototype.logSoftmax=function(e){return this.throwIfDisposed(),ay(this,e)},VC().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),iy(this,e,t)},VC().prototype.log=function(){return this.throwIfDisposed(),ey(this)},VC().prototype.log1p=function(){return this.throwIfDisposed(),ty(this)},VC().prototype.logicalAnd=function(e){return this.throwIfDisposed(),sy(this,e)},VC().prototype.logicalNot=function(){return this.throwIfDisposed(),ly(this)},VC().prototype.logicalOr=function(e){return this.throwIfDisposed(),cy(this,e)},VC().prototype.logicalXor=function(e){return this.throwIfDisposed(),uy(this,e)},VC().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),RT(this,e,t,n)},VC().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),fy(this,e,t,n,r)},VC().prototype.max=function(e,t){return this.throwIfDisposed(),Ng(this,e,t)},VC().prototype.maximum=function(e){return this.throwIfDisposed(),cA(this,e)},VC().prototype.mean=function(e,t){return this.throwIfDisposed(),my(this,e,t)},VC().prototype.min=function(e,t){return this.throwIfDisposed(),Eg(this,e,t)},VC().prototype.minimum=function(e){return this.throwIfDisposed(),yy(this,e)},VC().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),vy(this,e,t)},VC().prototype.mod=function(e){return this.throwIfDisposed(),by(this,e)},VC().prototype.mul=function(e){return this.throwIfDisposed(),Vm(this,e)},VC().prototype.neg=function(){return this.throwIfDisposed(),ny(this)},VC().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Fg(this,e,t,n)},VC().prototype.notEqual=function(e){return this.throwIfDisposed(),Iy(this,e)},VC().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),_y(this,e,t,n)},VC().prototype.onesLike=function(){return this.throwIfDisposed(),Sy(this)},VC().prototype.pad=function(e,t){return this.throwIfDisposed(),Ey(this,e,t)},VC().prototype.pool=function(e,t,n,r,o,a){return this.throwIfDisposed(),Ly(this,e,t,n,r,o,a)},VC().prototype.pow=function(e){return this.throwIfDisposed(),nA(this,e)},VC().prototype.prelu=function(e){return this.throwIfDisposed(),Py(this,e)},VC().prototype.prod=function(e,t){return this.throwIfDisposed(),zy(this,e,t)},VC().prototype.reciprocal=function(){return this.throwIfDisposed(),tv(this)},VC().prototype.relu=function(){return this.throwIfDisposed(),nv(this)},VC().prototype.relu6=function(){return this.throwIfDisposed(),rv(this)},VC().prototype.reshapeAs=function(e){return this.throwIfDisposed(),_T(this,e.shape)},VC().prototype.reshape=function(e){return this.throwIfDisposed(),_T(this,e)},VC().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Hb(this,e,t,n)},VC().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Wb(this,e,t,n)},VC().prototype.reverse=function(e){return this.throwIfDisposed(),ov(this,e)},VC().prototype.rfft=function(){return this.throwIfDisposed(),kv(this)},VC().prototype.round=function(){return this.throwIfDisposed(),cv(this)},VC().prototype.rsqrt=function(){return this.throwIfDisposed(),uv(this)},VC().prototype.selu=function(){return this.throwIfDisposed(),dv(this)},VC().prototype.separableConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),pv(this,e,t,n,r,o,a)},VC().prototype.sigmoid=function(){return this.throwIfDisposed(),DT(this)},VC().prototype.sign=function(){return this.throwIfDisposed(),fv(this)},VC().prototype.sin=function(){return this.throwIfDisposed(),Cv(this)},VC().prototype.sinh=function(){return this.throwIfDisposed(),Gv(this)},VC().prototype.slice=function(e,t){return this.throwIfDisposed(),FT(this,e,t)},VC().prototype.softmax=function(e){return this.throwIfDisposed(),yv(this,e)},VC().prototype.softplus=function(){return this.throwIfDisposed(),ry(this)},VC().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Oy(this,e,t)},VC().prototype.split=function(e,t){return this.throwIfDisposed(),wv(this,e,t)},VC().prototype.sqrt=function(){return this.throwIfDisposed(),Hm(this)},VC().prototype.square=function(){return this.throwIfDisposed(),Wm(this)},VC().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Iv(this,e)},VC().prototype.squeeze=function(e){return this.throwIfDisposed(),_v(this,e)},VC().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof BC?[this,e]:[this,...e];return Sv(n,t)},VC().prototype.step=function(e){return this.throwIfDisposed(),Nv(this,e)},VC().prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return this.throwIfDisposed(),Ev(this,e,t,n,r,o,a,i,s)},VC().prototype.sub=function(e){return this.throwIfDisposed(),rA(this,e)},VC().prototype.sum=function(e,t){return this.throwIfDisposed(),Rg(this,e,t)},VC().prototype.tan=function(){return this.throwIfDisposed(),Rv(this)},VC().prototype.tanh=function(){return this.throwIfDisposed(),MT(this)},VC().prototype.tile=function(e){return this.throwIfDisposed(),zg(this,e)},VC().prototype.toBool=function(){return this.throwIfDisposed(),Mm(this,"bool")},VC().prototype.toFloat=function(){return this.throwIfDisposed(),Mm(this,"float32")},VC().prototype.toInt=function(){return this.throwIfDisposed(),Mm(this,"int32")},VC().prototype.topk=function(e,t){return this.throwIfDisposed(),Hv(this,e,t)},VC().prototype.transpose=function(e){return this.throwIfDisposed(),Qv(this,e)},VC().prototype.unique=function(e){return this.throwIfDisposed(),Uv(this,e)},VC().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),jv(this,e,t)},VC().prototype.unstack=function(e){return this.throwIfDisposed(),Kv(this,e)},VC().prototype.where=function(e,t){return this.throwIfDisposed(),Cg(e,this,t)},VC().prototype.zerosLike=function(){return this.throwIfDisposed(),Um(this)};class Kk extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Kk.prototype)}}class qk extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qk.prototype)}}class Xk extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Xk.prototype)}}class Yk extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Yk.prototype)}}class Zk extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zk.prototype)}}Error;class Jk{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function Qk(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function $k(e,t){if(!e)throw new Zk(t)}function eI(e,t){let n=0;for(const r of e)r===t&&n++;return n}function tI(e){return 1===e.length?e[0]:e}function nI(e){return Array.isArray(e)?e:[e]}function rI(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function oI(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let aI={};function iI(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function sI(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>sI(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?sI(t):e[n]=t.value)}}}function lI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const o=e;let a;if(o in n)a=n[o];else if(o in aI)a=aI[o];else if(a=t[o],null==a)throw new Xk("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return a}{const a=e;if(null==a.className||null==a.config)throw new Xk("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(a),".\n")+"'className' and 'config' must set.");const i=a.className;let s,l;if(i in n?[s,l]=n[i]:i in aI?[s,l]=aI.className:i in t&&([s,l]=t[i]),null==s)throw new Xk("Unknown ".concat(r,": ").concat(i,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(aI))e[n]=aI[n];for(const o of Object.keys(n))e[o]=n[o];a.config.customObjects=e;const t=Object.assign({},aI);for(const o of Object.keys(n))aI[o]=n[o];sI(a.config);const r=l(s,a.config,n,o);return aI=Object.assign({},t),r}{const e=Object.assign({},aI);for(const r of Object.keys(n))aI[r]=n[r];const t=new s(a.config);return aI=Object.assign({},e),t}}}function cI(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function uI(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function dI(e){if(null==e)throw new Xk("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function pI(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Xk("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function hI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return $k(n>=0),$k(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function fI(e,t){Array.isArray(e)?(Zu(e.length>0,(()=>"".concat(t," is unexpectedly an empty array."))),e.forEach(((e,n)=>fI(e,"element ".concat(n+1," of ").concat(t))))):Zu(Number.isInteger(e)&&e>0,(()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(CI(e),".")))}function CI(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>CI(e))).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function GI(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let mI=0;function AI(){return mI++}const TI={};function gI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in TI||(TI[e]=0),TI[e]+=1,e+TI[e].toString()}const yI=["channelsFirst","channelsLast"],vI=["nearest","bilinear"],bI=["valid","same","causal"],xI=["max","avg"],wI=["sum","mul","concat","ave"],kI=new Map;function II(e){pI(yI,"DataFormat",e)}function _I(e){pI(bI,"PaddingMode",e)}function SI(e){pI(xI,"PoolMode",e)}const NI=[],EI="/";function RI(e,t){NI.push(e);try{const e=t();return NI.pop(),e}catch(n){throw NI.pop(),n}}function DI(e){if(!OI(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===NI.length?"":NI.join(EI)+EI)+e}function FI(e){if(!OI(e))throw new Error("Not a valid tensor name: '"+e+"'");kI.has(e)||kI.set(e,0);const t=kI.get(e);if(kI.set(e,kI.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return kI.set(n,1),n}return e}const MI=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function OI(e){return!!e.match(MI)}function LI(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let o=t;o<n;++o)r*=e[o];return r}function PI(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function zI(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function BI(e,t){if(t<e)throw new Xk("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let VI;function HI(){return null==VI&&(VI=EG().epsilon()),VI}function WI(e,t){return Mm(e,t)}function UI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),_T(e,n)}function jI(e,t,n){return IG((()=>{switch(e.rank){case 1:return mv(e,t,n);case 2:return Av(e,[t,0],[n,e.shape[1]]);case 3:return Tv(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return gv(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return FT(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return FT(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Xk("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function KI(e,t,n){return IG((()=>{switch(e.rank){case 1:return mv(e,t,n);case 2:return Av(e,[0,t],[e.shape[0],n]);case 3:return Tv(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return gv(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Xk("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function qI(e,t,n,r){return IG((()=>{switch(e.rank){case 1:return mv(e,t,n);case 2:switch(r){case 1:return jI(e,t,n);case 2:return KI(e,t,n);default:throw new Xk("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return jI(e,t,n);case 2:return Tv(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return KI(e,t,n);default:throw new Xk("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return jI(e,t,n);case 2:return gv(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return gv(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return KI(e,t,n);default:throw new Xk("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new Xk("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function XI(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),ET(e,n)}function YI(e,t){switch(e.rank){case 1:return XT([e,t]);case 2:return YT([e,t],0);case 3:return ZT([e,t],0);case 4:return JT([e,t],0);default:throw new Xk("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function ZI(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Xk("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return zg(e,t)}function JI(e){return Yy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function QI(e,t,n,r){if(e.rank<2||t.rank<2)throw new Yk("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Yk("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return Gb({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?t_(e.rank,r,"channelsLast"):null,activation:n})}{const o=e.shape.slice(),a=o.pop();e=_T(e,[-1,a]);const i=t.shape.slice(),s=i.pop(),l=i.pop(),c=[...i,s],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=_T(Qv(t,u),[l,-1]);const d=[...o,...c];return _T(Gb({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?t_(e.rank,r,"channelsLast"):null,activation:n}),d)}}function $I(e,t,n){return IG((()=>(t=Array.isArray(t)?Dv(t,"int32"):Mm(t,"int32"),Hg(e,t,n))))}function e_(e){return Vm(e,e)}function t_(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Xk("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?_T(t,[1,r[0],1,1,1]):_T(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?_T(t,[1,1,1,1,r[0]]):_T(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?_T(t,[1,r[0],1,1]):_T(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?_T(t,[1,1,1,r[0]]):_T(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?_T(t,[1,r[0],1]):_T(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?_T(t,[1,1,r[0]]):_T(t,[1].concat(r))}else if(e<3)return t;throw new Xk("Unsupported input rank by biasAdd: ".concat(t.rank))}function n_(e,t,n){return IG((()=>(null==n&&(n="channelsLast"),II(n),Pm(e,t_(e.rank,t,n)))))}function r_(e,t,n,r){return IG((()=>rb(e,t,n,r)))}function o_(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const a_=["fanIn","fanOut","fanAvg"],i_=["normal","uniform","truncatedNormal"];class s_ extends Ym{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class l_ extends s_{apply(e,t){return Ay(e,t)}}l_.className="Zeros",Jm(l_);class c_ extends s_{apply(e,t){return Ty(e,t)}}c_.className="Ones",Jm(c_);class u_ extends s_{constructor(e){if(super(),"object"!==typeof e)throw new Xk("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new Xk("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return IG((()=>Vm(Km(this.value),Ty(e,t))))}getConfig(){return{value:this.value}}}u_.className="Constant",Jm(u_);class d_ extends s_{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Jy(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}d_.className="RandomUniform",Jm(d_);class p_ extends s_{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Yk("randomNormal does not support dType ".concat(t,"."));return JI(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}p_.className="RandomNormal",Jm(p_);class h_ extends s_{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Yk("truncatedNormal does not support dType ".concat(t,"."));return Wv(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}h_.className="TruncatedNormal",Jm(h_);class f_ extends s_{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return IG((()=>{if(2!==e.length||e[0]!==e[1])throw new Xk("Identity matrix initializer can only be used for 2D square matrices.");return Vm(this.gain,Bg(e[0]))}))}getConfig(){return{gain:this.gain}}}f_.className="Identity",Jm(f_);class C_ extends s_{constructor(e){if(super(),e.scale<0)throw new Xk("scale must be a positive float. Got: ".concat(e.scale));var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,pI(a_,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){pI(i_,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(II(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=LI(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=LI(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=LI(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],o=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,o):a/=Math.max(1,(r+o)/2),"normal"===this.distribution){const n=Math.sqrt(a);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Yk("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Wv(e,0,n,t,this.seed)}{const n=Math.sqrt(3*a);return Jy(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}C_.className="VarianceScaling",Jm(C_);class G_ extends C_{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C_.className}}G_.className="GlorotUniform",Jm(G_);class m_ extends C_{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C_.className}}m_.className="GlorotNormal",Jm(m_);class A_ extends C_{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C_.className}}A_.className="HeNormal",Jm(A_);class T_ extends C_{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C_.className}}T_.className="HeUniform",Jm(T_);class g_ extends C_{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C_.className}}g_.className="LeCunNormal",Jm(g_);class y_ extends C_{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C_.className}}y_.className="LeCunUniform",Jm(y_);class v_ extends s_{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return IG((()=>{if(e.length<2)throw new Yk("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=$u(e.slice(0,-1)),r=e[e.length-1],o=n*r;o>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(o,") elements: ")+"Slowness may result.");const a=JI([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=mx.qr(a,!1);let s=i[0];const l=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=Vm(s,l.sign()),n<r&&(s=s.transpose()),Vm(Km(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}v_.className="Orthogonal",Jm(v_);const b_={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function x_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lI(e,Zm.getMap().classNameMap,t,"initializer")}function w_(e){return iI(e)}function k_(e){if("string"===typeof e){const t=e in b_?b_[e]:e;if("GlorotNormal"===t)return new m_;if("GlorotUniform"===t)return new G_;if("HeNormal"===t)return new A_;if("HeUniform"===t)return new T_;if("LeCunNormal"===t)return new g_;if("LeCunUniform"===t)return new y_;{const e={};return e.className=t,e.config={},x_(e)}}return e instanceof s_?e:x_(e)}function I_(e){return Array.isArray(e)&&Array.isArray(e[0])}function __(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function S_(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Xk("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function N_(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Xk("Expected exactly 1 Shape; got ".concat(e.length))}return e}function E_(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const R_="Variable";class D_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R_,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=AI(),n=null==n?R_:n,this.originalName=DI(n),this.name=FI(this.originalName),this.trainable_=r,this.constraint=o,this.val=Xv(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function F_(e){return e.map((e=>e.read()))}function M_(e){e.forEach((e=>{e[0].write(e[1])}))}class O_{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class L_{constructor(e,t,n,r,o,a,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=i,this.id=AI(),null!=a&&(this.originalName=DI(a),this.name=FI(this.originalName)),this.rank=t.length}}let P_=0;class z_{constructor(e,t){this.callArgs=t,this.id=P_++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let B_=0;class V_ extends Ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=B_++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=rI(e)+"_"+gI(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new qk("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Xk("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return tI(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return tI(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Kk("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Kk("Layer ".concat(this.name)+" is not connected, no input to return.");return tI(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Kk("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Kk("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return tI(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=nI(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=nI(this.inputSpec);if(t.length!==n.length)throw new Xk("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],o=n[r];if(null==o)continue;const a=e.rank;if(null!=o.ndim&&a!==o.ndim)throw new Xk("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(o.ndim,", found ndim=").concat(a));if(null!=o.maxNDim&&a>o.maxNDim)throw new Xk("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(o.maxNDim,", found ndim=").concat(a));if(null!=o.minNDim&&a<o.minNDim)throw new Xk("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(o.minNDim,", found ndim=").concat(a,"."));if(null!=o.dtype&&e.dtype!==o.dtype)throw new Xk("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(o.dtype,", found dtype=").concat(e.dtype,"."));if(o.axes){const t=e.shape;for(const e in o.axes){const n=Number(e),a=o.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=a&&-1===[a,null].indexOf(i))throw new Xk("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(a," but got shape ").concat(t,"."))}}if(null!=o.shape)for(let t=0;t<o.shape.length;++t){const n=o.shape[t],a=e.shape[t];if(null!=n&&null!=a&&n!==a)throw new Xk("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(o.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=nI(e),r=function(e){let t=!0;for(const n of nI(e))if(!(n instanceof L_)){t=!1;break}return t}(e),o=function(e){let t=!0;for(const n of nI(e))if(n instanceof L_){t=!1;break}return t}(e);if(r===o)throw new Xk("Arguments to apply() must be all SymbolicTensors or all Tensors");return RI(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of nI(e))t.push(n.shape);this.build(tI(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const o=nI(r),a=[];for(let e of o)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=tI(a),null!=this.activityRegularizer)throw new Yk("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=nI(e);const t=[];for(const n of e)t.push(n.shape);return tI(t)}(e),r=this.computeOutputShape(n);let o;const a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),o=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new L_(a,n,this,nI(e),t,this.name,r))):new L_(a,r,this,nI(e),t,this.name),this.addInboundNode(e,o,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new Yk("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Kk("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Kk("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new qk("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return E_(this.weights)}build(e){this.built=!0}getWeights(){return F_(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){IG((()=>{const t=this.weights;if(t.length!==e.length)throw new Xk('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=F_(t);for(let o=0;o<r.length;++o){const a=r[o],i=t[o],s=e[o];if(!ed(a.shape,s.shape))throw new Xk("Layer weight shape ".concat(a.shape," ")+"not compatible with provided weight shape ".concat(s.shape));n.push([i,s])}M_(n)}))}addWeight(e,t,n,r,o,a,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Xk("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():k_("zeros"));const l=r.apply(t,n),c=new D_(l,n,e,a,i);return l.dispose(),null!=o&&this.addLoss((()=>o.apply(c.read()))),null==a&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=nI(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),o=nI(t),a=nI(r);if(o.length!==a.length)throw new Error("".concat(this.name," outputs ").concat(o.length," tensors ")+"but ".concat(o.length," masks for those tensors"));for(let i=0;i<o.length;i++)o[i].kerasMask=a[i]}addInboundNode(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=nI(e);t=nI(t),n=nI(n),r=nI(r),o=__(o),a=__(a);const l=[],c=[],u=[];for(const d of s)l.push(d.sourceLayer),c.push(d.nodeIndex),u.push(d.tensorIndex);new z_({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:a},i);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function H_(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=H_(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class W_ extends V_{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:gI("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Xk("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Xk("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Xk("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new L_(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new z_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Xk("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}W_.className="InputLayer",Jm(W_);class U_{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof U_)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Xk("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Mm(t,e.dtype)}catch(fJ){throw new Xk("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof L_){if(null==this.id2Value[e.id])throw new Xk("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new Xk("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof L_){if(null==this.id2Value[e.id])throw new Xk("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new Xk("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&_G(this.id2Mask)}}const j_=new Jk,K_=new Jk;function q_(e,t,n,r){const o=null!=n&&n.training,a=Array.isArray(e),i=a?e:[e],s=i.map((e=>e.name)),l=[],c=t.names();for(const f of s)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=s.join(",")+"|"+t.names().sort().join(",");let d,p=j_.get(u);if(null==p){const e=function(e,t){Zu(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const o=Y_(e[0],t);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const a of e){const{sorted:e,recipientMap:i}=Y_(a,t);for(const t of e)o.has(t.name)||(n.push(t),o.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:X_(r)}}(i,t);p=e.sorted,d=e.recipientCounts,j_.put(u,p),K_.put(u,d)}d={},o||Object.assign(d,K_.get(u));const h=new U_(t);for(let f=0;f<p.length;++f){if(null!=r){const e=kG().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=p[f],a=e.sourceLayer;if(a instanceof W_)continue;const i=[],c=[],u=[];let C=!1;for(const n of e.inputs){const e=h.getValue(n),r=h.getMask(n);i.push(e),c.push(r),null!=r&&(C=!0),o||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}C&&((n=n||{}).mask=c[0]);const G=nI(a.apply(i,n));let m=null;a.supportsMasking&&(m=a.computeMask(i,c));const A=Z_(e),T=Array.isArray(A)?A:[A];for(let t=0;t<T.length;++t){h.hasKey(T[t])||h.add(T[t],G[t],Array.isArray(m)?m[0]:m);const e=s.indexOf(T[t].name);-1!==e&&(l[e]=G[t])}o||_G(u)}return h.disposeMasks(),a?l:l[0]}function X_(e){const t={};for(const n in e)t[n]=e[n].size;return t}function Y_(e,t){const n=new Set,r=[],o={};for(const s of t.names())n.add(s);const a=[],i=[];for(a.push(e);a.length>0;){const e=a[a.length-1];if(n.has(e.name)){a.pop();continue}const t=i[i.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(a.length-1);for(const t of e.inputs)null==o[t.name]&&(o[t.name]=new Set),o[t.name].add(e.name),n.has(t.name)||a.push(t)}}return{sorted:r,recipientMap:o}}function Z_(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function J_(e,t){return IG((()=>Hm(Rg(Vm(e,e),t,!0))))}Nd().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=j_&&j_.setMaxEntries(e),null!=K_&&K_.setMaxEntries(e)}));class Q_ extends Ym{getConfig(){return{}}}class $_ extends Q_{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return IG((()=>{const t=J_(e,this.axis),n=qT(t,0,this.maxValue);return Vm(e,Bm(n,Pm(HI(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}$_.className="MaxNorm",Jm($_);class eS extends Q_{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return IG((()=>Bm(e,Pm(HI(),J_(e,this.axis)))))}getConfig(){return{axis:this.axis}}}eS.className="UnitNorm",Jm(eS);class tS extends Q_{apply(e){return nv(e)}}tS.className="NonNeg",Jm(tS);class nS extends Q_{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return IG((()=>{const t=J_(e,this.axis),n=Pm(Vm(this.rate,qT(t,this.minValue,this.maxValue)),Vm(1-this.rate,t));return Vm(e,Bm(n,Pm(HI(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}nS.className="MinMaxNorm",Jm(nS);const rS={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function oS(e){return iI(e)}function aS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lI(e,Zm.getMap().classNameMap,t,"constraint")}function iS(e){if(null==e)return null;if("string"===typeof e){return aS({className:e in rS?rS[e]:e,config:{}})}return e instanceof Q_?e:aS(e)}async function sS(e){if(null==e)return;const t=[],n=[],r=[];for(const o in e){const a=e[o];if("number"!==typeof a){const e=a;t.push(e.data()),n.push(o),r.push(e)}}if(t.length>0){const o=await Promise.all(t);for(let t=0;t<o.length;++t)e[n[t]]=o[t][0];_G(r)}}function lS(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var cS;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(cS||(cS={}));class uS{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class dS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class pS extends uS{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const o=IG((()=>Pm(this.totals[r],Vm(e,n))));this.totals[r]=o,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:IG((()=>{const e=Vm(Bm(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),SG(t[n])})))}}class hS extends uS{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const o in this.history){const r=this.history[o];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const i=r[a];e.push(i.data()),t.push(o),n.push(a)}}const r=await Promise.all(e);for(let o=0;o<r.length;++o){this.history[t[o]][n[o]].dispose(),this.history[t[o]][n[o]]=r[o][0]}}}class fS extends uS{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||bx,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");hd(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,o=null!=n?n():gC();return function(){const a=null!=n?n():gC();return a-o<t||(o=a,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await sS(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await sS(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await sS(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await sS(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await sS(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):hd(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await sS(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await sS(e),await this.trainEnd(e))}}function CS(e,t){if(null==e&&(e={}),e instanceof uS)return[e];if(Array.isArray(e)&&e[0]instanceof uS)return e;return nI(e).map((e=>new fS(e,t)))}class GS{constructor(){}static registerCallbackConstructor(e,t){Zu(e>=0&&Number.isInteger(e),(()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e))),GS.checkForDuplicate(t),null==GS.constructors[e]&&(GS.constructors[e]=[]),GS.constructors[e].push(t)}static checkForDuplicate(e){for(const t in GS.constructors){GS.constructors[+t].forEach((t=>{if(t===e)throw new Xk("Duplicate callback constructor.")}))}}static clear(){GS.constructors={}}static createCallbacks(e){const t=[];for(const n in GS.constructors){const r=+n;e>=r&&t.push(...GS.constructors[r])}return t.map((e=>new e))}}function mS(e,t,n,r,o,a,i,s,l){const c=new hS,u=[new pS,...GS.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const d=new dS(u);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:a,batchSize:i,verbose:t,doValidation:s,metrics:l}),{callbackList:d,history:c}}function AS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return lI(e,Zm.getMap().classNameMap,t,"layer",n)}function TS(e,t){return IG((()=>{"float32"!==e.dtype&&(e=Mm(e,"float32"));const n=Rg(e_(e),t,!0),r=eA(n.shape,HI()),o=Hm(cA(n,r));return Bm(e,o)}))}function gS(e,t){return IG((()=>my(e_(rA(t,e)),-1)))}function yS(e,t){return IG((()=>my(aA(rA(t,e)),-1)))}function vS(e,t){return IG((()=>{const n=rA(e,t),r=qT(aA(e),HI(),Number.MAX_VALUE),o=aA(Bm(n,r));return Vm(100,my(o,-1))}))}function bS(e,t){return IG((()=>{const n=qT(t,HI(),Number.MAX_VALUE),r=ey(Pm(1,n)),o=qT(e,HI(),Number.MAX_VALUE),a=ey(Pm(1,o));return my(e_(rA(r,a)),-1)}))}function xS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return IG((()=>{if(n)t=yv(t);else{const e=Rg(t,t.shape.length-1,!0);t=Bm(t,e)}return t=qT(t,HI(),1-HI()),ny(Rg(Vm(Mm(e,"float32"),ey(t)),t.shape.length-1))}))}function wS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return IG((()=>{const r=Mm(Vg(function(e){const t=[LI(e.shape)];return _T(e,t)}(e)),"int32"),o=(t=qT(t,HI(),1-HI())).shape;return xS(_T(_y(r,o[o.length-1]),o),t,n)}))}function kS(e,t){return IG((()=>{let n;return n=qT(t,HI(),1-HI()),n=ey(Bm(n,rA(1,n))),my(function(e,t){if(!ed(e.shape,t.shape))throw new Xk("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return IG((()=>{const n=nv(t),r=ny(aA(t));return Pm(rA(n,Vm(t,e)),ty(Og(r)))}))}(e,n),-1)}))}function IS(e,t){return IG((()=>{const n=qT(e,HI(),1),r=qT(t,HI(),1);return Rg(Vm(e,ey(Bm(n,r))),-1)}))}function _S(e,t){return IG((()=>{const n=TS(e,-1),r=TS(t,-1),o=Vm(n,r);return ny(Rg(o,-1))}))}GS.constructors={};const SS={meanSquaredError:gS,meanAbsoluteError:yS,meanAbsolutePercentageError:vS,meanSquaredLogarithmicError:bS,squaredHinge:function(e,t){return IG((()=>{const n=cA(0,rA(1,Vm(e,t)));return my(e_(n),-1)}))},hinge:function(e,t){return IG((()=>{const n=cA(0,rA(1,Vm(e,t)));return my(n,-1)}))},categoricalHinge:function(e,t){return IG((()=>{const n=Rg(Vm(e,t),-1),r=Ng(Vm(rA(1,e),t),-1);return cA(0,Pm(1,rA(r,n)))}))},logcosh:function(e,t){return IG((()=>{const n=Math.log(2),r=rA(t,e),o=rA(Pm(r,ry(Vm(-2,r))),n);return my(o,-1)}))},categoricalCrossentropy:xS,sparseCategoricalCrossentropy:wS,binaryCrossentropy:kS,kullbackLeiblerDivergence:IS,poisson:function(e,t){return IG((()=>{const n=ey(Pm(HI(),t));return my(rA(t,Vm(e,n)),-1)}))},cosineProximity:_S};function NS(e){if("string"===typeof e){if(e in SS)return SS[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Xk(t)}return e}function ES(e,t){return IG((()=>{const n=Vm(.5,Sy(t)),r=WI(Wg(t,n),e.dtype);return my(fg(e,r),-1)}))}function RS(e,t){return IG((()=>WI(fg(iT(e,-1),iT(t,-1)),"float32")))}function DS(e,t){return IG((()=>Mm(Rg(sy(fg(e,1),fg(t,1))),"float32")))}function FS(e,t){return kS(e,t)}function MS(e,t){return e.rank===t.rank&&(e=_v(e,[e.rank-1])),(t=iT(t,-1)).dtype!==e.dtype&&(t=Mm(t,e.dtype)),Mm(fg(e,t),"float32")}const OS=xS,LS=wS,PS={binaryAccuracy:ES,categoricalAccuracy:RS,precision:function(e,t){return IG((()=>{const n=DS(e,t),r=function(e,t){return IG((()=>Mm(Rg(sy(fg(e,0),fg(t,1))),"float32")))}(e,t),o=Pm(n,r);return Mm(Cg(Wg(o,0),Bm(n,o),0),"float32")}))},categoricalCrossentropy:OS,sparseCategoricalCrossentropy:LS,mse:gS,MSE:gS,mae:yS,MAE:yS,mape:vS,MAPE:vS,cosine:_S};function zS(e){if("string"===typeof e&&e in PS)return PS[e];if("string"!==typeof e&&null!=e)return e;throw new Xk("Unknown metric ".concat(e))}function BS(e){if($k(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(SS))if(SS[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(PS))if(PS[n]===e){t=n;break}return void 0!==t?t:e.name}}const VS=1048576;function HS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!WS(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>VS&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(VS,"."))}}function WS(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!WS(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!WS(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function US(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const o=function(e){let t=!0;const n=[],r=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||1===o.length&&o[0].inboundLayers.length>1){t=!1;break}r.push(...o)}if(t)for(const o of e.layers){let e=!1;for(const n of o.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!o){a.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),jS(a,n,r),r("=".repeat(t));const s=e.layers;for(let u=0;u<s.length;++u)o?KS(s[u],n,r):qS(s[u],n,i,r),r((u===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?E_(e.collectedTrainableWeights):E_(e.trainableWeights);return t}(e),c=E_(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function jS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let o=0;o<e.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=e[o],r=r.slice(0,t[o]),r+=" ".repeat(t[o]-r.length);n(r)}function KS(e,t,n){let r,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(fJ){o="multiple"}try{r=JSON.stringify(e.outputShape)}catch(fJ){r="multiple"}const a=e.name,i=e.getClassName();jS(["".concat(a," (").concat(i,")"),o,r,e.countParams().toString()],t,n)}function qS(e,t,n,r){let o,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(fJ){a="multiple"}try{o=JSON.stringify(e.outputShape)}catch(fJ){o="multiple"}const i=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];i.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const s=e.name,l=e.getClassName(),c=0===i.length?"":i[0];jS(["".concat(s," (").concat(l,")"),a,o,e.countParams().toString(),c],t,r);for(let u=1;u<i.length;++u)jS(["","","","",i[u]],t,r)}function XS(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function YS(e,t){if(null===e)return null;if("string"===typeof e)return oI(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];XS(t,o,r)?n.push(r):n.push(YS(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=oI(n);t[e]=YS(r,e)}}return t}}function ZS(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return rI(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];XS(t,o,r)?n.push(r):n.push(ZS(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],o=rI(n);t[o]="name"!==n&&"className"!==n||"string"!==typeof r?ZS(r,n):r}return t}}const JS="4.17.0";class QS extends V_{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=gI(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],uI(this.inputs).length!==this.inputs.length)throw new Xk("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map((e=>e.name))));uI(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map((e=>e.name)))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const m of this.outputs){const e=m.sourceLayer,t=m.nodeIndex,n=m.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const m of this.inputs){const e=m.sourceLayer,t=m.nodeIndex,n=m.tensorIndex;$k(0===t,"input layer has >1 nodes"),$k(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let m=0;m<this.inputLayers.length;m++){const t=this.inputLayers[m];if(!(t instanceof W_))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const m of this.outputLayers)this.outputNames.push(m.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},o={},a={},i=[],s=(e,t,n,r,o,l)=>{null!=r&&null!=o&&null!=l||(r=e.sourceLayer,o=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[o];if(-1!==n.indexOf(c))throw new qk("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(QS.nodeKey(r,o)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let a=0;a<u;a++){const e=c.inputTensors[a],r=c.inboundLayers[a],o=c.nodeIndices[a],i=c.tensorIndices[a];s(e,t,n,r,o,i)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);i.push(c)},l=[],c=[];for(const m of this.outputs)s(m,l,c);const u=i.slice().reverse();for(const m of u){n[m.id]=m,m.id in t||(t[m.id]=0);let e=t[m.id];const a=null==r[m.outboundLayer.id]?0:r[m.outboundLayer.id];e=Math.max(e,a),r[m.outboundLayer.id]=e,o[m.outboundLayer.id]=m.outboundLayer,t[m.id]=e;for(let r=0;r<m.inboundLayers.length;r++){const o=m.inboundLayers[r],a=m.nodeIndices[r],i=o.inboundNodes[a],s=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,s),n[i.id]=i}}const d={};for(const m in t){const e=t[m];e in d||(d[e]=[]),d[e].push(n[m])}const p={};for(const m in r){const e=r[m];e in p||(p[e]=[]),p[e].push(o[m])}let h=Object.keys(p).map((e=>parseInt(e,10))).sort(cI);this.layers=[];for(const m of h){const e=p[m];e.sort(((e,t)=>{const n=a[e.id],r=a[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof QS&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=p,h=Object.keys(d).map((e=>parseInt(e,10))).sort(cI);const f=this.inputs.slice(),C=[];for(const m of h)for(const e of d[m]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new qk("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(C));for(const t of e.outputTensors)f.push(t);C.push(t.name)}}this.nodesByDepth=d;const G=this.layers.map((e=>e.name));for(const m of G){const e=G.filter((e=>e===m)).length;if(1!==e)throw new qk('The name "'.concat(m,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(G))}this.outboundNodes=[],this.inboundNodes=[],new z_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Xk("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const o=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);o&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const a=o?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[a])throw new Xk("Duplicate weight name: ".concat(a));n[a]=t,r++}const a=[];for(const i in e){let r=i;if(null==n[i]){const e=i.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[i]]);else if(t)throw new Xk("Provided weight data has no target variable: ".concat(i));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new Xk("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}M_(a)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],o=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");o!==t&&(e[o]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(JS),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ZS(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return IG((()=>{e=nI(e);const n=new U_;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return q_(this.outputs,n,t)}))}computeMask(e,t){return IG((()=>{let n;return e=nI(e),n=null==t?Qk(null,e.length):nI(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=__(e);if(t.length!==this.inputLayers.length)throw new Xk("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],r=t[i];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(cI);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],o=t.nodeIndices[i],a=t.tensorIndices[i],s=n["".concat(e.name,"_").concat(o,"_").concat(a)];r.push(s)}const o=__(e.computeOutputShape(tI(r))),a=e.inboundNodes.indexOf(t);for(let t=0;t<o.length;t++){n["".concat(e.name,"_").concat(a,"_").concat(t)]=o[t]}}}const o=[],a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],r="".concat(e.name,"_").concat(t,"_").concat(n);a.push(r)}for(let i=0;i<a.length;i++){const e=a[i];$k(e in n),o.push(n[e])}return tI(o)}runInternalGraph(e,t){null==t&&(t=Qk(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],o=e[s],a=t[s];n[r.id]=[o,a]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(cI);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,o=t.outputTensors,a=new Array;for(const t of r)t.id in n&&a.push(n[t.id]);if(a.length===r.length){let r,i,s,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===a.length){const[t,n]=a[0];null==c.mask&&(c.mask=n),s=nI(e.call(t,c)),l=nI(e.computeMask(t,n)),r=[t],i=[n]}else r=a.map((e=>e[0])),i=a.map((e=>e[1])),null==c.mask&&(c.mask=i),s=nI(e.call(r,c)),l=nI(e.computeMask(r,i));if(e.activityRegularizer)throw new Yk("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<o.length;++e){const t=o[e],r=s[e],a=l[e];n[t.id]=[r,a]}}}}const o=[],a=[],i=[];for(const s of this.outputs){$k(s.id in n,"Could not compute output ".concat(s.name," : ").concat(s.id));const[e,t]=n[s.id];i.push(e.shape),o.push(e),a.push(t)}return[o,a,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof QS?1:0;for(let e=0;e<r.inboundNodes.length;e++){const o=QS.nodeKey(r,e);this.containerNodes.has(o)&&(t[o]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new Xk("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new Xk("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new Xk("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return IG((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=QS.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const a of this.layers){const e=a.getClassName(),r=a.getConfig(),o=[];for(let n=0;n<a.inboundNodes.length;n++){const e=a.inboundNodes[n],r=QS.nodeKey(a,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(fJ){console.warn("Layer ".concat(a.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const o=e.inboundLayers[r],a=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[QS.nodeKey(o,a)];null==l&&(l=0),n.push([o.name,l,s,i])}o.push(n)}}}const i={};i.name=a.name,i.className=e,i.config=r,i.inboundNodes=o,n.push(i)}e.layers=n;const r=[];for(let a=0;a<this.inputLayers.length;a++){const e=this.inputLayers[a],n=this.inputLayersNodeIndices[a],o=QS.nodeKey(e,n);if(!this.containerNodes.has(o))continue;let i=t[o];null!==i&&void 0!==i||(i=0);const s=this.inputLayersTensorIndices[a];r.push([e.name,i,s])}e.inputLayers=r;const o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],n=this.outputLayersNodeIndices[a],r=QS.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const s=this.outputLayersTensorIndices[a];o.push([e.name,i,s])}return e.outputLayers=o,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},o={};function a(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function i(e,t){const n=[];let o;for(const i of t){const s=i[0],l=i[1],c=i[2];if(o=null==i[3]?{}:i[3],!(s in r))return void a(e,t);const u=r[s];if(u.inboundNodes.length<=l)return void a(e,t);const d=u.inboundNodes[l];n.push(d.outputTensors[c])}n.length>0&&e.apply(tI(n),o)}function s(e){const o=e.name,i=AS(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[o]=i;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new Xk("Corrupted configuration, expected array for nodeData: ".concat(e));a(i,e)}))}const l=t.name,c=t.layers;for(const f of c)s(f);for(;!dI(o);)for(const e of c){const t=r[e.name];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)i(t,n)}}const u=[],d=[],p=t.inputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];$k(e in r);const o=r[e].inboundNodes[t].outputTensors;u.push(o[n])}const h=t.outputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];$k(e in r);const o=r[e].inboundNodes[t].outputTensors;d.push(o[n])}return new e({inputs:u,outputs:d,name:l})}get stateful(){if(this._stateful)throw new Xk("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){IG((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function $S(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function eN(e,t){return $S(e,t,"classWeight")}async function tN(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=IG((()=>{if(1===e.shape.length)return Om(e);if(2===e.shape.length){if(e.shape[1]>1){return iT(e,1)}if(1===e.shape[1])return _T(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),r=Array.from(await t.data());_G(t);const o=[];return r.forEach((e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");o.push(n[e])})),Dv(o,"float32")}return null}function nN(e,t){return Vm(e,t)}function rN(e,t){let n,r;const o=t;n=o.xs,r=o.ys,Zu(null!=n&&null!=r,(()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)));const a=oN("input",e.inputNames,n),i=oN("output",e.outputNames,r),s=a[0].shape[0];Zu(a.length===e.inputs.length,(()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(a.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")"))),Zu(i.length===e.outputs.length,(()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")));for(let l=0;l<a.length;l++)Zu(a[l].shape[0]===s,(()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(a[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));for(let l=0;l<i.length;l++)Zu(i[l].shape[0]===s,(()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));return{xs:a,ys:i}}function oN(e,t,n){if(n instanceof BC)return[n];if(Array.isArray(n))return Zu(n.length===t.length,(()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,"."))),n;{const r=[];for(const o of t){if(null==n[o])throw new Xk("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));r.push(n[o])}return r}}async function aN(e,t,n){const r=null!=n.batchesPerEpoch;if(Zu(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),Zu(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),Zu(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs))),Zu(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch))),Zu(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=null!=n.validationData;let a,i;if(o)if(iN(n.validationData))Zu(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches)));else{const e=function(e){if(3===e.length)throw new Yk("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,i=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=o?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const u=CS(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:h}=mS(u,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,o,c);p.setModel(e),e.history=h,await p.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,C=await t.iterator();for(;f<n.epochs;){const c={};await p.onEpochBegin(f);let u=0,d=0;for(r||(C=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await C.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:o}=rN(e,t.value),a={};a.batch=d,a.size=r[0].shape[0],await p.onBatchBegin(d,a);const i=[];if(null!=n.classWeight){const t=eN(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await tN(o[e],null,t[e]))}const c=r.concat(o).concat(i),h=s(c);_G(c);for(let e=0;e<l.length;++e){const t=l[e],n=h[e];a[t]=n,SG(n)}await p.onBatchEnd(d,a),lS(a),d++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(o){let t;t=iN(n.validationData)?nI(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):nI(e.evaluate(a,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(f,c),f++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function iN(e){return"function"===typeof e.iterator}function sN(e){Zu(e>0&&Number.isInteger(e),(()=>"batchSize is required to be a positive integer, but got ".concat(e)))}function lN(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>jI(e,t,n-t))):jI(e,t,n-t)}function cN(e,t){return IG((()=>null==e?null:Array.isArray(e)?e.map((e=>cN(e,t))):$I(e,"int32"===t.dtype?t:Mm(t,"int32"))))}function uN(e,t){const n=[];let r=0,o=null;for(;r<e;)o=r+t,o>=e&&(o=e),n.push([r,o]),r=o;return n}function dN(e){const t=[];e instanceof BC&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(UI(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function pN(e,t){if(null==e)return;const n=[];if(t instanceof BC)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const o in t){const e=t[o];n.push(e.id)}const r=[];if(e instanceof BC)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const o in e){const t=e[o];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function hN(e){return Array.isArray(e)}function fN(e){return!function(e){return e instanceof BC}(e)&&!hN(e)}function CN(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(hN(e)&&e.length>0)t=!0;else if(fN(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Xk("Error when checking model ".concat(a," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((e=>null));if(fN(e)){r=[];for(const n of t){if(null==e[n])throw new Xk('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(hN(e)){if(e.length!==t.length)throw new Xk("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new Xk("The model ".concat(a," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=dN(r),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new Xk("Error when checking ".concat(a,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[i].length;++t){if(0===t&&!o)continue;const r=e.shape[t],s=n[i][t];if(null!=s&&s>=0&&r!==s)throw new Xk("".concat(a," expected a batch of elements where each ")+"example has shape [".concat(n[i].slice(1,n[i].length),"] ")+"(i.e.,tensor shape [*,".concat(n[i].slice(1,n[i].length),"])")+" but the ".concat(a," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function GN(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Xk("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new Xk("The model expects ".concat(t.length," ").concat(a," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new Xk("Error when checking ".concat(a,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[i].length;++r){if(0===r&&!o)continue;const s=e.shape[r],l=n[i][r];if(null!=l&&l!==s)throw new Xk("Error when checking ".concat(a,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class mN extends QS{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Xk("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");US(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>yx.adagrad(.01),Adadelta:()=>yx.adadelta(1,.95,HI()),Adam:()=>yx.adam(.001,.9,.999,HI()),Adamax:()=>yx.adamax(.002,.9,.999,HI(),0),RMSProp:()=>yx.rmsprop(.001,.9,0,HI()),SGD:()=>yx.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Xk("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qm))throw new Xk("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Xk("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map((e=>NS(e)))}else{const n=NS(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Xk('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(NS(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const e=this.internalOutputShapes[a],t=this.outputNames[a];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],RI("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),o=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};RI("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,a;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let o;1===t[t.length-1]||this.lossFunctions[e]===kS?-1!==["accuracy","acc"].indexOf(i)?r=ES:-1!==["crossentropy","ce"].indexOf(i)&&(r=FS):this.lossFunctions[e]===wS?-1!==["accuracy","acc"].indexOf(i)?r=MS:-1!==["crossentropy","ce"].indexOf(i)&&(r=LS):-1!==["accuracy","acc"].indexOf(i)?r=RS:-1!==["crossentropy","ce"].indexOf(i)&&(r=OS),-1!==["accuracy","acc"].indexOf(i)?o="acc":-1!==["crossentropy","ce"].indexOf(i)&&(o="ce"),a=r,n=""+o}else{const e=zS(i);a=e,n=""+BS(i)}let t;RI(n,(()=>{t=a})),o(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;sN(r);const o=this.standardizeUserDataXY(e,t,!0,r);try{const e=o[0].concat(o[1]);this.makeTestFunction();const t=this.testFunction;return tI(this.testLoop(t,e,r,n.verbose,n.steps))}finally{pN(o[0],e),pN(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,o=e.testFunction;let a=[];if(n.verbose>0)throw new Yk("Verbose mode is not implemented yet.");Zu(!r||n.batches>0&&Number.isInteger(n.batches),(()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches))));const i="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await i.next();if(a=IG((()=>{if(t.value){const{xs:n,ys:r}=rN(e,t.value),i=n.concat(r),c=IG((()=>o(i)));if(_G(i),0===l)for(let e=0;e<c.length;++e)a.push(Km(0));const u=i[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=a[e];a[e]=IG((()=>Pm(a[e],Vm(u,t)))),l>0&&_G(n)}_G(c),s+=u,++l}return a})),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<a.length;++c){const e=a[c];a[c]=Bm(a[c],s),_G(e)}return tI(a)}(this,e,t)}checkNumSamples(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Xk("If ".concat(o," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new Xk("Either the input data should have a defined shape, or "+"".concat(o," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Xk("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],o=this.retrieveSymbolicTensors(r),a=new U_;if(e instanceof BC&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Xk("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new Xk("No value is provided for the model's input ".concat(s.name));a.add(s,t)}const i=q_(o,a);return n?i:i[0]}retrieveSymbolicTensors(e){const t=Qk(null,e.length);let n=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],a=o.map((e=>e.name));for(let r=0;r<e.length;++r){const i=a.indexOf(e[r]);if(-1!==i&&(t[r]=o[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new Xk("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return IG((()=>{const r=this.checkNumSamples(e);if(n)throw new Yk("Verbose predictLoop() is not implemented yet.");const o=uN(r,t),a=this.outputs.map((e=>[]));for(let t=0;t<o.length;++t){IG((()=>{const n=o[t][0],r=o[t][1],a=lN(e,n,r),i=[];if(Array.isArray(a))for(let e=0;e<a.length;++e)i.push({key:this.inputs[e],value:a[e]});else i.push({key:this.inputs[0],value:a});const s=new U_(i);return q_(this.outputs,s)})).forEach(((e,t)=>a[t].push(e)))}return tI(a.map((e=>ET(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=dN(e);GN(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return sN(e),this.predictLoop(n,e)}finally{pN(n,e)}}predictOnBatch(e){GN(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new qk("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const e=this.feedOutputShapes[o];this.feedLossFns[o]===wS?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t,n){const r=uI(e.map((e=>e.shape[0])));r.sort();const o=uI(t.map((e=>e.shape[0])));if(o.sort(),r.length>1)throw new Xk("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((e=>e.shape)))));if(o.length>1)throw new Xk("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((e=>e.shape)))));if(r.length>0&&o.length>0&&!ed(r,o))throw new Xk("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(o[0]," target ")+"sample(s).")}(e=CN(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=CN(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[gS,kS,xS];for(let o=0;o<e.length;++o){const a=e[o],i=t[o],s=n[o];if(null!=i){if(i===xS&&1===a.shape[a.shape.length-1])throw new Xk("You are passing a target array of shape ".concat(a.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i)){const e=a.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],o=t[n];if(null!=o&&r!==o)throw new Xk("A target Tensor with shape ".concat(a.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new Xk("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0;const[i,s]=this.standardizeUserDataXY(e,t,o,a);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=eN(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await tN(s[t],null,e[t]))}return[i,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return IG((()=>{const a=this.checkNumSamples(t,n,o,"steps"),i=[];if(r>0)throw new Yk("Verbose mode is not implemented yet.");if(null!=o)throw new Yk("steps mode in testLoop() is not implemented yet");{const r=uN(a,n),o=Dv(BI(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],s=r[n][1],l=jI(o,a,s-a),c=cN(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)i.push(Km(0));for(let e=0;e<u.length;++e){const t=u[e];i[e]=Pm(i[e],Vm(s-a,t))}}for(let e=0;e<i.length;++e)i[e]=Bm(i[e],a)}return i}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let o=r;if(eI(e,r)>1){const t=eI(e.slice(0,n),r);o+="_".concat(t)}t.push(o)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],i=this.collectedTrainableWeights.map((e=>e.read()));return[this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new U_(e),s=q_(this.outputs,i,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=o[n]&&(e=nN(e,o[n]));const a=my(e);t.push(a),l=0===n?e:Pm(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],o=this.metricsTensors[n][1];e=my(t(r[o],s[o]))}SG(e),a.push(e)}return l=my(l),this.calculateLosses().forEach((e=>{l=Pm(l,e)})),l}),!0,i)].concat(a)}}makeTestFunction(){this.testFunction=e=>IG((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let e=0;e<this.inputs.length;++e)a.push({key:this.inputs[e],value:r[e]});const i=new U_(a),s=q_(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],a=my(r(o[e],s[e]));n=0===e?a:Pm(n,a),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],a=my(n(o[r],s[r]));t.push(a)}return t}))}async fit(e,t){let n,r,o,a,i,s,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const p=null==d.batchSize?32:d.batchSize;sN(p);const h=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,h,p);n=f[0],r=f[1],u=f[2];let C,G=!1;if(null!=d.validationData&&d.validationData.length>0){if(G=!0,2!==d.validationData.length)throw 3===d.validationData.length?new Yk("validationData including sample weights is not supported yet."):new Xk("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(d.validationData," is invalid."));i=d.validationData[0],s=d.validationData[1];const e=!0,t=await this.standardizeUserData(i,s,null,null,e,p);l=t[0],c=t[1],C=l.concat(c)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){G=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];l=lN(n,e,t),o=n,n=lN(n,0,e),c=lN(r,e,t),a=r,r=lN(r,0,e),C=l.concat(c)}else null!=d.validationSteps&&(G=!0);const m=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const A=this.makeTrainFunction(),T=this.getDedupedMetricsNames();let g,y;G?(this.makeTestFunction(),g=this.testFunction,y=T.slice().concat(T.map((e=>"val_"+e)))):(g=null,C=[],y=T.slice());const v=CS(d.callbacks,d.yieldEvery);return await this.fitLoop(A,m,T,p,d.epochs,d.verbose,v,g,C,d.shuffle,y,d.initialEpoch,null,null)}finally{this.isTraining=!1,pN(n,e),pN(r,t),pN(o,e),pN(a,t),pN(l,i),pN(c,s),null!=u&&_G(u)}}async fitLoop(e,t,n,r,o,a,i,s,l,c,u,d,p,h){null==r&&(r=32),null==o&&(o=1),null==c&&(c=!0),null==d&&(d=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=h&&(f=!0,null==p))throw new Xk("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const C=this.checkNumSamples(t,r,p,"steps_per_epoch");let G;null!=C&&(G=BI(0,C)),null==a&&(a=1);const{callbackList:m,history:A}=mS(i,a,o,d,C,p,r,f,u);m.setModel(this),this.history=A,await m.onTrainBegin(),this.stopTraining_=!1;for(let T=d;T<o;++T){await m.onEpochBegin(T);const o={};if(null!=p)throw new Yk("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new Yk("batch shuffling is not implemneted yet");c&&Ku(G);const a=Dv(G),i=uN(C,r);for(let c=0;c<i.length;++c){const u={};if(await m.onBatchBegin(c,u),IG((()=>{const d=i[c][0],p=i[c][1],h=jI(a,d,p-d);u.batch=c,u.size=p-d;const C=cN(t,h),G=e(C);for(let e=0;e<n.length;++e){const t=n[e],r=G[e];u[t]=r,SG(r)}if(c===i.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],a=e[t];SG(a),o["val_"+r]=a}}})),await m.onBatchEnd(c,u),lS(u),this.stopTraining_)break}a.dispose()}if(await m.onEpochEnd(T,o),this.stopTraining_)break}return await m.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return aN(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],o=n[1],a=this.makeTrainFunction()(r.concat(o)),i=[];for(const s of a){const e=await s.data();i.push(e[0])}return _G(a),pN(n[0],e),pN(n[1],t),tI(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:o[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=kG().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-kG().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=rI(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>rI(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=rI(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[rI(BS(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>rI(BS(e))));{const e={};for(const t in this.metrics)e[t]=rI(BS(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=AS(YS(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=oI(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>oI(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=oI(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>oI(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=oI(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=$G(e);if(0===t.length)throw new Xk("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Xk("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Xk("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await DG(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(JS),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:o}=await DG(await this.optimizer.getWeights(),e);n.specs.push(...o),n.data=WG([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;HS(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){HS(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}mN.className="Model",Jm(mN);class AN extends mN{}AN.className="Functional",Jm(AN);class TN extends mN{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:gI("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new Xk("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof TN||e instanceof mN;let n;if(t){if(n=e,1!==n.outputs.length)throw new Xk("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Xk("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Xk("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Xk("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new W_({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new Xk("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Xk("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=H_(this.outputs[0])}this.inboundNodes=[],new z_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Qk(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(N_(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new mN({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new qk("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new qk("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new qk("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new qk("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Xk("Legacy serialization format not supported yet.");n=t}else Zu(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,o=t;const a=new e(o);if(!(a instanceof TN))throw new Yk("Sequential.fromConfig called on non-Sequential input: ".concat(a));for(const i of n){const e=AS(i,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),a.add(e)}return a}set stopTraining(e){if(null==this.model)throw new Xk("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Xk("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}TN.className="Sequential",Jm(TN);class gN extends Ym{getConfig(){return{}}}class yN extends gN{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new Yk("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Tg(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}yN.className="elu",Jm(yN);class vN extends gN{apply(e){return dv(e)}}vN.className="selu",Jm(vN);class bN extends gN{apply(e){return nv(e)}}bN.className="relu",Jm(bN);class xN extends gN{apply(e){return IG((()=>yy(6,nv(e))))}}xN.className="relu6",Jm(xN);class wN extends gN{apply(e){return e}}wN.className="linear",Jm(wN);class kN extends gN{apply(e){return DT(e)}}kN.className="sigmoid",Jm(kN);class IN extends gN{apply(e){return function(e){return IG((()=>{const t=Pm(.5,Vm(.2,e));return qT(t,0,1)}))}(e)}}IN.className="hardSigmoid",Jm(IN);class _N extends gN{apply(e){return ry(e)}}_N.className="softplus",Jm(_N);class SN extends gN{apply(e){return function(e){return IG((()=>Bm(e,Pm(aA(e),1))))}(e)}}SN.className="softsign",Jm(SN);class NN extends gN{apply(e){return MT(e)}}NN.className="tanh",Jm(NN);class EN extends gN{apply(e){return yv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}EN.className="softmax",Jm(EN);class RN extends gN{apply(e){return ay(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}RN.className="logSoftmax",Jm(RN);class DN extends gN{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return IG((()=>Vm(DT(Vm(e,t)),e)))}}DN.className="swish",Jm(DN);class FN extends gN{apply(e){return IG((()=>Vm(e,MT(ry(e)))))}}function MN(e){return e.getClassName()}function ON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lI(e,Zm.getMap().classNameMap,t,"activation")}function LN(e){if(null==e){const e={className:"linear",config:{}};return ON(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},ON(t)}return e instanceof gN?e:ON(e)}function PN(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}FN.className="mish",Jm(FN);class zN extends Ym{}class BN extends zN{constructor(e){super(),PN(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return IG((()=>{let t=Ay([1]);return this.hasL1&&(t=Pm(t,Rg(Vm(this.l1,aA(e))))),this.hasL2&&(t=Pm(t,Rg(Vm(this.l2,e_(e))))),_T(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}BN.className="L1L2",Jm(BN);const VN={l1l2:"L1L2"};function HN(e){return iI(e)}function WN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lI(e,Zm.getMap().classNameMap,t,"regularizer")}function UN(e){if(null==e)return null;if("string"===typeof e){return WN({className:e in VN?VN[e]:e,config:{}})}return e instanceof zN?e:WN(e)}class jN extends V_{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=S_(e);let n=nv(e);return null!=this.maxValue&&(n=qT(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}jN.className="ReLU",Jm(jN);class KN extends V_{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=S_(e);return Yg(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}KN.className="LeakyReLU",Jm(KN);class qN extends V_{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=k_(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=UN(e.alphaRegularizer),this.alphaConstraint=iS(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Xk("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=N_(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new O_({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=S_(e),Py(e,this.alpha.read())}getConfig(){const e={alphaInitializer:w_(this.alphaInitializer),alphaRegularizer:HN(this.alphaRegularizer),alphaConstraint:oS(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}qN.className="PReLU",Jm(qN);class XN extends V_{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new Yk("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=S_(e);return Tg(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}XN.className="ELU",Jm(XN);class YN extends V_{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=S_(e);return Vm(n,Mm(Wg(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}YN.className="ThresholdedReLU",Jm(YN);class ZN extends V_{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new EN).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return IG((()=>{let n=S_(e);const r=t.mask;if(null!=r){const e=Vm(rA(Ty(n.shape),Mm(r,n.dtype)),Km(-1e9));n=Pm(n,e)}return this.axis instanceof Array?this.axis.length>1?Og(rA(n,iy(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function JN(e,t,n){if("number"===typeof e)return Qk(e,t);if(e.length!==t)throw new Xk("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let o=0;o<t;++o){const a=e[o];if((r=a)!==parseInt(r.toString(),10))throw new Xk("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var r}function QN(e,t,n,r){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((o+r-1)/r)}function $N(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+zI([n-t,0]);else{if("same"!==r)throw new Xk("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function eE(e,t){return IG((()=>(II(t),"channelsFirst"===t?Qv(e,[0,2,3,1]):e)))}function tE(e,t){return IG((()=>(II(t),"channelsFirst"===t?Qv(e,[0,2,3,4,1]):e)))}function nE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return IG((()=>{if(null==a&&(a="channelsLast"),II(a),3!==e.shape.length)throw new Xk("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new Xk("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new Xk("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===a&&(e=Qv(e,[0,2,1])),"causal"===o)throw new Yk("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=$T(e,t,r,"same"===o?"same":"valid","NWC",i);return null!=n&&(s=n_(s,n)),s}))}function rE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return IG((()=>{if(null==a&&(a="channelsLast"),II(a),3!==e.rank&&4!==e.rank)throw new Xk("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new Xk("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=eE(e,a);if("causal"===o)throw new Yk("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=pb({x:l,filter:t,strides:r,pad:"same"===o?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(l=Qv(l,[0,3,1,2])),l}))}function oE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return IG((()=>{if(null==a&&(a="channelsLast"),II(a),4!==e.rank&&5!==e.rank)throw new Xk("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new Xk("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let s=tE(e,a);if("causal"===o)throw new Yk("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=ng(s,t,r,"same"===o?"same":"valid","NDHWC",i),null!=n&&(s=n_(s,n)),"channelsFirst"===a&&(s=Qv(s,[0,4,1,2,3])),s}))}ZN.className="Softmax",Jm(ZN);class aE extends V_{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",aE.verifyArgs(t),this.rank=e,fI(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Yk("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=JN(t.kernelSize,e,"kernelSize"),this.strides=JN(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,_I(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,II(this.dataFormat),this.activation=LN(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=k_(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=iS(t.biasConstraint),this.biasRegularizer=UN(t.biasRegularizer),this.activityRegularizer=UN(t.activityRegularizer),this.dilationRate=JN(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Xk("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Xk("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Xk("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if($k("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!hI(e.kernelSize,"number",1,3))throw new Xk("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:MN(this.activation),useBias:this.useBias,biasInitializer:w_(this.biasInitializer),biasRegularizer:HN(this.biasRegularizer),activityRegularizer:HN(this.activityRegularizer),biasConstraint:oS(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class iE extends aE{constructor(e,t){super(e,t),this.kernel=null,iE.verifyArgs(t),this.filters=t.filters,fI(this.filters,"filters"),this.kernelInitializer=k_(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=iS(t.kernelConstraint),this.kernelRegularizer=UN(t.kernelRegularizer)}build(e){e=N_(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Xk("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return IG((()=>{let t;e=S_(e);const n=null==this.bias?null:this.bias.read(),r=GI(this.activation.getClassName());if(null!=r&&2===this.rank)t=rE(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=nE(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=rE(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Yk("convolutions greater than 3D are not implemented yet.");t=oE(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=N_(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<n.length;++o){const e=QN(n[o],this.kernelSize[o],this.padding,this.strides[o],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[o]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:w_(this.kernelInitializer),kernelRegularizer:HN(this.kernelRegularizer),kernelConstraint:oS(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Xk("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class sE extends iE{constructor(e){super(2,e),sE.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!hI(e.kernelSize,"number",1,2))throw new Xk("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}sE.className="Conv2D",Jm(sE);class lE extends iE{constructor(e){super(3,e),lE.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Xk("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}lE.className="Conv3D",Jm(lE);class cE extends sE{constructor(e){if(super(e),this.inputSpec=[new O_({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Xk("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=N_(e)).length)throw new Xk("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Xk("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new O_({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return IG((()=>{let t=S_(e);if(4!==t.shape.length)throw new Xk("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,a;"channelsFirst"===this.dataFormat?(o=2,a=3):(o=1,a=2);const i=n[o],s=n[a],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],d=this.strides[1],p=[r,$N(i,u,l,this.padding),$N(s,d,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Qv(t,[0,2,3,1]));let h=tg(t,this.kernel.read(),p,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=Qv(h,[0,3,1,2])),null!=this.bias&&(h=n_(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h}))}computeOutputShape(e){const t=(e=N_(e)).slice();let n,r,o;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3):(n=3,r=1,o=2);const a=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=$N(t[r],s,a,this.padding),t[o]=$N(t[o],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}cE.className="Conv2DTranspose",Jm(cE);class uE extends lE{constructor(e){if(super(e),this.inputSpec=[new O_({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new Xk("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=N_(e)).length)throw new Xk("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Xk("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new O_({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return IG((()=>{let t=S_(e);if(5!==t.shape.length)throw new Xk("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,a,i;"channelsFirst"===this.dataFormat?(i=2,o=3,a=4):(i=1,o=2,a=3);const s=n[i],l=n[o],c=n[a],u=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],h=this.strides[0],f=this.strides[1],C=this.strides[2],G=[r,$N(s,h,u,this.padding),$N(l,f,d,this.padding),$N(c,C,p,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Qv(t,[0,2,3,4,1]));let m=og(t,this.kernel.read(),G,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(m=Qv(m,[0,4,1,2,3])),null!==this.bias&&(m=n_(m,this.bias.read(),this.dataFormat)),null!==this.activation&&(m=this.activation.apply(m)),m}))}computeOutputShape(e){const t=(e=N_(e)).slice();let n,r,o,a;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3,a=4):(n=4,r=1,o=2,a=3);const i=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=$N(t[r],c,i,this.padding),t[o]=$N(t[o],u,s,this.padding),t[a]=$N(t[a],d,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}uE.className="Conv3DTranspose",Jm(uE);class dE extends iE{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Xk("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Xk("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Xk("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=k_(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=UN(t.depthwiseRegularizer),this.depthwiseConstraint=iS(t.depthwiseConstraint),this.pointwiseInitializer=k_(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=UN(t.pointwiseRegularizer),this.pointwiseConstraint=iS(t.pointwiseConstraint)}build(e){if((e=N_(e)).length<this.rank+2)throw new Xk("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Xk("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),o=[];for(let i=0;i<this.rank;++i)o.push(1);o.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new O_({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return IG((()=>{let t;if(e=S_(e),1===this.rank)throw new Yk("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Qv(e,[0,2,3,1])),t=pv(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=n_(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Qv(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=w_(this.depthwiseInitializer),e.pointwiseInitializer=w_(this.pointwiseInitializer),e.depthwiseRegularizer=HN(this.depthwiseRegularizer),e.pointwiseRegularizer=HN(this.pointwiseRegularizer),e.depthwiseConstraint=oS(this.depthwiseConstraint),e.pointwiseConstraint=oS(this.pointwiseConstraint),e}}dE.className="SeparableConv";class pE extends dE{constructor(e){super(2,e)}}pE.className="SeparableConv2D",Jm(pE);class hE extends iE{constructor(e){super(1,e),hE.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!hI(e.kernelSize,"number",1,1))throw new Xk("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}hE.className="Conv1D",Jm(hE);class fE extends V_{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return IG((()=>{if(e=S_(e),"channelsLast"===this.dataFormat){const t=qI(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return qI(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=qI(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return qI(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}fE.className="Cropping2D",Jm(fE);class CE extends V_{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,II(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,pI(vI,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return IG((()=>{let t=S_(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Qv(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],o="nearest"===this.interpolation?Gx.resizeNearestNeighbor(t,[e,r]):Gx.resizeBilinear(t,[e,r]);return Qv(o,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?Gx.resizeNearestNeighbor(t,[e,r]):Gx.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}CE.className="UpSampling2D",Jm(CE);class GE extends aE{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=k_(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=iS(e.depthwiseConstraint),this.depthwiseRegularizer=UN(e.depthwiseRegularizer)}build(e){if((e=N_(e)).length<4)throw new Xk("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Xk("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return IG((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return IG((()=>{null==o&&(o="channelsLast"),II(o);let i=eE(e,o);if(4!==e.rank)throw new Xk("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new Xk("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=dg(i,t,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===o&&(i=Qv(i,[0,3,1,2])),i}))}(e=S_(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=n_(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=N_(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=QN(t,this.kernelSize[0],this.padding,this.strides[0]),a=QN(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,a]:[e[0],o,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=w_(this.depthwiseInitializer),e.depthwiseRegularizer=HN(this.depthwiseRegularizer),e.depthwiseConstraint=oS(this.depthwiseRegularizer),e}}function mE(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Xk("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=o(t),constants:n=o(n)}}function AE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return IG((()=>{const l=t.shape.length;if(l<3)throw new Xk("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(BI(2,l));if(t=Qv(t,c),null!=a)throw new Yk("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=o&&(o=Mm(Mm(o,"bool"),"float32"),o.rank===l-1&&(o=Lg(o,-1)),o=Qv(o,c)),r&&(t=ov(t,0),null!=o&&(o=ov(o,0)));const u=[];let d,p=n;const h=t.shape[0],f=Kv(t);let C,G;null!=o&&(C=Kv(o));for(let t=0;t<h;++t){const n=f[t],r=IG((()=>e(n,p)));if(null==o)d=r[0],p=r[1];else{const e=IG((()=>{const e=C[t],n=rA(Sy(e),e);return{output:Pm(Vm(r[0],e),Vm(p[0],n)),newStates:p.map(((t,o)=>Pm(Vm(r[1][o],e),Vm(t,n))))}}));d=e.output,p=e.newStates}s&&u.push(d)}if(s){G=Sv(u,1)}return[d,G,p]}))}GE.className="DepthwiseConv2D",Jm(GE);class TE extends V_{constructor(e){let t;if(super(e),null==e.cell)throw new Xk("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new IE({cells:e.cell}):e.cell,null==t.stateSize)throw new Xk("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new O_({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return BI(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){I_(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return IG((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new Yk("Constants support is not implemented in RNN yet.");I_(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new O_({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let o;if(this.cell.build(r),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!ed(this.stateSpec.map((e=>e.shape[e.shape.length-1])),o))throw new Xk("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=o.map((e=>new O_({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];IG((()=>{if(!this.stateful)throw new Kk("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new Xk("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ay([n,e]))):this.states_=[Ay([n,this.cell.stateSize])];else if(null==e)_G(this.states_),null!=this.keptStates&&(_G(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ay([n,e]))):this.states_[0]=Ay([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Xk("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):_G(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,o];if(!ed(r.shape,a))throw new Xk("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(a,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map((e=>SG(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=mE(e,n,r,this.numConstants);e=o.inputs,n=o.initialState,r=o.constants;let a=[],i=[];if(null!=n){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new O_({shape:e.shape}));i=i.concat(this.stateSpec)}null!=r&&(t.constants=r,a=a.concat(r),this.numConstants=r.length);if(a[0]instanceof L_){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return IG((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let o=null==t?null:t.initialState;e=S_(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new Xk("RNN Layer has ".concat(a," state(s) but was passed ")+"".concat(o.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},s=AE(((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]}),e,o,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],c=s[1],u=s[2];this.stateful&&this.resetStates(u,r);const d=this.returnSequences?c:l;return this.returnState?[d].concat(u):d}))}getInitialState(e){return IG((()=>{let t=Ay(e.shape);return t=Rg(t,[1,2]),t=UI(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?ZI(t,[1,e]):t)):this.cell.stateSize>1?[ZI(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===TE.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=AS(t.cell,n);return new e(Object.assign(t,{cell:r}))}}TE.className="RNN",Jm(TE);class gE extends V_{}class yE extends gE{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fI(this.units,"units"),this.activation=LN(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=k_(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=k_(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=k_(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=UN(e.kernelRegularizer),this.recurrentRegularizer=UN(e.recurrentRegularizer),this.biasRegularizer=UN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=PI([1,zI([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=PI([1,zI([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=N_(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return IG((()=>{if(2!==e.length)throw new Xk("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=_E({ones:()=>Sy(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=_E({ones:()=>Sy(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;o=QI(null!=a?Vm(e,a):e,this.kernel.read()),null!=this.bias&&(o=n_(o,this.bias.read())),null!=i&&(n=Vm(n,i));let s=Pm(o,QI(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:MN(this.activation),useBias:this.useBias,kernelInitializer:w_(this.kernelInitializer),recurrentInitializer:w_(this.recurrentInitializer),biasInitializer:w_(this.biasInitializer),kernelRegularizer:HN(this.kernelRegularizer),recurrentRegularizer:HN(this.recurrentRegularizer),biasRegularizer:HN(this.biasRegularizer),activityRegularizer:HN(this.activityRegularizer),kernelConstraint:oS(this.kernelConstraint),recurrentConstraint:oS(this.recurrentConstraint),biasConstraint:oS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}yE.className="SimpleRNNCell",Jm(yE);class vE extends TE{constructor(e){e.cell=new yE(e),super(e)}call(e,t){return IG((()=>{null!=this.cell.dropoutMask&&(_G(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_G(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return new e(t)}}vE.className="SimpleRNN",Jm(vE);class bE extends gE{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Xk("GRUCell does not support reset_after parameter set to true.");this.units=e.units,fI(this.units,"units"),this.activation=LN(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=LN(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=k_(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=k_(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=k_(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=UN(e.kernelRegularizer),this.recurrentRegularizer=UN(e.recurrentRegularizer),this.biasRegularizer=UN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=PI([1,zI([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=PI([1,zI([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=N_(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return IG((()=>{if(2!==e.length)throw new Xk("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=_E({ones:()=>Sy(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=_E({ones:()=>Sy(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let i,s,l;0<this.dropout&&this.dropout<1&&(e=Vm(e,o[0]));let c=QI(e,this.kernel.read());this.useBias&&(c=n_(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Vm(r,a[0]));const u=this.recurrentKernel.read(),[d,p]=wv(u,[2*this.units,this.units],u.rank-1),h=QI(r,d),[f,C,G]=wv(c,3,c.rank-1),[m,A]=wv(h,2,h.rank-1);i=this.recurrentActivation.apply(Pm(f,m)),s=this.recurrentActivation.apply(Pm(C,A));const T=QI(Vm(s,r),p);l=this.activation.apply(Pm(G,T));const g=Pm(Vm(i,r),Vm(Pm(1,ny(i)),l));return[g,g]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:MN(this.activation),recurrentActivation:MN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:w_(this.kernelInitializer),recurrentInitializer:w_(this.recurrentInitializer),biasInitializer:w_(this.biasInitializer),kernelRegularizer:HN(this.kernelRegularizer),recurrentRegularizer:HN(this.recurrentRegularizer),biasRegularizer:HN(this.biasRegularizer),activityRegularizer:HN(this.activityRegularizer),kernelConstraint:oS(this.kernelConstraint),recurrentConstraint:oS(this.recurrentConstraint),biasConstraint:oS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}bE.className="GRUCell",Jm(bE);class xE extends TE{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bE(e),super(e)}call(e,t){return IG((()=>{null!=this.cell.dropoutMask&&(_G(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_G(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}xE.className="GRU",Jm(xE);class wE extends gE{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fI(this.units,"units"),this.activation=LN(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=LN(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=k_(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=k_(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=k_(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=UN(e.kernelRegularizer),this.recurrentRegularizer=UN(e.recurrentRegularizer),this.biasRegularizer=UN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=PI([1,zI([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=PI([1,zI([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=N_(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends s_{apply(t,r){const o=e.apply([n]),a=(new c_).apply([n]),i=e.apply([2*n]);return YI(YI(o,a),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return IG((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new Xk("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=_E({ones:()=>Sy(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=_E({ones:()=>Sy(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let s,l,c,u;0<this.dropout&&this.dropout<1&&(e=Vm(e,a[0]));let d=QI(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Vm(r,i[0])),d=Pm(d,QI(r,this.recurrentKernel.read())),this.useBias&&(d=n_(d,this.bias.read()));const[p,h,f,C]=wv(d,4,d.rank-1);s=this.recurrentActivation.apply(p),l=this.recurrentActivation.apply(h),c=Pm(Vm(l,o),Vm(s,this.activation.apply(f))),u=this.recurrentActivation.apply(C);const G=Vm(u,this.activation.apply(c));return[G,G,c]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:MN(this.activation),recurrentActivation:MN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:w_(this.kernelInitializer),recurrentInitializer:w_(this.recurrentInitializer),biasInitializer:w_(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:HN(this.kernelRegularizer),recurrentRegularizer:HN(this.recurrentRegularizer),biasRegularizer:HN(this.biasRegularizer),activityRegularizer:HN(this.activityRegularizer),kernelConstraint:oS(this.kernelConstraint),recurrentConstraint:oS(this.recurrentConstraint),biasConstraint:oS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}wE.className="LSTMCell",Jm(wE);class kE extends TE{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new wE(e),super(e)}call(e,t){return IG((()=>{null!=this.cell.dropoutMask&&(_G(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_G(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}kE.className="LSTM",Jm(kE);class IE extends gE{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return IG((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const o=[];let a;for(let i=0;i<this.cells.length;++i){const s=this.cells[i];n=r[i],a=0===i?[e[0]].concat(n):[a[0]].concat(n),a=s.call(a,t),o.push(a.slice(1))}n=[];for(const e of o.slice().reverse())n.push(...e);return[a[0]].concat(n)}))}build(e){let t;I_(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{RI("RNNCell_".concat(r),(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const o of t.cells)r.push(AS(o,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return F_(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,o=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],o[e]])}M_(t)}}function _E(e){const{ones:t,rate:n,training:r=!1,count:o=1,dropoutFunc:a}=e,i=()=>null!=a?a(t(),n):r_(t(),n),s=()=>o_(i,t,r);if(!o||o<=1)return SG(s().clone());return Array(o).fill(void 0).map(s).map((e=>SG(e.clone())))}IE.className="StackedRNNCells",Jm(IE);var SE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class NE extends TE{constructor(e){if(e.unroll)throw new Yk("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Yk("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new O_({ndim:5})]}call(e,t){return IG((()=>{if(null!=this.cell.dropoutMask&&(_G(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_G(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Xk("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return IG((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),o=Ay([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(o):[o]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];IG((()=>{if(!this.stateful)throw new Kk("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),o=[r[0],...r.slice(2)];if(null==n[0])throw new Xk("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ay(o))):this.states_=[Ay(o)];else if(null==e)_G(this.states_),null!=this.keptStates&&(_G(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ay(o))):this.states_[0]=Ay(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Xk("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):_G(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=o;if(!ed(n.shape,r))throw new Xk("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map((e=>SG(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:o,strides:a,dilationRate:i}=this.cell,s="channelsFirst"===t,l=e[s?3:2],c=e[s?4:3],u=QN(l,r[0],o,a[0],i[0]),d=QN(c,r[1],o,a[1],i[1]);return[...e.slice(0,2),...s?[n,u,d]:[u,d,n]]}}NE.className="ConvRNN2D";class EE extends wE{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:o,dataFormat:a,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,fI(this.filters,"filters"),this.kernelSize=JN(n,2,"kernelSize"),this.kernelSize.forEach((e=>fI(e,"kernelSize"))),this.strides=JN(r||1,2,"strides"),this.strides.forEach((e=>fI(e,"strides"))),this.padding=o||"valid",_I(this.padding),this.dataFormat=a||"channelsLast",II(this.dataFormat),this.dilationRate=JN(i||1,2,"dilationRate"),this.dilationRate.forEach((e=>fI(e,"dilationRate")))}build(e){var t;e=N_(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Xk("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],o=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends s_{apply(e,t){return XI([n.apply([r]),Ty([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return IG((()=>{if(3!==e.length)throw new Xk("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],o=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=_E({ones:()=>Sy(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=(e,t,n)=>t&&t[n]?Vm(t[n],e):e;let l=s(r,i,0),c=s(r,i,1),u=s(r,i,2),d=s(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=_E({ones:()=>Sy(o),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let h=s(o,p,0),f=s(o,p,1),C=s(o,p,2),G=s(o,p,3);const[m,A,T,g]=wv(this.kernel.read(),4,3),[y,v,b,x]=this.useBias?wv(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,m,y,this.padding),c=this.inputConv(c,A,v,this.padding),u=this.inputConv(u,T,b,this.padding),d=this.inputConv(d,g,x,this.padding);const[w,k,I,_]=wv(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,w),f=this.recurrentConv(f,k),C=this.recurrentConv(C,I),G=this.recurrentConv(G,_);const S=this.recurrentActivation.apply(Pm(l,h)),N=this.recurrentActivation.apply(Pm(c,f)),E=Pm(Vm(N,a),Vm(S,this.activation.apply(Pm(u,C)))),R=Vm(this.recurrentActivation.apply(Pm(d,G)),this.activation.apply(E));return[R,R,E]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=SE(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const o=QT(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?n_(o,n,this.dataFormat):o}recurrentConv(e,t){return QT(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}EE.className="ConvLSTM2DCell",Jm(EE);class RE extends NE{constructor(e){const t=new EE(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}RE.className="ConvLSTM2D",Jm(RE);class DE extends V_{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return o_((()=>r_(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}DE.className="Dropout",Jm(DE);class FE extends DE{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}FE.className="SpatialDropout1D",Jm(FE);class ME extends V_{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,fI(this.units,"units"),this.activation=LN(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=k_(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=k_(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=iS(e.kernelConstraint),this.biasConstraint=iS(e.biasConstraint),this.kernelRegularizer=UN(e.kernelRegularizer),this.biasRegularizer=UN(e.biasRegularizer),this.activityRegularizer=UN(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=N_(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=N_(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e),r=GI(this.activation.getClassName());let o;return null!=r?o=QI(n,this.kernel.read(),r,this.bias?this.bias.read():null):(o=QI(n,this.kernel.read()),null!=this.bias&&(o=n_(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o}))}getConfig(){const e={units:this.units,activation:MN(this.activation),useBias:this.useBias,kernelInitializer:w_(this.kernelInitializer),biasInitializer:w_(this.biasInitializer),kernelRegularizer:HN(this.kernelRegularizer),biasRegularizer:HN(this.biasRegularizer),activityRegularizer:HN(this.activityRegularizer),kernelConstraint:oS(this.kernelConstraint),biasConstraint:oS(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}ME.className="Dense",Jm(ME);class OE extends V_{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=N_(e);for(const t of e.slice(1))if(null==t)throw new Xk('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],LI(e,1)]}call(e,t){return IG((()=>{this.invokeCallHook(e,t);let n=S_(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Qv(n,e)}return function(e){if(e.rank<=1)throw new Xk("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],LI(e.shape,1)];return _T(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}OE.className="Flatten",Jm(OE);class LE extends V_{constructor(e){super(e),this.supportsMasking=!0,this.activation=LN(e.activation)}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e);return this.activation.apply(n)}))}getConfig(){const e={activation:MN(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}LE.className="Activation",Jm(LE);class PE extends V_{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return IG((()=>{return e=S_(e),t=e,n=this.n,IG((()=>{if(2!==t.shape.length)throw new Xk("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return ZI(UI(t,1),[1,n,1])}));var t,n}))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}PE.className="RepeatVector",Jm(PE);class zE extends V_{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let o=1,a=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==a)throw new Xk("Can only specifiy one unknown dimension.");a=s}else o*=e}const i=LI(e);if(null!==a){if(0===o||i%o!==0)throw new Xk(n);r[a]=i/o}else if(i!==o)throw new Xk(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e),r=n.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return _T(n,o)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}zE.className="Reshape",Jm(zE);class BE extends V_{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=BI(1,e.dims.length+1);if(!ed(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new O_({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=N_(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return Qv(S_(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}BE.className="Permute",Jm(BE);class VE extends V_{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=S_(e);return aT(Iy(n,this.maskValue),-1)}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e),r=aT(Iy(n,this.maskValue),-1,!0);return Vm(n,Mm(r,n.dtype))}))}}VE.className="Masking",Jm(VE);class HE extends V_{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(nI(e.inputLength))}this.inputDim=e.inputDim,fI(this.inputDim,"inputDim"),this.outputDim=e.outputDim,fI(this.outputDim,"outputDim"),this.embeddingsInitializer=k_(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=UN(e.embeddingsRegularizer),this.activityRegularizer=UN(e.activityRegularizer),this.embeddingsConstraint=iS(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return IG((()=>this.maskZero?(e=S_(e),Iy(e,Um(e))):null))}computeOutputShape(e){if(e=N_(e),null==this.inputLength)return[...e,this.outputDim];const t=nI(this.inputLength);if(t.length!==e.length-1)throw new Xk('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const o=t[r],a=e[r+1];if(null!=o&&null!=a&&o!==a)throw new Xk('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==o&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return IG((()=>{this.invokeCallHook(e,t);let n=S_(e);"int32"!==n.dtype&&(n=WI(n,"int32"));const r=$I(this.embeddings.read(),_T(n,[n.size]));return _T(r,N_(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:w_(this.embeddingsInitializer),embeddingsRegularizer:HN(this.embeddingsRegularizer),activityRegularizer:HN(this.activityRegularizer),embeddingsConstraint:oS(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}HE.className="Embedding",Jm(HE);class WE extends V_{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Yk}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const o=e[e.length-t.length+r],a=t[r];if(null==o||null==a||o<0||a<0)n.push(null);else if(1===o)n.push(a);else if(1===a)n.push(o);else{if(o!==a)throw new Xk("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[N_(e)]),e.length<2)throw new Xk("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const o of e)null!=o&&null!==o[0]&&t.push(o[0]);if(t=uI(t),t.length>1)throw new Xk("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let o=1;o<e.length;++o){const t=null==e[o]?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===uI(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return IG((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=zI(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=UI(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const a of e){const e=a.rank;if(null==e){const e=a.shape,r=e[0],o=e.slice(1).concat([r]);let i=_T(a,[r].concat(LI(e.slice(1))));i=Qv(i,[1,0]),i=_T(i,o),t.push(i),n=!0}else if(e>1){const r=BI(1,e).concat([0]);t.push(Qv(a,r)),n=!0}else t.push(a)}let r=this.mergeFunction(t);const o=r.rank;if(n)if(null==o){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=_T(Qv(_T(r,[-1,t]),[1,0]),n)}else if(o>1){const e=[o-1].concat(BI(0,o-1));r=Qv(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=uI(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return IG((()=>{if(null==t)return null;if(!Array.isArray(t))throw new Xk("`mask` should be an Array");if(!Array.isArray(e))throw new Xk("`inputs` should be an Array");if(t.length!==e.length)throw new Xk("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:Lg(e,0))))[0];for(let e=1;e<t.length-1;++e)n=sy(n,t[e]);return n}))}}class UE extends WE{constructor(e){super(e)}mergeFunction(e){return IG((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Pm(t,e[n]);return t}))}}UE.className="Add",Jm(UE);class jE extends WE{constructor(e){super(e)}mergeFunction(e){return IG((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Vm(t,e[n]);return t}))}}jE.className="Multiply",Jm(jE);class KE extends WE{constructor(e){super(e)}mergeFunction(e){return IG((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Pm(t,e[n]);return Vm(1/e.length,t)}))}}KE.className="Average",Jm(KE);class qE extends WE{constructor(e){super(e)}mergeFunction(e){return IG((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=cA(t,e[n]);return t}))}}qE.className="Maximum",Jm(qE);class XE extends WE{constructor(e){super(e)}mergeFunction(e){return IG((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=yy(t,e[n]);return t}))}}XE.className="Minimum",Jm(XE);class YE extends WE{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Xk("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let o=!1;for(const e of n)if(ed(e,t)){o=!0;break}o||n.push(t)}if(n.length>1)throw new Xk("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return IG((()=>XI(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Xk("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const o of t.slice(1)){if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Xk("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Xk("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Xk("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return IG((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let a=0;a<e.length;++a)null==t[a]?r.push(Mm(Sy(e[a]),"bool")):t[a].rank<e[a].rank?r.push(Lg(t[a],-1)):r.push(t[a]);const o=ET(r,this.axis);return oT(o,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function ZE(e,t){for(;e<0;)e+=t;return e}YE.className="Concatenate",Jm(YE);class JE extends WE{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Zu(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Yk("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Xk("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new Xk("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>ZE(t,e[n].shape.length))):[ZE(this.axes,n.shape.length),ZE(this.axes,r.shape.length)],this.normalize&&(n=TS(n,t[0]),r=TS(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Yk("batchDot is not implemented for tensors of 4D or higher rank yet");if(Zu(e.shape.length>=2,(()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length))),Zu(e.shape.length>=2,(()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length))),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Yk("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,o=t.shape.length;null==n&&(n=[r-1,o-2]);const a=n;return IG((()=>{let n,i;if(r>o){n=r-o;const e=[];for(let t=0;t<n;++t)e.push(1);t=_T(t,t.shape.concat(e))}else if(o>r){n=o-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=_T(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=a[0]===a[1]?Rg(Vm(e,t),a[0]):Rg(Vm(Qv(e,[1,0]),t),a[1]);else{const n=a[0]!==e.shape.length-1,r=a[1]===t.shape.length-1;i=RT(e,t,n,r)}if(n>0){let e;e=r>o?r+o-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=_v(i,t)}return 1===i.shape.length&&(i=Lg(i,1)),i}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[ZE(this.axes,e.length),ZE(this.axes,t.length)],n}computeOutputShape(e){Zu(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Yk("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const o=t.concat(n);return 1===o.length&&o.push(1),o}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}JE.className="Dot",Jm(JE);class QE extends V_{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e);return o_((()=>Pm(JI(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}QE.className="GaussianNoise",Jm(QE);class $E extends V_{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return IG((()=>{this.invokeCallHook(e,t);const n=S_(e);if(this.rate>0&&this.rate<1){return o_((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return Vm(n,JI(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}$E.className="GaussianDropout",Jm($E);class eR extends V_{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||S_(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return IG((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=S_(e),r=-1.7580993408473766;let o=Ug(Jy(n),this.rate);o=WI(o,"float32");const a=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-a*r*this.rate,s=Pm(Vm(t,o),Vm(Pm(o,-1),r));return Pm(Vm(s,a),i)};return o_(r,(()=>S_(e)),t.training||!1)}return e}))}}function tR(e,t,n,r,o){let a,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)a=zT(e,t,n,r,o,i);else if(3===e.rank)a=BT(e,t,n,r,o,i);else{if(4!==e.rank)throw new Yk("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");a=VT(e,t,n,r,o,i)}return a}function nR(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ed(r.slice().sort(),BI(0,e.rank-1))?function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return IG((()=>{const a=xy(e,r),i=a.mean,s=a.variance;return[tR(e,i,s,n,t,o),i,s]}))}(e,t,n,r,o):function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return IG((()=>{const a=xy(e,r),i=a.mean,s=a.variance,l=[];for(const t of BI(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=_T(i,l),u=_T(s,l),d=null==t?null:_T(t,l),p=null==n?null:_T(n,l);return[tR(e,c,u,p,d,o),i,s]}))}(e,t,n,r,o)}eR.className="AlphaDropout",Jm(eR);class rR extends V_{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=k_(e.betaInitializer||"zeros"),this.gammaInitializer=k_(e.gammaInitializer||"ones"),this.movingMeanInitializer=k_(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=k_(e.movingVarianceInitializer||"ones"),this.betaConstraint=iS(e.betaConstraint),this.gammaConstraint=iS(e.gammaConstraint),this.betaRegularizer=UN(e.betaRegularizer),this.gammaRegularizer=UN(e.gammaRegularizer)}build(e){e=N_(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Xk("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new O_({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return IG((()=>{const n=null!=t.training&&t.training,r=S_(e),o=r.shape,a=o.length,i=BI(0,a),s=this.axis>=0?this.axis:this.axis+a;i.splice(s,1);const l=Qk(1,a);l[s]=o[s];const c=i.slice();c.sort();const u=!ed(c,BI(0,a).slice(0,a-1));if(!n)return(()=>{if(u){const e=_T(this.movingMean.read(),l),t=_T(this.movingVariance.read(),l),n=this.center?_T(this.beta.read(),l):null,o=this.scale?_T(this.gamma.read(),l):null;return tR(r,e,t,n,o,this.epsilon)}return tR(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,h]=nR(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{IG((()=>{const r=1-n,o=e.read(),a=Vm(rA(o,t),r);e.write(rA(o,a))}))};return(()=>{f(this.movingMean,p,this.momentum),f(this.movingVariance,h,this.momentum)})(),d}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:w_(this.betaInitializer),gammaInitializer:w_(this.gammaInitializer),movingMeanInitializer:w_(this.movingMeanInitializer),movingVarianceInitializer:w_(this.movingVarianceInitializer),betaRegularizer:HN(this.betaRegularizer),gammaRegularizer:HN(this.gammaRegularizer),betaConstraint:oS(this.betaConstraint),gammaConstraint:oS(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}rR.className="BatchNormalization",Jm(rR);class oR extends V_{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=k_(e.betaInitializer||"zeros"),this.gammaInitializer=k_(e.gammaInitializer||"ones"),this.betaRegularizer=UN(e.betaRegularizer),this.gammaRegularizer=UN(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=N_(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==uI(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map((t=>e[t]));this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}call(e,t){const n=S_(e),r=n.shape,o=r.length;return IG((()=>{let{mean:e,variance:t}=xy(n,this.axis,!0);const a=Qk(1,o);for(const n of this.axis)a[n]=r[n];const i=e=>null!=e&&e.shape.length!==o?_T(e,a):e;let s=this.scale?i(this.gamma.read()):null,l=this.center?i(this.beta.read()):null;const c=[],u=[];for(let n=0;n<o;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=zg(e,c),t=zg(t,c),null!=s&&(s=zg(s,u)),null!=l&&(l=zg(l,u)),tR(n,e,t,l,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:w_(this.betaInitializer),gammaInitializer:w_(this.gammaInitializer),betaRegularizer:HN(this.betaRegularizer),gammaRegularizer:HN(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}oR.className="LayerNormalization",Jm(oR);class aR extends V_{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Xk("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Xk("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new Xk("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new O_({ndim:4})]}computeOutputShape(e){let t,n;return e=N_(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return IG((()=>{return t=S_(e),n=this.padding,r=this.dataFormat,IG((()=>{if(4!==t.rank)throw new Xk("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new Xk("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new Xk("Unknown data format: ".concat(r,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],Ey(t,e)}));var t,n,r}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function iR(e,t,n,r,o,a){return IG((()=>{let i;II(o),SI(a),_I(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=eE(e,o);const s="same"===r?"same":"valid";return i="max"===a?fy(e,t,n,s):ST(e,t,n,s),"channelsFirst"===o&&(i=Qv(i,[0,3,1,2])),i}))}function sR(e,t,n,r,o,a){return IG((()=>{let i;II(o),SI(a),_I(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=tE(e,o);const s="same"===r?"same":"valid";return i="max"===a?Cy(e,t,n,s):NT(e,t,n,s),"channelsFirst"===o&&(i=Qv(i,[0,4,1,2,3])),i}))}aR.className="ZeroPadding2D",Jm(aR);class lR extends V_{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Xk("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(fI(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Xk("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}fI(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,_I(this.padding),this.inputSpec=[new O_({ndim:3})]}computeOutputShape(e){const t=QN((e=N_(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return IG((()=>{this.invokeCallHook(e,t),e=UI(S_(e),2);const n=this.poolingFunction(S_(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return _v(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class cR extends lR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),iR(e,t,n,r,o,"max")}}cR.className="MaxPooling1D",Jm(cR);class uR extends lR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),iR(e,t,n,r,o,"avg")}}uR.className="AveragePooling1D",Jm(uR);class dR extends V_{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Xk("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];fI(this.poolSize,"poolSize"),fI(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,II(this.dataFormat),_I(this.padding),this.inputSpec=[new O_({ndim:4})]}computeOutputShape(e){e=N_(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=QN(t,this.poolSize[0],this.padding,this.strides[0]),n=QN(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return IG((()=>(this.invokeCallHook(e,t),this.poolingFunction(S_(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class pR extends dR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),iR(e,t,n,r,o,"max")}}pR.className="MaxPooling2D",Jm(pR);class hR extends dR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),iR(e,t,n,r,o,"avg")}}hR.className="AveragePooling2D",Jm(hR);class fR extends V_{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Xk("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];fI(this.poolSize,"poolSize"),fI(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,II(this.dataFormat),_I(this.padding),this.inputSpec=[new O_({ndim:5})]}computeOutputShape(e){e=N_(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=QN(t,this.poolSize[0],this.padding,this.strides[0]),n=QN(n,this.poolSize[1],this.padding,this.strides[1]),r=QN(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return IG((()=>(this.invokeCallHook(e,t),this.poolingFunction(S_(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class CR extends fR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),sR(e,t,n,r,o,"max")}}CR.className="MaxPooling3D",Jm(CR);class GR extends fR{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return II(o),_I(r),sR(e,t,n,r,o,"avg")}}GR.className="AveragePooling3D",Jm(GR);class mR extends V_{constructor(e){super(e),this.inputSpec=[new O_({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Yk}}class AR extends mR{constructor(e){super(e||{})}call(e,t){return IG((()=>{const t=S_(e);return my(t,1)}))}}AR.className="GlobalAveragePooling1D",Jm(AR);class TR extends mR{constructor(e){super(e||{})}call(e,t){return IG((()=>{const t=S_(e);return Ng(t,1)}))}}TR.className="GlobalMaxPooling1D",Jm(TR);class gR extends V_{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,II(this.dataFormat),this.inputSpec=[new O_({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Yk}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class yR extends gR{call(e,t){return IG((()=>{const t=S_(e);return"channelsLast"===this.dataFormat?my(t,[1,2]):my(t,[2,3])}))}}yR.className="GlobalAveragePooling2D",Jm(yR);class vR extends gR{call(e,t){return IG((()=>{const t=S_(e);return"channelsLast"===this.dataFormat?Ng(t,[1,2]):Ng(t,[2,3])}))}}vR.className="GlobalMaxPooling2D",Jm(vR);class bR extends V_{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=AS(t.layer,n);delete t.layer;const o={layer:r};return Object.assign(o,t),new e(o)}}class xR extends bR{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=N_(e)).length<3)throw new Xk("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=N_(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return IG((()=>AE(((e,n)=>[S_(this.layer.call(e,t)),[]]),e=S_(e),[],!1,null,null,!1,!0)[1]))}}xR.className="TimeDistributed",Jm(xR);class wR extends bR{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=AS(n),t.goBackwards=!0!==t.goBackwards;const r={};var o;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=AS(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=this.mergeMode,pI(wI,"BidirectionalMergeMode",o),e.weights)throw new Yk("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,o=this.forwardLayer.computeOutputShape(e);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),this.returnState?(r=o.slice(1),t=o[0]):t=o[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):tI(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=mE(e,n,r,this.numConstants);if(e=o.inputs,n=o.initialState,r=o.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const a=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new Xk("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);const r=n.map((e=>new O_({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new Yk("Support for constants in Bidirectional layers is not implemented yet.");const s=a[0]instanceof L_;for(const l of a)if(l instanceof L_!==s)throw new Xk("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return IG((()=>{const n=t.initialState;let r,o,a,i;if(null==n)r=this.forwardLayer.call(e,t),o=this.backwardLayer.call(e,t);else{const a=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),o=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=ov(o,1)),"concat"===this.mergeMode?i=XI([r,o]):"sum"===this.mergeMode?i=Pm(r,o):"ave"===this.mergeMode?i=Vm(.5,Pm(r,o)):"mul"===this.mergeMode?i=Vm(r,o):null==this.mergeMode&&(i=[r,o]),this.returnState?null==this.mergeMode?i.concat(a):[i].concat(a):i}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){RI(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),RI(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=AS(t.layer);if(delete t.layer,null!=t.numConstants)throw new Yk("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}wR.className="Bidirectional",Jm(wR);class kR extends V_{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return IG((()=>("float32"!==(e=S_(e)).dtype&&(e=WI(e,"float32")),Pm(Vm(e,this.scale),this.offset))))}}kR.className="Rescaling",Jm(kR);const{resizeBilinear:IR,cropAndResize:_R}=Gx;class SR extends V_{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,o,a,i,s){return IG((()=>{let l,c=!1;const u=[t/a,n/i,(r+t)/a,(o+n)/i],d=[];3===e.rank?(c=!0,l=Sv([e])):l=e;for(let e=0;e<l.shape[0];e++)d.push(u);const p=vG(d,[d.length,4]),h=$y(0,d.length,1,"int32"),f=_R(l,p,h,[r,o],"nearest");return WI(c?S_(Kv(f)):f,s)}))}upsize(e,t,n,r){return IG((()=>WI(IR(e,[t,n]),r)))}call(e,t){return IG((()=>{const t=S_(e),n=t.dtype,r=t.shape,o=r[r.length-3],a=r[r.length-2];let i=0;o!==this.height&&(i=Math.floor((o-this.height)/2));let s=0;return a!==this.width&&(s=Math.floor((a-this.width)/2),0===s&&(s=1)),i>=0&&s>=0?this.centerCrop(t,i,s,this.height,this.width,o,a,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=N_(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}SR.className="CenterCrop",Jm(SR);class NR extends V_{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=N_(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return IG((()=>{let n;if("int32"!==(e=S_(e)).dtype&&(e=WI(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new Xk("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=S_(t.countWeights)}const r=Ng(e),o=Eg(e),a=Wg(this.numTokens,r).bufferSync().get(0),i=Ug(o,0).bufferSync().get(0);if(!a||!i)throw new Xk("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let o=S_(e);if("int32"!==o.dtype&&(o=WI(o,"int32")),"int"===t)return o;const a=o.shape;if(0===o.rank&&(o=Lg(o,-1)),"oneHot"===t&&1!==o.shape[o.shape.length-1]&&(o=Lg(o,-1)),o.rank>2)throw new Xk("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(a)+" which would result in output rank ".concat(o.rank,"."));const i=["multiHot","oneHot"].includes(t),s=o;let l;if(l=cg(s,"undefined"!==typeof r&&"count"===t?r:[],n,i),"tfIdf"!==t)return l;if(r)return Vm(l,r);throw new Xk("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}NR.className="CategoryEncoding",Jm(NR);const ER=new Set(["bilinear","nearest"]);class RR extends V_{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!ER.has(e.interpolation))throw new Xk("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=N_(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return IG((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return Gx.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return Gx.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...ER]," are supported"))}))}}RR.className="Resizing",Jm(RR);class DR{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}DR.className="RandomSeed";class FR extends V_{constructor(e){super(e),this.randomGenerator=new DR(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}FR.className="BaseRandomLayer";const MR=new Set(["bilinear","nearest"]);class OR extends FR{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new Xk("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new Xk("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new Xk("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!MR.has(n))throw new Xk("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=N_(e))[2];return[this.imgHeight,-1,t]}call(e,t){return IG((()=>{const t=S_(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=Jy([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return Gx.resizeBilinear(e,o);case"nearest":return Gx.resizeNearestNeighbor(e,o);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...MR]," are supported"))}}))}}OR.className="RandomWidth",Jm(OR);var LR,PR;Nd().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(LR||(LR={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(PR||(PR={}));const zR={};function BR(e){return zR[e]}function VR(e,t,n,r,o){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,i=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===a.type)return HR(t.inputNames[s],n,r,o);if("tensors"===a.type){const a=t.inputs.slice(e,i),s=t.inputNames.slice(e,i).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=a[t])||void 0===n?void 0:n.op)}));return s.map((e=>HR(e,n,r,o)))}const l=HR(t.inputNames[s],n,r,o),c=l.dataSync();return"number"===a.type?c[0]:Td(l.shape,c)}const i=t.attrParams[e];return i&&i.value}function HR(e,t,n,r){const[o,a]=KR(e,n);if(null!=r){const e=r.getHashTableHandleByName(o);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[jR(o,e)]));return void 0!==i?t[jR(o,i)][a]:void 0}function WR(e,t,n){return t[jR(e,n.currentContextId)]}function UR(e,t){const[n,r,o]=KR(e,t);return[jR(n,t&&t.currentContextId),r,o]}function jR(e,t){return t?"".concat(e,"-").concat(t):e}function KR(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let o;if(1===r.length)o=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;o=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,o),o}function qR(e,t,n){let r=VR("pad",e,t,n);if("explicit"===r){r=VR("explicitPaddings",e,t,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=r[2*e],o[e][1]=r[2*e+1];return o}return r}function XR(e){return e.kept?e:Om(e)}const YR=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ZR=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JR=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],QR=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],$R=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],eD=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],tD=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],nD=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],rD=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],oD=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],aD=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],iD=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],sD=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],lD=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],cD=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],uD=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],dD=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],pD=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],hD=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class fD{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[i,s,l,c,u,d,p,h,f,C,G,m,A,T,g,y,v,b,x].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],o=[],a=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let s=[];const l=[];let c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const d=Object.keys(i);d.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=UR(e),a=i[r];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const o="".concat(r,":").concat(e);t.inputNames[n]=o}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(u).length?d.forEach((e=>{const t=i[e];0===t.children.length&&l.push(t)})):Object.keys(u).forEach((e=>{const[t]=UR(e),n=i[t];null!=n&&(n.signatureKey=u[e],l.push(n))})),Object.keys(c).length>0?Object.keys(c).forEach((e=>{const[t]=UR(e),n=i[t];n&&(n.signatureKey=c[e],s.push(n))})):s=r;let p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:i,inputs:s,outputs:l,weights:o,placeholders:r,signature:t,functions:p};return a.length>0&&(h.initNodes=a),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=BR(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let o;switch(n.type){case"string":o=GD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=GD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":o=kD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=kD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":o=AD(e.attr,n.tfName,n.defaultValue||0),void 0===o&&n.tfDeprecatedName&&(o=AD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":o=wD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=wD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":o=mD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=mD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":o=_D(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=_D(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":o=xD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=xD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":o=ID(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=ID(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":o=yD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=yD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":o=vD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=vD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":o=gD(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=gD(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:o,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const o=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=UR(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:TD(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[o,,a]=UR(e),i=r[o];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const r="".concat(o,":").concat(e);t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=UR(i[e.name]),o=r[t];null!=o&&(o.defaultOutput=n,a.push(o))}));const s=this.mapArgsToSignature(e);return{nodes:r,inputs:o,outputs:a,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function CD(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Nd().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function GD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return null!=o?CD(o.s,r):n}function mD(e,t,n){const r=e[t];return r?r.b:n}function AD(e,t,n){const r=e[t]||{},o=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof o?o:parseInt(o,10)}function TD(e){switch("string"===typeof e&&(e=LR[e]),e){case LR.DT_FLOAT:case LR.DT_HALF:return"float32";case LR.DT_INT32:case LR.DT_INT64:case LR.DT_INT8:case LR.DT_UINT8:return"int32";case LR.DT_BOOL:return"bool";case LR.DT_DOUBLE:return"float32";case LR.DT_STRING:return"string";case LR.DT_COMPLEX64:case LR.DT_COMPLEX128:return"complex64";default:return null}}function gD(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function yD(e,t,n){const r=e[t];return r&&r.type?TD(r.type):n}function vD(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>TD(e))):n}function bD(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function xD(e,t,n){const r=e[t];return r&&r.shape?bD(r.shape):n}function wD(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function kD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>CD(e,r))):n}function ID(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>bD(e))):n}function _D(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class SD{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return HR(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return HR(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return AD(this.node.rawAttrs,e,t);if(null!=n.s)return GD(this.node.rawAttrs,e,t);if(null!=n.b)return mD(this.node.rawAttrs,e,t);if(null!=n.shape)return xD(this.node.rawAttrs,e,t);if(null!=n.type)return yD(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return wD(this.node.rawAttrs,e,t);if(null!=n.list.s)return kD(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ID(this.node.rawAttrs,e,t);if(null!=n.list.b)return _D(this.node.rawAttrs,e,t);if(null!=n.list.type)return vD(this.node.rawAttrs,e,t)}return t}}function ND(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Zu(e.length===t.length,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];Zu(o<0||a<0||o===a,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}}}function ED(e){return"number"!==typeof e&&!e.some((e=>e<0))}function RD(e,t,n){let r=DD(e,n);const o=!ED(r);if(o&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(o&&t.forEach((e=>{r=DD(e.shape,r)})),!ED(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function DD(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let r=0;r<e.length;++r){const o=e[r],a=t[r];if(o>=0&&a>=0&&o!==a)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=o>=0?o:a}return n}class FD{constructor(e,t,n,r,o,a,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Km(0),SG(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),ND(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,SG(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return vG([],[0].concat(this.elementShape));const n=this.readMany(e);return ND(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Sv(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return vG([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return ND(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),ET(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Kv(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const o=0===n?0:t.size/n,a=[];IG((()=>{t=_T(t,[1,n,o]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],s=[1,e[n],o];a[n]=_T(FT(t,i,s),this.elementShape)}return a}));const i=[];for(let s=0;s<e.length;s++)i[s]=s;this.writeMany(i,a)}}class MD{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));ND(t,e.shape,"TensorList shape mismatch: "),SG(e)})),this.idTensor=Km(0),this.maxNumElements=r,SG(this.idTensor)}copy(){return new MD([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));ND(e,this.elementShape,"TensorList shape mismatch: ");const r=RD(this.elementShape,this.tensors,e);return IG((()=>{const e=this.tensors.map((e=>_T(e,r)));return Sv(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=RD(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,ND(r.shape,e,"TensorList shape mismatch: "),_T(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(ND(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");SG(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new MD([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));ND(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=RD(this.elementShape,this.tensors,t);return _T(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));ND(this.elementShape,t.shape,"TensorList shape mismatch: "),SG(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));ND(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=RD(this.elementShape,this.tensors,n);return 0===e.length?vG([],[0].concat(r)):IG((()=>{const t=e.map((e=>_T(this.tensors[e],r)));return Sv(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));ND(this.elementShape,t,"TensorList shape mismatch: ");const n=RD(this.elementShape,this.tensors,t);return 0===this.size()?vG([],[0].concat(n)):IG((()=>{const e=this.tensors.map((e=>_T(e,n)));return ET(e,0)}))}}const OD=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=VR("thenBranch",e,t,n),o=VR("elseBranch",e,t,n),a=VR("cond",e,t,n),i=VR("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=VR("body",e,t,n),o=VR("cond",e,t,n),a=VR("args",e,t,n),i=await n.functionMap[o].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map((e=>e.id));let l=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let c=a;for(;l[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return c}case"LoopCond":return[XR(VR("pred",e,t,n))];case"Switch":{const r=VR("pred",e,t,n);let o=VR("data",e,t,n);return o.kept||(o=XR(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==HR(e,t,n)));if(r){return[XR(HR(r,t,n))]}return}case"Enter":{const r=VR("frameName",e,t,n),o=VR("tensor",e,t,n);return n.enterFrame(r),[XR(o)]}case"Exit":{const r=VR("tensor",e,t,n);return n.exitFrame(),[XR(r)]}case"NextIteration":{const r=VR("tensor",e,t,n);return n.nextIteration(),[XR(r)]}case"TensorArrayV3":{const r=VR("size",e,t,n),o=VR("dtype",e,t,n),a=VR("elementShape",e,t,n),i=VR("dynamicSize",e,t,n),s=VR("clearAfterRead",e,t,n),l=VR("identicalElementShapes",e,t,n),c=VR("name",e,t,n),u=new FD(c,o,r,a,l,i,s);return n.addTensorArray(u),[u.idTensor,Km(1)]}case"TensorArrayWriteV3":{const r=VR("tensorArrayId",e,t,n),o=VR("index",e,t,n),a=VR("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const r=VR("tensorArrayId",e,t,n),o=VR("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=VR("tensorArrayId",e,t,n),o=VR("indices",e,t,n),a=VR("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,a)]}case"TensorArrayScatterV3":{const r=VR("tensorArrayId",e,t,n),o=VR("indices",e,t,n),a=VR("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=VR("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),a=VR("dtype",e,t,n);return[o.concat(a)]}case"TensorArraySplitV3":{const r=VR("tensorArrayId",e,t,n),o=VR("tensor",e,t,n),a=VR("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const r=VR("tensorArrayId",e,t,n);return[Km(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=VR("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=VR("tensorListId",e,t,n),o=VR("index",e,t,n),a=VR("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const r=VR("tensorListId",e,t,n),o=VR("index",e,t,n),a=VR("elementShape",e,t,n),i=VR("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=VR("indices",e,t,n),o=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const o=Math.max(...t);if(null!=r&&-1!==r&&o>=r)throw new Error("Max index must be < array size (".concat(o,"  vs. ").concat(r,")"));const a=new MD([],n,e.dtype,r),i=Kv(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(VR("tensor",e,t,n),r,VR("elementShape",e,t,n),VR("numElements",e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=VR("elementShape",e,t,n),o=VR("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=VR(a,e,t,n),s=function(e,t,n,r){return new MD([],e,t,r)}(r,o,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=VR("tensorListId",e,t,n),o=VR("indices",e,t,n),a=VR("elementShape",e,t,n),i=VR("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,i,a)]}case"TensorListStack":{const r=VR("tensorListId",e,t,n),o=VR("elementShape",e,t,n),a=VR("elementDType",e,t,n),i=VR("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,a,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));ND(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=Kv(e);return new MD(o,t,r)}(VR("tensor",e,t,n),VR("elementShape",e,t,n),VR("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=VR("tensorListId",e,t,n),o=n.getTensorList(r.id),a=VR("dtype",e,t,n),i=VR("elementShape",e,t,n);return[o.concat(a,i)]}case"TensorListPushBack":{const r=VR("tensorListId",e,t,n),o=VR("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const r=VR("tensorListId",e,t,n),o=VR("elementShape",e,t,n),a=VR("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,a)]}case"TensorListSplit":{const r=VR("tensor",e,t,n),o=VR("elementShape",e,t,n),a=function(e,t,n){let r=0;const o=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));const a=DD(e.shape.slice(1),n),i=0===r?0:e.size/r,s=IG((()=>{const n=[];e=_T(e,[1,r,i]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:o[r-1],0],l=[1,t[r],i];n[r]=_T(FT(e,s,l),a)}return e.dispose(),n})),l=new MD([],n,e.dtype,t.length);for(let c=0;c<s.length;c++)l.setItem(c,s[c]);return l}(r,VR("lengths",e,t,n),o);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=VR("tensorListId",e,t,n);return[Km(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=VR("tensorListId",e,t,n),o=VR("size",e,t,n),a=n.getTensorList(r.id).resize(o);return n.addTensorList(a),[a.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function LD(e,t,n){const[r,o]=VR("fusedOps",e,t,n),a="biasadd"===r,i=!a,s="prelu"===o,l="fusedbatchnorm"===r,c=VR("numArgs",e,t,n);if(a){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=VR("strides",e,t,n),d=qR(e,t,n),p=VR("dataFormat",e,t,n).toUpperCase(),h=VR("dilations",e,t,n);let[f,C]=VR("args",e,t,n);i&&(C=f,f=void 0);return{stride:u,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:C,activationFunc:o,leakyreluAlpha:VR("leakyreluAlpha",e,t,n)}}function PD(e,t,n){return{boxes:VR("boxes",e,t,n),scores:VR("scores",e,t,n),maxOutputSize:VR("maxOutputSize",e,t,n),iouThreshold:VR("iouThreshold",e,t,n),scoreThreshold:VR("scoreThreshold",e,t,n),softNmsSigma:VR("softNmsSigma",e,t,n)}}class zD{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Km(0),this.tensorMap=new Map,SG(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Km(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),IG((()=>{const e=Kv(t),r=n.length,o=e.length;Zu(r===o,(()=>"The number of elements doesn't match, keys has "+"".concat(r," elements, the values has ").concat(o," ")+"elements."));for(let t=0;t<r;t++){const r=n[t],o=e[t];SG(o),this.tensorMap.set(r,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return IG((()=>{const e=[];for(let r=0;r<n.length;r++){const o=n[r],a=this.findWithDefault(o,t);e.push(a)}return Sv(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function BD(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IG;const a=((e,t,n)=>{switch(e.category){case"arithmetic":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(VR("a",e,t,n),VR("b",e,t,n))];case"AddN":return[r.addN(VR("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(VR("a",e,t,n),VR("b",e,t,n))];case"Mul":return[r.mul(VR("a",e,t,n),VR("b",e,t,n))];case"RealDiv":case"Div":return[r.div(VR("a",e,t,n),VR("b",e,t,n))];case"DivNoNan":return[r.divNoNan(VR("a",e,t,n),VR("b",e,t,n))];case"FloorDiv":return[r.floorDiv(VR("a",e,t,n),VR("b",e,t,n))];case"Sub":return[r.sub(VR("a",e,t,n),VR("b",e,t,n))];case"Minimum":return[r.minimum(VR("a",e,t,n),VR("b",e,t,n))];case"Maximum":return[r.maximum(VR("a",e,t,n),VR("b",e,t,n))];case"Pow":return[r.pow(VR("a",e,t,n),VR("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(VR("a",e,t,n),VR("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"basic_math":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(VR("x",e,t,n))];case"Acos":return[r.acos(VR("x",e,t,n))];case"Acosh":return[r.acosh(VR("x",e,t,n))];case"Asin":return[r.asin(VR("x",e,t,n))];case"Asinh":return[r.asinh(VR("x",e,t,n))];case"Atan":return[r.atan(VR("x",e,t,n))];case"Atan2":return[r.atan2(VR("x",e,t,n),VR("y",e,t,n))];case"Atanh":return[r.atanh(VR("x",e,t,n))];case"Ceil":return[r.ceil(VR("x",e,t,n))];case"Complex":return[r.complex(VR("real",e,t,n),VR("imag",e,t,n))];case"Cos":return[r.cos(VR("x",e,t,n))];case"Cosh":return[r.cosh(VR("x",e,t,n))];case"Elu":return[r.elu(VR("x",e,t,n))];case"Erf":return[r.erf(VR("x",e,t,n))];case"Exp":return[r.exp(VR("x",e,t,n))];case"Expm1":return[r.expm1(VR("x",e,t,n))];case"Floor":return[r.floor(VR("x",e,t,n))];case"Log":return[r.log(VR("x",e,t,n))];case"Log1p":return[r.log1p(VR("x",e,t,n))];case"Imag":return[r.imag(VR("x",e,t,n))];case"Neg":return[r.neg(VR("x",e,t,n))];case"Reciprocal":return[r.reciprocal(VR("x",e,t,n))];case"Real":return[r.real(VR("x",e,t,n))];case"Relu":return[r.relu(VR("x",e,t,n))];case"Round":return[r.round(VR("x",e,t,n))];case"Selu":return[r.selu(VR("x",e,t,n))];case"Sigmoid":return[r.sigmoid(VR("x",e,t,n))];case"Sin":return[r.sin(VR("x",e,t,n))];case"Sign":return[r.sign(VR("x",e,t,n))];case"Sinh":return[r.sinh(VR("x",e,t,n))];case"Softplus":return[r.softplus(VR("x",e,t,n))];case"Sqrt":return[r.sqrt(VR("x",e,t,n))];case"Square":return[r.square(VR("x",e,t,n))];case"Tanh":return[r.tanh(VR("x",e,t,n))];case"Tan":return[r.tan(VR("x",e,t,n))];case"ClipByValue":return[r.clipByValue(VR("x",e,t,n),VR("clipValueMin",e,t,n),VR("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(VR("x",e,t,n))];case"Rsqrt":return[r.rsqrt(HR(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(VR("x",e,t,n),VR("alpha",e,t,n))];case"Prelu":return[r.prelu(VR("x",e,t,n),VR("alpha",e,t,n))];case"IsNan":return[r.isNaN(HR(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(HR(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(HR(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"control":return OD(e,t,n);case"convolution":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Conv1D":{const o=VR("stride",e,t,n),a=VR("pad",e,t,n),i=VR("dataFormat",e,t,n).toUpperCase(),s=VR("dilation",e,t,n);return[r.conv1d(VR("x",e,t,n),VR("filter",e,t,n),o,a,i,s)]}case"Conv2D":{const o=VR("strides",e,t,n),a=qR(e,t,n),i=VR("dataFormat",e,t,n).toUpperCase(),s=VR("dilations",e,t,n);return[r.conv2d(VR("x",e,t,n),VR("filter",e,t,n),[o[1],o[2]],a,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=LD(e,t,n);return[r.fused.conv2d({x:VR("x",e,t,n),filter:VR("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=LD(e,t,n);return[r.fused.depthwiseConv2d({x:VR("x",e,t,n),filter:VR("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=VR("outputShape",e,t,n),a=VR("strides",e,t,n),i=qR(e,t,n);return[r.conv2dTranspose(VR("x",e,t,n),VR("filter",e,t,n),o,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=VR("strides",e,t,n),a=qR(e,t,n),i=VR("dilations",e,t,n),s=VR("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(VR("input",e,t,n),VR("filter",e,t,n),[o[1],o[2]],a,s,[i[1],i[2]])]}case"Conv3D":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("dataFormat",e,t,n).toUpperCase(),s=VR("dilations",e,t,n);return[r.conv3d(VR("x",e,t,n),VR("filter",e,t,n),[o[1],o[2],o[3]],a,i,[s[1],s[2],s[3]])]}case"AvgPool":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("kernelSize",e,t,n);return[r.avgPool(VR("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPool":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("kernelSize",e,t,n);return[r.maxPool(VR("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPoolWithArgmax":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("kernelSize",e,t,n),s=VR("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(VR("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a,s);return[l,c]}case"AvgPool3D":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("kernelSize",e,t,n);return[r.avgPool3d(VR("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"MaxPool3D":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("kernelSize",e,t,n);return[r.maxPool3d(VR("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"Dilation2D":{const o=VR("strides",e,t,n),a=VR("pad",e,t,n),i=VR("dilations",e,t,n),s=o[1],l=o[2],c=i[1],u=i[2];return[r.dilation2d(VR("x",e,t,n),VR("filter",e,t,n),[s,l],a,[c,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"creation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Fill":{const o=VR("shape",e,t,n),a=VR("dtype",e,t,n),i=VR("value",e,t,n);return[r.fill(o,i,a)]}case"LinSpace":{const o=VR("start",e,t,n),a=VR("stop",e,t,n),i=VR("num",e,t,n);return[r.linspace(o,a,i)]}case"Multinomial":{const o=VR("logits",e,t,n),a=VR("numSamples",e,t,n),i=VR("seed",e,t,n);return[r.multinomial(o,a,i)]}case"OneHot":{const o=VR("indices",e,t,n),a=VR("depth",e,t,n),i=VR("onValue",e,t,n),s=VR("offValue",e,t,n),l=VR("dtype",e,t,n);return[r.oneHot(o,a,i,s,l)]}case"Ones":return[r.ones(VR("shape",e,t,n),VR("dtype",e,t,n))];case"OnesLike":return[r.onesLike(VR("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(VR("shape",e,t,n),VR("dtype",e,t,n),VR("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(VR("shape",e,t,n),VR("minval",e,t,n),VR("maxval",e,t,n),VR("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(VR("shape",e,t,n),VR("minval",e,t,n),VR("maxval",e,t,n),VR("seed",e,t,n))];case"Range":{const o=VR("start",e,t,n),a=VR("stop",e,t,n),i=VR("step",e,t,n);return[r.range(o,a,i,VR("dtype",e,t,n))]}case"TruncatedNormal":{const o=VR("shape",e,t,n),a=VR("mean",e,t,n),i=VR("stdDev",e,t,n),s=VR("seed",e,t,n);return[r.truncatedNormal(o,a,i,VR("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(VR("shape",e,t,n),VR("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(VR("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"dynamic":return async function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=PD(e,t,n),u=await o.image.nonMaxSuppressionWithScoreAsync(r,a,i,s,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=PD(e,t,n),c=VR("padToMaxOutputSize",e,t,n),u=await o.image.nonMaxSuppressionPaddedAsync(r,a,i,s,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=PD(e,t,n);return[await o.image.nonMaxSuppressionAsync(r,a,i,s,l)]}case"Where":{const r=o.cast(VR("condition",e,t,n),"bool"),a=[await o.whereAsync(r)];return r.dispose(),a}case"ListDiff":return o.setdiff1dAsync(VR("x",e,t,n),VR("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"LowerBound":{const o=VR("sortedSequence",e,t,n),a=VR("values",e,t,n);return[r.lowerBound(o,a)]}case"TopKV2":{const o=VR("x",e,t,n),a=VR("k",e,t,n),i=VR("sorted",e,t,n),s=r.topk(o,a,i);return[s.values,s.indices]}case"UpperBound":{const o=VR("sortedSequence",e,t,n),a=VR("values",e,t,n);return[r.upperBound(o,a)]}case"Unique":{const o=VR("x",e,t,n),a=r.unique(o);return[a.values,a.indices]}case"UniqueV2":{const o=VR("x",e,t,n),a=VR("axis",e,t,n),i=r.unique(o,a);return[i.values,i.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"image":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ResizeBilinear":{const o=VR("images",e,t,n),a=VR("size",e,t,n),i=VR("alignCorners",e,t,n),s=VR("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[a[0],a[1]],i,s)]}case"ResizeNearestNeighbor":{const o=VR("images",e,t,n),a=VR("size",e,t,n),i=VR("alignCorners",e,t,n),s=VR("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[a[0],a[1]],i,s)]}case"CropAndResize":{const o=VR("image",e,t,n),a=VR("boxes",e,t,n),i=VR("boxInd",e,t,n),s=VR("cropSize",e,t,n),l=VR("method",e,t,n),c=VR("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,a,i,s,l,c)]}case"ImageProjectiveTransformV3":{const o=VR("images",e,t,n),a=VR("transforms",e,t,n),i=VR("outputShape",e,t,n),s=VR("fillValue",e,t,n),l=VR("interpolation",e,t,n),c=VR("fillMode",e,t,n);return[r.image.transform(o,a,l.toLowerCase(),c.toLowerCase(),s,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"graph":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const o=VR("default",e,t,n);return[HR(e.name,t,n)||o];case"Placeholder":return[HR(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[XR(VR("x",e,t,n))];case"IdentityN":return VR("x",e,t,n).map((e=>XR(e)));case"Shape":return[r.tensor1d(VR("x",e,t,n).shape,"int32")];case"ShapeN":return VR("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(VR("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(VR("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=VR("x",e,t,n),i=VR("data",e,t,n),s=VR("message",e,t,n),l=VR("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,l));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"logical":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Equal":return[r.equal(VR("a",e,t,n),VR("b",e,t,n))];case"NotEqual":return[r.notEqual(VR("a",e,t,n),VR("b",e,t,n))];case"Greater":return[r.greater(VR("a",e,t,n),VR("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(VR("a",e,t,n),VR("b",e,t,n))];case"Less":return[r.less(VR("a",e,t,n),VR("b",e,t,n))];case"LessEqual":return[r.lessEqual(VR("a",e,t,n),VR("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(VR("a",e,t,n),VR("b",e,t,n))];case"LogicalNot":return[r.logicalNot(VR("a",e,t,n))];case"LogicalOr":return[r.logicalOr(VR("a",e,t,n),VR("b",e,t,n))];case"Select":case"SelectV2":return[r.where(VR("condition",e,t,n),VR("a",e,t,n),VR("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(VR("a",e,t,n),VR("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"matrices":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(VR("a",e,t,n),VR("b",e,t,n),VR("transposeA",e,t,n),VR("transposeB",e,t,n))];case"Einsum":return[r.einsum(VR("equation",e,t,n),...VR("tensors",e,t,n))];case"Transpose":return[r.transpose(VR("x",e,t,n),VR("perm",e,t,n))];case"_FusedMatMul":const[o,a]=VR("fusedOps",e,t,n),i="biasadd"===o,s="prelu"===a,l=VR("numArgs",e,t,n),c=VR("leakyreluAlpha",e,t,n);if(i){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=VR("args",e,t,n);return[r.fused.matMul({a:VR("a",e,t,n),b:VR("b",e,t,n),transposeA:VR("transposeA",e,t,n),transposeB:VR("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(VR("a",e,t,n),VR("numLower",e,t,n),VR("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"normalization":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(VR("x",e,t,n),VR("axis",e,t,n),VR("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(VR("x",e,t,n),VR("mean",e,t,n),VR("variance",e,t,n),VR("offset",e,t,n),VR("scale",e,t,n),VR("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(VR("x",e,t,n),VR("radius",e,t,n),VR("bias",e,t,n),VR("alpha",e,t,n),VR("beta",e,t,n))];case"Softmax":return[r.softmax(VR("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(VR("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"ragged":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"RaggedGather":{const{outputNestedSplits:o,outputDenseValues:a}=r.raggedGather(VR("paramsNestedSplits",e,t,n),VR("paramsDenseValues",e,t,n),VR("indices",e,t,n),VR("outputRaggedRank",e,t,n));return o.concat(a)}case"RaggedRange":{const{rtNestedSplits:o,rtDenseValues:a}=r.raggedRange(VR("starts",e,t,n),VR("limits",e,t,n),VR("splits",e,t,n));return[o,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(VR("shape",e,t,n),VR("values",e,t,n),VR("defaultValue",e,t,n),VR("rowPartitionTensors",e,t,n),VR("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"reduction":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Max":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.max(VR("x",e,t,n),o,a)]}case"Mean":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.mean(VR("x",e,t,n),o,a)]}case"Min":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.min(VR("x",e,t,n),o,a)]}case"Sum":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.sum(VR("x",e,t,n),o,a)]}case"All":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.all(VR("x",e,t,n),o,a)]}case"Any":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.any(VR("x",e,t,n),o,a)]}case"ArgMax":{const o=VR("axis",e,t,n);return[r.argMax(VR("x",e,t,n),o)]}case"ArgMin":{const o=VR("axis",e,t,n);return[r.argMin(VR("x",e,t,n),o)]}case"Prod":{const o=VR("axis",e,t,n),a=VR("keepDims",e,t,n);return[r.prod(VR("x",e,t,n),o,a)]}case"Cumprod":{const o=VR("axis",e,t,n),a=VR("exclusive",e,t,n),i=VR("reverse",e,t,n);return[r.cumprod(VR("x",e,t,n),o,a,i)]}case"Cumsum":{const o=VR("axis",e,t,n),a=VR("exclusive",e,t,n),i=VR("reverse",e,t,n);return[r.cumsum(VR("x",e,t,n),o,a,i)]}case"Bincount":const o=VR("x",e,t,n),a=VR("weights",e,t,n),i=VR("size",e,t,n);return[r.bincount(o,a,i)];case"DenseBincount":{const o=VR("x",e,t,n),a=VR("weights",e,t,n),i=VR("size",e,t,n),s=VR("binaryOutput",e,t,n);return[r.denseBincount(o,a,i,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"slice_join":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ConcatV2":case"Concat":{const o=VR("n",e,t,n),a=VR("axis",e,t,n);let i=VR("tensors",e,t,n);return i=i.slice(0,o),[r.concat(i,a)]}case"Gather":{const o=VR("x",e,t,n),a=VR("indices",e,t,n);return[r.gather(o,r.cast(a,"int32"),0)]}case"GatherV2":{const o=VR("axis",e,t,n),a=VR("batchDims",e,t,n),i=VR("x",e,t,n),s=VR("indices",e,t,n);return[r.gather(i,r.cast(s,"int32"),o,a)]}case"Reverse":{const o=VR("dims",e,t,n),a=[];for(let e=0;e<o.length;e++)o[e]&&a.push(e);const i=VR("x",e,t,n);return[r.reverse(i,a)]}case"ReverseV2":{const o=VR("axis",e,t,n),a=VR("x",e,t,n);return[r.reverse(a,o)]}case"Slice":{const o=VR("begin",e,t,n),a=VR("size",e,t,n);return[r.slice(VR("x",e,t,n),o,a)]}case"StridedSlice":{const o=VR("begin",e,t,n),a=VR("end",e,t,n),i=VR("strides",e,t,n),s=VR("beginMask",e,t,n),l=VR("endMask",e,t,n),c=VR("ellipsisMask",e,t,n),u=VR("newAxisMask",e,t,n),d=VR("shrinkAxisMask",e,t,n),p=VR("x",e,t,n);return[r.stridedSlice(p,o,a,i,s,l,c,u,d)]}case"Pack":return IG((()=>{const o=VR("axis",e,t,n),a=VR("tensors",e,t,n),i=a[0].shape,s=r.squeeze(a[0]).shape,l=a.map((e=>{const t=ed(e.shape,i);if(!t&&!ed(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(l,o)]}));case"Unpack":{const o=VR("axis",e,t,n),a=VR("tensor",e,t,n);return r.unstack(a,o)}case"Tile":{const o=VR("reps",e,t,n);return[r.tile(VR("x",e,t,n),o)]}case"Split":case"SplitV":{const o=VR("axis",e,t,n),a=VR("numOrSizeSplits",e,t,n),i=VR("x",e,t,n);return r.split(i,a,o)}case"ScatterNd":{const o=VR("indices",e,t,n),a=VR("values",e,t,n),i=VR("shape",e,t,n);return[r.scatterND(o,a,i)]}case"GatherNd":{const o=VR("x",e,t,n),a=VR("indices",e,t,n);return[r.gatherND(o,a)]}case"SparseToDense":{const o=VR("sparseIndices",e,t,n),a=VR("outputShape",e,t,n),i=VR("sparseValues",e,t,n),s=VR("defaultValue",e,t,n);return[r.sparseToDense(o,i,a,i.dtype===s.dtype?s:r.cast(s,i.dtype))]}case"TensorScatterUpdate":{const o=VR("indices",e,t,n),a=VR("values",e,t,n),i=VR("tensor",e,t,n);return[r.tensorScatterUpdate(i,o,a)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"sparse":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:a,emptyRowIndicator:i,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(VR("indices",e,t,n),VR("values",e,t,n),VR("denseShape",e,t,n),VR("defaultValue",e,t,n));return[o,a,i,s]}case"SparseReshape":{const{outputIndices:o,outputShape:a}=r.sparse.sparseReshape(VR("inputIndices",e,t,n),VR("inputShape",e,t,n),VR("newShape",e,t,n));return[o,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(VR("data",e,t,n),VR("indices",e,t,n),VR("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(VR("data",e,t,n),VR("indices",e,t,n),VR("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"spectral":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"FFT":return[r.fft(VR("x",e,t,n))];case"IFFT":return[r.ifft(VR("x",e,t,n))];case"RFFT":return[r.rfft(VR("x",e,t,n))];case"IRFFT":return[r.irfft(VR("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"string":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(VR("input",e,t,n),VR("pattern",e,t,n),VR("rewrite",e,t,n),VR("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:o,nGramsSplits:a}=r.string.stringNGrams(VR("data",e,t,n),VR("dataSplits",e,t,n),VR("separator",e,t,n),VR("nGramWidths",e,t,n),VR("leftPad",e,t,n),VR("rightPad",e,t,n),VR("padWidth",e,t,n),VR("preserveShortSequences",e,t,n));return[o,a]}case"StringSplit":{const{indices:o,values:a,shape:i}=r.string.stringSplit(VR("input",e,t,n),VR("delimiter",e,t,n),VR("skipEmpty",e,t,n));return[o,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(VR("input",e,t,n),VR("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"transformation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Cast":return[r.cast(VR("x",e,t,n),VR("dtype",e,t,n))];case"ExpandDims":{const o=VR("axis",e,t,n);return[r.expandDims(VR("x",e,t,n),o)]}case"Squeeze":{const o=VR("axis",e,t,n);return[r.squeeze(VR("x",e,t,n),o)]}case"Reshape":return[r.reshape(VR("x",e,t,n),VR("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(VR("x",e,t,n),VR("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(VR("x",e,t,n),VR("padding",e,t,n),VR("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(VR("x",e,t,n),VR("padding",e,t,n),VR("constantValue",e,t,n))];case"SpaceToBatchND":{const o=VR("blockShape",e,t,n),a=VR("paddings",e,t,n);return[r.spaceToBatchND(VR("x",e,t,n),o,a)]}case"BatchToSpaceND":{const o=VR("blockShape",e,t,n),a=VR("crops",e,t,n);return[r.batchToSpaceND(VR("x",e,t,n),o,a)]}case"DepthToSpace":{const o=VR("blockSize",e,t,n),a=VR("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(VR("x",e,t,n),o,a)]}case"BroadcastTo":return[r.broadcastTo(VR("x",e,t,n),VR("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(VR("s0",e,t,n),VR("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=r.getHashTableHandleByName(e.name);if(null!=o)return[o];{const o=VR("keyDType",e,t,n),a=VR("valueDType",e,t,n),i=new zD(o,a);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const o=VR("tableHandle",e,t,n,r),a=VR("keys",e,t,n),i=VR("values",e,t,n),s=r.getHashTableById(o.id);return[await s.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=VR("tableHandle",e,t,n,r),a=VR("keys",e,t,n),i=VR("defaultValue",e,t,n),s=r.getHashTableById(o.id);return[await s.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=VR("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,r);case"custom":const a=BR(e.op);if(a&&a.customExecutor)return a.customExecutor(new SD(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return kd(a)?a.then((e=>[].concat(e))):[].concat(a)}class VD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId))).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function HD(e,t,n,r){const o=new Set,a=[];let i=null,s=null;const l=new Set,c=new Set(Object.keys(e).map((e=>KR(e)[0])));r=r||[];const u=new Set(r.map((e=>KR(e.name)[0]))),d=[...t];for(;d.length>0;){const e=d.pop();(XD(e)||YD(e)||ZD(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==n[e.name]&&(c.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),d.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:s}}function WD(e,t){const{usedNodes:n,inputs:r}=t,o=Object.keys(r).map((e=>KR(e)[0])).map((t=>e.nodes[t])),a=e.initNodes||[],i=e=>n.has("string"===typeof e?e:e.name);function s(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const l=s([...o,...e.weights,...a]).filter(i),c=s([...l,...Object.values(e.nodes)]).filter(i),u=new Map(c.map((e=>[e.name,e]))),d={};for(const C of c){d[C.name]=d[C.name]||0;for(const e of C.children)i(e)||(d[e.name]=Number.POSITIVE_INFINITY),d[e.name]=(d[e.name]||0)+1}const p=Object.entries(d).filter((e=>{let[,t]=e;return 0===t})).map((e=>{let[t]=e;return t})),h=[...p];for(;p.length>0;){const e=p.pop(),t=u.get(e);for(const n of t.children.filter(i))0===--d[n.name]&&(h.push(n.name),p.push(n.name))}const f=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),o=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const a of t.children)n.has(a.name)&&!o.has(a.name)&&(o.add(a.name),r.push(a.name))}const a=e.filter((e=>o.has(e.name)));return a}(h.map((e=>u.get(e))),l);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),o=e=>r.has("string"===typeof e?e:e.name),a=new Set(e.map((e=>e.name))),i=e=>a.has("string"===typeof e?e:e.name);for(const s of e){for(const e of s.children.filter(i)){if(!n.has(e.name))throw new UD("Child ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(s.name)>n.get(e.name))throw new UD("Node ".concat(s.name," is scheduled to run after its child ").concat(e.name,"."))}if(!o(s))for(const e of s.inputs){if(!n.has(e.name))throw new UD("Input ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(e.name)>n.get(s.name))throw new UD("Node ".concat(s.name," is scheduled to run before its input ").concat(e.name,"."))}}}(f,l),f}class UD extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}}const jD=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),KD=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),qD=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function XD(e){return jD.has(e.op)}function YD(e){return KD.has(e.op)}function ZD(e){return qD.has(e.op)}class JD{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new JD(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=HD(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:a}=n;if(null!=o)throw new Error("This execution contains the node '".concat(o.name,"', which has ")+"the dynamic op '".concat(o.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(a,"]"));if(r.length>0){const n=t.map((e=>e.name)),o=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(o,"]. Missing the following inputs: [").concat(r,"]"))}const i=WD(this.graph,n),s=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>XD(e)?n:t)),o=e=>{const n=r[t.get(e.name)];return null==n?-1:n},a=e.map(((e,t)=>e.children.map(o).reduce(((e,t)=>Math.max(e,t)),r[t]))),i=new Map;for(let s=0;s<e.length;++s){const t=a[s];if(t===n)continue;const r=e[s],o=e[t];i.has(o.name)||i.set(o.name,[]),i.get(o.name).push(r)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return SG(t),t}cloneTensorList(e){if(!e)return null;const t=e.map((e=>this.cloneAndKeepTensor(e)));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]})))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[KR(e)[0]])),o=t.map((e=>KR(e)[0])),a=new Set(o);let i=o.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const s=this.getCompilationKey(r,i);let l=this.compiledMap.get(s);null==l&&(l=this.compile(e,i),this.compiledMap.set(s,l));try{this.keepIntermediateTensors=Nd().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},u={};return IG((()=>{const n=new VD(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[o,a]=KR(t,n),i=[];i[a]=e[t],r[o]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[o]=this.cloneTensorList(i))}));const o=this.getFrozenTensorIds(r),{orderedNodes:i,nodeLiveUntilMap:s}=l;for(const e of i){if(r[e.name])continue;const t=BD(e,r,n,this._resourceManager);if(kd(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,o,a,s.get(e.name))}return null==this.parent&&n.dispose(o),t.map((e=>HR(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,o,a,i){if(!XD(t)&&!a.has(e)){for(const r of n[e])null!=r&&(i[r.id]=(i[r.id]||0)+t.children.length);for(const e of t.inputs){if(XD(e))continue;const t=WR(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||o.has(e.id))continue;const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,o,a){function i(e){return XD(e)||o.has(e.name)}if(!XD(e)&&null!=a)for(const s of a){if(i(s))continue;const e=WR(s.name,t,n);for(const t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Nd().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const a=new VD(this.weightMap,r,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,a,t,n),s=t.map((e=>HR(e,i,a))),l=s.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id)),u=new Set([...l,...c,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(u),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const o=Object.keys(e),a=o.map((e=>this.graph.nodes[KR(e)[0]])),i=n.map((e=>KR(e)[0])),s=new Set(i);let l=i.map((e=>this.graph.nodes[e]));0===l.length&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:d,syncInputs:p}=HD(e,l,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),f=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=KR(t),o=[];o[r]=e[t],f[n]=o}));const C={},G=this.getFrozenTensorIds(f),m={};for(;h.length>0;){const e=this.processStack(a,h,t,f,m,G,s,C,c);await Promise.all(e)}null!=d||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const A=l.filter((e=>!XD(e)&&!HR(e.name,f,t))).map((e=>e.name));if(A.length>0){let e="";throw null!=d&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(A,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(u,"]. ").concat(e))}return f}processStack(e,t,n,r,o,a,i,s,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&VR("isConstant",e.node,r,n)&&([u]=UR(e.node.name,n)),null==r[e.node.name]){const d=BD(e.node,r,n,this._resourceManager);u||([u]=UR(e.node.name,n));const p=n.currentContext;kd(d)?c.push(d.then((c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=p,this.checkTensorForDisposal(u,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,l),c)))):(r[u]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(d)),this.checkTensorForDisposal(u,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,l))}else this.processChildNodes(e.node,t,n,r,o,l)}return c}processChildNodes(e,t,n,r,o,a){e.children.forEach((e=>{const[i]=UR(e.name,n);!o[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!HR(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!HR(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=KR(t),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value;Zu(e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t)),(()=>"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]")))}o.attrParams.dtype&&o.attrParams.dtype.value&&Zu(n.dtype===o.attrParams.dtype.value,(()=>"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(n.dtype)))}))}mapInputs(e){var t,n;const r={};for(const o in e){const a=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[o];null!=a?r[a.name]=e[o]:r[o]=e[o]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=KR(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=KR(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}class QD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const $D="?tfjs-format=file",eF="model.json";class tF{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new QD}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return kd(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await zG(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new JD(fD.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=fD.Instance.transformGraph(e.modelInitializer);this.initializer=new JD(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof BC?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof BC)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce(((t,n)=>{var o,a,i;const s=null===(i=null===(a=null===(o=this.signature)||void 0===o?void 0:o.inputs)||void 0===a?void 0:a[n])||void 0===i?void 0:i.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const o=t[n[r]];this.resourceIdToCapturedInput[o.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&_G(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function nF(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(eF).concat($D)}(t));const o=new tF(t,n,r);return await o.load(),o}function rF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse){if(sF(e)){const o=Array.isArray(e)?[]:{};r.add(e);for(const a in e){const i=rF(e[a],t,n,r);o[a]=i}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,o.value),o.value}function oF(e){return aF(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:iF)}function aF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(sF(r)){const o=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=aF(e.map((e=>e[a])),t,n);o[a]=r}return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return o.value}function iF(e){return null===e?null:sF(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function sF(e){let t=!1;if(Nd().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof BC)&&!(e instanceof Promise)&&!t)}function lF(e){return function(e,t){return rF(e,t)}(e,cF)}function cF(e){return e instanceof BC?{value:e.clone(),recurse:!1}:sF(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class uF{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class dF extends uF{constructor(){super(dF.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function pF(e){return new GF(e)}function hF(e,t){return new IF(e,t)}dF.INITIAL_CAPACITY=32;class fF{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new bF(this,e)}filter(e){return new yF(this,e)}map(e){return new vF(this,e)}mapAsync(e){return new xF(this,e)}serialMapAsync(e){return new xF(this,e).serial()}flatmap(e){return new kF(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new gF(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iF;return this.rowMajorBatch(e,t).map((e=>oF(e,n)))}concatenate(e,t){return new IF(new CF([this,e]),t)}take(e){return e<0||null==e?this:new TF(this,e)}skip(e){return e<0||null==e?this:new AF(this,e)}prefetch(e){return new SF(this,e)}shuffle(e,t){return new NF(this,e,t)}serial(){return new mF(this)}}class CF extends fF{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:lF(e),done:!1}}}class GF extends fF{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}}class mF extends fF{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class AF extends fF{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;_G(e.value)}return this.upstream.next()}}class TF extends fF{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class gF extends fF{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class yF extends fF{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;_G(e.value)}}}class vF extends fF{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=tG(e.value),n=this.transform(e.value),r=tG(n);for(const o of t)eG(o,r)||o.dispose();return{value:n,done:!1}}}class bF extends fF{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class xF extends fF{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=tG(e.value),n=await this.transform(e.value),r=tG(n);for(const o of t)eG(o,r)||o.dispose();return{value:n,done:!1}}}class wF extends fF{constructor(){super(),this.outputQueue=new dF,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class kF extends wF{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=tG(e.value),n=this.transform(e.value),r=tG(n);this.outputQueue.pushAll(n);for(const o of t)eG(o,r)||o.dispose();return!0}}class IF extends fF{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var _F;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(_F||(_F={}));class SF extends fF{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new uF(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class NF extends SF{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Uy.alea(n||gC().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class EF{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return Zu(e>0,(()=>"batchSize needs to be positive, but it is\n      ".concat(e))),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),RF((async()=>(await n.iterator()).columnMajorBatch(e,t,DF)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,RF((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,RF((async()=>(await t.iterator()).filter((t=>IG((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return RF((async()=>(await t.iterator()).map((t=>IG((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return RF((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return RF((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,RF((async()=>hF(pF((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,RF((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,o=Uy.alea(t||gC().toString());return RF((async()=>{let t=o.int32();return n&&(t+=o.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,RF((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function RF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends EF{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function DF(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof BC||bC(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof BC?Sv(e):vG(e)}(e),recurse:!1}}return{value:null,recurse:!0}}EF.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function FF(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Zu("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}const MF=Yv;class OF extends Uu{nextDataId(){return OF.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Wu(this,wG())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Nd().get("IS_NODE")&&qf("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&pd(n[0])){const o=n.map((e=>yC(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,o){this.data.set(e,{values:t,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return Xx(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>vC(e)));return Fm(e.shape,e.dtype,n)}catch(Ie){throw new Error("Failed to decode encoded string bytes into utf-8")}return Fm(e.shape,e.dtype,t)}makeOutput(e,t,n){return wG().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=gC();e();return{kernelMs:gC()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){FF([e],"where");const t=this.readSync(e.dataId);return MF(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}OF.nextDataId=0;function LF(e){return(t,n,r)=>{const o=cd(n,t.length);for(let a=0;a<t.length;++a)o[a]=e(t[a],r);return o}}function PF(e,t,n){return zF(e,LF(t),n)}function zF(e,t,n){return r=>{let{inputs:o,attrs:a,backend:i}=r;const{x:s}=o;FF(s,e);const l=i,c=l.data.get(s.dataId).values;let u;if("string"===s.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=_w(c)}else u=c;const d=n||s.dtype,p=t(u,d,a);return l.makeTensorInfo(s.shape,d,p)}}NG("cpu",(()=>new OF),1);const BF=PF(Dp,(e=>e>=0?e:Math.exp(e)-1)),VF={kernelName:Dp,backendName:"cpu",kernelFunc:BF};function HF(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const WF={kernelName:Zp,backendName:"cpu",kernelFunc:HF};function UF(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r;FF([o],"leakyRelu");const i=$u(o.shape),s=n.data.get(o.dataId).values,l=ld("float32",i);for(let c=0;c<s.length;c++)l[c]=s[c]<0?a*s[c]:s[c];return n.makeTensorInfo(o.shape,"float32",l)}const jF={kernelName:nh,backendName:"cpu",kernelFunc:UF};function KF(e){return(t,n,r,o,a)=>{const i=lA(t,n),s=i.length,l=md(i),c=ld(a,$u(i)),u=t.length,d=n.length,p=md(t),h=md(n),f=iA(t,i),C=iA(n,i);if(f.length+C.length===0)for(let G=0;G<c.length;++G)c[G]=e(r[G%r.length],o[G%o.length]);else for(let G=0;G<c.length;++G){const t=wd(G,s,l),n=t.slice(-u);f.forEach((e=>n[e]=0));const a=xd(n,u,p),i=t.slice(-d);C.forEach((e=>i[e]=0));const m=xd(i,d,h);c[G]=e(r[a],o[m])}return[c,i]}}const qF=KF(((e,t)=>e<0?t*e:e));function XF(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t;FF([r,o],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[s,l]=qF(r.shape,o.shape,a,i,"float32");return n.makeTensorInfo(l,"float32",s)}const YF={kernelName:Lh,backendName:"cpu",kernelFunc:XF},ZF=PF(jh,(e=>Math.max(0,e))),JF={kernelName:jh,backendName:"cpu",kernelFunc:ZF},QF=PF(Jh,(e=>Math.min(Math.max(0,e),6))),$F={kernelName:Jh,backendName:"cpu",kernelFunc:QF},eM=LF((e=>1/(1+Math.exp(-e)))),tM=PF(df,(e=>1/(1+Math.exp(-e)))),nM={kernelName:df,backendName:"cpu",kernelFunc:tM};function rM(e,t,n,r,o){if("linear"===n)return HF({inputs:{x:t},backend:e});if("relu"===n)return ZF({inputs:{x:t},backend:e});if("elu"===n)return BF({inputs:{x:t},backend:e});if("relu6"===n)return QF({inputs:{x:t},backend:e});if("prelu"===n)return XF({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return UF({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===n)return tM({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function oM(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(o.shape,"float32",i)},s}const aM={kernelName:sp,backendName:"cpu",kernelFunc:oM};function iM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return oM({inputs:{real:iM(e,t,"float32"),imag:iM(e,t,"float32")},backend:e})}const r=yd($u(t),n);return e.makeTensorInfo(t,n,r)}function sM(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const lM={kernelName:Wh,backendName:"cpu",kernelFunc:sM};function cM(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=TC([0],n),[o,a]=KF(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[a,"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function uM(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===o.dtype)return HF({inputs:{x:o},backend:n});const e=iM(n,o.shape,o.dtype),t=uM({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=oM({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=sM({inputs:{input:o},backend:n}),t=uM({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!ud(o.dtype,a)){const e=HF({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const i=n.data.get(o.dataId).values,[s,l,c]=cM(i,o.shape,o.dtype,a);return n.makeTensorInfo(s,l,c)}const dM={kernelName:op,backendName:"cpu",kernelFunc:uM};function pM(e,t,n,r){return null==n?n=>{let{inputs:o,backend:a}=n;const{a:i,b:s}=o,l=a;FF([i,s],e);const c=l.data.get(i.dataId).values,u=l.data.get(s.dataId).values,d="string"===i.dtype?_w(c):c,p="string"===i.dtype?_w(u):u,h=r||i.dtype,[f,C]=t(i.shape,s.shape,d,p,h);return l.makeTensorInfo(C,h,f)}:e=>{let{inputs:o,backend:a}=e;const{a:i,b:s}=o,l=a;if("complex64"===i.dtype||"complex64"===s.dtype){const e=uM({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,a=l.data.get(r.dataId).values,c=l.data.get(o.dataId).values,u=uM({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(u.dataId),p=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,f=l.data.get(p.dataId).values,C=l.data.get(h.dataId).values,[G,m,A]=n(i.shape,s.shape,a,c,f,C),T=l.makeTensorInfo(A,"float32",G),g=l.makeTensorInfo(A,"float32",m),y=oM({inputs:{real:T,imag:g},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo(g),y}{const e=l.data.get(i.dataId).values,n=l.data.get(s.dataId).values,o=r||i.dtype,[a,c]=t(i.shape,s.shape,e,n,o);return l.makeTensorInfo(c,o,a)}}}function hM(e){return(t,n,r,o,a,i)=>{const s=lA(t,n),l=$u(s),c=s.length,u=md(s),d=ld("float32",l),p=ld("float32",l),h=iA(t,s),f=iA(n,s),C=Xx(r,o),G=Xx(a,i),m=t.length,A=md(t),T=n.length,g=md(n);if(h.length+f.length===0)for(let y=0;y<d.length;y++){const t=y%C.length,n=y%G.length,r=e(C[2*t],C[2*t+1],G[2*n],G[2*n+1]);d[y]=r.real,p[y]=r.imag}else for(let y=0;y<d.length;y++){const t=wd(y,c,u),n=t.slice(-m);h.forEach((e=>n[e]=0));const r=xd(n,m,A),o=t.slice(-T);f.forEach((e=>o[e]=0));const a=xd(o,T,g),i=e(C[2*r],C[2*r+1],G[2*a],G[2*a+1]);d[y]=i.real,p[y]=i.imag}return[d,p,s]}}const fM=KF(((e,t)=>e+t)),CM=hM(((e,t,n,r)=>({real:e+n,imag:t+r}))),GM=pM(Pd,fM,CM),mM={kernelName:Pd,backendName:"cpu",kernelFunc:GM};function AM(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=$u(o.shape),s=ad(a,i),l=$u(s);Zu(i===l,(()=>"The new shape (".concat(s,") has ").concat(l," elements and the old ")+"shape (".concat(o.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements.")),n.incRef(o.dataId);const c=n.data.get(o.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}const TM={kernelName:Kh,backendName:"cpu",kernelFunc:AM};function gM(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;FF([o,a],"matMul");const l=o.shape.length,c=a.shape.length,u=i?o.shape[l-2]:o.shape[l-1],d=s?a.shape[c-1]:a.shape[c-2],p=i?o.shape[l-1]:o.shape[l-2],h=s?a.shape[c-2]:a.shape[c-1],f=o.shape.slice(0,-2),C=a.shape.slice(0,-2),G=$u(f),m=$u(C),A=lA(o.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,h]);Zu(u===d,(()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(d,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(a.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")));const T=s?[m,h,d]:[m,d,h],g=AM({inputs:{x:o},backend:n,attrs:{shape:i?[G,u,p]:[G,p,u]}}),y=AM({inputs:{x:a},backend:n,attrs:{shape:T}}),v=i?g.shape[1]:g.shape[2],b=i?g.shape[2]:g.shape[1],x=s?y.shape[1]:y.shape[2],w=Math.max(G,m),k=n.data.get(g.dataId).values,I=n.data.get(y.dataId).values,_=md(g.shape),S=md(y.shape),[N,E,R]=i?[_[0],1,_[1]]:[_[0],_[1],1],[D,F,M]=s?[1,S[1],S[0]]:[S[1],1,S[0]],O=b*x,L=Fm([w,b,x],g.dtype),P=L.values,z=n.blockSize;for(let B=0;B<w;B++){const e=B%G,t=B%m;for(let n=0;n<b;n+=z){const r=Math.min(n+z,b);for(let o=0;o<x;o+=z){const a=Math.min(o+z,x);for(let i=0;i<v;i+=z){const s=Math.min(i+z,v);for(let l=n;l<r;l++)for(let n=o;n<a;n++){let r=0;for(let o=i;o<s;o++){r+=k[e*N+l*E+o*R]*I[o*D+n*F+t*M]}P[B*O+(l*x+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(A,L.dtype,L.values)}const yM={kernelName:$d,backendName:"cpu",kernelFunc:gM};const vM={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let p,h,f;const C=[];p=gM({inputs:{a:o,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(h=GM({inputs:{a:p,b:i},backend:n}),C.push(p),p=h),u&&(f=rM(n,p,u,s,d),C.push(p),p=f);for(const G of C)n.disposeIntermediateTensorInfo(G);return p}};function bM(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const xM={kernelName:Md,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;FF(t,"abs");let r=new Float32Array($u(t.shape));return r=bM(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},wM=PF(Od,(e=>Math.acos(e))),kM={kernelName:Od,backendName:"cpu",kernelFunc:wM},IM=PF(Ld,(e=>Math.acosh(e))),_M={kernelName:Ld,backendName:"cpu",kernelFunc:IM};const SM={kernelName:zd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;FF(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),a=Fm(r[0].shape,r[0].dtype),i=a.values;for(let s=0;s<r.length;s++){const e=o[s];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function NM(e,t,n,r,o){const a=t.length,i=$u(t),s=md(t),l=md(o),c=ld(n,$u(o));for(let u=0;u<i;++u){const t=wd(u,a,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[xd(n,a,l)]=e[u]}return c}function EM(e){const{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:a}=n;FF(o,"transpose");const i=o.shape.length,s=new Array(i);for(let c=0;c<s.length;c++)s[c]=o.shape[a[c]];const l=NM(r.data.get(o.dataId).values,o.shape,o.dtype,a,s);return{dataId:r.write(l,s,o.dtype),shape:s,dtype:o.dtype}}const RM={kernelName:Of,backendName:"cpu",kernelFunc:EM};const DM={kernelName:Bd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;FF(o,"all");const s=id(a,o.shape);let l=s;const c=Ig(l,o.shape.length);let u=o;null!=c&&(u=EM({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Sg(l.length,o.shape.length)),kg("all",l,u.shape.length);const[d,p]=xg(u.shape,l),h=$u(p),f=yd($u(d),u.dtype),C=n.data.get(u.dataId).values;for(let m=0;m<f.length;++m){const e=m*h;let t=C[e];for(let n=0;n<h;++n){const r=C[e+n];t=t&&r}f[m]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const G=n.makeTensorInfo(d,u.dtype,f);if(i){const e=AM({inputs:{x:G},backend:n,attrs:{shape:wg(d,s)}});return n.disposeIntermediateTensorInfo(G),e}return G}};const FM={kernelName:Vd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;FF(o,"any");const s=id(a,o.shape);let l=s;const c=Ig(l,o.shape.length);let u=o;null!=c&&(u=EM({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Sg(l.length,o.shape.length)),kg("any",l,u.shape.length);const[d,p]=xg(u.shape,l),h=$u(p),f=yd($u(d),u.dtype),C=n.data.get(u.dataId).values;for(let m=0;m<f.length;++m){const e=m*h;let t=C[e];for(let n=0;n<h;++n){const r=C[e+n];t=t||r}f[m]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const G=n.makeTensorInfo(d,u.dtype,f);if(i){const e=AM({inputs:{x:G},backend:n,attrs:{shape:wg(d,s)}});return n.disposeIntermediateTensorInfo(G),e}return G}};const MM={kernelName:Hd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;FF(o,"argMax");let i=id(a,o.shape);const s=Ig(i,o.shape.length);let l=o;const c=[];null!=s&&(l=EM({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),i=Sg(i.length,l.shape.length)),i=[i[0]],kg("argMax",i,l.shape.length);const[u,d]=xg(l.shape,i),p=yd($u(u),"int32"),h=$u(d),f=n.data.get(l.dataId).values;for(let C=0;C<p.length;++C){const e=C*h;let t=f[e],n=0;for(let r=0;r<h;++r){const o=f[e+r];o>t&&(t=o,n=r)}p[C]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",p)}};const OM={kernelName:Wd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;FF(o,"argMin");let i=id(a,o.shape);const s=Ig(i,o.shape.length);let l=o;const c=[];null!=s&&(l=EM({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),i=Sg(i.length,l.shape.length)),i=[i[0]],kg("argMin",i,l.shape.length);const[u,d]=xg(l.shape,i),p=yd($u(u),"int32"),h=$u(d),f=n.data.get(l.dataId).values;for(let C=0;C<p.length;++C){const e=C*h;let t=f[e],n=0;for(let r=0;r<h;++r){const o=f[e+r];o<t&&(t=o,n=r)}p[C]=n}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",p)}},LM=PF(Ud,(e=>Math.asin(e))),PM={kernelName:Ud,backendName:"cpu",kernelFunc:LM},zM=PF(jd,(e=>Math.asinh(e))),BM={kernelName:jd,backendName:"cpu",kernelFunc:zM},VM=PF(Kd,(e=>Math.atan(e))),HM={kernelName:Kd,backendName:"cpu",kernelFunc:VM},WM=KF(((e,t)=>Math.atan2(e,t))),UM=pM(Xd,WM),jM={kernelName:Xd,backendName:"cpu",kernelFunc:UM},KM=PF(qd,(e=>Math.atanh(e))),qM={kernelName:qd,backendName:"cpu",kernelFunc:KM};function XM(e,t,n,r,o,a){const i=o.strideHeight,s=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=o.padInfo.top,h=o.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=Fm(o.outShape,n),G=C.values,m=o.outShape[1]*o.outShape[2]*o.outShape[3],A=o.outShape[2]*o.outShape[3],T=o.outShape[3];for(let g=0;g<o.batchSize;++g){const t=g*m,n=g*r[0];for(let C=0;C<o.inChannels;++C)for(let m=0;m<o.outHeight;++m){const g=m*i-p,y=Math.max(0,g),v=Math.min(o.inHeight,u+g),b=t+m*A;for(let t=0;t<o.outWidth;++t){const i=t*s-h,u=Math.max(0,i),p=Math.min(o.inWidth,d+i);let m=f,A=0,g=0;for(let t=y;t<v;t+=l){const o=n+t*r[1];for(let t=u;t<p;t+=c){const n=e[o+t*r[2]+C];"max"===a&&n>m?m=n:"avg"===a&&(A+=n,g++)}if(isNaN(m))break}G[b+t*T+C]="avg"===a?A/g:m}}}return C}function YM(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=Fm(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,C=Fm(t,n,e);for(let G=0;G<r.batchSize;++G)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-h;let m=n;for(;m<0;)m+=c;const A=Math.min(r.inHeight,d+n);for(let s=0;s<r.outWidth;++s){const d=s*l-f;let h=d;for(;h<0;)h+=u;const T=Math.min(r.inWidth,p+d);let g=Number.NEGATIVE_INFINITY,y=-1;for(let t=m;t<A;t+=c){const i=t-n;for(let n=h;n<T;n+=u){const s=n-d,l=C.get(G,t,n,e);l>g&&(g=l,y=o?a?((G*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*p+s)}}i.set(y,G,t,s,e)}}return i}function ZM(e,t,n,r,o,a){const i=o.strideDepth,s=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,f=o.effectiveFilterWidth,C=o.padInfo.front,G=o.padInfo.top,m=o.padInfo.left,A="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,T=Fm(o.outShape,n),g=T.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],v=o.outShape[2]*o.outShape[3]*o.outShape[4],b=o.outShape[3]*o.outShape[4],x=o.outShape[4];for(let w=0;w<o.batchSize;++w){const t=w*y,n=w*r[0];for(let T=0;T<o.inChannels;++T)for(let y=0;y<o.outDepth;++y){const w=y*i-C;let k=w;for(;k<0;)k+=c;const I=Math.min(o.inDepth,p+w),_=t+y*v;for(let t=0;t<o.outHeight;++t){const i=t*s-G;let p=i;for(;p<0;)p+=u;const C=Math.min(o.inHeight,h+i),y=_+t*b;for(let t=0;t<o.outWidth;++t){const i=t*l-m;let s=i;for(;s<0;)s+=d;const h=Math.min(o.inWidth,f+i),G=y+t*x;let v=A,b=0,w=0;for(let t=k;t<I;t+=c){const o=n+t*r[1];for(let t=p;t<C;t+=u){const n=o+t*r[2];for(let t=s;t<h;t+=d){const o=e[n+t*r[3]+T];if("max"===a&&o>v?v=o:"avg"===a&&(b+=o,w++),isNaN(v))break}if(isNaN(v))break}if(isNaN(v))break}g[G+T]="avg"===a?b/Math.max(w,1):v}}}}return T}const JM={kernelName:Yd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;FF(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;Zu(xT(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const c=fT(o.shape,a,i,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ed(c.inShape,c.outShape))u=HF({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=md(o.shape),r=XM(e,o.shape,o.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,o.dtype,r.values)}return u}};const QM={kernelName:Jd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:c}=r;FF(o,"avgPool3d");const u=CT(o.shape,a,i,1,s,l,c),d=ZM(n.data.get(o.dataId).values,o.shape,o.dtype,md(o.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const $M={kernelName:Qd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:c}=r;FF([o,a],"avgPool3DGrad");const u=CT(a.shape,i,s,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,f=u.filterDepth,C=u.filterHeight,G=u.filterWidth,m=u.dilationDepth,A=u.dilationHeight,T=u.dilationWidth,g=u.effectiveFilterDepth,y=u.effectiveFilterHeight,v=u.effectiveFilterWidth,b=g-1-u.padInfo.front,x=v-1-u.padInfo.left,w=y-1-u.padInfo.top,k=Fm(a.shape,"float32"),I=1/(f*C*G),_=n.bufferSync(o);for(let S=0;S<u.batchSize;++S)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-b,a=n-w,i=r-x;let s=0;for(let t=0;t<g;t+=m){const n=(o+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<y;t+=A){const r=(a+t)/p;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<v;t+=T){const o=(i+t)/h;if(o<0||o>=u.outWidth||Math.floor(o)!==o)continue;s+=_.get(S,n,r,o,e)}}}k.set(s*I,S,t,n,r,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};const eO={kernelName:Zd,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;FF([o,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=fT(i.shape,s,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,f=u.filterWidth,C=u.dilationHeight,G=u.dilationWidth,m=u.effectiveFilterHeight,A=u.effectiveFilterWidth,T=A-1-u.padInfo.left,g=m-1-u.padInfo.top,y=Fm(i.shape,"float32"),v=1/(h*f),b=n.data.get(o.dataId).values,x=Fm(o.shape,"float32",b);for(let w=0;w<u.batchSize;++w)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-g,o=n-T;let a=0;for(let t=0;t<m;t+=C){const n=(r+t)/d;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<A;t+=G){const r=(o+t)/p;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;a+=x.get(w,n,r,e)}}y.set(a*v,w,t,n,e)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const tO={kernelName:jp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:a,offset:i,mean:s,variance:l}=t;Zu(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Zu(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Zu(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),FF([o,s,l,a,i],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,h=a?n.data.get(a.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),C=new Float32Array(u.length),G=f.length,m=h.length,A=p.length,T=d.length;let g=0,y=0,v=0,b=0;for(let x=0;x<u.length;++x)C[x]=f[g++]+(u[x]-d[y++])*h[v++]/Math.sqrt(p[b++]+c),g>=G&&(g=0),y>=T&&(y=0),v>=m&&(v=0),b>=A&&(b=0);return n.makeTensorInfo(o.shape,o.dtype,C)}};function nO(e,t,n,r,o){const a=ZA(r,t,n),i=$u(n),s=md(r);if(a){const n=JA(t,s);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const l=Fm(r,o,"string"===o?_w(e):e),c=Fm(n,o);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map(((e,n)=>e+t[n]));c.set(l.get(...n),...e)}return"string"===o?Sw(c.values):c.values}function rO(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r;FF(o,"slice");const[s,l]=QA(o,a,i);PA(o,s,l);const c=nO(n.data.get(o.dataId).values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const oO={kernelName:sf,backendName:"cpu",kernelFunc:rO};const aO={kernelName:ep,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;FF([o],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),l=Fx(o.shape,a,s),c=Mx(l.length,a.length),u=Ox(o.shape,a,s),d=Lx(i,a.length),p=Px(u,i,a.length),h=AM({inputs:{x:o},backend:n,attrs:{shape:l}}),f=EM({inputs:{x:h},backend:n,attrs:{perm:c}}),C=AM({inputs:{x:f},backend:n,attrs:{shape:u}}),G=rO({inputs:{x:C},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),G}};function iO(e,t,n,r,o){const a=$u(r),i=yd(o,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=a>0?t[s]:1)}return i}function sO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.shape[0],a=e.shape[1],i=Fm([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<a;o++){const a=e.get(s,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?i.set(1,s,a):t.size>0?i.set(i.get(s,a)+t.get(s,o),s,a):i.set(i.get(s,a)+1,s,a))}return i}const lO={kernelName:tp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=iO(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,s)}},cO=KF(((e,t)=>e&t)),uO=pM(np,cO),dO={kernelName:np,backendName:"cpu",kernelFunc:uO};const pO={kernelName:rp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=lA(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},hO=LF((e=>Math.ceil(e))),fO=zF(ap,hO),CO={kernelName:ap,backendName:"cpu",kernelFunc:fO},GO=PF(ip,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),mO={kernelName:ip,backendName:"cpu",kernelFunc:GO},AO={kernelName:lp,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array($u(t.shape)),o=n.data.get(t.dataId),a=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<s.length;c++){const e=s[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function TO(e,t,n,r){const o=cd(n,$u(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=$u(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?_w(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=a[i++]}r+=e.shape[1]}))}return o}function gO(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const yO={kernelName:Qp,backendName:"cpu",kernelFunc:gO};function vO(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=id(o,t[0].shape)[0];xx(t.map((e=>e.shape)),a);let i=wx(t.map((e=>e.shape)),a);if(0===$u(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>$u(e.shape)>0));if(1===s.length)return HF({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map((e=>sM({inputs:{input:e},backend:n}))),t=s.map((e=>gO({inputs:{input:e},backend:n}))),r=vO({inputs:e,backend:n,attrs:{axis:a}}),o=vO({inputs:t,backend:n,attrs:{axis:a}}),i=oM({inputs:{real:r,imag:o},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),i}const l=s.map((e=>{const t=$u(e.shape.slice(a));return AM({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));i=wx(l.map((e=>e.shape)),1);const u=1===l[0].shape[0],d=TO(c,i,t[0].dtype,u),p=wx(s.map((e=>e.shape)),a),h=n.makeTensorInfo(p,t[0].dtype,d);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}const bO={kernelName:cp,backendName:"cpu",kernelFunc:vO};function xO(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r;FF([o,a],"conv2d");const d=kT(l),p=GT(o.shape,a.shape,i,c,s,u,!1,d),h=p.filterHeight,f=p.filterWidth,C=p.dilationHeight,G=p.dilationWidth,m=p.padInfo.left,A=p.padInfo.top,T="channelsLast"===p.dataFormat,g=new OC(p.outShape,o.dtype),y=md(o.shape),v=md(a.shape),b=y[0],x=T?y[1]:y[2],w=T?y[2]:1,k=T?1:y[1],I=g.strides[0],_=T?g.strides[1]:g.strides[2],S=T?g.strides[2]:1,N=T?1:g.strides[1],E=n.data.get(o.dataId).values,R=n.data.get(a.dataId).values,D=g.values;for(let F=0;F<p.batchSize;++F){const e=F*b,t=F*I;for(let n=0;n<p.outHeight;++n){const r=t+n*_,o=n*p.strideHeight-A;for(let t=0;t<h;++t){const n=o+t*C;if(n<0||n>=p.inHeight)continue;const a=t*v[0],i=e+n*x;for(let e=0;e<p.outWidth;++e){const t=r+e*S,n=e*p.strideWidth-m;for(let e=0;e<f;++e){const r=n+e*G;if(r<0||r>=p.inWidth)continue;const o=i+r*w;let s=a+e*v[1];for(let e=0;e<p.inChannels;++e){const n=E[o+e*k];for(let e=0;e<p.outChannels;++e)D[t+e*N]+=n*R[s+e];s+=p.outChannels}}}}}}return n.makeTensorInfo(g.shape,g.dtype,D)}const wO={kernelName:up,backendName:"cpu",kernelFunc:xO};const kO={kernelName:dp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;FF([o,a],"conv2dBackpropFilter");const d=kT(l),p=GT(o.shape,u,i,1,s,c,!1,d),{strideHeight:h,strideWidth:f,filterHeight:C,filterWidth:G}=p,m="channelsLast"===p.dataFormat,A=new OC(p.filterShape,"float32"),T=p.padInfo.left,g=p.padInfo.top,y=n.data.get(o.dataId).values,v=n.data.get(a.dataId).values,b=new OC(o.shape,o.dtype,y),x=new OC(a.shape,a.dtype,v);for(let w=0;w<C;++w){const e=Math.max(0,Math.ceil((g-w)/h)),t=Math.min(p.outHeight,(p.inHeight+g-w)/h);for(let n=0;n<G;++n){const r=Math.max(0,Math.ceil((T-n)/f)),o=Math.min(p.outWidth,(p.inWidth+T-n)/f);for(let a=0;a<p.inChannels;++a)for(let i=0;i<p.outChannels;++i){let s=0;for(let l=0;l<p.batchSize;++l)for(let c=e;c<t;++c){const e=w+c*h-g;for(let t=r;t<o;++t){const r=n+t*f-T;s+=m?b.get(l,e,r,a)*x.get(l,c,t,i):b.get(l,a,e,r)*x.get(l,i,c,t)}}A.set(s,w,n,a,i)}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};const IO={kernelName:pp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r;FF([o,a],"conv2dBackpropInput");const d=md(a.shape),p=md(o.shape);let h=kT(c);const f=GT(i,a.shape,s,1,l,u,!1,h),C=new OC(f.inShape,"float32"),G=C.values,m=n.data.get(o.dataId).values,A=n.data.get(a.dataId).values,[T,g,y]=d,{batchSize:v,filterHeight:b,filterWidth:x,inChannels:w,inHeight:k,inWidth:I,outChannels:_,outHeight:S,outWidth:N,strideHeight:E,strideWidth:R}=f;h=f.dataFormat;const D=b-1-f.padInfo.top,F=x-1-f.padInfo.left,M="channelsLast"===h,O=C.strides[0],L=M?C.strides[1]:C.strides[2],P=M?C.strides[2]:1,z=M?1:C.strides[1],B=p[0],V=M?p[1]:p[2],H=M?p[2]:1,W=M?1:p[1];for(let U=0;U<v;++U)for(let e=0;e<w;++e)for(let t=0;t<k;++t){const n=t-D,r=Math.max(0,Math.ceil(n/E)),o=Math.min(S,(b+n)/E);for(let a=0;a<I;++a){const i=a-F,s=Math.max(0,Math.ceil(i/R)),l=Math.min(N,(x+i)/R);let c=0;for(let t=r;t<o;++t){const r=t*E-n;for(let n=s;n<l;++n){const o=B*U+V*t+H*n,a=T*(b-1-r)+g*(x-1-(n*R-i))+y*e;for(let e=0;e<_;++e){c+=m[o+W*e]*A[a+e]}}}G[O*U+L*t+P*a+z*e]=c}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const _O={kernelName:hp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r;FF([o,a],"conv3d");const c=mT(o.shape,a.shape,i,l,s),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:C,padInfo:G}=c,m=G.front,A=G.left,T=G.top,g=new OC(c.outShape,o.dtype),y=n.data.get(o.dataId).values,v=n.data.get(a.dataId).values,b=g.values,x=md(o.shape),w=md(a.shape);for(let k=0;k<c.batchSize;++k){const e=k*x[0],t=k*g.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*g.strides[1],o=n*c.strideDepth-m;for(let t=0;t<u;++t){const n=o+t*h;if(n<0||n>=c.inDepth)continue;const a=t*w[0],i=e+n*x[1];for(let e=0;e<c.outHeight;++e){const t=r+e*g.strides[2],n=e*c.strideHeight-T;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const o=a+e*w[1],s=i+r*x[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-A;for(let e=0;e<p;++e){const t=r+e*C;if(t<0||t>=c.inWidth)continue;const a=o+e*w[2],i=s+t*c.inChannels;let l=a;for(let e=0;e<c.inChannels;++e){const t=y[i+e];for(let e=0;e<c.outChannels;++e)b[n+e]+=t*v[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const SO={kernelName:fp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:l}=r;FF([o,a],"conv3dBackpropFilterV2");const c=md(o.shape),u=md(a.shape),d=mT(o.shape,l,i,1,s),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,C=d.filterDepth,G=d.filterHeight,m=d.filterWidth,A=new OC(d.filterShape,"float32"),T=A.values,[g,y,v,b]=A.strides,x=n.data.get(a.dataId).values,[w,k,I,_]=u,S=n.data.get(o.dataId).values,[N,E,R,D]=c,F=d.padInfo.front,M=d.padInfo.left,O=d.padInfo.top;for(let L=0;L<C;++L){const e=Math.max(0,Math.ceil((F-L)/p)),t=Math.min(d.outDepth,(d.inDepth+F-L)/p),n=L*g;for(let r=0;r<G;++r){const o=Math.max(0,Math.ceil((O-r)/h)),a=Math.min(d.outHeight,(d.inHeight+O-r)/h),i=r*y+n;for(let n=0;n<m;++n){const s=Math.max(0,Math.ceil((M-n)/f)),l=Math.min(d.outWidth,(d.inWidth+M-n)/f),c=n*v+i;for(let i=0;i<d.inChannels;++i){const u=i*b+c;for(let c=0;c<d.outChannels;++c){let C=0;for(let u=0;u<d.batchSize;++u){const d=u*N,G=u*w;for(let u=e;u<t;++u){const e=(L+u*p-F)*E+d,t=u*k+G;for(let u=o;u<a;++u){const o=(r+u*h-O)*R+e,a=u*I+t;for(let e=s;e<l;++e){const t=e*_+a;C+=S[(n+e*f-M)*D+o+i]*x[t+c]}}}}T[u+c]=C}}}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};const NO={kernelName:Cp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:l}=r;FF([o],"conv3dBackpropInputV2");const c=md(o.shape),u=md(a.shape),d=mT(l,a.shape,s,1,i),p=new OC(d.inShape,"float32"),h=p.values,[f,C,G,m]=p.strides,A=n.data.get(o.dataId).values,[T,g,y,v]=c,b=n.data.get(a.dataId).values,[x,w,k,I]=u,{batchSize:_,filterDepth:S,filterHeight:N,filterWidth:E,inChannels:R,inDepth:D,inHeight:F,inWidth:M,outChannels:O,outDepth:L,outHeight:P,outWidth:z,strideDepth:B,strideHeight:V,strideWidth:H}=d,W=S-1-d.padInfo.front,U=N-1-d.padInfo.top,j=E-1-d.padInfo.left;for(let K=0;K<_;++K)for(let e=0;e<R;++e)for(let t=0;t<D;++t){const n=t-W,r=Math.max(0,Math.ceil(n/B)),o=Math.min(L,(S+n)/B);for(let a=0;a<F;++a){const i=a-U,s=Math.max(0,Math.ceil(i/V)),l=Math.min(P,(N+i)/V);for(let c=0;c<M;++c){const u=c-j,d=Math.max(0,Math.ceil(u/H)),p=Math.min(z,(E+u)/H);let _=0;for(let t=r;t<o;++t){const r=t*B-n;for(let n=s;n<l;++n){const o=n*V-i;for(let a=d;a<p;++a){const i=T*K+g*t+y*n+v*a,s=x*(S-1-r)+w*(N-1-o)+k*(E-1-(a*H-u))+I*e;for(let e=0;e<O;++e){_+=A[i+e]*b[s+e]}}}}h[f*K+C*t+G*a+m*c+e]=_}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},EO=PF(Gp,(e=>Math.cos(e))),RO={kernelName:Gp,backendName:"cpu",kernelFunc:EO},DO=PF(mp,(e=>Math.cosh(e))),FO={kernelName:mp,backendName:"cpu",kernelFunc:DO};const MO={kernelName:gp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:l,extrapolationValue:c}=r,[u,d,p,h]=o.shape,f=a.shape[0],[C,G]=s,m=Fm([f,C,G,h],"float32"),A=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,g=n.data.get(o.dataId).values,y=md(o.shape),v=md(m.shape);for(let b=0;b<f;b++){const e=4*b,t=A[e],n=A[e+1],r=A[e+2],o=A[e+3],a=T[b];if(a>=u)continue;const i=C>1?(r-t)*(d-1)/(C-1):0,s=G>1?(o-n)*(p-1)/(G-1):0;for(let u=0;u<C;u++){const e=C>1?t*(d-1)+u*i:.5*(t+r)*(d-1);if(e<0||e>d-1)for(let t=0;t<G;t++)for(let e=0;e<h;e++){const n=e+t*v[2]+u*v[1]+b*v[0];m.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<G;e++){const l=G>1?n*(p-1)+e*s:.5*(n+o)*(p-1);if(l<0||l>p-1){for(let t=0;t<h;t++){const n=t+e*v[2]+u*v[1]+b*v[0];m.values[n]=c}continue}const d=Math.floor(l),f=Math.ceil(l),C=l-d;for(let n=0;n<h;n++){let o=n+d*y[2]+t*y[1]+a*y[0];const s=g[o];o=n+f*y[2]+t*y[1]+a*y[0];const l=g[o];o=n+d*y[2]+r*y[1]+a*y[0];const c=g[o];o=n+f*y[2]+r*y[1]+a*y[0];const p=s+(l-s)*C,h=c+(g[o]-c)*C;o=n+e*v[2]+u*v[1]+b*v[0],m.values[o]=p+(h-p)*i}}}else for(let t=0;t<G;++t){const r=G>1?n*(p-1)+t*s:.5*(n+o)*(p-1);if(r<0||r>p-1){for(let e=0;e<h;e++){const n=e+t*v[2]+u*v[1]+b*v[0];m.values[n]=c}continue}const i=Math.round(r),l=Math.round(e);for(let e=0;e<h;e++){const n=e+i*y[2]+l*y[1]+a*y[0],r=e+t*v[2]+u*v[1]+b*v[0];m.values[r]=g[n]}}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const OO={kernelName:Ap,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;FF(o,"cumprod");const l=Ig([a],o.shape.length);let c=o;null!=l&&(c=EM({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=Sg(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=YC(c.dtype,"int32"),p=gd($u(c.shape),d),h=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],C=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let m=0;m<h.length;m+=f)for(let e=0;e<f;e++){const t=C(m,e);if(0===e)p[t]=i?1:h[t];else{const n=C(m,e-1);p[t]=i?h[n]*p[n]:h[t]*p[n]}}const G=n.makeTensorInfo(c.shape,d,p);if(null!=l){const e=EM({inputs:{x:G},backend:n,attrs:{perm:_g(l)}});return n.disposeIntermediateTensorInfo(G),n.disposeIntermediateTensorInfo(c),e}return G}};const LO={kernelName:Tp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;FF(o,"cumsum");const l=Ig([a],o.shape.length);let c=o;null!=l&&(c=EM({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=Sg(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const d=YC(c.dtype,"int32"),p=yd($u(c.shape),d),h=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],C=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let m=0;m<h.length;m+=f)for(let e=0;e<f;e++){const t=C(m,e);if(0===e)p[t]=i?0:h[t];else{const n=C(m,e-1);p[t]=i?h[n]+p[n]:h[t]+p[n]}}const G=n.makeTensorInfo(c.shape,d,p);if(null!=l){const e=EM({inputs:{x:G},backend:n,attrs:{perm:_g(l)}});return n.disposeIntermediateTensorInfo(G),n.disposeIntermediateTensorInfo(c),e}return G}};const PO={kernelName:yp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=iO(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,e)}if(2===o.shape.length){const e=sO(n.bufferSync(o),n.bufferSync(a),i,s);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};const zO={kernelName:vp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r;Zu("NHWC"===i,(()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)));const s=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*a,p=c*a,h=u/(a*a),f=n.data.get(o.dataId).values,C=new Float32Array(s*d*p*h);let G=0;for(let m=0;m<s;++m)for(let e=0;e<d;++e){const t=Math.floor(e/a),n=e%a;for(let e=0;e<p;++e){const r=Math.floor(e/a),o=(n*a+e%a)*h;for(let e=0;e<h;++e){const n=e+o+u*(r+c*(t+l*m));C[G++]=f[n]}}}return n.makeTensorInfo([s,d,p,h],o.dtype,C)}};function BO(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l,dimRoundingMode:c}=r;FF([o,a],"depthwiseConv2DNative");const u=md(o.shape),d=md(a.shape);let p=l;null==p&&(p=[1,1]),Zu(xT(i,p),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(p,"'")));const h=GT(o.shape,a.shape,i,p,s,c,!0),{filterHeight:f,filterWidth:C,dilationHeight:G,dilationWidth:m,padInfo:A}=h,T=A.left,g=A.top,y=h.outChannels/h.inChannels,v=new OC(h.outShape,o.dtype),b=n.data.get(o.dataId).values,x=n.data.get(a.dataId).values,w=v.values;for(let k=0;k<h.batchSize;++k){const e=k*u[0],t=k*v.strides[0];for(let n=0;n<h.outHeight;++n){const r=t+n*v.strides[1],o=n*h.strideHeight-g;for(let t=0;t<f;++t){const n=o+t*G;if(n<0||n>=h.inHeight)continue;const a=t*d[0],i=e+n*u[1];for(let e=0;e<h.outWidth;++e){const t=r+e*v.strides[2],n=e*h.strideWidth-T;for(let e=0;e<C;++e){const r=n+e*m;if(r<0||r>=h.inWidth)continue;const o=a+e*d[1],s=i+r*h.inChannels;let l=t,c=o;for(let e=0;e<h.inChannels;++e){const t=b[s+e];for(let e=0;e<y;++e)w[l+e]+=t*x[c+e];l+=y,c+=y}}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const VO={kernelName:bp,backendName:"cpu",kernelFunc:BO};const HO={kernelName:xp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r;FF([o,a],"depthwiseConv2dNativeBackpropFilter");const d=GT(o.shape,u,i,s,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:C}=d,G=new OC(d.filterShape,"float32"),m=d.padInfo.left,A=d.padInfo.top,T=d.outChannels/d.inChannels,g=n.data.get(o.dataId).values,y=new OC(o.shape,o.dtype,g),v=n.data.get(a.dataId).values,b=new OC(a.shape,a.dtype,v);for(let x=0;x<f;++x){const e=Math.max(0,Math.ceil((A-x)/p)),t=Math.min(d.outHeight,(d.inHeight+A-x)/p);for(let n=0;n<C;++n){const r=Math.max(0,Math.ceil((m-n)/h)),o=Math.min(d.outWidth,(d.inWidth+m-n)/h);for(let a=0;a<d.outChannels;++a){const i=Math.trunc(a/T),s=a%T;let l=0;for(let c=0;c<d.batchSize;++c)for(let s=e;s<t;++s){const e=x+s*p-A;for(let t=r;t<o;++t){const r=n+t*h-m;l+=y.get(c,e,r,i)*b.get(c,s,t,a)}}G.set(l,x,n,i,s)}}}return n.makeTensorInfo(G.shape,G.dtype,G.values)}};const WO={kernelName:wp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r;FF([o,a],"depthwiseConv2DNativeBackpropInput");const d=md(o.shape),p=md(a.shape),h=GT(u,a.shape,i,s,l,c,!0),f=new OC(h.inShape,"float32"),C=f.values,[G,m,A]=f.strides,T=n.data.get(o.dataId).values,[g,y,v]=d,b=n.data.get(a.dataId).values,[x,w,k]=p,{batchSize:I,filterHeight:_,filterWidth:S,inChannels:N,inHeight:E,inWidth:R,outChannels:D,outHeight:F,outWidth:M,strideHeight:O,strideWidth:L}=h,P=_-1-h.padInfo.top,z=S-1-h.padInfo.left,B=D/N;for(let V=0;V<I;++V)for(let e=0;e<N;++e)for(let t=0;t<E;++t){const n=t-P,r=Math.max(0,Math.ceil(n/O)),o=Math.min(F,(_+n)/O);for(let a=0;a<R;++a){const i=a-z,s=Math.max(0,Math.ceil(i/L)),l=Math.min(M,(S+i)/L);let c=0;for(let t=r;t<o;++t){const r=t*O-n;for(let n=s;n<l;++n){const o=g*V+y*t+v*n,a=x*(_-1-r)+w*(S-1-(n*L-i))+k*e;for(let t=0;t<B;++t){c+=T[o+(e*B+t)]*b[a+t]}}}C[G*V+m*t+A*a+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const UO={kernelName:kp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=$u(r.shape),a=n.data.get(r.dataId).values,i=Fm([o,o],r.dtype),s=i.values;for(let c=0;c<a.length;c++)s[c*o+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},jO={kernelName:Ip,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,c=n,u=c.data.get(o.dataId).values,d=o.shape.length,p=c.data.get(a.dataId).values,h=a.shape.length,{batchSize:f,inHeight:C,inWidth:G,inChannels:m,outHeight:A,outWidth:T,padInfo:g,strideHeight:y,strideWidth:v,filterHeight:b,filterWidth:x,dilationHeight:w,dilationWidth:k,outShape:I}=hT(o.shape,a.shape,i,s,"NHWC",l),_=$u(I),S=I.length,N=cd(o.dtype,_);for(let E=0;E<f;++E)for(let e=0;e<A;++e){const t=e*y-g.top;for(let n=0;n<T;++n){const r=n*v-g.left;for(let i=0;i<m;++i){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<b;++e){const n=t+e*w;if(n>=0&&n<C)for(let t=0;t<x;++t){const l=r+t*k;if(l>=0&&l<G){const r=xd([E,n,l,i],d,md(o.shape)),c=xd([e,t,i],h,md(a.shape)),f=u[r]+p[c];f>s&&(s=f)}}}N[xd([E,e,n,i],S,md(I))]=s}}}return{dataId:c.write(TC(N,o.dtype),I,o.dtype),shape:I,dtype:o.dtype}}},KO={kernelName:Sp,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:l,dilations:c}=r,u=n,d=Td(o.shape,u.data.get(o.dataId).values),p=Td(a.shape,u.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:C,inChannels:G,outHeight:m,outWidth:A,padInfo:T,strideHeight:g,strideWidth:y,filterHeight:v,filterWidth:b,dilationHeight:x,dilationWidth:w,outShape:k}=hT(o.shape,a.shape,s,l,"NHWC",c);Zu(i.rank===k.length,(()=>"Error in ".concat(Sp,", dy ")+"must have the same rank as output ".concat(k.length,", but got ")+"".concat(i.rank)));const I=Td(k,u.data.get(i.dataId).values),_=vd(a.shape,a.dtype);for(let S=0;S<h;++S)for(let e=0;e<m;++e){const t=e*g-T.top;for(let n=0;n<A;++n){const r=n*y-T.left;for(let o=0;o<G;++o){let a=Number.MIN_SAFE_INTEGER,i=0,s=0;for(let e=0;e<v;++e){const n=t+e*x;if(n>=0&&n<f)for(let t=0;t<b;++t){const l=r+t*w;if(l>=0&&l<C){const r=d[S][n][l][o]+p[e][t][o];r>a&&(a=r,i=e,s=t)}}}_[i][s][o]+=I[S][e][n][o]}}}return{dataId:u.write(TC(_,o.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},qO={kernelName:_p,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:l,dilations:c}=r,u=n,d=Td(o.shape,u.data.get(o.dataId).values),p=Td(a.shape,u.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:C,inChannels:G,outHeight:m,outWidth:A,padInfo:T,strideHeight:g,strideWidth:y,filterHeight:v,filterWidth:b,dilationHeight:x,dilationWidth:w,outShape:k}=hT(o.shape,a.shape,s,l,"NHWC",c);Zu(i.rank===k.length,(()=>"Error in ".concat(_p,", dy ")+"must have the same rank as output ".concat(k.length,", but got ")+"".concat(i.rank)));const I=Td(k,u.data.get(i.dataId).values),_=vd(o.shape,o.dtype);for(let S=0;S<h;++S)for(let e=0;e<m;++e){const t=e*g-T.top;for(let n=0;n<A;++n){const r=n*y-T.left;for(let o=0;o<G;++o){let a=Number.MIN_SAFE_INTEGER,i=t<0?0:t,s=r<0?0:r;for(let e=0;e<v;++e){const n=t+e*x;if(n>=0&&n<f)for(let t=0;t<b;++t){const l=r+t*w;if(l>=0&&l<C){const r=d[S][n][l][o]+p[e][t][o];r>a&&(a=r,i=n,s=l)}}}_[S][i][s][o]+=I[S][e][n][o]}}}return{dataId:u.write(TC(_,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};const XO={kernelName:Np,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o}=t,{canvas:a,options:i}=r,{contextOptions:s,imageOptions:l}=i||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));const d=a.getContext(u,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==d)throw new Error("Could not get the context with ".concat(u," type."));const[p,h]=o.shape.slice(0,2),f=2===o.shape.length?1:o.shape[2],C=n.data.get(o.dataId).values,G="float32"===o.dtype?255:1,m=new Uint8ClampedArray(h*p*4);for(let T=0;T<p*h;++T){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=C[T*f+n];if("float32"===o.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===o.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*G,e[1]=t*G,e[2]=t*G):e[n]=t*G}const t=4*T;m[t+0]=Math.round(e[0]),m[t+1]=Math.round(e[1]),m[t+2]=Math.round(e[2]),m[t+3]=Math.round(e[3])}a.width=h,a.height=p;const A=new ImageData(m,h,p);return d.putImageData(A,0,0),o}},YO=KF(((e,t)=>e*t)),ZO=hM(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),JO=pM(kh,YO,ZO),QO={kernelName:kh,backendName:"cpu",kernelFunc:JO};function $O(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;let s;FF(o,"sum"),s="bool"===o.dtype?uM({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):HF({inputs:{x:o},backend:n});const l=s.shape.length,c=id(a,s.shape),u=Ig(c,l);let d=c,p=s;null!=u&&(p=EM({inputs:{x:s},backend:n,attrs:{perm:u}}),d=Sg(d.length,l)),kg("sum",d,p.shape.length);const[h,f]=xg(p.shape,d);let C=iM(n,h,YC(p.dtype,"int32"));const G=$u(f),m=n.data.get(C.dataId).values,A=n.data.get(p.dataId).values;for(let T=0;T<m.length;++T){const e=T*G;let t=0;for(let n=0;n<G;++n)t+=A[e+n];m[T]=t}if(i){const e=C;C=AM({inputs:{x:C},backend:n,attrs:{shape:wg(C.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=u&&n.disposeIntermediateTensorInfo(p),C}const eL={kernelName:ff,backendName:"cpu",kernelFunc:$O};const tL={kernelName:Rp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:l}=iw(o,a.length);lw(i.length,l,a);const{path:c,steps:u}=cw(s,l),d=u.length;let p=null,h=i.length;const f=[];for(let C=0;C<d;++C){for(const e of u[C]){const{permutationIndices:t,expandDims:r}=sw(h,l[e]);let o;uw(t)?o=a[e]:(o=EM({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);ed(o.shape,i)||(o=AM({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===p?p=o:(p=JO({inputs:{a:o,b:p},backend:n}),f.push(p))}C<d-1&&(c[C]>=0&&(p=$O({inputs:{x:p},backend:n,attrs:{axis:c[C]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const C of f)C!==p&&n.disposeIntermediateTensorInfo(C);return p}};const nL={kernelName:Fp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;FF([r,o],"eluGrad");const a=new Float32Array($u(o.shape)),i=n.data.get(o.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const e=i[l];a[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(o.shape,"float32",a)}},rL=KF(((e,t)=>e===t?1:0)),oL=pM(Op,rL,null,"bool"),aL={kernelName:Op,backendName:"cpu",kernelFunc:oL},iL=Hx,sL=Wx,lL=Ux,cL=jx,uL=Kx,dL=qx,pL=PF(Mp,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+iL*n);return t*(1-((((dL*r+uL)*r+cL)*r+lL)*r+sL)*r*Math.exp(-n*n))})),hL={kernelName:Mp,backendName:"cpu",kernelFunc:pL},fL=LF((e=>Math.exp(e))),CL=zF(Lp,fL,"float32"),GL={kernelName:Lp,backendName:"cpu",kernelFunc:CL};function mL(e){const{inputs:t,backend:n,attrs:r}=e,{input:o}=t,{dim:a}=r,i=o.shape.length,s=o.shape.slice();let l=a;return a<0&&(Zu(-(i+1)<=a,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),l=i+a+1),s.splice(l,0,1),AM({inputs:{x:o},backend:n,attrs:{shape:s}})}const AL={kernelName:Pp,backendName:"cpu",kernelFunc:mL},TL=LF((e=>Math.expm1(e))),gL=zF(zp,TL),yL={kernelName:zp,backendName:"cpu",kernelFunc:gL},vL=KF(((e,t)=>e/t)),bL=pM(Ep,vL),xL={kernelName:Ep,backendName:"cpu",kernelFunc:bL},wL=KF(((e,t)=>e-t)),kL=hM(((e,t,n,r)=>({real:e-n,imag:t-r}))),IL=pM(Nf,wL,kL),_L={kernelName:Nf,backendName:"cpu",kernelFunc:IL};function SL(e,t,n){const r=e.shape,o=r[0],a=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[o,a],u=$u(c),d=ld("float32",u),p=ld("float32",u);for(let G=0;G<o;G++){const e=rO({inputs:{x:s},backend:n,attrs:{begin:[G,0],size:[1,a]}}),r=rO({inputs:{x:l},backend:n,attrs:{begin:[G,0],size:[1,a]}}),o=oM({inputs:{real:e,imag:r},backend:n}),{real:i,imag:c}=NL(o,t,n),u=Xx(i,c);for(let t=0;t<a;t++){const e=Qx(u,t);d[G*a+t]=e.real,p[G*a+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o)}const h=n.makeTensorInfo(c,"float32",d),f=n.makeTensorInfo(c,"float32",p),C=oM({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),C}function NL(e,t,n){const r=$u(e.shape),o=n.data.get(e.dataId),a=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0===((s=r)&s-1)){const o=EL(a,i,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",o.real),t=n.makeTensorInfo(s,"float32",o.imag),a=n.makeTensorInfo([],"float32",AC(r,"float32")),i=HF({inputs:{x:a},backend:n}),l=xL.kernelFunc({inputs:{a:e,b:a},backend:n}),c=xL.kernelFunc({inputs:{a:t,b:i},backend:n}),u=n.data.get(l.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:d}}return o}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let o=0;o<t;o++){let a=0,i=0;for(let r=0;r<t;r++){const s=tw(o*r,t,n),l=Qx(e,r);a+=l.real*s.real-l.imag*s.imag,i+=l.real*s.imag+l.imag*s.real}n&&(a/=t,i/=t),$x(r,a,i,o)}return r}(Xx(a,i),r,t);return Yx(e)}var s}function EL(e,t,n,r,o){if(1===n)return{real:e,imag:t};const a=Xx(e,t),i=n/2,s=Zx(a),l=s.real,c=s.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),p=o.makeTensorInfo(u,"float32",c),h=oM({inputs:{real:d,imag:p},backend:o}),f=Jx(a),C=f.real,G=f.imag,m=[C.length],A=o.makeTensorInfo(m,"float32",C),T=o.makeTensorInfo(m,"float32",G),g=oM({inputs:{real:A,imag:T},backend:o}),y=EL(l,c,i,r,o),v=y.real,b=y.imag,x=[v.length],w=o.makeTensorInfo(x,"float32",v),k=o.makeTensorInfo(x,"float32",b),I=oM({inputs:{real:w,imag:k},backend:o}),_=EL(C,G,i,r,o),S=_.real,N=_.imag,E=[S.length],R=o.makeTensorInfo(E,"float32",S),D=o.makeTensorInfo(E,"float32",N),F=oM({inputs:{real:R,imag:D},backend:o}),M=ew(n,r),O=[M.real.length],L=o.makeTensorInfo(O,"float32",M.real),P=o.makeTensorInfo(O,"float32",M.imag),z=oM({inputs:{real:L,imag:P},backend:o}),B=JO({inputs:{a:z,b:F},backend:o}),V=GM({inputs:{a:I,b:B},backend:o}),H=IL({inputs:{a:I,b:B},backend:o}),W=sM({inputs:{input:V},backend:o}),U=sM({inputs:{input:H},backend:o}),j=gO({inputs:{input:V},backend:o}),K=gO({inputs:{input:H},backend:o}),q=vO({inputs:[W,U],backend:o,attrs:{axis:0}}),X=vO({inputs:[j,K],backend:o,attrs:{axis:0}}),Y=o.data.get(q.dataId).values,Z=o.data.get(X.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(g),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(X),{real:Y,imag:Z}}const RL={kernelName:Bp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=$u(r.shape),a=r.shape[r.shape.length-1],i=AM({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=SL(i,!1,n),l=AM({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),l}};function DL(e){const{backend:t,attrs:n}=e,{shape:r,value:o,dtype:a}=n,i=a||fd(o),s=cd(i,$u(r));return function(e,t,n){e.fill(t)}(s,o),t.makeTensorInfo(r,i,s)}const FL={kernelName:Vp,backendName:"cpu",kernelFunc:DL};const ML={kernelName:Hp,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,a=r,i=ld(o.dtype,$u(o.shape)),[s,l,c,u]=o.shape,d=a.data.get(o.dataId).values;for(let p=0;p<s;p++){const e=p*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let o=0;o<u;o++){const a=Math.round(c-t-1),s=e+n+r+o;let l=d[s];if(a>=0&&a<c){l=d[e+n+a*u+o]}i[s]=l}}}}return{dataId:a.write(i,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},OL=LF((e=>Math.floor(e))),LL=zF(Wp,OL),PL={kernelName:Wp,backendName:"cpu",kernelFunc:LL},zL=KF(((e,t)=>Math.floor(e/t))),BL=pM(Up,zL,null,"int32"),VL={kernelName:Up,backendName:"cpu",kernelFunc:BL};const HL={kernelName:jf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let C=xO({inputs:{x:o,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(i){const e=C;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=AM({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});C=GM({inputs:{a:C,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else C=GM({inputs:{a:C,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(h){const e=C;if("NCHW"===u&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){const e=AM({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});C=rM(n,C,h,e,f),n.disposeIntermediateTensorInfo(e)}else C=rM(n,C,h,s,f);n.disposeIntermediateTensorInfo(e)}return C}};const WL={kernelName:Kf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r;let C=BO({inputs:{x:o,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(i){const e=C;C=GM({inputs:{a:C,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=C;C=rM(n,C,h,s,f),n.disposeIntermediateTensorInfo(e)}return C}};function UL(e,t,n,r,o,a,i,s,l){const c=Fm([r,a],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<o;t++){const a=e[u*o+t];r+=a*i[t],n.push(a)}if(r<0||r>=l/a)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<a;e++)c.values[u*a+e]=t.get(...t.indexToLoc(r*a+e))}return c}const jL={kernelName:qp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=$u(r.shape),i=o.shape,s=i[i.length-1],[l,c,u,d]=zx(r,o);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const p=UL(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,c,s,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,p.values)}};function KL(e,t,n){const r=Fm(n,e.dtype);for(let o=0;o<r.size;++o){const n=r.indexToLoc(o).slice(),a=n[0],i=n[2],s=t.locToIndex([a,i]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[o]=e.values[l])}return r}const qL={kernelName:Kp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r;FF([o,a],"gatherV2");const l=id(i,o.shape)[0],c=n.data.get(a.dataId).values,u=o.shape[l];for(let T=0;T<c.length;++T){const e=c[T];Zu(e<=u-1&&e>=0,(()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]")))}let d=s;null==s&&(d=0);const p=$u(a.shape),h=Iw(o,a,l,d),f=AM({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),C=AM({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),G=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],m=n.bufferSync(C),A=KL(n.bufferSync(f),m,G);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(h.outputShape,A.dtype,A.values)}},XL=KF(((e,t)=>e>t?1:0)),YL=pM(Xp,XL,null,"bool"),ZL={kernelName:Xp,backendName:"cpu",kernelFunc:YL},JL=KF(((e,t)=>e>=t?1:0)),QL=pM(Yp,JL,null,"bool"),$L={kernelName:Yp,backendName:"cpu",kernelFunc:QL};const eP={kernelName:Jp,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=$u(r.shape),a=r.shape[r.shape.length-1],i=AM({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=SL(i,!0,n),l=AM({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),l}},tP=PF($p,(e=>Number.isFinite(e)?1:0),"bool"),nP={kernelName:$p,backendName:"cpu",kernelFunc:tP},rP=PF(eh,(e=>Math.abs(e)===1/0?1:0),"bool"),oP={kernelName:eh,backendName:"cpu",kernelFunc:rP},aP=PF(th,(e=>Number.isNaN(e)?1:0),"bool"),iP={kernelName:th,backendName:"cpu",kernelFunc:aP},sP=KF(((e,t)=>e<t?1:0)),lP=pM(rh,sP,null,"bool"),cP={kernelName:rh,backendName:"cpu",kernelFunc:lP},uP=KF(((e,t)=>e<=t?1:0)),dP=pM(oh,uP,null,"bool"),pP={kernelName:oh,backendName:"cpu",kernelFunc:dP};function hP(e,t,n){const r=(t-e)/(n-1),o=yd(n,"float32");o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+r;return o}const fP={kernelName:ah,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=hP(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},CP=LF((e=>Math.log(e))),GP=zF(ih,CP),mP={kernelName:ih,backendName:"cpu",kernelFunc:GP},AP=PF(sh,(e=>Math.log1p(e))),TP={kernelName:sh,backendName:"cpu",kernelFunc:AP},gP=KF(((e,t)=>e&&t)),yP=pM(lh,gP,null,"bool"),vP={kernelName:lh,backendName:"cpu",kernelFunc:yP},bP=PF(ch,(e=>e?0:1),"bool"),xP={kernelName:ch,backendName:"cpu",kernelFunc:bP},wP=KF(((e,t)=>e||t)),kP=pM(uh,wP,null,"bool"),IP={kernelName:uh,backendName:"cpu",kernelFunc:kP};const _P={kernelName:dh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:l}=r;FF(o,"LRN");const c=o.shape[3],u=c-1,d=n.data.get(o.dataId).values,p=$u(o.shape),h=new Float32Array(p);function f(e){const t=e%c;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,u);let o=0;for(;n<=r;n++){const e=d[n];o+=e*e}return o}for(let C=0;C<p;C++){const e=f(C),t=d[C]*Math.pow(i+s*e,-l);h[C]=t}return n.makeTensorInfo(o.shape,o.dtype,h)}};const SP={kernelName:ph,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r;FF(i,"LRNGrad");const d=$u(i.shape),p=i.shape[3],h=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,C=n.data.get(a.dataId).values,G=new Float32Array(d),m=d;for(let A=0;A<m;A++){const e=A%p,t=A-e+Math.max(0,e-s),n=A-e+Math.min(p,e+s+1);let r=0;for(let o=t;o<n;o++)r+=Math.pow(f[o],2);r=c*r+l;for(let o=t;o<n;o++){let e=-2*c*u*f[o]*C[A]/r;A===o&&(e+=Math.pow(r,-u)),e*=h[A],G[o]+=e}}return n.makeTensorInfo(i.shape,o.dtype,G)}};function NP(e,t,n,r){const o=ld(r,$u(n));for(let a=0;a<o.length;++a){const n=a*t;let r=e[n];for(let o=0;o<t;++o){const t=e[n+o];(Number.isNaN(t)||t>r)&&(r=t)}o[a]=r}return o}function EP(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=n;let l=o.shape;const c=l.length,u=id(a,l);let d=u;const p=Ig(d,c);let h=s.data.get(o.dataId).values;if(null!=p){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[p[t]];h=NM(h,l,o.dtype,p,e),d=Sg(d.length,c),l=e}FF(o,"max"),kg("max",d,c);const[f,C]=xg(l,d),G=NP(h,$u(C),f,o.dtype),m=s.write(G,f,o.dtype);let A=f;if(i){A=wg(f,u)}return{dataId:m,shape:A,dtype:o.dtype}}const RP={kernelName:hh,backendName:"cpu",kernelFunc:EP},DP=KF(((e,t)=>Math.max(e,t))),FP=pM(fh,DP),MP={kernelName:fh,backendName:"cpu",kernelFunc:FP};const OP={kernelName:Ch,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;FF(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;Zu(xT(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const c=fT(o.shape,a,i,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ed(c.inShape,c.outShape))u=HF({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=md(o.shape),r=XM(e,o.shape,o.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,o.dtype,r.values)}return u}};const LP={kernelName:mh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:c}=r;FF(o,"maxPool3d");const u=CT(o.shape,a,i,1,s,l,c),d=ZM(n.data.get(o.dataId).values,o.shape,o.dtype,md(o.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const PP={kernelName:Ah,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:l,dimRoundingMode:c}=r;FF([o,a],"maxPool3DGrad");const u=CT(a.shape,i,s,1,l,c),d=function(e,t){const n=Fm(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let C=0;C<t.batchSize;++C)for(let G=0;G<t.inChannels;++G)for(let m=0;m<t.outDepth;++m){const A=m*r-p;let T=A;for(;T<0;)T+=i;const g=Math.min(t.inDepth,c+A);for(let r=0;r<t.outHeight;++r){const c=r*o-h;let p=c;for(;p<0;)p+=s;const y=Math.min(t.inHeight,u+c);for(let o=0;o<t.outWidth;++o){const h=o*a-f;let v=h;for(;v<0;)v+=l;const b=Math.min(t.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=T;t<g;t+=i){const n=t-A;for(let r=p;r<y;r+=s){const o=r-c;for(let a=v;a<b;a+=l){const i=a-h,s=e.get(C,t,r,a,G);s>=x&&(x=s,w=n*u*d+o*u+i)}}}n.set(w,C,m,r,o,G)}}}return n}(n.bufferSync(a),u),p=u.strideDepth,h=u.strideHeight,f=u.strideWidth,C=u.dilationDepth,G=u.dilationHeight,m=u.dilationWidth,A=u.effectiveFilterDepth,T=u.effectiveFilterHeight,g=u.effectiveFilterWidth,y=A-1-u.padInfo.front,v=g-1-u.padInfo.left,b=T-1-u.padInfo.top,x=Fm(a.shape,"float32"),w=n.bufferSync(o);for(let k=0;k<u.batchSize;++k)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-y,a=n-b,i=r-v;let s=0;for(let t=0;t<A;t+=C){const n=(o+t)/p;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<T;r+=G){const o=(a+r)/h;if(!(o<0||o>=u.outHeight||Math.floor(o)!==o))for(let a=0;a<g;a+=m){const l=(i+a)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=A*T*g-1-d.get(k,n,o,l,e)===t*T*g+r*g+a?1:0;if(0===c)continue;s+=w.get(k,n,o,l,e)*c}}}x.set(s,k,t,n,r,e)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const zP={kernelName:Gh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;FF([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=fT(s.shape,l,c,1,u,d),h=n.data.get(s.dataId).values,f=Fm(p.outShape,s.dtype,YM(h,s.shape,s.dtype,p).values),C=p.strideHeight,G=p.strideWidth,m=p.dilationHeight,A=p.dilationWidth,T=p.effectiveFilterHeight,g=p.effectiveFilterWidth,y=g-1-p.padInfo.left,v=T-1-p.padInfo.top,b=Fm(s.shape,"float32"),x=n.data.get(o.dataId).values,w=Fm(o.shape,"float32",x);for(let k=0;k<p.batchSize;++k)for(let e=0;e<p.inChannels;++e)for(let t=0;t<p.inHeight;++t)for(let n=0;n<p.inWidth;++n){const r=t-v,o=n-y;let a=0;for(let t=0;t<T;t+=m){const n=(r+t)/C;if(!(n<0||n>=p.outHeight||Math.floor(n)!==n))for(let r=0;r<g;r+=A){const i=(o+r)/G;if(i<0||i>=p.outWidth||Math.floor(i)!==i)continue;const s=T*g-1-f.get(k,n,i,e)===t*g+r?1:0;if(0===s)continue;a+=w.get(k,n,i,e)*s}}b.set(a,k,t,n,e)}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const BP={kernelName:Th,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:l}=n,c=r;FF(o,"MaxPoolWithArgmax");const u=c.data.get(o.dataId).values,d=fT(o.shape,a,i,[1,1],s),[p,h]=function(e,t,n,r,o){const a=XM(e,0,n,md(t),o,"max"),i=YM(e,t,n,o,!0,r);return[a.values,i.values]}(u,o.shape,o.dtype,l,d),f=c.write(p,d.outShape,o.dtype),C=c.write(h,d.outShape,o.dtype);return[{dataId:f,shape:d.outShape,dtype:o.dtype},{dataId:C,shape:d.outShape,dtype:"int32"}]}};const VP={kernelName:gh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=id(a,o.shape),l=$u(xg(o.shape,s)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const d=uM({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});c.push(d);const p=bL({inputs:{a:d,b:u},backend:n});c.push(p);const h=$O({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:i}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const HP={kernelName:yh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;FF(o,"min");const s=id(a,o.shape);let l=s;const c=Ig(l,o.shape.length);let u=o;null!=c&&(u=EM({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Sg(l.length,o.shape.length)),kg("min",l,u.shape.length);const[d,p]=xg(u.shape,l),h=$u(p),f=yd($u(d),u.dtype),C=n.data.get(u.dataId).values;for(let m=0;m<f.length;++m){const e=m*h;let t=C[e];for(let n=0;n<h;++n){const r=C[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[m]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const G=n.makeTensorInfo(d,u.dtype,f);if(i){const e=AM({inputs:{x:G},backend:n,attrs:{shape:wg(d,s)}});return n.disposeIntermediateTensorInfo(G),e}return G}},WP=KF(((e,t)=>Math.min(e,t))),UP=pM(vh,WP),jP={kernelName:vh,backendName:"cpu",kernelFunc:UP};const KP={kernelName:bh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,mode:i}=r;FF(o,"mirrorPad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=a.map((e=>e[0])),c=a.map(((e,t)=>e[0]+o.shape[t])),u="reflect"===i?0:1,d=n.data.get(o.dataId).values,p=o.shape.length,h=md(o.shape),f=$u(s),C=s.length,G=md(s),m=ld(o.dtype,f);for(let A=0;A<f;A++){let e=wd(A,C,G);for(let n=0;n<C;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map(((e,t)=>e-l[t]));const t=xd(e,p,h);m[A]=d[t]}return{dataId:n.write(m,s,o.dtype),shape:s,dtype:o.dtype}}},qP=KF(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),XP=pM(xh,qP),YP={kernelName:xh,backendName:"cpu",kernelFunc:XP};function ZP(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=o.shape.length;let s=a;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));const l=id([s],o.shape),c=EP({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=wg(c.shape,l),d=AM({inputs:{x:c},backend:n,attrs:{shape:u}}),p=IL({inputs:{a:o,b:d},backend:n}),h=CL({inputs:{x:p},backend:n}),f=$O({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),C=AM({inputs:{x:f},backend:n,attrs:{shape:u}}),G=bL({inputs:{a:h,b:C},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),G}const JP={kernelName:mf,backendName:"cpu",kernelFunc:ZP};const QP={kernelName:wh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r;FF(o,"multinomial");const l=s?o:ZP({inputs:{logits:o},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,p=[c,a],h=yd($u(p),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=d[e];for(let o=1;o<t.length;++o)t[o]=t[o-1]+d[e+o];const n=Uy.alea(i.toString()),r=f*a;for(let o=0;o<a;++o){const e=n();h[r+o]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){h[r+o]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",h)}};function $P(e,t,n){const r=AC(-1,n);return YO([],t,r,e,n)}const ez={kernelName:Ih,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;FF(r,"neg");const o=n.data.get(r.dataId).values,[a,i]=$P(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}},tz=Nb;const nz={kernelName:Sh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=r;FF(o,"NonMaxSuppression");const c=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,{selectedIndices:d}=tz(c,u,i,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},rz=Eb;const oz={kernelName:Nh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r;FF(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:h}=rz(u,d,i,s,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},az=Rb;const iz={kernelName:Eh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r;FF(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,p=i,h=s,f=l,C=c,{selectedIndices:G,selectedScores:m}=az(u,d,p,h,f,C);return[n.makeTensorInfo([G.length],"int32",new Int32Array(G)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}},sz=KF(((e,t)=>e!==t?1:0)),lz=pM(_h,sz,null,"bool"),cz={kernelName:_h,backendName:"cpu",kernelFunc:lz};const uz={kernelName:Dh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:l}=r;FF(o,"oneHot");const c=$u(o.shape),u=new Float32Array(c*i);u.fill(l);const d=n.data.get(o.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<i&&(u[p*i+d[p]]=s);return n.makeTensorInfo([...o.shape,i],a,u)}};function dz(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=sM({inputs:{input:r},backend:n}),t=dz({inputs:{x:e},backend:n}),o=gO({inputs:{input:r},backend:n}),a=dz({inputs:{x:o},backend:n}),i=oM({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return DL({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const pz={kernelName:Bf,backendName:"cpu",kernelFunc:dz};const hz={kernelName:Rh,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===o.dtype){const t=sM({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=gO({inputs:{input:o},backend:r}),i=dz({inputs:{x:a},backend:r}),s=oM({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return DL({backend:r,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}};function fz(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return mL({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{Ju(a,e.shape,"All tensors passed to stack must have matching shapes"),Zu(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=vO({inputs:t.map((e=>{const t=mL({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const Cz={kernelName:Fh,backendName:"cpu",kernelFunc:fz};const Gz={kernelName:Mh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;FF(o,"pad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),l=a.map((e=>e[0])),c=n.data.get(o.dataId).values,u=$u(o.shape),d=o.shape.length,p=md(o.shape),h=$u(s),f=s.length,C=md(s),G=ld(o.dtype,h);0!==i&&G.fill(i);for(let m=0;m<u;m++){G[xd(wd(m,d,p).map(((e,t)=>e+l[t])),f,C)]=c[m]}return{dataId:n.write(G,s,o.dtype),shape:s,dtype:o.dtype}}},mz=KF(((e,t)=>Math.pow(e,t))),Az=pM(Oh,mz),Tz={kernelName:Oh,backendName:"cpu",kernelFunc:Az};function gz(e,t,n,r){const[o,a]=xg(e,r),i=YC(t,"int32"),s=yd($u(o),i),l=$u(a);for(let c=0;c<s.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[c]=t}return{outVals:s,outShape:o,outDtype:i}}const yz={kernelName:Ph,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;FF(o,"prod");const s=o.shape.length,l=id(a,o.shape),c=Ig(l,s);let u=l,d=o;const p=[];null!=c&&(d=EM({inputs:{x:o},backend:n,attrs:{perm:c}}),p.push(d),u=Sg(u.length,s));const h=n.data.get(d.dataId).values,{outVals:f,outShape:C,outDtype:G}=gz(d.shape,d.dtype,h,u);let m=C;return i&&(m=wg(C,l)),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(m,G,f)}};function vz(e,t,n,r){const o=[];let a=0;const i=t.length-1+n.length,s=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],o=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)s[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],i=e[c]+1;for(let e=0;e<n.length;++e){const o=n[e],a=e+t.length-1;if(a>=0){const e=s[a],t=e[e.length-1]-o[r];for(let n=r;n<i;++n)s[a].push(o[n+1]+t)}r=o[r],i=o[i]}i!==r&&(o.push([r,i]),a+=i-r)}return{outSplits:s,valueSlices:o,numValues:a}}function bz(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function xz(e,t,n,r,o){const a=t.slice();a[0]=o;const i=cd(n,$u(a)),s=e.length;return function(e,t,n,r,o,a){const i=bz(t,2)[1],s=bz(a,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)o[l*s+n]=e[t*i+n];++l}}(e,t,r,0===s?0:s/t[0],i,a),[i,a]}function wz(e,t,n,r,o,a,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const o=wd(r,t.length,md(t)).join(",");throw new Error("indices[".concat(o,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(a,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:d}=vz(a,i,e,l),p=function(e){const t=[];for(let n=0;n<e.length;++n){const r=cd("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(c),h=xz(n,r,o,u,d);return[p,h[0],h[1]]}const kz={kernelName:zh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.data.get(e.dataId).values)),c=o.map((e=>e.shape)),u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,[p,h,f]=wz(l,c,u,a.shape,a.dtype,d,i.shape),C=p.map((e=>n.makeTensorInfo([e.length],"int32",e))),G=n.makeTensorInfo(f,a.dtype,h);return C.concat([G])}},Iz=2147483647;function _z(e,t,n,r,o,a,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===o.length,c=0===i.length,u=[];s||u.push(t[0]),l||u.push(o[0]),c||u.push(i[0]);for(let C=1;C<u.length;++C)if(u[C]!==u[C-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],p=cd("int32",d+1);p[0]=0;for(let C=0;C<d;++C){const t=s?e[0]:e[C],n=l?r[0]:r[C],o=c?a[0]:a[C];if(0===o)throw new Error("Requires delta != 0");let i;if(o>0&&n<t||o<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/o)),i>Iz)throw new Error("Requires ((limit - start) / delta) <= ".concat(Iz));p[C+1]=p[C]+i}const h=cd(n,p[d]);let f=0;for(let C=0;C<d;++C){const t=p[C+1]-p[C];let n=s?e[0]:e[C];const r=c?a[0]:a[C];for(let e=0;e<t;++e)h[f++]=n,n+=r}return[p,h]}const Sz={kernelName:Bh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[c,u]=_z(i,r.shape,r.dtype,s,o.shape,l,a.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var Nz=kx;class Ez{constructor(e,t,n,r,o,a,i,s,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=_x(c),this.raggedRank=Sx(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Nz.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Nz.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Nz.VALUE_ROWIDS:return Ez.getMaxWidthValueRowID(t);case Nz.ROW_SPLITS:return Ez.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Nz[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],o=0;for(let a=1;a<t;++a){const t=e[a];t!==r&&(r=t,o=Math.max(a-n,o),n=a)}return Math.max(t-n,o)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Dz(e,n)}calculateOutputSize(e){const t=this.valuesShape;Nx(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=Ix(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let o=1;o<=this.raggedRank;++o)r[o]<0&&(r[o]=this.getMaxWidth(o));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),o=[];let a=0;for(let i=0;i<r;++i,a+=t)o.push(a);for(let i=r;i<e;++i)o.push(-1);return Zu(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,r){const o=e.length,a=[];for(let i=0;i<o-1;++i){const o=e[i+1]-e[i];let s=Math.min(r,o),l=t[i];-1===l&&(s=0);for(let e=0;e<s;++e)a.push(l),l+=n;for(let e=0;e<o-s;++e)a.push(-1)}if(o>0&&a.length!==e[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){const o=e.length,a=[];if(0===o)return[];let i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let l=t[s];a.push(l);for(let c=1;c<o;++c){const o=e[c];if(o===s)l>=0&&(++i,i<r?l+=n:l=-1);else{if(i=0,s=o,o>=t.length)throw new Error("Got nextValueRowId=".concat(o," which is not less than ").concat(t.length));l=t[o]}a.push(l)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){const o=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Nz.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,t,n,r);case Nz.ROW_SPLITS:if(o.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(o.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(o,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Nz[a]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Nz.FIRST_DIM_SIZE:return e[0];case Nz.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Nz.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Nz[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let a=n.length-2;a>=0;--a)n[a]=n[a+1]*t[a+1];const r=Dz(t,!1),o=cd(this.valuesDType,$u(r));if(n[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){a=this.calculateOutputIndex(e-1,a,n[e],t[e])}this.setOutput(this.raggedRank,a,o,r)}return[r,o]}setOutput(e,t,n,r){if(0===n.length)return;const o=this.values,a=n;let i=r.slice();i=i.slice(e+1);const s=$u(i),l=t.length;let c=this.defaultValue;if(c.length!==s&&1!==c.length){const e=this.defaultValueShape;IG((()=>{const t=_T(c,e),n=jT(t,i);c=n.dataSync()}))}let u=0,d=0,p=0;for(let h=0;h<=l;++h){let e=h<l?t[h]:-1;if(e!==p){if(d<p){const e=o.subarray(u*s);Rz(a.subarray(d*s),e,(p-d)*s)}if(h>=l){const t=n.length;e=Math.floor(t/s)}if(e>p)if(1===this.defaultValue.length)a.subarray(p*s,e*s).fill(this.defaultValue[0]),p=e;else for(;e>p;){Rz(a.slice(p*s),c,s),++p}e<0?(u=h+1,d=p):(u=h,d=p,p=d+1)}else++p}}}function Rz(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Dz(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function Fz(e,t,n,r,o,a,i,s,l,c){return new Ez(e,t,n,r,o,a,i,s,l,c).compute()}const Mz={kernelName:Vh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=s.map((e=>n.data.get(e.dataId).values)),h=s.map((e=>e.shape)),[f,C]=Fz(c,o.shape,u,a.shape,a.dtype,d,i.shape,p,h,l);return n.makeTensorInfo(f,a.dtype,C)}};function Oz(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return yd(0,r);const o=yd(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+n;return o}const Lz={kernelName:Hh,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,dtype:a,step:i}=n,s=Oz(r,o,i,a);return t.makeTensorInfo([s.length],a,s)}},Pz=PF(Uh,(e=>1/e)),zz={kernelName:Uh,backendName:"cpu",kernelFunc:Pz};const Bz={kernelName:Yh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;FF(o,"resizeBilinear");const l=md(o.shape),[c,u]=s,[d,p,h,f]=o.shape,C=n.data.get(o.dataId).values,G=new Float32Array($u([d,c,u,f])),m=[a&&c>1?p-1:p,a&&u>1?h-1:h],A=[a&&c>1?c-1:c,a&&u>1?u-1:u];let T=0;const g=m[0]/A[0],y=m[1]/A[1];for(let v=0;v<d;v++)for(let e=0;e<c;e++){let t;t=i?g*(e+.5)-.5:g*e;const n=Math.max(0,Math.floor(t)),r=t-n,o=Math.min(p-1,Math.ceil(t)),a=v*l[0]+n*l[1],s=v*l[0]+o*l[1];for(let e=0;e<u;e++){let t;t=i?y*(e+.5)-.5:y*e;const n=Math.max(0,Math.floor(t)),o=t-n,c=Math.min(h-1,Math.ceil(t)),u=a+n*l[2],d=s+n*l[2],p=a+c*l[2],m=s+c*l[2];for(let e=0;e<f;e++){const t=C[u+e],n=C[d+e],a=t+(C[p+e]-t)*o,i=a+(n+(C[m+e]-n)*o-a)*r;G[T++]=i}}}return n.makeTensorInfo([d,c,u,f],"float32",G)}};const Vz={kernelName:Zh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;FF([a,o],"resizeBilinearGrad");const s=md(o.shape),[l,c,u,d]=o.shape,[,p,h]=a.shape,f=new Float32Array(l*c*u*d),C=[i&&p>1?c-1:c,i&&h>1?u-1:u],G=[i&&p>1?p-1:p,i&&h>1?h-1:h],m=C[0]/G[0],A=C[1]/G[1],T=n.data.get(a.dataId).values;let g=0;for(let y=0;y<l;y++){const e=y*s[0];for(let t=0;t<p;t++){const n=t*m,r=Math.floor(n),o=Math.min(Math.ceil(n),c-1),a=e+r*s[1],i=e+o*s[1],l=n-r,p=1-l;for(let e=0;e<h;e++){const t=e*A,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),o=t-n,c=1-o,h=a+n*s[2],C=a+r*s[2],G=i+n*s[2],m=i+r*s[2],y=p*c,v=p*o,b=l*c,x=l*o;for(let e=0;e<d;e++){const t=T[g++];f[h+e]+=t*y,f[C+e]+=t*v,f[G+e]+=t*b,f[m+e]+=t*x}}}}return n.makeTensorInfo([l,u,c,d],"float32",f)}};const Hz={kernelName:qh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;FF(o,"resizeNearestNeighbor");const l=md(o.shape),[c,u]=s,[d,p,h,f]=o.shape,C=n.data.get(o.dataId).values,G=new Float32Array(d*c*u*f),m=[a&&c>1?p-1:p,a&&u>1?h-1:h],A=[a&&c>1?c-1:c,a&&u>1?u-1:u],T=m[0]/A[0],g=m[1]/A[1];let y=0;for(let v=0;v<d;v++){const e=v*l[0];for(let t=0;t<c;t++){const n=i?T*(t+.5):T*t;let r=Math.min(p-1,a?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const o=e+r*l[1];for(let e=0;e<u;e++){const t=i?g*(e+.5):g*e;let n=Math.min(h-1,a?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=o+n*l[2];for(let e=0;e<f;e++){const t=C[r+e];G[y++]=t}}}}return n.makeTensorInfo([d,c,u,f],o.dtype,G)}};const Wz={kernelName:Xh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;FF([a,o],"resizeNearestNeighborGrad");const s=md(o.shape),l=md(a.shape),[c,u,d,p]=o.shape,[,h,f]=a.shape,C=new Float32Array(c*u*d*p),G=n.data.get(a.dataId).values,m=[i&&h>1?u-1:u,i&&f>1?d-1:d],A=[i&&h>1?h-1:h,i&&f>1?f-1:f],T=m[0]/A[0],g=m[1]/A[1],y=1/T,v=1/g,b=2*Math.ceil(y)+2,x=2*Math.ceil(v)+2;for(let w=0;w<c;w++){const e=w*s[0];for(let t=0;t<u;t++){const n=e+t*s[1],r=Math.floor(t*y),o=Math.floor(r-b/2);for(let a=0;a<d;a++){const r=n+a*s[2],c=Math.floor(a*v),m=Math.floor(c-x/2);for(let n=0;n<p;n++){let s=0;for(let r=0;r<b;r++){const c=r+o;if(c<0||c>=h)continue;const p=e+c*l[1],C=c*T;if(t===Math.min(u-1,i?Math.round(C):Math.floor(C)))for(let e=0;e<x;e++){const t=e+m;if(t<0||t>=f)continue;const r=p+t*l[2],o=t*g;a===Math.min(d-1,i?Math.round(o):Math.floor(o))&&(s+=G[r+n])}}C[r+n]=s}}}}return n.makeTensorInfo(o.shape,o.dtype,C)}};const Uz={kernelName:Qh,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r;FF(o,"reverse");const i=o.shape.length,s=id(a,o.shape);if(0===i)return HF({inputs:{x:o},backend:n});const l=new OC(o.shape,o.dtype),c=n.bufferSync(o);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();s.forEach((e=>t[e]=o.shape[e]-1-t[e])),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},jz={kernelName:Wf,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,l=r,c=ld(o.dtype,$u(o.shape)),[u,d,p,h]=o.shape,[f,C]=Dx(s,d,p),G=Math.sin(a),m=Math.cos(a),A=l.data.get(o.dataId).values;for(let T=0;T<u;T++){const e=T*p*d*h;for(let t=0;t<d;t++){const n=t*(p*h);for(let r=0;r<p;r++){const o=r*h;for(let a=0;a<h;a++){const s=[u,t,r,a],l=s[2],T=s[1];let g=(l-f)*m-(T-C)*G,y=(l-f)*G+(T-C)*m;g=Math.round(g+f),y=Math.round(y+C);let v=i;if("number"!==typeof i&&(v=3===a?255:i[a]),g>=0&&g<p&&y>=0&&y<d){v=A[e+y*(p*h)+g*h+a]}c[e+n+o+a]=v}}}}return{dataId:l.write(c,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Kz=PF($h,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),qz={kernelName:$h,backendName:"cpu",kernelFunc:Kz},Xz=LF((e=>1/Math.sqrt(e))),Yz=zF(ef,Xz),Zz={kernelName:ef,backendName:"cpu",kernelFunc:Yz};function Jz(e,t,n,r,o,a,i,s,l,c){const u=[r/o,o],d=e.values,p=t.values;if(0===r)return Fm(n,t.dtype);const h=l instanceof OC?l:Fm(u,t.dtype);"string"===typeof l||"number"===typeof l?h.values.fill(l):"boolean"===typeof l&&h.values.fill(+l);for(let f=0;f<a;f++){const e=[];let a=0;for(let t=0;t<i;t++){const n=d[f*i+t];e.push(n),a+=n*s[t]}if(a<0||a>=r/o)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<o;n++)c?h.values[a*o+n]+=p[f*o+n]:h.values[a*o+n]=0===t.rank?p[0]:p[f*o+n]}return h}const Qz={kernelName:tf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,o,i),p=Jz(n.bufferSync(o),n.bufferSync(a),i,d,c,l,s,u,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};function $z(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<t?n=o+1:r=o;return r}function eB(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<=t?n=o+1:r=o;return r}const tB={kernelName:rf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=function(e,t,n,r,o,a){const i=cd("int32",n*o);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*o;for(let e=0;e<o;++e)i[l+e]="left"===a?$z(n,t[e+l]):eB(n,t[e+l])}return i}(n.data.get(o.dataId).values,n.data.get(a.dataId).values,o.shape[0],o.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",s)}};const nB={kernelName:of,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t;FF([r,o,a],"select");const i=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,u=YC(o.dtype,a.dtype),d=yd($u(o.shape),u);let p=0;const h=0===i||i>1||1===o.shape.length?1:$u(o.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<h;e++)1===s[f]?d[p++]=l[f]:d[p++]=c[f];return n.makeTensorInfo(o.shape,u,d)}},rB=Bx,oB=Vx,aB=PF(af,(e=>e>=0?oB*e:rB*(Math.exp(e)-1))),iB={kernelName:af,backendName:"cpu",kernelFunc:aB},sB=PF(uf,(e=>e<0?-1:e>0?1:0)),lB={kernelName:uf,backendName:"cpu",kernelFunc:sB},cB=PF(lf,(e=>Math.sin(e))),uB={kernelName:lf,backendName:"cpu",kernelFunc:cB},dB=PF(cf,(e=>Math.sinh(e))),pB={kernelName:cf,backendName:"cpu",kernelFunc:dB},hB=Math.log(1.1920928955078125e-7)+2,fB=PF(pf,(e=>{const t=e>-hB,n=e<hB,r=Math.exp(e);let o;return o=n?r:t?e:Math.log(1+r),o})),CB={kernelName:pf,backendName:"cpu",kernelFunc:fB};const GB={kernelName:Cf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;FF([o],"spaceToBatchND");const s=$u(a),l=[[0,0]];l.push(...i);for(let G=1+a.length;G<o.shape.length;++G)l.push([0,0]);const c=Gz.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),u=Fx(c.shape,a,s,!1),d=Mx(u.length,a.length,!1),p=Ox(c.shape,a,s,!1),h=AM({inputs:{x:c},backend:n,attrs:{shape:u}}),f=EM({inputs:{x:h},backend:n,attrs:{perm:d}}),C=AM({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),C}};function mB(e,t,n,r,o,a,i){const s=t[0],l=a[0],c=new Array(l),u=new Array(s),d=t[1];if(0===l){if(0!==s)throw new Error(hw(s));return[cd(n,0),[0,d],cd(o,0),c,u]}let p=!0,h=0;const f=new Array(l).fill(0);for(let G=0;G<s;++G){const t=e[G*d];if(t<0)throw new Error(fw(G,t));if(t>=l)throw new Error(Cw(G,t,l));++f[t],p=p&&t>=h,h=t}let C=!0;for(let G=0;G<l;++G){const e=0===f[G];c[G]=e,C=C&&!e,f[G]=Math.max(f[G],1),G>0&&(f[G]+=f[G-1])}if(C&&p){const t=e,n=r;for(let e=0;e<s;++e)u[e]=e;return[t,[s,d],n,c,u]}{const t=f[l-1],a=cd(n,t*d),p=cd(o,t),h=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*d],o=h[t],i=(0===t?0:f[t-1])+o;h[t]++;for(let r=0;r<d;++r)a[i*d+r]=e[n*d+r];p[i]=r[n],u[n]=i}for(let e=0;e<l;++e){if(0===h[e]){const t=0===e?0:f[e-1];a[t*d+0]=e;for(let e=1;e<d;++e)a[t*d+e]=0;p[t]=i}}return[a,[t,d],p,c,u]}}const AB={kernelName:Af,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(a.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values[0],[d,p,h,f,C]=mB(s,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],o.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([C.length],r.dtype,new Int32Array(C))]}};function TB(e,t,n,r,o){const a=$u(r),i=t[0],s=o.length,l=[];let c=1,u=-1;for(let C=0;C<s;++C){const e=o[C];if(-1===e){if(-1!==u)throw new Error(Gw(u,C));u=C,l.push(1)}else{if(e<0)throw new Error(mw(C,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/c);if(c*e!==a)throw new Error(Tw(r,l));l[u]=e}if($u(l)!==a)throw new Error(gw(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}const h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}const f=cd(n,i*s);for(let C=0;C<i;++C){let t=0;for(let n=0;n<d;++n)t+=e[C*d+n]*p[n];for(let e=0;e<s;++e)f[C*s+e]=Math.trunc(t/h[e]),t%=h[e]}return[f,[i,s],l]}const gB={kernelName:Tf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(a.shape));const i=Array.from(n.data.get(o.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,u,d]=TB(s,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};function yB(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],c=l[1],u=s>0?o[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=u;const p=cd(n,d.reduce(((e,t)=>e*t),1));if(0===s)return u>0&&p.fill(i),[p,d];if(u<=0)throw new Error("segment ids must be >= 0");let h=0,f=1,C=0,G=o[h];for(;;){let t=0;if(f<s){if(t=o[f],G===t){++f;continue}if(G>=t)throw new Error("segment ids are not increasing")}if(G<0||G>=u)throw new Error(bw(G,u));G>C&&p.fill(i,C*c,G*c);for(let n=h;n<f;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(xw(n,r[n],l[0]));for(let n=0;n<c;n++)p[G*c+n]+=e[t*c+n]}if(a)for(let e=0;e<c;e++)p[G*c+e]/=f-h;if(h=f,++f,C=G+1,G=t,f>s)break}return C<u&&p.fill(i,C*c,u*c),[p,d]}const vB={kernelName:gf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(a.shape));if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[c,u]=yB(i,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const bB={kernelName:yf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(a.shape));if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[c,u]=yB(i,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const xB={kernelName:vf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=Bv(0,o,s),h=!1,f=n.bufferSync(o);let C;switch(a.dtype){case"bool":C=Jz(f,n.bufferSync(a),s,p,u,c,l,d,Boolean(n.data.get(i.dataId).values[0]),h);break;case"float32":C=Jz(f,n.bufferSync(a),s,p,u,c,l,d,n.data.get(i.dataId).values[0],h);break;case"int32":C=Jz(f,n.bufferSync(a),s,p,u,c,l,d,n.data.get(i.dataId).values[0],h);break;case"string":C=Jz(f,n.bufferSync(a),s,p,u,c,l,d,vC(n.data.get(i.dataId).values[0]),h);break;default:throw new Error("Unsupported type ".concat(a.dtype))}return n.makeTensorInfo(s,C.dtype,C.values)}};const wB={kernelName:Gf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=id(i,o.shape)[0],l=pw(o,a,s),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map((e=>{const t=[...u];t[s]=e;const r=rO({inputs:{x:o},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},kB=LF((e=>Math.sqrt(e))),IB=PF(hf,(e=>Math.sqrt(e))),_B={kernelName:hf,backendName:"cpu",kernelFunc:IB},SB={kernelName:xf,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,o=n;FF(r,"square");const a=o.data.get(r.dataId).values,i=new Float32Array(a.length);for(let s=0;s<a.length;++s){const e=a[s];i[s]=e*e}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},NB=KF(((e,t)=>{const n=e-t;return n*n})),EB=pM(bf,NB),RB={kernelName:bf,backendName:"cpu",kernelFunc:EB},DB=LF(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)})),FB=zF(wf,DB),MB={kernelName:wf,backendName:"cpu",kernelFunc:FB},OB=PF(Vf,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),LB={kernelName:Vf,backendName:"cpu",kernelFunc:OB};function PB(e,t,n,r){const o=Fm(e,t.dtype);for(let a=0;a<o.size;a++){const e=o.indexToLoc(a),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];o.set(t.get(...i),...e)}return o}const zB={kernelName:kf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r;FF(o,"stridedSlice");const{finalShapeSparse:h,finalShape:f,isIdentity:C,sliceDim0:G,isSimpleSlice:m,begin:A,end:T,strides:g}=$A(o.shape,a,i,s,l,c,u,d,p);let y;if(C)y=AM({inputs:{x:o},backend:n,attrs:{shape:f}});else if(G||m){Zu(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=BA(A,T,g),t=rO({inputs:{x:o},backend:n,attrs:{begin:A,size:e}});y=AM({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=PB(h,n.bufferSync(o),g,A);y=n.makeTensorInfo(f,e.dtype,e.values)}return y}};class BB{constructor(e,t,n,r,o,a){this.separator=yC(e),this.nGramWidths=t,this.leftPad=yC(n),this.rightPad=yC(r),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,a){for(let i=0;i<o;++i){const s=this.getPadWidth(a),l=Math.max(0,s-i),c=Math.max(0,s-(o-(i+1))),u=a-(l+c),d=t+(l>0?0:i-s);let p=0;p+=l*this.leftPad.length;for(let t=0;t<u;++t)p+=e[d+t].length;p+=c*this.rightPad.length;p+=(l+c+u-1)*this.separator.length,n[r+i]=new Uint8Array(p);const h=n[r+i];let f=0;const C=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<l;++e)C(this.leftPad),C(this.separator);for(let t=0;t<u-1;++t)C(e[d+t]),C(this.separator);if(u>0){C(e[d+u-1]);for(let e=0;e<c;++e)C(this.separator),C(this.rightPad)}else{for(let e=0;e<c-1;++e)C(this.rightPad),C(this.separator);C(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(e,", ").concat(n,"]"));e=t[o]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const o=r-1,a=cd("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=o;++t)a[t]=0;return[e,a]}a[0]=0;for(let s=1;s<=o;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),a[s]=a[s-1]+n}const i=new Array(a[o]);for(let s=0;s<o;++s){const n=t[s];let r=a[s];if(this.nGramWidths.forEach((o=>{const a=t[s+1]-t[s],l=this.getNumNGrams(a,o);this.createNGrams(e,n,i,r,l,o),r+=l})),this.preserveShort&&r===a[s]){const o=t[s+1]-t[s];if(0===o)continue;const a=o+2*this.padWidth,l=1;this.createNGrams(e,n,i,r,l,a)}}return[i,a]}}function VB(e,t,n,r,o,a,i,s){return new BB(n,r,o,a,i,s).compute(e,t)}const HB={kernelName:If,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,p=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[f,C]=VB(p,h,o,a,i,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",C)]}};function WB(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let a=e.indexOf(o);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(o,a);n&&0===t.length||r.push(t),o=a+1}}function UB(e,t,n){const r=e.length,o=[];let a=0,i=0;const s=new Array(r);for(let p=0;p<r;++p){const r=o.length;WB(e[p],t,n,o);const l=o.length-r;s[p]=l,a+=l,i=Math.max(i,l)}const l=cd("int32",2*a),c=new Array(a),u=[r,i];let d=0;for(let p=0;p<r;++p)for(let e=0;e<s[p];++e)l[2*d]=p,l[2*d+1]=e,c[d]=o[d],++d;return[l,c,u]}const jB={kernelName:_f,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,d]=UB(s,l,o),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function KB(e,t){const n=cd("int32",e.length);for(let r=0;r<e.length;++r)n[r]=mC(e[r]).modulo(t).getLowBitsUnsigned();return n}const qB={kernelName:Sf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=KB(n.data.get(a.dataId).values,o);return n.makeTensorInfo(a.shape,"int32",i)}},XB=PF(Ef,(e=>Math.tan(e))),YB={kernelName:Ef,backendName:"cpu",kernelFunc:XB},ZB=PF(Rf,(e=>Math.tanh(e)));const JB={kernelName:nf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:o,updates:a}=t,{sliceRank:i,numUpdates:s,sliceSize:l,strides:c,outputSize:u}=Bv(0,o,r.shape),d=n.bufferSync(o),p=n.bufferSync(a),h=n.bufferSync(r),f=Jz(d,p,r.shape,u,l,s,i,c,h,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function QB(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const r=Fm(n,e.dtype);for(let o=0;o<r.values.length;++o){const t=r.indexToLoc(o),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const a=e.locToIndex(n);r.values[o]=e.values[a]}return r}const $B={kernelName:Df,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;FF(o,"tile");const i=QB(n.bufferSync(o),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},eV=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function tV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,i=Math.log(o),s=.5*Math.exp(2*i/3),l=.5*Math.sqrt(i*s*(o-s)/o)*Math.sign(a-o/2);tV(e,t,Math.max(n,Math.floor(t-a*s/o+l)),Math.min(r,Math.floor(t+(o-a)*s/o+l)))}const o=e[t];let a=n,i=r;for(Yu(e,n,t),eV(e[r],o)>0&&Yu(e,n,r);a<i;){for(Yu(e,a,i),a++,i--;eV(e[a],o)<0;)a+=1;for(;eV(e[i],o)>0;)i-=1}0===eV(e[n],o)?Yu(e,n,i):(i+=1,Yu(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function nV(e,t,n,r,o){const a=t[t.length-1],[i,s]=[e.length/a,a],l=ld(n,i*r),c=ld("int32",i*r);for(let d=0;d<i;d++){const t=d*s,n=e.subarray(t,t+s);let a=new Array(n.length);n.forEach(((e,t)=>a[t]={value:e,index:t})),r<a.length&&(tV(a,r),a=a.slice(0,r)),o&&a.sort(eV);const i=d*r,u=l.subarray(i,i+r),p=c.subarray(i,i+r);for(let e=0;e<r;e++)u[e]=a[e].value,p[e]=a[e].index}const u=t.slice();return u[u.length-1]=r,[Fm(u,n,l),Fm(u,"int32",c)]}const rV={kernelName:Ff,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r;FF(o,"topk");const s=n.data.get(o.dataId).values,[l,c]=nV(s,o.shape,o.dtype,a,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const oV={kernelName:Mf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:l,outputShape:c}=n,[u,d,p,h]=o.shape,[f,C]=null!=c?c:[d,p],G=[u,f,C,h],m=md(o.shape),A=m[0],T=m[1],g=m[2],y=md(G),v=y[0],b=y[1],x=y[2],w=ld(o.dtype,$u(G));w.fill(l);const k=r.data.get(o.dataId).values,I=r.data.get(a.dataId).values;for(let _=0;_<u;++_){const e=1===a.shape[0]?I:I.subarray(8*_,8*_+8);for(let t=0;t<f;++t)for(let n=0;n<C;++n)for(let r=0;r<h;++r){let o;const a=e[6]*n+e[7]*t+1;if(0===a)continue;const c=(e[0]*n+e[1]*t+e[2])/a,u=(e[3]*n+e[4]*t+e[5])/a,h=aV(c,p,s),f=aV(u,d,s);switch(i){case"nearest":o=sV(k,d,p,A,T,g,_,f,h,r,l);break;case"bilinear":o=lV(k,d,p,A,T,g,_,f,h,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}w[_*v+t*b+n*x+r]=o}return r.makeTensorInfo(G,o.dtype,w)}return{dataId:r.write(w,G,o.dtype),shape:o.shape,dtype:o.dtype}}};function aV(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return qu(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return qu(0,n,t-1)}(e,t);case"nearest":return function(e,t){return qu(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function iV(e,t,n,r,o,a,i,s,l,c,u){return 0<=s&&s<t&&0<=l&&l<n?e[i*r+s*o+l*a+c]:u}function sV(e,t,n,r,o,a,i,s,l,c,u){return iV(e,t,n,r,o,a,i,Math.round(s),Math.round(l),c,u)}function lV(e,t,n,r,o,a,i,s,l,c,u){const d=Math.floor(s),p=Math.floor(l),h=d+1,f=p+1;return(h-s)*((f-l)*iV(e,t,n,r,o,a,i,d,p,c,u)+(l-p)*iV(e,t,n,r,o,a,i,d,f,c,u))+(s-d)*((f-l)*iV(e,t,n,r,o,a,i,h,p,c,u)+(l-p)*iV(e,t,n,r,o,a,i,h,f,c,u))}function cV(e,t,n,r){const o=id(t,n)[0],a=[1,n[0],1];for(let f=0;f<o;f++)a[0]*=n[f];a[1]=n[o];for(let f=o+1;f<n.length;f++)a[2]*=n[f];const i=new Map,s=new Int32Array(n[o]),l=new OC(a,r,e),c=[],u=1===a[0]&&1===a[2];for(let f=0;f<n[o];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<a[0];t++)for(let n=0;n<a[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)s[f]=n;else{const e=i.size;i.set(t,e),s[f]=e,c.push(f)}}const d=a.slice();d[1]=i.size;const p=new OC(d,r);c.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)p.set(l.get(n,e,r),n,t,r)}));const h=n.slice();return h[o]=d[1],{outputValues:p.values,outputShape:h,indices:s}}const uV={kernelName:Lf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;FF(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:c}=cV(i,o,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const dV={kernelName:Pf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o.shape.length,s=o.shape[a],l=new Array(i-1);let c=0;for(let h=0;h<i;h++)h!==a&&(l[c++]=o.shape[h]);const u=new Array(i).fill(0),d=o.shape.slice();d[a]=1;const p=new Array(s);for(let h=0;h<p.length;h++){u[a]=h;const e=rO({inputs:{x:o},backend:n,attrs:{begin:u,size:d}});p[h]=AM({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return p}};const pV={kernelName:zf,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r;FF(o,"unsortedSegmentSum");const s=[],l=[],c=o.shape.length-a.shape.length;let u=a;for(let p=0;p<c;++p){const e=mL({inputs:{input:u},backend:n,attrs:{dim:p+1}});u=e,l.push(e)}for(let p=0;p<i;++p){const e=AC(p,"int32"),t=n.makeTensorInfo([],"int32",e),r=oL({inputs:{a:t,b:u},backend:n}),a=uM({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=JO({inputs:{a:a,b:o},backend:n}),c=$O({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});s.push(c),l.push(t),l.push(r),l.push(a),l.push(i),l.push(c)}const d=fz({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},hV=[vM,xM,kM,_M,mM,SM,DM,FM,MM,OM,PM,BM,HM,jM,qM,JM,QM,$M,eO,yM,tO,aO,lO,dO,pO,dM,CO,mO,aM,AO,bO,wO,kO,IO,_O,SO,NO,RO,FO,MO,OO,LO,PO,zO,VO,HO,WO,UO,jO,KO,qO,XO,tL,VF,nL,aL,hL,GL,AL,yL,RL,FL,ML,PL,VL,HL,WL,jL,qL,ZL,$L,WF,eP,yO,nP,oP,iP,jF,cP,pP,fP,mP,TP,vP,xP,IP,_P,SP,RP,MP,OP,LP,PP,zP,BP,VP,HP,jP,KP,YP,QP,QO,ez,nz,oz,iz,cz,uz,hz,Cz,Gz,Tz,YF,yz,kz,Sz,Mz,Lz,lM,xL,zz,JF,$F,TM,Bz,Vz,Hz,Wz,Uz,jz,qz,Zz,Qz,tB,nB,iB,nM,lB,uB,pB,oO,JP,CB,GB,AB,gB,vB,bB,xB,wB,_B,SB,RB,MB,LB,zB,HB,jB,qB,_L,eL,YB,{kernelName:Rf,backendName:"cpu",kernelFunc:ZB},JB,$B,rV,oV,RM,uV,dV,pV,pz];for(const n of hV)eC(n);const fV={},CV={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function GV(e,t){if(!(e in fV)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Nd().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete fV[e]}),!1),Nd().getBool("SOFTWARE_WEBGL_ENABLED")&&(CV.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",CV)||n.getContext("experimental-webgl",CV);return n.getContext("webgl2",CV)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;fV[e]=n}const n=fV[e];return null==n||n.isContextLost()?(delete fV[e],GV(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),fV[e])}var mV,AV,TV;function gV(e,t){return[t,e]}function yV(e){const t=$u(e);return nd(Math.ceil(t/4))}function vV(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function bV(e,t){const n=e;let r,o,a,i,s,l,c,u,d,p;return 2===Nd().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,a=n.RGBA16F,i=n.RGBA32F,s=n.RED,c=4,u=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=e.RGBA,o=e.RGBA,a=e.RGBA,i=n.RGBA,s=e.RGBA,c=4,u=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function xV(e,t){const n=t();return Nd().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(mV||(mV={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(AV||(AV={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(TV||(TV={}));function wV(e){return!!(Nd().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function kV(e,t){return MV(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const IV=/ERROR: [0-9]+:([0-9]+):/g;function _V(e,t){const n=IV.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map(((e,t)=>rd((t+1).toString(),a)+e));let s=0;for(let d=0;d<i.length;d++)s=Math.max(i[d].length,s);const l=i.slice(0,r-1),c=i.slice(r-1,r),u=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(rd(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function SV(e,t){if(xV(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function NV(e,t,n,r,o,a,i){const s=e.getAttribLocation(t,n);return-1!==s&&(xV(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),xV(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,a,i))),xV(e,(()=>e.enableVertexAttribArray(s))),!0)}function EV(e,t,n,r){xV(e,(()=>function(e,t,n){OV(e,n),xV(e,(()=>e.activeTexture(e.TEXTURE0+n))),xV(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),xV(e,(()=>e.uniform1i(n,r)))}function RV(e,t,n){xV(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),xV(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function DV(e,t){xV(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),xV(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function FV(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function MV(e,t,n){const r=xV(e,(()=>t()));if(null==r)throw new Error(n);return r}function OV(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function LV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return $u(e.slice(0,e.length-t))}function PV(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function zV(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[LV(e),...PV(e)]),t}function BV(e){return e%2===0}function VV(e,t){if(ed(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(BV(n)&&BV(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&BV(e[0])&&BV(t[0])}let HV,WV;function UV(e,t){return null!=e.getExtension(t)}function jV(e){try{if(null!=GV(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function KV(e){if(0===e)return!1;const t=GV(e);if(1!==e){if(UV(t,"EXT_color_buffer_float"))return qV(t);const e="EXT_color_buffer_half_float";if(UV(t,e)){const n=t.getExtension(e);return function(e,t){const n=bV(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const o=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!UV(t,"OES_texture_float"))return!1;if(!UV(t,"WEBGL_color_buffer_float"))return!1;return qV(t)}function qV(e){const t=bV(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function XV(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Zu("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const YV=Nd();function ZV(){let e,t,n,r,o,a,i,s,l,c;return 2===Nd().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=Nd().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function JV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=md(t);return r.map(((t,o)=>{const a="int ".concat(e[o]," = ").concat(n," / ").concat(t),i=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * ").concat(t):"index -= ".concat(e[o]," * ").concat(t);return"".concat(a,"; ").concat(i,";")})).join("")}function QV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=md(t);return r.map(((t,o)=>{const a="int ".concat(e[o]," = ").concat(n," / outShapeStrides[").concat(o,"]"),i=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * outShapeStrides[").concat(o,"]"):"index -= ".concat(e[o]," * outShapeStrides[").concat(o,"]");return"".concat(a,"; ").concat(i,";")})).join("")}function $V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=function(e,t){const n=e.length,r=e.map((e=>"".concat(t,"[").concat(e,"]"))),o=new Array(n-1);o[n-2]=r[n-1];for(let a=n-3;a>=0;--a)o[a]="(".concat(o[a+1]," * ").concat(r[a+1],")");return o}(e.map(((e,t)=>t)),t);return r.map(((t,o)=>{const a="int ".concat(e[o]," = ").concat(n," / ").concat(r[o]),i=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * ").concat(r[o]):"index -= ".concat(e[o]," * ").concat(r[o]);return"".concat(a,"; ").concat(i,";")})).join("")}function eH(e){const t=md(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}YV.registerFlag("HAS_WEBGL",(()=>YV.getNumber("WEBGL_VERSION")>0)),YV.registerFlag("WEBGL_VERSION",(()=>jV(2)?2:jV(1)?1:0)),YV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),YV.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===YV.get("WEBGL_VERSION"))),YV.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),YV.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),YV.registerFlag("WEBGL_PACK",(()=>YV.getBool("HAS_WEBGL"))),YV.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_CLIP",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_REDUCE",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_LAZILY_UNPACK",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_CONV_IM2COL",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>YV.getBool("WEBGL_PACK"))),YV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==HV){const t=GV(e);HV=t.getParameter(t.MAX_TEXTURE_SIZE)}return HV}(YV.getNumber("WEBGL_VERSION")))),YV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==WV){const t=GV(e);WV=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,WV)}(YV.getNumber("WEBGL_VERSION")))),YV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=YV.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=GV(e);return t=UV(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:UV(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),YV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>YV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uG())),YV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=GV(e);if(1===e){if(!UV(t,"OES_texture_float"))return!1}else if(!UV(t,"EXT_color_buffer_float"))return!1;return qV(t)}(YV.getNumber("WEBGL_VERSION")))),YV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!YV.getBool("WEBGL_FORCE_F16_TEXTURES")&&YV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),YV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>KV(YV.getNumber("WEBGL_VERSION")))),YV.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=YV.getNumber("WEBGL_VERSION"))&&null!=GV(e).fenceSync;var e})),YV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>YV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),YV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),YV.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>uG()?1:-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),YV.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),YV.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),YV.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),YV.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),YV.registerFlag("WEBGL_EXP_CONV",(()=>!1)),YV.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>YV.getBool("IS_TEST"))),YV.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),YV.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),YV.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),YV.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const tH="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:nH}=a;function rH(e,t,n){const r=[];if(e.forEach((e=>{const t=$u(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=hH(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const o=r.join("\n"),a=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o="";o+=n?aH(e,r):oH(e,r);const a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=nH(e.shapeInfo.logicalShape,t.logicalShape),l=pH(i),c=i-a;let u;const d=["x","y","z","w","u","v"];u=0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>"coords.".concat(d[e+c]," = 0;"))).join("\n");let p="";p=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(d[t+c]))).join(", ");let h="return outputValue;";const f=1===$u(e.shapeInfo.logicalShape),C=$u(t.logicalShape),G=1===C;if(1!==a||f||G){if(f&&!G)h=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?h="return vec4(outputValue.x);":s.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(p,");\n      ").concat(h,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&ed(i,a))return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=pH(l),u=nH(e.shapeInfo.logicalShape,t.logicalShape),d=l-s;let p;const h=["x","y","z","w","u","v"];p=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map((e=>"coords.".concat(h[e+d]," = 0;"))).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(h[t+d]))).join(", ");return"\n    float ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(p,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,s=ZV(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let c,u,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(iH,"\n    ").concat(sH,"\n    ").concat(lH,"\n  ");return t}(s);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ed(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),a=o*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),a=o*Math.ceil(e[e.length-2]/2);let i=a,s="",l="b, r, c";for(let c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(ed(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=QV(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=JV(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=QV(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=JV(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=JV(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=JV(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(d+=cH);return[d,l,u,o,c,a,n.userCode].join("\n")}function oH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[o,a]=e.shapeInfo.texShape;if(1===o&&1===a)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=uH(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(l,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(dH(e),"\n      }\n    ");const o=e.shapeInfo.texShape,a=o[0],i=o[1];if(1===i&&1===a)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=uH(n);if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===a)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&ed(n,a)){if(t)return"\n      float ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=a[0],n=a[1];return"\n    float ".concat(o,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:i,keptDims:s}=sd(n),l=i;if(l.length<n.length){const n=fH(e,l),r=["row","col"];return"\n      ".concat(oH(n,t),"\n      float ").concat(o,"(int row, int col) {\n        return ").concat(o,"(").concat(CH(r,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(dH(e),"\n      }\n    ");const c=a[0],u=a[1],d=uH(r);if(1===u)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(o,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(o,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:s,keptDims:l}=sd(n),c=s;if(c.length<n.length){const n=fH(e,c),r=["row","col","depth"];return"\n        ".concat(oH(n,t),"\n        float ").concat(o,"(int row, int col, int depth) {\n          return ").concat(o,"(").concat(CH(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(i,", 1)));\n        ").concat(dH(e),"\n      }\n    ");const u=e.shapeInfo.texShape,d=u[0],p=u[1],h=e.shapeInfo.flatOffset;if(p===a&&null==h)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(o,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===i&&null==h)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=uH(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(o,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(i," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,s=n[1]*i,{newShape:l,keptDims:c}=sd(n);if(l.length<n.length){const n=fH(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(oH(n,t),"\n      float ").concat(o,"(int row, int col, int depth, int depth2) {\n        return ").concat(o,"(").concat(CH(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(a,", 1)));\n        ").concat(dH(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1],f="int stride2 = ".concat(r,"Shape[3];"),C="int stride1 = ".concat(r,"Shape[2] * stride2;"),G="int stride0 = ".concat(r,"Shape[1] * stride1;");if(h===s&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(C,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(h===a&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const m=uH(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(C,"\n      ").concat(G,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(m,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index + ").concat(m,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,{newShape:l,keptDims:c}=sd(t);if(l.length<t.length){const t=fH(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(oH(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(CH(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(a,", ").concat(o,")) +\n          depth3;\n        ").concat(dH(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];if(h===s&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(a,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===o&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=uH(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(a," +\n          depth2 * ").concat(o," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:a}=sd(t);if(o.length<t.length){const t=fH(e,o),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(oH(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(CH(n,a),");\n      }\n    ")}const i=t[5],s=t[4]*i,l=t[3]*s,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(dH(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(s,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===i&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const C=uH(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(s," + depth3 * ").concat(i," + depth4 + ").concat(C,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function aH(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=ZV();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=ZV();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=a[0],s=a[1],l=ZV();if(null!=a&&ed(n,a))return t?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=fH(e,n.slice(1)),i=["b","row","col"];return"\n        ".concat(aH(a,t),"\n        vec4 ").concat(o,"(int b, int row, int col) {\n          return ").concat(o,"(").concat(CH(i,r),");\n        }\n      ")}const s=ZV();if(t)return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=i[0],c=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=ZV();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const a=e.shapeInfo.logicalShape,i=a.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],d=Math.ceil(a[i-1]/2);let p=d*Math.ceil(a[i-2]/2),h="int b, int row, int col",f="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)");for(let C=2;C<i-1;C++)h="int b".concat(C,", ")+h,p*=a[i-C-1],f="b".concat(C," * ").concat(p," + ")+f;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const iH="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",sH="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lH="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cH="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function uH(e){return"offset".concat(e)}function dH(e){const t=e.name,n=$u(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function pH(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function hH(e,t,n){const{newShape:r,keptDims:o}=sd(t),a=t.length,i=e&&3===a&&1===t[0],s=i?t.slice(1):r,l=!e&&a>1&&!ed(t,n)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:o}}function fH(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function CH(e,t){return t.map((t=>e[t])).join(", ")}function GH(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=rH(o,i,t),l=function(e,t){const n=MV(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(xV(e,(()=>e.shaderSource(n,t))),xV(e,(()=>e.compileShader(n))),Nd().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw _V(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(l);return Nd().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:i},mH(e,t,c)))}function mH(e,t,n){const r=[],o=[];let a,i,s,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Nd().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of t.variableNames){const o={name:d,uniform:e.getUniformLocation(n,d,u),offset:e.getUniformLocation(n,"offset".concat(d),u)};t.enableShapeUniforms&&(o.shape=e.getUniformLocation(n,"".concat(d,"Shape"),u),o.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),u)),r.push(o)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",u),s=e.getUniformLocation(n,"outShapeStrides",u),i=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const d of t.customUniforms)o.push(e.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:i}}function AH(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],a=o.shape;if(!ed(r,a))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(a," must match"));if(e.isUniform&&o.isUniform)return;const i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!ed(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}))}function TH(e){return Nd().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class gH{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=mV.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ZV();this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?QV(["r","c","d"],e):JV(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class yH{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=mV.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ZV();this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?QV(["r","c","d"],e):JV(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class vH{constructor(e){this.variableNames=["A"],this.outTexUsage=AV.DOWNLOAD;const t=ZV();this.outputShape=e,this.userCode="\n      ".concat(tH,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class bH{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=AV.DOWNLOAD;const t=ZV();this.outputShape=e,this.userCode="\n      ".concat(tH,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const xH={R:0,G:1,B:2,A:3};class wH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ZV();this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length);let o="result";t&&(o="floor(result * 255. + 0.5)");let a="";for(let i=0;i<n.length;i++){const e=n[i];a+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(xH[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":eH(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(a,"\n        }\n        ").concat(r.output," = vec4(").concat(o,", 0., 0., 0.);\n      }\n    ")}}class kH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ZV();this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let t=0;t<=1;t++){const o=2*a+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(a," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(a,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(o,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(o,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(o,"] = values[2];\n            } else {\n              result[").concat(o,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":eH(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(o,";\n        }\n    ")}}function IH(e){const t=ZV();return function(e,t){const n=MV(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(xV(e,(()=>e.shaderSource(n,t))),xV(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function _H(e){return function(e,t){const n=MV(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return xV(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),xV(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function SH(e){return function(e,t){const n=MV(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return xV(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),xV(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function NH(e,t,n,r,o,a){!function(e,t){const n=Nd().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);const i=function(e){return MV(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return xV(e,(()=>e.bindTexture(s,i))),xV(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),xV(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),xV(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),xV(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===Nd().getNumber("WEBGL_VERSION")?xV(e,(()=>e.texImage2D(s,0,r,t,n,0,o,a,null))):xV(e,(()=>e.texStorage2D(s,1,r,t,n))),xV(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function EH(e){return e.internalFormatFloat}function RH(e){return e.internalFormatHalfFloat}function DH(e){return e.downloadTextureFormat}function FH(e){return e.internalFormatPackedFloat}function MH(e){return e.internalFormatPackedHalfFloat}function OH(e,t,n,r,o,a,i,s){const l=e,c=new Float32Array(function(e,t){const[n,r]=vV(e,t);return n*r*4}(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class LH{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Nd().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){fV[e]=t}(t,e)):this.gl=GV(t),e=this.gl,2===Nd().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>xV(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>xV(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>xV(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>xV(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>xV(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>xV(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>xV(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>xV(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Nd().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=kV(this.gl,e),UV(this.gl,t))this.textureHalfFloatExtension=kV(this.gl,t);else if(Nd().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),UV(this.gl,r))this.colorBufferHalfFloatExtension=kV(this.gl,r);else if(Nd().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",UV(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!UV(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=_H(this.gl),this.indexBuffer=SH(this.gl),this.framebuffer=function(e){return MV(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=bV(this.gl,this.textureHalfFloatExtension)}get debug(){return Nd().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;xV(e,(()=>e.finish())),xV(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),xV(e,(()=>e.deleteFramebuffer(this.framebuffer))),xV(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),xV(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),xV(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=gV(t,n);return NH(e,o,a,EH(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=gV(t,n);return NH(e,o,a,RH(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=gV(t,n);return NH(e,o,a,DH(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){xV(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===Nd().getNumber("WEBGL_VERSION")?xV(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):xV(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===Nd().getNumber("WEBGL_VERSION")?xV(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):xV(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),xV(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,o,a){let i,s,l;xV(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,l=a.internalFormatPackedFloat),i.set(o),2===Nd().getNumber("WEBGL_VERSION")?xV(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i))):xV(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,i))),xV(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=vV(t,n);return NH(e,o,a,MH(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=vV(t,n);return NH(e,o,a,FH(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(DV(this.gl,this.framebuffer),this.outputTexture=null),xV(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[o,a]=gV(t,n),i=new Uint8Array(t*n*4);return xV(e,(()=>e.readPixels(0,0,o,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,a){return OH(this.gl,e,0,0,0,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const o=e.createBuffer();xV(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const a=16*t*n;return xV(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),xV(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),xV(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Nd().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return xV(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=IH(t));const n=function(e){return MV(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);xV(t,(()=>t.attachShader(n,this.vertexShader))),xV(t,(()=>t.attachShader(n,e))),function(e,t){if(xV(e,(()=>e.linkProgram(t))),!Nd().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&SV(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;xV(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){xV(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),NV(e,t,"clipSpacePos",n,3,20,0)&&NV(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(xV(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&SV(this.gl,this.program),xV(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return MV(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),xV(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),EV(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=vV(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&SV(this.gl,this.program),FV(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}xV(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),xV(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=kV(this.gl,2===Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await od((()=>this.disposed||this.isQueryAvailable(e,Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Nd().platform&&(n=Nd().platform.setTimeoutCustom.bind(Nd().platform)),od((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),RV(this.gl,e,this.framebuffer),this.debug&&FV(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(RV(this.gl,this.outputTexture,this.framebuffer),this.debug&&FV(this.gl)):DV(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;RV(r,e,this.framebuffer),this.debug&&FV(r),this.outputTexture=e,xV(r,(()=>r.viewport(0,0,t,n))),xV(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),xV(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:PH,bincountImpl:zH,bincountReduceImpl:BH,bitwiseAndImpl:VH,castImpl:HH,ceilImpl:WH,concatImpl:UH,equalImpl:jH,expImpl:KH,expm1Impl:qH,floorImpl:XH,gatherNdImpl:YH,gatherV2Impl:ZH,greaterImpl:JH,greaterEqualImpl:QH,lessImpl:$H,lessEqualImpl:eW,linSpaceImpl:tW,logImpl:nW,maxImpl:rW,maximumImpl:oW,minimumImpl:aW,multiplyImpl:iW,negImpl:sW,notEqualImpl:lW,prodImpl:cW,raggedGatherImpl:uW,raggedRangeImpl:dW,raggedTensorToTensorImpl:pW,rangeImpl:hW,rsqrtImpl:fW,scatterImpl:CW,sigmoidImpl:GW,simpleAbsImpl:mW,sliceImpl:AW,sparseFillEmptyRowsImpl:TW,sparseReshapeImpl:gW,sparseSegmentReductionImpl:yW,sqrtImpl:vW,staticRegexReplaceImpl:bW,stridedSliceImpl:xW,stringNGramsImpl:wW,stringSplitImpl:kW,stringToHashBucketFastImpl:IW,subImpl:_W,tileImpl:SW,topKImpl:NW,transposeImpl:EW,uniqueImpl:RW}=k;function DW(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function FW(e,t){return 1===t?[e]:DW(e,t)}class MW{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=TH(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=FW("rc",this.rank),t=pH(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let o="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)o="".concat(e[e.length-1-t],",")+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class OW{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?$V(["r","c","d"],"inputShape"):JV(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":eH(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class LW{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=zW(t,n),o=BW(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=PW(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[o].pop();return this.usedTextures[o].push(e),e}let i;return r===TV.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===TV.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===TV.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===TV.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===TV.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=zW(n,r),a=BW(t,o,r);a in this.freeTextures||(this.freeTextures[a]=[]);const i=PW(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Nd().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[a],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function PW(e,t,n,r,o){const a=function(e,t){switch(e){case TV.PACKED_2X2_FLOAT32:return FH(t);case TV.PACKED_2X2_FLOAT16:return MH(t);case TV.UNPACKED_FLOAT32:return EH(t);case TV.UNPACKED_FLOAT16:return RH(t);case TV.PACKED_4X1_UNSIGNED_BYTE:return DH(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let i;if(o){const[t,n]=vV(e[0],e[1]);i=t*n}else{const[t,n]=gV(e[0],e[1]);i=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,a);return i*s}function zW(e,t){if(e===AV.UPLOAD)return TV.PACKED_2X2_FLOAT32;if(e===AV.RENDER||null==e)return function(e){return Nd().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?TV.PACKED_2X2_FLOAT32:TV.UNPACKED_FLOAT32:e?TV.PACKED_2X2_FLOAT16:TV.UNPACKED_FLOAT16}(t);if(e===AV.DOWNLOAD||e===AV.PIXELS)return TV.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function BW(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class VW{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const HW="if (isnan(x)) return x;",WW="return x;",UW="return abs(x);";const jW="return (x >= 0.0) ? x : (exp(x) - 1.0);",KW=HW+"\n  return (x < 0.0) ? 0.0 : x;\n",qW=HW+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",XW="return x;",YW="return 1.0 / (1.0 + exp(-1.0 * x));",ZW="return x;",JW="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",QW="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",$W="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",eU="return 1.0 / (1.0 + exp(-1.0 * x));";class tU{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class nU{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length);const t=e.length,n=FW("rc",t),r=pH(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2(".concat(a.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")}}const rU=Yv,oU={};const aU=Nd().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class iU extends Uu{nextDataId(){return iU.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Nd().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof LH)t=e;else{const n=GV(Nd().getNumber("WEBGL_VERSION"),e);t=new LH(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=GV(Nd().getNumber("WEBGL_VERSION"));t=new LH(e),this.binaryCache=((n=Nd().getNumber("WEBGL_VERSION"))in oU||(oU[n]={}),oU[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new LW(this.gpgpu),this.numMBBeforeWarning=null==Nd().global.screen?1024:Nd().global.screen.height*Nd().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Wu(this,wG())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,o,a){const i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,o]},s.texShape=[r,o];const l=zV(t),c=new wH(l,!1,a),u=this.runWebGLProgram(c,[i],n,[[r,o]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,n){if((Nd().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Nd().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:AV.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,o){if(Nd().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:AV.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:a,shape:i,isPacked:s}=t;if(null!=a){let t;t=s?new tU(i,XW):new VW(i,XW);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=gC()),"complex64"===r){u=Xx(this.readSync(o.real.dataId),this.readSync(o.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=gC()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:a,complexTensorInfos:i,isPacked:s}=t;if(null!=o){let t;t=s?new tU(r,XW):new VW(r,XW);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if(Nd().getBool("DEBUG")&&!Nd().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Nd().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==a&&Nd().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...yV(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);c=Xx(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=$u(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;xV(e,(()=>e.deleteBuffer(u)))}const d=this.convertAndCacheOnCPU(e,c),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach((e=>e(d))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&wG().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:o,slice:a,dtype:i,isPacked:s,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=s?new tU(o,XW):new VW(o,XW);const r=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:i}],i),a=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),a}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=wG().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>vC(e)));return Fm(e.shape,e.dtype,n)}catch(Ie){throw new Error("Failed to decode encoded string bytes into utf-8")}return Fm(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!wV(n)){if(Nd().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=$u(t);if(Nd().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...yV(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),a}const a=Nd().getBool("WEBGL_PACK")&&!0===r,i=a?zV(t):t,s=a?new bH(i):new vH(i),l=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=xC(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=xC(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:gC(),endMs:null}}endTimer(e){return Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=gC(),e)}async getQueryTime(e){if(Nd().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:a,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,a)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU;return Nd().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&$u(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){qf("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return rU(e.shape,t)}packedUnaryOp(e,t,n){const r=new tU(e.shape,t),o=this.compileAndRun(r,[e],n);return wG().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=mW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Nd().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,UW,e.dtype);const t=new VW(e.shape,UW),n=this.compileAndRun(t,[e]);return wG().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&pd(n[0])){const o=n.map((e=>yC(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return wG().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new nU(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new MW(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[LV(e.shape),...PV(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[LV(t),...PV(t)],a=new OW(o,n),i=[n],s=this.runWebGLProgram(a,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:o,dtype:a}=n;if(null!=t){Zu($u(o)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=zV(o);let s;s=r?new yH(i):new gH(i);const l=[null!=t?t:yV(i)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(s,[{shape:i,dtype:a,dataId:e}],a,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===mV.DENSE){const t=null!=a?a:yV(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===$u(i.shape))return s.values=ld(i.dtype,0),i;const l=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&$u(t.shape)<=Nd().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!VV(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:l}=hH(e.packedInputs,t.shape,a);let c="",u="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=md(s);d="".concat(e[0]===a[1],"_").concat(e[e.length-1]===a[1])}}else u="".concat(s[0]>1,"_").concat(s[1]>1);const p=t.shape.length,h=2===s.length&&ed(t.shape,a),f=1===$u(t.shape),C=iA(t.shape,n.shape),G=!e.packedInputs&&p===n.shape.length&&ed(a,n.texData.texShape),m=e.packedInputs||s.length>2?"":"".concat(a[0]>1,"_").concat(a[1]>1);r+="".concat(p,"_").concat(G,"_").concat(i?l:"","_").concat(s.length,"_").concat(f,"_").concat(C,"_").concat(h,"_").concat(c,"_").concat(u,"_").concat(d,"_").concat(m,"_").concat(o)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(o)}}));const o=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+o+"".concat(Nd().getNumber("WEBGL_VERSION")),a}(e,c,u),p=this.getAndSaveBinary(d,(()=>GH(this.gpgpu,e,c,u))),h=null!=this.activeTimers;let f;h&&(f=this.startTimer()),Nd().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,o){t.program.enableShapeUniforms||(AH(t.inShapeInfos,n),AH([t.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):e.setOutputMatrixTexture(a.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Nd().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:o,offset:a,shape:i,texShape:s}=t.variablesLocations[l];if(i){const{uniformShape:n}=hH(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=o)if(r.isUniform)if($u(r.shape)<2)e.gl.uniform1f(o,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=r.texData.slice&&null!=a&&e.gl.uniform1i(a,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,o,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=md(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],a=o[l];if("float"===n.type)e.gl.uniform1fv(r,a);else if("vec2"===n.type)e.gl.uniform2fv(r,a);else if("vec3"===n.type)e.gl.uniform3fv(r,a);else if("vec4"===n.type)e.gl.uniform4fv(r,a);else if("int"===n.type)e.gl.uniform1iv(r,a);else if("ivec2"===n.type)e.gl.uniform2iv(r,a);else if("ivec3"===n.type)e.gl.uniform3iv(r,a);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,a)}}e.executeProgram()}(this.gpgpu,p,c,u,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const C=Nd().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){const e=gC();e-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Nd().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Nd().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=IG((()=>{if(!Nd().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Nd().getBool("DEBUG");Nd().set("DEBUG",!1);const t=this.abs(Km(1e-8)).dataSync()[0];if(Nd().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:a,usage:i,isPacked:s}=t;if(null!=a)return;const l=null!=this.activeTimers;let c;l&&(c=gC());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Nd().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Nd().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Nd().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map(((t,n)=>n>=e.length-2?Xu(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=sd(e);e=t.newShape}let o=$u(e),a=null;e.length<=1&&o<=n?a=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?a=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const i=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||i)if(t){const t=LV(e);let n=2,r=2;e.length&&([n,r]=PV(e)),o=t*(n/2)*(r/2),a=nd(o).map((e=>2*e))}else a=nd(o);return a}(n,s),t.texShape=u),null!=o){const e=zV(n);let a,i=u[1],d=u[0];const p=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!s&&p||([i,d]=vV(u[0],u[1])),a=s?new kH(e,p):new wH(e,p);const h=p?[d,i]:u,f=this.makeTensorInfo(h,r),C=this.texData.get(f.dataId);C.usage=p?AV.PIXELS:AV.UPLOAD,C.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,d,o);const G=[[d,i]],m=!0,A=this.runWebGLProgram(a,[f],r,G,m),T=this.texData.get(A.dataId);t.texShape=T.texShape,t.isPacked=T.isPacked,t.usage=T.usage,Nd().get("ENGINE_COMPILE_ONLY")?this.disposeData(A.dataId):(t.texture=T.texture,t.values=null,this.texData.delete(A.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=gC()-c)}else{const e=this.acquireTexture(u,i,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*dd(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await bx(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw _V(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:s}=mH(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=i,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:a,channels:i}=e,s=wG().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,o,a,i);return wG().makeTensorFromDataId(l,t,n,s)}}iU.nextDataId=0;dG()&&NG("webgl",(()=>new iU),2);const sU="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class lU{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=lA(t,n),this.enableShapeUniforms=TH(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const cU="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class uU{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lA(t,n);const o=this.outputShape.length;this.enableShapeUniforms=TH(o);let a="";if(r)if(0===o||1===$u(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=pH(o);if(a="\n          ".concat(e," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=FW("coords",o);this.enableShapeUniforms?a+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):a+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")}}function dU(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pU={kernelName:Zp,backendName:"webgl",kernelFunc:dU};function hU(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),s=dU({inputs:{x:r},backend:n}),l=dU({inputs:{x:o},backend:n});return i.complexTensorInfos={real:s,imag:l},a}const fU={kernelName:sp,backendName:"webgl",kernelFunc:hU},CU="return (a < 0.) ? b * a : a;",GU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const mU={kernelName:nh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r,i=n.makeTensorInfo([],"float32",AC(a,"float32")),s=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uU(GU,o.shape,i.shape):new lU(CU,o.shape,i.shape),l=n.runWebGLProgram(s,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},AU="return (a < 0.) ? b * a : a;",TU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const gU={kernelName:Lh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,a=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uU(TU,r.shape,o.shape):new lU(AU,r.shape,o.shape);return n.runWebGLProgram(a,[r,o],"float32")}},yU="if (isnan(x)) return x;";function vU(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:o}=e;return e=>{let{inputs:a,backend:i}=e;const{x:s}=a,l=i,c=o||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,c);return l.makeTensorInfo(s.shape,c,t)}let u;return u=Nd().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new tU(s.shape,n):new VW(s.shape,t),l.runWebGLProgram(u,[s],c)}}function bU(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:o=!1,cpuKernelImpl:a,dtype:i}=e;return e=>{let{inputs:s,backend:l}=e;const{a:c,b:u}=s,d=l;if(o&&"complex64"===c.dtype){const e=d.texData.get(c.dataId),n=d.texData.get(u.dataId),[r,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,o={dataId:n.dataId,dtype:n.dtype,shape:c.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new lU(t,c.shape,u.shape);return d.runWebGLProgram(i,[o,a],YC(n.dtype,r.dtype))})),a=hU({inputs:{real:r,imag:o},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(o),a}const p=i||YC(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||d.shouldExecuteOnCPU([c,u]))&&null!=a){const e=d.texData.get(c.dataId).values,t=d.texData.get(u.dataId).values,n="string"===c.dtype?_w(e):e,r="string"===c.dtype?_w(t):t,[o,i]=a(c.shape,u.shape,n,r,p),s=d.makeTensorInfo(i,p);return d.texData.get(s.dataId).values=o,s}let h;return h=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new uU(n,c.shape,u.shape,r):new lU(t,c.shape,u.shape),d.runWebGLProgram(h,[c,u],p)}}function xU(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?ZW:WW;if("relu"===e)return t?QW:KW;if("elu"===e)return t?JW:jW;if("relu6"===e)return t?$W:qW;if("prelu"===e)return t?TU:AU;if("leakyrelu"===e)return t?GU:CU;if("sigmoid"===e)return t?eU:YW;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class wU{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=TH(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let C="",G="";i&&(C=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),G="result = activation(result);");const m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let A="rc.x",T="rc.x";e[0]<t[0]?A="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(T="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(C,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(A,";\n        int batchB = ").concat(T,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(m,"\n\n        ").concat(G,"\n\n        setOutput(result);\n      }\n    ")}}const kU={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class IU{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lA(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const _U="return a * b;";function SU(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=YC(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),a=new IU(kU.REAL,r.shape,o.shape),i=new IU(kU.IMAG,r.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],l=n.runWebGLProgram(a,s,"float32"),c=n.runWebGLProgram(i,s,"float32"),u=hU({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[i,s]=iW(r.shape,o.shape,e.values,t.values,a),l=n.makeTensorInfo(s,a);return n.texData.get(l.dataId).values=i,l}let i;return i=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uU(_U,r.shape,o.shape):new lU(_U,r.shape,o.shape),n.runWebGLProgram(i,[r,o],a)}const NU={kernelName:kh,backendName:"webgl",kernelFunc:SU};function EU(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=n,s=$u(o.shape),l=ad(a,s),c=$u(l);Zu(s===c,(()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(o.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."));const u=i.texData.get(o.dataId);return!u.isPacked||VV(o.shape,l)||null!==u.texture&&VV(u.shape,l)?(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype}):function(e,t,n){const r=[LV(e.shape),...PV(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},a=[LV(t),...PV(t)],i=new OW(a,r),s=[r],l=n.runWebGLProgram(i,[o],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(o,l,i)}const RU={kernelName:Kh,backendName:"webgl",kernelFunc:EU};class DU{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];const i=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(td(e)?e.toPrecision(2):e,", ones);")}let c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class FU{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let h="";o%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===u,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===u,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function MU(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Rx(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:s,windowSize:l,outSize:c}=o[i];let u,d;u="mean"===n?0===i?new DU({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},s):new DU({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c}):new FU({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},n),d=a,a=r.runWebGLProgram(u,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}class OU{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;const r=pH(this.rank),o=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}}class LU{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=pH(this.rank),o=DW("rc",this.rank),a=new Array(this.rank);for(let c=0;c<t.length;c++)a[t[c]]=o[c];const i="vec2(".concat(a.slice(-2).join(),")"),s="++".concat(o[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(a.join(),"), ").concat(i,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(s,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(s,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function PU(e,t,n){const r=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LU(e.shape,t):new OU(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function zU(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;return function(e,t,n,r){const o=t,a=e.shape.length,i=id(o,e.shape);let s=i;const l=Ig(s,a),c=null!=l;let u=e;c&&(u=PU(e,l,r),s=Sg(s.length,a)),kg("sum",s,a);const[d,p]=xg(u.shape,s);let h=d;n&&(h=wg(d,i));const f=$u(p),C=EU({inputs:{x:u},attrs:{shape:[$u(e.shape)/f,f]},backend:r}),G=MU(C,ZC(e.dtype),"sum",r),m=EU({inputs:{x:G},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(G),c&&r.disposeIntermediateTensorInfo(u),m}(o,a,i,n)}const BU={kernelName:ff,backendName:"webgl",kernelFunc:zU};function VU(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:a}=r,i=n,s=o.shape.length,l=new Array(s);for(let u=0;u<l.length;u++)l[u]=o.shape[a[u]];let c;if(i.shouldExecuteOnCPU([o])){const e=i.texData.get(o.dataId).values,t=EW(e,o.shape,o.dtype,a,l);c=i.makeTensorInfo(l,o.dtype);i.texData.get(c.dataId).values=t}else c=PU(o,a,i);return c}const HU={kernelName:Of,backendName:"webgl",kernelFunc:VU},WU=1e3;function UU(e){let{a:t,b:n,transposeA:r,transposeB:o,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,d=n.shape.length,p=r?t.shape[u-2]:t.shape[u-1],h=o?n.shape[d-1]:n.shape[d-2],f=r?t.shape[u-1]:t.shape[u-2],C=o?n.shape[d-2]:n.shape[d-1],G=t.shape.slice(0,-2),m=n.shape.slice(0,-2),A=$u(G),T=$u(m),g=lA(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,C]);Zu(p===h,(()=>"Error in matMul: inner shapes (".concat(p,") and (")+"".concat(h,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const y=r?[A,p,f]:[A,f,p],v=o?[T,C,h]:[T,h,C],b=EU({inputs:{x:t},backend:a,attrs:{shape:y}}),x=EU({inputs:{x:n},backend:a,attrs:{shape:v}}),w=[b,x],k=Math.max(A,T),I=r?b.shape[1]:b.shape[2],_=null!=i,S=null!=s,N="leakyrelu"===c,E=null!=c?xU(c,!0):null;let R;if((1===f||1===C)&&I>WU&&!1===(_||S||N||null!=E)){let e=b,t=x;r&&(e=VU({inputs:{x:b},backend:a,attrs:{perm:[0,2,1]}}),w.push(e)),o&&(t=VU({inputs:{x:x},backend:a,attrs:{perm:[0,2,1]}}),w.push(t));const n=1===C;let i=e;1!==C&&(i=EU({inputs:{x:e},backend:a,attrs:{shape:[k,I,1]}}),w.push(i));const s=1===C?2:1;let l=t;n&&(l=EU({inputs:{x:t},backend:a,attrs:{shape:[k,1,I]}}),w.push(l));const c=SU({inputs:{a:i,b:l},backend:a});R=zU({inputs:{x:c},backend:a,attrs:{axis:s,keepDims:!0}}),w.push(c)}else{const e=YC(t.dtype,n.dtype),c=new wU(y,v,[k,f,C],r,o,_,E,S,N),u=[b,x];if(null!=i&&u.push(i),S&&u.push(s),N){const e=a.makeTensorInfo([],"float32",AC(l,"float32"));u.push(e),w.push(e)}R=a.runWebGLProgram(c,u,e)}const D=EU({inputs:{x:R},backend:a,attrs:{shape:g}});w.push(R);for(const F of w)a.disposeIntermediateTensorInfo(F);return D}const jU={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return UU({a:o,b:a,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:u})}},KU="return abs(x);";const qU={kernelName:Md,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=mW(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=Nd().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new tU(r.shape,KU):new VW(r.shape,KU),n.runWebGLProgram(o,[r],r.dtype)}},XU=vU({opSnippet:HW+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),YU={kernelName:Od,backendName:"webgl",kernelFunc:XU},ZU=vU({opSnippet:HW+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),JU={kernelName:Ld,backendName:"webgl",kernelFunc:ZU},QU="return a + b;",$U=bU({opSnippet:QU,packedOpSnippet:QU,supportsComplex:!0,cpuKernelImpl:PH}),ej={kernelName:Pd,backendName:"webgl",kernelFunc:$U};class tj{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class nj{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const rj={kernelName:zd,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return dU({inputs:{x:o[0]},backend:r});if(o.length>Nd().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),a=e({inputs:o.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=o.map((e=>e.dtype)).reduce(((e,t)=>YC(e,t))),i=o.map((e=>e.shape)),s=Nd().getBool("WEBGL_PACK")?new nj(o[0].shape,i):new tj(o[0].shape,i);return r.runWebGLProgram(s,o,a)}};const oj={kernelName:Bd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=id(a,o.shape);let c=l;const u=Ig(c,s);let d=o;null!=u&&(d=VU({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Sg(c.length,s)),kg("all",c,s);const[p,h]=xg(d.shape,c),f=EU({inputs:{x:d},backend:n,attrs:{shape:[-1,$u(h)]}}),C=MU(f,f.dtype,"all",n);let G;if(i){G=EU({inputs:{x:C},backend:n,attrs:{shape:wg(p,l)}})}else G=EU({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),null!=u&&n.disposeIntermediateTensorInfo(d),G}};const aj={kernelName:Vd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=id(a,o.shape);let c=l;const u=Ig(c,s);let d=o;null!=u&&(d=VU({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Sg(c.length,s)),kg("any",c,s);const[p,h]=xg(d.shape,c),f=EU({inputs:{x:d},backend:n,attrs:{shape:[-1,$u(h)]}}),C=MU(f,f.dtype,"any",n);let G;if(i){G=EU({inputs:{x:C},backend:n,attrs:{shape:wg(p,l)}})}else G=EU({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),null!=u&&n.disposeIntermediateTensorInfo(d),G}};class ij{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class sj{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Zu(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,l=pH(s),c=FW("coords",s);let u,d;if(1===a){d=s+1;const e=pH(d);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-2],";")}else d=s,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[s-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[s-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[s-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[s-2],";");const p=["x","y","z","w","u","v"].slice(0,d),h="."+p[d-1],f=p.map((e=>"int "+e)),C=FW("sourceLocR",d-1).concat("inIdx.r"),G=FW("sourceLocG",d-1).concat("inIdx.g"),m=FW("sourceLocB",d-1).concat("inIdx.b"),A=FW("sourceLocA",d-1).concat("inIdx.a"),T="max"===n?"greaterThan":"lessThan",g=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(C.join(),"),\n                             getBestIndicesAChannel(").concat(G.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(A.join(),")));"),y="vec4(\n            getAChannel(".concat(C.join(),"),\n            hasNextCol ? getAChannel(").concat(G.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(A.join(),") : 0.)"),v=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(v,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[s-1]," < ").concat(i[s-1]-1,";\n        bool hasNextRow = ").concat(c[s-2]," < ").concat(i[s-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(h,", sourceLocG").concat(h,",\n          sourceLocB").concat(h,", sourceLocA").concat(h,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(y,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(g,"\n          vec4 candidate = ").concat(y,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(T,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function lj(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.shape[0],a=t.shape[1];null!=r&&(o=r.shape[0],a=r.shape[1]);const i=Rx(a),s={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},l=new ij(s,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=lj(e,t,n,u);return e.disposeIntermediateTensorInfo(u),d}function cj(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null!=r?r.shape:t.shape,a=Rx(o[o.length-1]),i=new sj(o,a,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(i,s,"int32");if(l.shape.length===t.shape.length){const r=cj(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function uj(e,t,n,r){const o=[n];if(kg("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Nd().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,l]=xg(i.shape,o),c=$u(l),u=EU({inputs:{x:i},backend:e,attrs:{shape:[-1,c]}});n.push(u);const d=lj(e,u,r);n.push(d);const p=EU({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return cj(e,t,r)}const dj={kernelName:Hd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=id(a,o.shape);const s=Ig(i,o.shape.length);let l=o;const c=[];null!=s&&(l=VU({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),i=Sg(i.length,l.shape.length)),kg("argMax",[i[0]],l.shape.length);const u=uj(n,l,i[0],"max");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};const pj={kernelName:Wd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=id(a,o.shape);const s=Ig(i,o.shape.length);let l=o;const c=[];null!=s&&(l=VU({inputs:{x:o},backend:n,attrs:{perm:s}}),c.push(l),i=Sg(i.length,l.shape.length)),kg("argMin",[i[0]],l.shape.length);const u=uj(n,l,i[0],"min");return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},hj=vU({opSnippet:HW+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),fj={kernelName:Ud,backendName:"webgl",kernelFunc:hj},Cj=vU({opSnippet:HW+"return log(x + sqrt(x * x + 1.0));"}),Gj={kernelName:jd,backendName:"webgl",kernelFunc:Cj},mj=vU({opSnippet:HW+"\n  return atan(x);\n"}),Aj={kernelName:Kd,backendName:"webgl",kernelFunc:mj},Tj=bU({opSnippet:sU+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+cU+"\n  return result;\n"}),gj={kernelName:Xd,backendName:"webgl",kernelFunc:Tj},yj=vU({opSnippet:HW+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),vj={kernelName:qd,backendName:"webgl",kernelFunc:yj};class bj{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,C="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),G="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let m="0.0";if(f||(m="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?o?C:G:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let A="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(A="avgValue / max(count, 1.0)");const T=4*Math.floor(a/4),g=a%4,y="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(m,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(m,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(T,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(y,"\n          }\n\n          int xC = xCCorner + ").concat(T,";\n          if (").concat(1===g,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(y,"\n          } else if (").concat(2===g,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(y,"\n          } else if (").concat(3===g,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(y,"\n          }\n        }\n        setOutput(").concat(A,");\n      }\n    ")}}class xj{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,C=e.padInfo.front,G=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const A="avg"===t;let T="0.0";if(A||(T="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(s,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(C,", ").concat(G,", ").concat(m,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?o?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(h," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let g="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(g="avgValue / max(count, 1.0)");const y=4*Math.floor(a/4),v=a%4,b="\n      if (".concat(A,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(s,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(C,", ").concat(G,", ").concat(m,");\n      const float initializationValue = ").concat(T,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(T,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(b,"\n            }\n\n            int xC = xCCorner + ").concat(y,";\n            if (").concat(1===v,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(b,"\n            } else if (").concat(2===v,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(b,"\n            } else if (").concat(3===v,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(b,"\n            }\n          }\n        }\n        setOutput(").concat(g,");\n      }\n    ")}}const wj={kernelName:Yd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;XV(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;Zu(xT(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const c=fT(o.shape,a,i,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&ed(c.inShape,c.outShape))return dU({inputs:{x:o},backend:n});const u=new bj(c,"avg",!1);return n.runWebGLProgram(u,[o],"float32")}};const kj={kernelName:Jd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:l,dataFormat:c}=r,u=CT(o.shape,a,i,[1,1,1],s,l,c),d=new xj(u,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}};class Ij{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class _j{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=u-1-e.padInfo.front,f=d-1-e.padInfo.top,C=p-1-e.padInfo.left,G=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(C,");\n      const float avgMultiplier = float(").concat(G,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Sj={kernelName:Qd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=CT(i.shape,s,l,[1,1,1],c,u),p=new _j(d);return n.runWebGLProgram(p,[o],i.dtype)}};const Nj={kernelName:Zd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;XV([o,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=fT(i.shape,s,l,1,c),d=new Ij(u);return n.runWebGLProgram(d,[o],i.dtype)}};const Ej={kernelName:$d,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;return UU({a:o,b:a,transposeA:i,transposeB:s,backend:n})}};class Rj{constructor(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],lA(e,t),lA(e,n);let i="0.0";null!=r&&(lA(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=o&&(lA(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(a,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Dj{constructor(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lA(e,t),lA(e,n);let i="vec4(0.0)";null!=r&&(lA(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=o&&(lA(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(a,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const Fj={kernelName:jp,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,mean:a,variance:i,offset:s,scale:l}=t;Zu(a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Zu(null==s||a.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Zu(null==l||a.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[o,a,i];let d=null;null!=s&&(d=s.shape,u.push(s));let p=null;null!=l&&(p=l.shape,u.push(l));const h=Nd().getBool("WEBGL_PACK_NORMALIZATION")?new Dj(o.shape,a.shape,i.shape,d,p,c):new Rj(o.shape,a.shape,i.shape,d,p,c);return n.runWebGLProgram(h,u,u[0].dtype)}};class Mj{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=pH(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Oj.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const o=e.map(((e,t)=>"sourceLoc.".concat(Oj[t]," = start[").concat(t,"] + coords.").concat(Oj[t],";")));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const Oj=["x","y","z","w","u","v"];class Lj{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=pH(this.rank),n=FW("coords",this.rank),r=FW("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),a="getChannel(getSource(".concat(r.join(),"), ").concat(o,")"),i="\n      result.x = ".concat(a,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(a,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(a,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(a,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function Pj(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r,[s,l]=QA(o,a,i);if(PA(o,s,l),0===$u(l))return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=AW(e.values,s,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,t)}const{isPacked:c}=n.texData.get(o.dataId),u=ZA(o.shape,s,l);if(c||!u){const e=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lj(l):new Mj(l),t=[s];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),i=r.texData.get(a.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=JA(t,md(e.shape));o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}(o,s,l,n)}const zj={kernelName:sf,backendName:"webgl",kernelFunc:Pj},Bj={kernelName:ep,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;Zu(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),l=Fx(o.shape,a,s),c=Mx(l.length,a.length),u=Ox(o.shape,a,s),d=Lx(i,a.length),p=Px(u,i,a.length),h=[],f=EU({inputs:{x:o},backend:n,attrs:{shape:l}}),C=VU({inputs:{x:f},backend:n,attrs:{perm:c}}),G=EU({inputs:{x:C},backend:n,attrs:{shape:u}}),m=Pj({inputs:{x:G},backend:n,attrs:{begin:d,size:p}});return h.push(f),h.push(C),h.push(G),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}};const Vj={kernelName:tp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=n.readSync(o.dataId),l=n.readSync(a.dataId),c=zH(s,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}};const Hj={kernelName:np,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Nd().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(o.dataId).values,[a,i]=VH(r.shape,o.shape,e,t,r.dtype),s=n.makeTensorInfo(i,r.dtype);return n.texData.get(s.dataId).values=a,s}let s;return s=a?new uU("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,o.shape,!1):new lU("\n  return float(int(a.r) & int(b.r));\n",r.shape,o.shape),n.runWebGLProgram(s,[r,o],r.dtype)}};const Wj={kernelName:rp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.readSync(r.dataId),i=n.readSync(o.dataId),s=lA(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Uj=bU({opSnippet:"return float(a != b);",cpuKernelImpl:lW,dtype:"bool"}),jj={kernelName:_h,backendName:"webgl",kernelFunc:Uj};function Kj(e){const{inputs:t,backend:n}=e,{input:r}=t;return dU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const qj={kernelName:Wh,backendName:"webgl",kernelFunc:Kj},Xj="return float(int(x));";const Yj={kernelName:op,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:a}=n,{dtype:i}=o;if("complex64"===i){if("complex64"===a.dtype)return dU({inputs:{x:a},backend:r});const t=Ay(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),o=hU({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===a.dtype){const t=Kj({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!ud(a.dtype,i)){const e=dU({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([a])){const e=r.texData.get(a.dataId).values,[t,n,o]=HH(e,a.shape,a.dtype,i);return r.makeTensorInfo(t,n,o)}if("int32"===i)return function(e,t){const n=new VW(e.shape,Xj),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",ld("bool",1)),t=Uj({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}},Zj="return ceil(x);",Jj=vU({opSnippet:Zj,packedOpSnippet:Zj,cpuKernelImpl:WH}),Qj={kernelName:ap,backendName:"webgl",kernelFunc:Jj};class $j{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class eK{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const tK={kernelName:ip,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=r;let s;s=Nd().getBool("WEBGL_PACK_CLIP")?new eK(o.shape):new $j(o.shape);const l=[[a],[i]];return n.runWebGLProgram(s,[o],o.dtype,l)}};class nK{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function rK(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const oK={kernelName:lp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),a=new nK(r.shape),i=[rK(r,o.complexTensorInfos.real),rK(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}};class aK{constructor(e){this.outputShape=[],this.outputShape=wx(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let a=1;a<t.length;a++){const e=t[a-1];n.push("else if (yC < ".concat(t[a],") ")+"setOutput(getT".concat(a,"(yR, yC-").concat(e,"));"))}const r=t.length,o=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(o,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class iK{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wx(e,t);const n=this.outputShape,r=n.length,o=pH(r),a=FW("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>"T".concat(t)));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=i[t],c=i.slice(-2),u=i.join();let d="if (".concat(l," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<s.length;f++){const e=s[f-1];d+="\n        if (".concat(l," < ").concat(s[f],"  && ").concat(l," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(sK(i,l,e),"),\n            vec2(").concat(sK(c,l,e),"));\n        }")}const p=s.length,h=s[s.length-1];d+="\n        return getChannel(\n          getT".concat(p,"(").concat(sK(i,l,h),"),\n          vec2(").concat(sK(c,l,h),"));"),this.userCode="\n      float getValue(".concat(i.map((e=>"int "+e)),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(a,"), 0., 0., 0.);\n\n        ").concat(a[r-1]," = ").concat(a[r-1]," + 1;\n        if (").concat(a[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(a,");\n        }\n\n        ").concat(a[r-2]," = ").concat(a[r-2]," + 1;\n        if (").concat(a[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(a,");\n        }\n\n        ").concat(a[r-1]," = ").concat(a[r-1]," - 1;\n        if (").concat(a[r-2]," < ").concat(n[r-2]," &&\n            ").concat(a[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(a,");\n        }\n        setOutput(result);\n      }\n    ")}}function sK(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?"".concat(e," - ").concat(n):e)).join()}function lK(e){const{inputs:t,backend:n}=e,{input:r}=t;return dU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const cK={kernelName:Qp,backendName:"webgl",kernelFunc:lK};function uK(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>Kj({inputs:{input:e},backend:n}))),o=e.map((e=>lK({inputs:{input:e},backend:n}))),a=uK(r,t,n),i=uK(o,t,n),s=hU({inputs:{real:a,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=$u(e.shape.slice(t));return EU({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=wx(o.map((e=>e.shape)),1),s=1===o[0].shape[0],l=UH(a,i,r,s),c=wx(e.map((e=>e.shape)),t),u=n.makeTensorInfo(c,r,l);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const a=e.filter((e=>$u(e.shape)>0)),i=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=i?new VW(e[0].shape,XW):new tU(e[0].shape,XW);return n.runWebGLProgram(t,e,r)}const s=Nd().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const e=[];for(let o=0;o<a.length;o+=s){const r=a.slice(o,o+s);e.push(uK(r,t,n))}const r=uK(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new iK(a.map((e=>e.shape)),t);return n.runWebGLProgram(e,a,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=wx(e.map((e=>e.shape)),t),o=e.map((e=>EU({inputs:{x:e},attrs:{shape:[-1,$u(e.shape.slice(t))]},backend:n})));return{tensors2D:o,outShape:r}}(a,t,n),u=new aK(l.map((e=>e.shape))),d=n.runWebGLProgram(u,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const p=EU({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function dK(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=id(o,t[0].shape)[0];xx(t.map((e=>e.shape)),a);const i=wx(t.map((e=>e.shape)),a);if(0===$u(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>$u(e.shape)>0));return 1===s.length?dU({inputs:{x:s[0]},backend:n}):uK(s,a,n)}const pK={kernelName:cp,backendName:"webgl",kernelFunc:dK};class hK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,C="channelsLast"===e.dataFormat,G=C?1:2,m=C?2:3,A=C?3:1;let T="",g="";n&&(T=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),g="result = activation(result);");const y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(T,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(A,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(G,"], coords[").concat(m,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(C,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(C,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(C,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(C,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(g,"\n        setOutput(result);\n      }\n    ")}}class fK{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(a,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class CK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=TH(this.outputShape.length);const a=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let C=0;C<c;C++)d+="\n           vec4 xTexelC".concat(2*C,";\n           int xTexelC").concat(2*C,"Ready;\n           vec4 xTexelC").concat(2*C+1,";\n           int xTexelC").concat(2*C+1,"Ready;\n           vec4 xC").concat(C,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let C=0;C<c;C++)d+="\n           xTexelC".concat(2*C," = vec4(0.0);\n           xTexelC").concat(2*C,"Ready = 0;\n           xTexelC").concat(2*C+1," = vec4(0.0);\n           xTexelC").concat(2*C+1,"Ready = 0;\n           xC").concat(C," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let C=0;C<(u+1)/2;C++){const t=2*C;if(d+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===i){if(t<c&&(a%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=a%2===0?Xu(s):s;s%2===0&&a%2===1||s%2!==0&&a%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(a%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let p="",h="";n&&(p=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),h="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(p,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(h,"\n         setOutput(result);\n       }\n     ")}}class GK{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=TH(this.outputShape.length);const{dataFormat:n}=t,r=ZV(),o="channelsLast"===n,a=o?1:2,i=o?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(a,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function mK(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function AK(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:l=null}=e;const c=t.shape,u=o.texData.get(t.dataId),d=r.inChannels,p=c[0]*c[1]*c[2],h=r.outChannels,f="channelsLast"===r.dataFormat;let C;const G=[];if(null!=i){const e=mK(i.shape,f);null!=e&&(i=EU({inputs:{x:i},backend:o,attrs:{shape:e}}),G.push(i))}if(null!=a){const e=mK(a.shape,f);null!=e&&(a=EU({inputs:{x:a},backend:o,attrs:{shape:e}}),G.push(a))}if(!((1===p||1===h)&&d>WU)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&ed(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),d={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},p=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Zu(VV(u.shape,d.shape),(()=>"packed reshape ".concat(u.shape," to ").concat(d.shape," isn't free")));const h=EU({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}});G.push(h);const f=UU({a:d,b:h,backend:o,transposeA:false,transposeB:false,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:s}),m=o.texData.get(f.dataId);Zu(m.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=p,m.shape=r.outShape,C=dU({inputs:{x:f},backend:o}),C.shape=r.outShape,G.push(f)}else{const e=r.outHeight*r.outWidth,c=EU({inputs:{x:t},backend:o,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=EU({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=UU({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:false,backend:o,bias:a,activation:l,preluActivationWeights:i,leakyreluAlpha:s});C=EU({inputs:{x:d},backend:o,attrs:{shape:r.outShape}}),G.push(c),G.push(u),G.push(d)}for(const m of G)o.disposeIntermediateTensorInfo(m);return C}function TK(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:d,outWidth:p,outHeight:h,dataFormat:f}=r,C="channelsLast"===f,G=c*u*d,m=h*p,A=[r.batchSize,G,m],T=[];if(null!=i){const e=mK(i.shape,C);null!=e&&(i=EU({inputs:{x:i},backend:o,attrs:{shape:e}}),T.push(i))}if(null!=a){const e=mK(a.shape,C);null!=e&&(a=EU({inputs:{x:a},backend:o,attrs:{shape:e}}),T.push(a))}const g=EU({inputs:{x:n},backend:o,attrs:{shape:[1,G,$u(n.shape)/G]}});T.push(g);const y=new GK(A,r),v=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],b=o.runWebGLProgram(y,[t],"float32",v),x=EU({inputs:{x:b},backend:o,attrs:{shape:A}});T.push(b),T.push(x);const w=null!=a,k=null!=i,I="leakyrelu"===l,_=l?xU(l,!0):null,S=new wU(C?x.shape:g.shape,C?g.shape:x.shape,C?[r.batchSize,m,r.outChannels]:[r.batchSize,r.outChannels,m],!0,!1,w,_,k,I),N=C?[x,g]:[g,x];if(a&&N.push(a),k&&N.push(i),I){const e=o.makeTensorInfo([],"float32",AC(s,"float32"));N.push(e),T.push(e)}const E=o.runWebGLProgram(S,N,"float32"),R=EU({inputs:{x:E},backend:o,attrs:{shape:r.outShape}});T.push(E);for(const D of T)o.disposeIntermediateTensorInfo(D);return R}const gK={kernelName:up,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=kT(l),p=GT(o.shape,a.shape,i,c,s,u,!1,d);let h;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===d&&Nd().getBool("WEBGL_EXP_CONV")){const e=new CK(p),t=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(e,[o,a],"float32",t)}else if(Nd().getBool("WEBGL_CONV_IM2COL"))h=TK({x:o,filter:a,convInfo:p,backend:n});else{const e=new hK(p);h=n.runWebGLProgram(e,[o,a],"float32")}else h=AK({x:o,filter:a,convInfo:p,backend:n});const f=EU({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class yK{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(a?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class vK{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=a?1:2,c=a?2:3,u=a?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(a,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class bK{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class xK{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const wK={kernelName:dp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=kT(l),p=GT(o.shape,u,i,1,s,c,!1,d),h=new yK(p);return n.runWebGLProgram(h,[o,a],"float32")}};class kK{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=TH(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,o=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const IK={kernelName:pp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=kT(c),p=GT(i,a.shape,s,1,l,u,!1,d);if(Nd().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[p.strideHeight,p.strideWidth]],t=new kK(p);return n.runWebGLProgram(t,[o,a],"float32",e)}{const e=new vK(p);return n.runWebGLProgram(e,[o,a],"float32")}}};const _K={kernelName:hp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,c=mT(o.shape,a.shape,i,l,s),u=new fK(c);return n.runWebGLProgram(u,[o,a],"float32")}};const SK={kernelName:fp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:l}=r,c=mT(o.shape,l,i,1,s),u=new bK(c);return n.runWebGLProgram(u,[o,a],"float32")}};const NK={kernelName:Cp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:l}=r,c=mT(l,a.shape,s,1,i),u=new xK(c);return n.runWebGLProgram(u,[o,a],"float32")}},EK=vU({opSnippet:yU+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(cU,"\n  return result;\n")}),RK={kernelName:Gp,backendName:"webgl",kernelFunc:EK},DK=vU({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),FK={kernelName:mp,backendName:"webgl",kernelFunc:DK};class MK{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,l]=e,[c]=t,[u,d]=n;this.outputShape=[c,u,d,l];const p="bilinear"===r?1:0,[h,f]=["".concat(i-1,".0"),"".concat(s-1,".0")],[C,G,m]=u>1?["".concat((i-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(h," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(h)],[A,T,g]=d>1?["".concat((s-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(C,");\n      const float width_ratio = float(").concat(A,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(a,") {\n          return;\n        }\n\n        float height_scale = ").concat(G,";\n        float width_scale = ").concat(T,";\n\n        float in_y = ").concat(m,";\n        if( in_y < 0.0 || in_y > ").concat(h," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(g,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(p," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const OK={kernelName:gp,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:l,extrapolationValue:c}=r,u=new MK(o.shape,a.shape,s,l,c);return n.runWebGLProgram(u,[o,a,i],"float32")}};var LK;!function(e){e.Prod="*",e.Sum="+"}(LK||(LK={}));class PK{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,a=this.op===LK.Prod?"1.0":"0.0",i=n?a:"getX(".concat(zK(o,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != ".concat(s-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(s):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(pH(o)," coords = getOutputCoords();\n        int end = ").concat(BK(o,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(BK(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(zK(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function zK(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function BK(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function VK(e,t,n,r,o,a){const i=t.shape.length,s=Ig([r],i);let l=t;null!=s&&(l=VU({inputs:{x:t},backend:n,attrs:{perm:s}}));const c=Sg(1,i)[0];if(c!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=l.shape[c];let d=dU({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){const t=new PK(e,l.shape,!1,a),r=[[p]],o=d;d=n.runWebGLProgram(t,[d],d.dtype,r),n.disposeIntermediateTensorInfo(o)}if(o){const t=new PK(e,l.shape,o,a),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=VU({inputs:{x:d},backend:n,attrs:{perm:_g(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const HK={kernelName:Ap,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return VK(LK.Prod,o,n,a,i,s)}};const WK={kernelName:Tp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return VK(LK.Sum,o,n,a,i,s)}};const UK={kernelName:yp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(a.dataId),r=zH(e,t,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(a),r=BH(e,t,i,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};class jK{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const KK={kernelName:vp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r,s=o.shape[0],l=("NHWC"===i?o.shape[1]:o.shape[2])*a,c=("NHWC"===i?o.shape[2]:o.shape[3])*a,u=("NHWC"===i?o.shape[3]:o.shape[1])/(a*a),d=new jK("NHWC"===i?[s,l,c,u]:[s,u,l,c],a,i);return n.runWebGLProgram(d,[o],o.dtype)}};class qK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=TH(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(a,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class XK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=TH(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let G=0;G<u;G++)p+="\n          vec4 xTexelC".concat(2*G,";\n          int xTexelC").concat(2*G,"Ready;\n          vec4 xTexelC").concat(2*G+1,";\n          int xTexelC").concat(2*G+1,"Ready;\n          vec4 xC").concat(G,";");p+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let G=0;G<u;G++)p+="\n          xTexelC".concat(2*G," = vec4(0.0);\n          xTexelC").concat(2*G,"Ready = 0;\n          xTexelC").concat(2*G+1," = vec4(0.0);\n          xTexelC").concat(2*G+1,"Ready = 0;\n          xC").concat(G," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let G=0;G<(d+1)/2;G++){const e=2*G;if(p+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===s){if(e<u&&(i%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),p+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=i%2===0?Xu(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),p+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):p+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(i%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(p+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(p+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(p+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";let h="",f="";n&&(h=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(h,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(a,";\n        int q = d2 - d1 * ").concat(a,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(C,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const YK={kernelName:bp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),Zu(xT(i,u),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(u,"'")));const d=GT(o.shape,a.shape,i,u,s,c,!0);let p;p=Nd().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new XK(d):new qK(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[o,a],"float32",h)}};class ZK{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(a," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class JK{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const QK={kernelName:xp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r,d=GT(o.shape,u,i,s,l,c,!0),p=new ZK(d);return n.runWebGLProgram(p,[o,a],"float32")}};const $K={kernelName:wp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r,d=GT(u,a.shape,i,s,l,c,!0),p=new JK(d);return n.runWebGLProgram(p,[o,a],"float32")}};class eq{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const tq={kernelName:kp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],a=$u(r.shape),i=EU({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new eq(a),l=n.runWebGLProgram(s,[i],i.dtype),c=EU({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}};class nq{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:a,filterHeight:i,filterWidth:s,dilationHeight:l,dilationWidth:c}=e,{top:u,left:d}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(a,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const rq={kernelName:Ip,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:l}=r,c=hT(o.shape,a.shape,i,s,"NHWC",l);let u;const d=new nq(c);u=n.runWebGLProgram(d,[o,a],"float32");const p=EU({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),p}};const oq={kernelName:Rp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:l}=iw(o,a.length);lw(i.length,l,a);const{path:c,steps:u}=cw(s,l),d=u.length;let p=null,h=i.length;const f=[];for(let C=0;C<d;++C){for(const e of u[C]){const{permutationIndices:t,expandDims:r}=sw(h,l[e]);let o;uw(t)?o=a[e]:(o=VU({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),f.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);ed(o.shape,i)||(o=EU({inputs:{x:o},backend:n,attrs:{shape:i}}),f.push(o)),null===p?p=o:(p=SU({inputs:{a:o,b:p},backend:n}),f.push(p))}C<d-1&&(c[C]>=0&&(p=zU({inputs:{x:p},backend:n,attrs:{axis:c[C]-(i.length-h),keepDims:!1}}),f.push(p)),h--)}for(const C of f)C!==p&&n.disposeIntermediateTensorInfo(C);return p}},aq=vU({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),iq={kernelName:Dp,backendName:"webgl",kernelFunc:aq},sq={kernelName:Fp,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,a=Nd().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uU("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new lU("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(a,[r,o],r.dtype)}},lq=bU({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:jH}),cq={kernelName:Op,backendName:"webgl",kernelFunc:lq},uq=vU({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Hx,";\n  float a1 = ").concat(Wx,";\n  float a2 = ").concat(Ux,";\n  float a3 = ").concat(jx,";\n  float a4 = ").concat(Kx,";\n  float a5 = ").concat(qx,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),dq={kernelName:Mp,backendName:"webgl",kernelFunc:uq},pq=vU({opSnippet:yU+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:KH,dtype:"float32"}),hq={kernelName:Lp,backendName:"webgl",kernelFunc:pq};function fq(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:a}=t,i=a.shape.length,s=a.shape.slice();let l=o;return o<0&&(Zu(-(i+1)<=o,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),l=i+o+1),s.splice(l,0,1),EU({inputs:{x:a},backend:r,attrs:{shape:s}})}const Cq={kernelName:Pp,backendName:"webgl",kernelFunc:fq},Gq="return exp(x) - 1.0;",mq=vU({opSnippet:Gq,packedOpSnippet:Gq,cpuKernelImpl:qH}),Aq={kernelName:zp,backendName:"webgl",kernelFunc:mq};class Tq{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),a=n?"".concat(r,".0"):"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(a,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function gq(e,t,n){const r=n.texData.get(e.dataId),o=$u(e.shape),a=e.shape[e.shape.length-1],i=EU({inputs:{x:e},backend:n,attrs:{shape:[o/a,a]}}),s=i.shape,l=new Tq("real",s,t),c=new Tq("imag",s,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(l,u,"float32"),p=n.runWebGLProgram(c,u,"float32"),h=hU({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const f=EU({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(h),f}const yq={kernelName:Bp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return gq(r,!1,n)}};class vq{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function bq(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:a}=n;if(a=a||fd(o),"string"===a){const e=cd(a,$u(r));return e.fill(o),t.makeTensorInfo(r,a,e)}{const e=new vq(r,o),n=[[o]];return t.runWebGLProgram(e,[],a,n)}}const xq={kernelName:Vp,backendName:"webgl",kernelFunc:bq};class wq{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const kq={kernelName:Hp,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,o=n,a=new wq(r.shape);return o.runWebGLProgram(a,[r],r.dtype)}},Iq="return floor(x);",_q=vU({opSnippet:Iq,packedOpSnippet:Iq,cpuKernelImpl:XH}),Sq={kernelName:Wp,backendName:"webgl",kernelFunc:_q},Nq=bU({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Eq={kernelName:Up,backendName:"webgl",kernelFunc:Nq};class Rq{constructor(e){this.variableNames=["A"];const t=ZV(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class Dq{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ZV(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const Fq={kernelName:Hf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:a}=r,i="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,[l,c]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,a];if(s||i){const e=Nd().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Mq&&e===Oq||(Oq=e,Mq=document.createElement("canvas").getContext("2d",{willReadFrequently:Oq})),Mq.canvas.width=l,Mq.canvas.height=c,Mq.drawImage(o,0,0,l,c),o=Mq.canvas}const p=n.makeTensorInfo(u,"int32");n.texData.get(p.dataId).usage=AV.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),o);const h=Nd().getBool("WEBGL_PACK")?new Dq(d):new Rq(d),f=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),f}};let Mq,Oq=Nd().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Lq={kernelName:jf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,C=kT(u),G=GT(o.shape,a.shape,l,d,c,p,!1,C);let m;const A=[],T=null!=i,g=null!=s,y="leakyrelu"===h,v=()=>{const e=[o,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=EU({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return A.push(t),t}return e};if(T&&e.push(t(i,u)),g&&e.push(t(s,u)),y){const t=n.makeTensorInfo([],"float32",AC(f,"float32"));e.push(t),A.push(t)}return e};if(1!==G.filterHeight||1!==G.filterWidth||1!==G.dilationHeight||1!==G.dilationWidth||1!==G.strideHeight||1!==G.strideWidth||"SAME"!==G.padInfo.type&&"VALID"!==G.padInfo.type)if(G.strideWidth<=2&&"channelsLast"===C&&Nd().getBool("WEBGL_EXP_CONV")){const e=h?xU(h,!0):null,t=new CK(G,T,e,g,y),r=[[G.padInfo.top,G.padInfo.left],[G.strideHeight,G.strideWidth],[G.dilationHeight,G.dilationWidth],[G.inHeight,G.inWidth]],o=v();m=n.runWebGLProgram(t,o,"float32",r)}else if(Nd().getBool("WEBGL_CONV_IM2COL"))m=TK({x:o,filter:a,convInfo:G,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});else{const e=h?xU(h,!1):null,t=new hK(G,T,e,g,y),r=v();m=n.runWebGLProgram(t,r,"float32")}else m=AK({x:o,filter:a,convInfo:G,backend:n,bias:i,activation:h,preluActivationWeights:s,leakyreluAlpha:f});const b=EU({inputs:{x:m},backend:n,attrs:{shape:G.outShape}});return A.push(m),A.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}};const Pq={kernelName:Kf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[];let C=u;null==C&&(C=[1,1]),Zu(xT(l,C),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(C,"'")));const G=GT(o.shape,a.shape,l,C,c,d,!0),m=Nd().getBool("WEBGL_PACK_DEPTHWISECONV")&&G.strideWidth<=2&&G.outChannels/G.inChannels===1,A=p?xU(p,m):null,T=[o,a],g=null!=i,y=null!=s,v="leakyrelu"===p;if(g&&T.push(i),y&&T.push(s),v){const e=n.makeTensorInfo([],"float32",AC(h,"float32"));T.push(e),f.push(e)}let b;b=m?new XK(G,g,A,y,v):new qK(G,g,A,y,v);const x=[[G.padInfo.top,G.padInfo.left],[G.strideHeight,G.strideWidth],[G.dilationHeight,G.dilationWidth],[G.inHeight,G.inWidth]],w=n.runWebGLProgram(b,T,"float32",x);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),w}};class zq{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const o=pH(n.length);let a="\n    int index;";for(let i=0;i<this.sliceDim;i++)a+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(a,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const Bq={kernelName:qp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=o.shape,i=a[a.length-1],s=$u(r.shape),[l,c,u,d]=zx(r,o),p=EU({inputs:{x:o},backend:n,attrs:{shape:[c,i]}}),h=EU({inputs:{x:r},backend:n,attrs:{shape:[$u(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),a=YH(e,t,r.dtype,c,i,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,a.values)}const f=new zq(i,d,[c,u],r.shape),C=n.runWebGLProgram(f,[h,p],h.dtype),G=EU({inputs:{x:C},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(C),G}};class Vq{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=pH(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<e.length;o++)2===o?r.push("index"):r.push("".concat(n[o]));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function Hq(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r,l=id(i,o.shape)[0];if(Nd().get("DEBUG")){const e=n.readSync(a.dataId),t=o.shape[l];for(let n=0;n<e.length;++n){const r=e[n];Zu(r<=t-1&&r>=0,(()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")))}}const c=Iw(o,a,l,s),u=$u(a.shape),d=[],p=EU({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=EU({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,a])||"string"===o.dtype){const e=n.bufferSync(h),t=n.bufferSync(p),r=ZH(t,e,f);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const C=new Vq(p.shape,f),G=n.runWebGLProgram(C,[p,h],p.dtype);d.push(G);const m=EU({inputs:{x:G},backend:n,attrs:{shape:c.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}const Wq={kernelName:Kp,backendName:"webgl",kernelFunc:Hq},Uq=bU({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:JH,dtype:"bool"}),jq={kernelName:Xp,backendName:"webgl",kernelFunc:Uq},Kq=bU({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:QH}),qq={kernelName:Yp,backendName:"webgl",kernelFunc:Kq};const Xq={kernelName:Jp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return gq(r,!0,n)}},Yq=vU({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Zq={kernelName:$p,backendName:"webgl",kernelFunc:Yq},Jq=vU({opSnippet:"return float(isinf(x));",dtype:"bool"}),Qq={kernelName:eh,backendName:"webgl",kernelFunc:Jq},$q=vU({opSnippet:"return float(isnan(x));",dtype:"bool"}),eX={kernelName:th,backendName:"webgl",kernelFunc:$q},tX=bU({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:$H,dtype:"bool"}),nX={kernelName:rh,backendName:"webgl",kernelFunc:tX},rX=bU({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:eW,dtype:"bool"}),oX={kernelName:oh,backendName:"webgl",kernelFunc:rX};const aX={kernelName:ah,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=tW(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},iX=vU({opSnippet:yU+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:nW}),sX={kernelName:ih,backendName:"webgl",kernelFunc:iX},lX=vU({opSnippet:yU+"\n  return log(1.0 + x);\n"}),cX={kernelName:sh,backendName:"webgl",kernelFunc:lX},uX=bU({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),dX={kernelName:lh,backendName:"webgl",kernelFunc:uX},pX=vU({opSnippet:"return float(!(x >= 1.0));"}),hX={kernelName:ch,backendName:"webgl",kernelFunc:pX},fX=bU({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),CX={kernelName:uh,backendName:"webgl",kernelFunc:fX};class GX{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const a=t,i=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(a,"; j <= ").concat(a,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(i,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class mX{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,i=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(a,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(a,"; j <= ").concat(a,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(i,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const AX={kernelName:dh,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:l}=r,c=Nd().getBool("WEBGL_PACK_NORMALIZATION")?new mX(o.shape,a,i,s,l):new GX(o.shape,a,i,s,l);return n.runWebGLProgram(c,[o],o.dtype)}};class TX{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const gX={kernelName:ph,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r,d=new TX(o.shape,s,l,c,u);return n.runWebGLProgram(d,[o,a,i],o.dtype)}};function yX(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=o.shape.length,l=id(a,o.shape);let c=l;const u=Ig(c,s),d=null!=u,p=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(p){const e=n.texData.get(h.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=o.shape[u[n]];const r=EW(e,o.shape,o.dtype,u,t);h=n.makeTensorInfo(t,o.dtype);n.texData.get(h.dataId).values=r}else h=PU(o,u,n);c=Sg(c.length,s)}kg("max",c,s);const[f,C]=xg(h.shape,c);let G,m=f;if(i&&(m=wg(f,l)),p){const e=n.texData.get(h.dataId).values,t=rW(e,$u(C),m,o.dtype);G=n.makeTensorInfo(m,o.dtype);n.texData.get(G.dataId).values=t}else G=function(e,t,n,r){const o=$u(t),a=EU({inputs:{x:e},attrs:{shape:[$u(e.shape)/o,o]},backend:r}),i=MU(a,e.dtype,"max",r),s=EU({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(h,C,m,n);return d&&n.disposeIntermediateTensorInfo(h),G}const vX={kernelName:hh,backendName:"webgl",kernelFunc:yX},bX=bU({opSnippet:sU+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+cU+"\n  return result;\n",cpuKernelImpl:oW}),xX={kernelName:fh,backendName:"webgl",kernelFunc:bX};const wX={kernelName:Ch,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;XV(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:l}=r;Zu(xT(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const c=fT(o.shape,a,i,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&ed(c.inShape,c.outShape))return dU({inputs:{x:o},backend:n});const u=new bj(c,"max",!1);return n.runWebGLProgram(u,[o],o.dtype)}};const kX={kernelName:mh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dataFormat:l,dimRoundingMode:c}=r,u=CT(o.shape,a,i,[1,1,1],s,c,l),d=new xj(u,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}};class IX{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,l=o*a-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(a," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class _X{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.front,d=l-1-e.padInfo.top,p=c-1-e.padInfo.left,h=s*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(a,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const SX={kernelName:Ah,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=CT(i.shape,s,l,[1,1,1],c,u),p=new xj(d,"max",!0),h=n.runWebGLProgram(p,[i],i.dtype),f=new _X(d),C=n.runWebGLProgram(f,[o,h],i.dtype);return n.disposeIntermediateTensorInfo(h),C}};const NX={kernelName:Gh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;XV([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=fT(s.shape,l,c,1,u,d),h=new bj(p,"max",!0),f=n.runWebGLProgram(h,[s],s.dtype),C=new IX(p),G=n.runWebGLProgram(C,[o,f],s.dtype);return n.disposeIntermediateTensorInfo(f),G}};const EX={kernelName:Th,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:l}=n,c=r;Zu(4===o.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")));const u=[1,1];Zu(xT(i,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(u,"'")));const d=fT(o.shape,a,i,u,s),[p,h]=function(e,t,n,r){let o=new bj(n,"max",!1);const a=r.runWebGLProgram(o,[e],"float32");return o=new bj(n,"max",!0,!0,t),[a,r.runWebGLProgram(o,[e],"float32")]}(o,l,d,c);return[p,h]}};const RX={kernelName:gh,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{keepDims:a,axis:i}=n,s=r,l=o.shape.length,c=id(i,o.shape);let u=c;const d=Ig(u,l),p=null!=d,h=s.shouldExecuteOnCPU([o]),f=[];let C=o;if(p){if(h){const e=s.texData.get(C.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=o.shape[d[r]];const n=EW(e,o.shape,o.dtype,d,t);C=s.makeTensorInfo(t,o.dtype);s.texData.get(C.dataId).values=n}else C=PU(o,d,s);f.push(C),u=Sg(u.length,l)}kg("sum",u,l);const[G,m]=xg(C.shape,u);let A=G;a&&(A=wg(G,c));const T=function(e,t,n,r){const o=$u(t),a=EU({inputs:{x:e},attrs:{shape:[$u(e.shape)/o,o]},backend:r}),i=MU(a,"float32","mean",r),s=EU({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(C,m,A,s);for(const g of f)s.disposeIntermediateTensorInfo(g);return T}};const DX={kernelName:yh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=id(a,o.shape);let c=l;const u=Ig(c,s);let d=o;null!=u&&(d=VU({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Sg(c.length,o.shape.length)),kg("min",c,s);const[p,h]=xg(d.shape,c),f=EU({inputs:{x:d},backend:n,attrs:{shape:[-1,$u(h)]}}),C=MU(f,f.dtype,"min",n);let G;if(i){G=EU({inputs:{x:C},backend:n,attrs:{shape:wg(p,l)}})}else G=EU({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),null!=u&&n.disposeIntermediateTensorInfo(d),G}},FX=bU({opSnippet:sU+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+cU+"\n  return result;\n",cpuKernelImpl:aW}),MX={kernelName:vh,backendName:"webgl",kernelFunc:FX};class OX{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=pH(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(a,");\n      ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(a,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class LX{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=pH(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=FW("rc",r),l=FW("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===n?0:1;let p="";if(1===r){const e="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(a,");\n      const ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const PX={kernelName:bh,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o}=t,{paddings:a,mode:i}=r,s=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LX(o.shape,a,i):new OX(o.shape,a,i);return n.runWebGLProgram(s,[o],o.dtype)}},zX=bU({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+cU+"\n  return result;\n"}),BX={kernelName:xh,backendName:"webgl",kernelFunc:zX};class VX{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const HX=bU({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),WX={kernelName:Ep,backendName:"webgl",kernelFunc:HX},UX="return a - b;",jX=bU({opSnippet:UX,packedOpSnippet:UX,supportsComplex:!0,cpuKernelImpl:_W}),KX={kernelName:Nf,backendName:"webgl",kernelFunc:jX};function qX(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=id([a],o.shape),s=yX({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=wg(s.shape,i),c=EU({inputs:{x:s},backend:n,attrs:{shape:l}}),u=jX({inputs:{a:o,b:c},backend:n}),d=pq({inputs:{x:u},backend:n}),p=zU({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=EU({inputs:{x:p},backend:n,attrs:{shape:l}}),f=HX({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),f}const XX={kernelName:mf,backendName:"webgl",kernelFunc:qX};const YX={kernelName:wh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r,l=s?o:qX({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new VX(c,u,a),p=[[i]],h=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),h}},ZX=HW+"\n  return -x;\n";const JX={kernelName:Ih,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=sW(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=Nd().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new tU(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new VW(r.shape,ZX),n.runWebGLProgram(o,[r],r.dtype)}},QX=Nb;const $X={kernelName:Sh,backendName:"webgl",kernelFunc:function(e){qf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l}=r,c=n.readSync(o.dataId),u=n.readSync(a.dataId),{selectedIndices:d}=QX(c,u,i,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},eY=Eb;const tY={kernelName:Nh,backendName:"webgl",kernelFunc:function(e){qf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(o.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:h}=eY(u,d,i,s,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},nY=Rb;const rY={kernelName:Eh,backendName:"webgl",kernelFunc:function(e){qf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(o.dataId),d=n.readSync(a.dataId),p=i,h=s,f=l,C=c,{selectedIndices:G,selectedScores:m}=nY(u,d,p,h,f,C);return[n.makeTensorInfo([G.length],"int32",new Int32Array(G)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}};class oY{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const aY={kernelName:Dh,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:l}=r,c=$u(o.shape),u=new oY(c,i,s,l),d=EU({inputs:{x:o},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(u,[d],a);n.disposeIntermediateTensorInfo(d);const h=EU({inputs:{x:p},backend:n,attrs:{shape:[...o.shape,i]}});return n.disposeIntermediateTensorInfo(p),h}};function iY(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Kj({inputs:{input:r},backend:n}),t=iY({inputs:{x:e},backend:n}),o=lK({inputs:{input:r},backend:n}),a=iY({inputs:{x:o},backend:n}),i=hU({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return bq({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const sY={kernelName:Bf,backendName:"webgl",kernelFunc:iY};const lY={kernelName:Rh,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=Kj({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=lK({inputs:{input:o},backend:r}),i=iY({inputs:{x:a},backend:r}),s=hU({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return bq({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}};const cY={kernelName:Fh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return fq({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{Ju(a,e.shape,"All tensors passed to stack must have matching shapes"),Zu(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=dK({inputs:t.map((e=>{const t=fq({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class uY{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=pH(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(a,");\n      ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(a,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class dY{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=pH(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=FW("rc",r),l=FW("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(o," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(c,") {")],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let f=0,C=1===r?2:4;f<C;f++)h+="\n        ".concat(d[f],"\n        if (").concat(p,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");h+=1===r?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(a,");\n      const ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const pY=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;if(0===$u(o.shape)){const e=a.map(((e,t)=>e[0]+o.shape[t]+e[1]));return bq({backend:n,attrs:{shape:e,value:i,dtype:o.dtype}})}const s=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dY(o.shape,a,i):new uY(o.shape,a,i),l=[[i]];return n.runWebGLProgram(s,[o],o.dtype,l)},hY={kernelName:Mh,backendName:"webgl",kernelFunc:pY},fY=bU({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+cU+"\n  return result;\n"}),CY={kernelName:Oh,backendName:"webgl",kernelFunc:fY};const GY={kernelName:Ph,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,l=[],c=id(a,o.shape);let u=c;const d=Ig(u,s);let p,h=o;if(null!=d&&(h=VU({inputs:{x:o},backend:n,attrs:{perm:d}}),u=Sg(u.length,s),l.push(h)),kg("prod",u,s),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:r,outDtype:o}=cW(h.shape,h.dtype,e,u);p=n.makeTensorInfo(r,o,t)}else{const[e,t]=xg(h.shape,u),r=$u(t),a=EU({inputs:{x:h},backend:n,attrs:{shape:[-1,r]}}),i=MU(a,ZC(o.dtype),"prod",n);p=EU({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(a),l.push(i)}if(i){l.push(p);const e=wg(p.shape,c);p=EU({inputs:{x:p},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const mY={kernelName:zh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,l=o.map((e=>n.readSync(e.dataId))),c=o.map((e=>e.shape)),u=n.readSync(a.dataId),d=n.readSync(i.dataId),[p,h,f]=uW(l,c,u,a.shape,a.dtype,d,i.shape,s),C=p.map((e=>n.makeTensorInfo([e.length],"int32",e))),G=n.makeTensorInfo(f,a.dtype,h);return C.concat([G])}};const AY={kernelName:Bh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[c,u]=dW(i,r.shape,r.dtype,s,o.shape,l,a.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const TY={kernelName:Vh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.readSync(o.dataId),u=n.readSync(a.dataId),d=n.readSync(i.dataId),p=s.map((e=>n.readSync(e.dataId))),h=s.map((e=>e.shape)),[f,C]=pW(c,o.shape,u,a.shape,a.dtype,d,i.shape,p,h,l);return n.makeTensorInfo(f,a.dtype,C)}},gY=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:a,dtype:i}=n,s=hW(r,o,a,i);return t.makeTensorInfo([s.length],i,s)},yY={kernelName:Hh,backendName:"webgl",kernelFunc:gY},vY=vU({opSnippet:"return 1.0 / x;"}),bY={kernelName:Uh,backendName:"webgl",kernelFunc:vY},xY=vU({opSnippet:HW+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),wY={kernelName:jh,backendName:"webgl",kernelFunc:xY},kY=vU({opSnippet:HW+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),IY={kernelName:Jh,backendName:"webgl",kernelFunc:kY};class _Y{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class SY{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const NY={kernelName:Yh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[l,c]=s,u=Nd().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SY(o.shape,l,c,a,i):new _Y(o.shape,l,c,a,i);return n.runWebGLProgram(u,[o],"float32")}};class EY{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],c=s[0]/l[0],u=s[1]/l[1],d=1/c,p=1/u,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(p,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(a,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const RY={kernelName:Zh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new EY(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class DY{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class FY{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,l]=e;this.outputShape=[a,t,n,l];const c=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const MY={kernelName:qh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[l,c]=s,u=Nd().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FY(o.shape,l,c,a,i):new DY(o.shape,l,c,a,i);return n.runWebGLProgram(u,[o],o.dtype)}};class OY{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],l=[n&&a>1?a-1:a,n&&i>1?i-1:i],c=s[0]/l[0],u=s[1]/l[1],d=1/c,p=1/u,h=2*Math.ceil(d)+2,f=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(p,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(a,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const LY={kernelName:Xh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new OY(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class PY{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r))).join(","),o=pH(n);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class zY{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=FW("rc",n),o="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),a="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),i=pH(n);function s(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(o,n))),o=r.join(","),a=r.slice(-2).join(",");return"getChannel(getX(".concat(o,"), vec2(").concat(a,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(r.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice()),";\n          }\n          if(").concat(a,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const BY={kernelName:Qh,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r,i=o.shape.length,s=id(a,o.shape);if(0===i)return dU({inputs:{x:o},backend:n});const l=Nd().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zY(o.shape,s):new PY(o.shape,s);return n.runWebGLProgram(l,[o],o.dtype)}};class VY{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const HY={kernelName:Wf,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,l=r,c=new VY(o.shape,i),[u,d]=Dx(s,o.shape[1],o.shape[2]),p=[[u,d,Math.sin(a),Math.cos(a)]];return l.runWebGLProgram(c,[o],o.dtype,p)}},WY=vU({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),UY={kernelName:$h,backendName:"webgl",kernelFunc:WY},jY=vU({opSnippet:"return inversesqrt(x);",cpuKernelImpl:fW}),KY={kernelName:ef,backendName:"webgl",kernelFunc:jY};class qY{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const s=pH(o.length),l=pH(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p="getUpdates(".concat(d,")");let h="";i&&(h="coords[0], coords[1]");const f="getDefaultValue(".concat(h,")"),C=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(C,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class XY{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const s=pH(o.length),l=pH(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p="getUpdates(".concat(d,")");let h="";i&&(h="coords[0], coords[1]");const f="getDefaultValue(".concat(h,")"),C=t>1?"strides[j]":"strides",G=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(C,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(G,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(p,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const YY={kernelName:tf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,o,i),p=[d/c,c];if(0===d)return n.makeTensorInfo(i,o.dtype);const h=EU({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=EU({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),C=n.makeTensorInfo([],"float32",new Float32Array([0]));let G;G=Nd().getBool("WEBGL_PACK")?new XY(l,s,h.shape.length,f.shape.length,u,p):new qY(l,s,h.shape.length,f.shape.length,u,p);const m=n.runWebGLProgram(G,[f,h,C],f.dtype),A=EU({inputs:{x:m},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(C),A}};class ZY{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),a=2===Nd().getNumber("WEBGL_VERSION")?"while (left < right) {":o,i="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(a,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const JY={kernelName:rf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=new ZY(o.shape[0],o.shape[1],a.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(s,[o,a],"int32",l)}};class QY{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let r=0;r<t.length;r++)i.push("".concat(n[r])),r<e&&a.push("".concat(n[r]));r=a.join(),o=i.join()}const a=pH(n);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}}const $Y={kernelName:of,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t,i=new QY(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,a],YC(o.dtype,a.dtype))}},eZ=vU({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(Bx,";\n  float scale = ").concat(Vx,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),tZ={kernelName:af,backendName:"webgl",kernelFunc:eZ},nZ=vU({opSnippet:yU+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:GW}),rZ={kernelName:df,backendName:"webgl",kernelFunc:nZ},oZ=vU({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),aZ={kernelName:uf,backendName:"webgl",kernelFunc:oZ},iZ=vU({opSnippet:yU+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(cU,"\n  return result;\n")}),sZ={kernelName:lf,backendName:"webgl",kernelFunc:iZ},lZ=vU({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),cZ={kernelName:cf,backendName:"webgl",kernelFunc:lZ},uZ=vU({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),dZ={kernelName:pf,backendName:"webgl",kernelFunc:uZ},pZ={kernelName:Cf,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;Zu(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...i);for(let m=1+a.length;m<o.shape.length;++m)l.push([0,0]);const c=[],u=pY({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Fx(u.shape,a,s,!1),p=Mx(d.length,a.length,!1),h=Ox(u.shape,a,s,!1),f=EU({inputs:{x:u},backend:n,attrs:{shape:d}}),C=VU({inputs:{x:f},backend:n,attrs:{perm:p}}),G=EU({inputs:{x:C},backend:n,attrs:{shape:h}});return c.push(u),c.push(f),c.push(C),c.forEach((e=>n.disposeIntermediateTensorInfo(e))),G}};const hZ={kernelName:Af,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(a.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.readSync(r.dataId),l=n.readSync(o.dataId),c=n.readSync(a.dataId),u=n.readSync(i.dataId)[0],[d,p,h,f,C]=TW(s,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],o.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([C.length],r.dtype,new Int32Array(C))]}};const fZ={kernelName:Tf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(a.shape));const i=Array.from(n.readSync(o.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,u,d]=gW(s,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};const CZ={kernelName:gf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(a.shape));const i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[c,u]=yW(i,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const GZ={kernelName:yf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(a.shape));const i=n.readSync(r.dataId),s=n.readSync(o.dataId),l=n.readSync(a.dataId),[c,u]=yW(i,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const mZ={kernelName:vf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=Bv(0,o,s);if("string"===a.dtype){const e=n.bufferSync(o),t=n.bufferSync(a),r=vC(n.readSync(i.dataId)[0]),h=CW(e,t,s,p,u,c,l,d,r,false);return n.makeTensorInfo(s,h.dtype,h.values)}const h=new qY(c,l,o.shape.length,a.shape.length,d,[p,1],false),f=n.runWebGLProgram(h,[a,o,i],a.dtype),C=EU({inputs:{x:f},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(f),C}};const AZ={kernelName:Gf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=id(i,o.shape)[0],l=pw(o,a,s),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map((e=>{const t=[...d];t[s]=e;const r=Pj({inputs:{x:o},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},TZ="return sqrt(x);",gZ=vU({opSnippet:TZ,packedOpSnippet:TZ,cpuKernelImpl:vW}),yZ={kernelName:hf,backendName:"webgl",kernelFunc:gZ},vZ={kernelName:xf,backendName:"webgl",kernelFunc:vU({opSnippet:"return x * x;"})},bZ="return (a - b) * (a - b);",xZ=bU({opSnippet:bZ,packedOpSnippet:bZ}),wZ={kernelName:bf,backendName:"webgl",kernelFunc:xZ};const kZ={kernelName:wf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");const a=_w(n.readSync(o.dataId)),i=bW(a,"string",r);return n.makeTensorInfo(o.shape,"string",i)}};const IZ={kernelName:Vf,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,a=HW+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new VW(o.shape,a);return r.runWebGLProgram(i,[o],o.dtype)}};class _Z{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=pH(n.length),a=pH(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]")))).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(e,");\n      ").concat(o," strides = ").concat(o,"(").concat(t,");\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")}}const SZ={kernelName:kf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:C,sliceDim0:G,isSimpleSlice:m,begin:A,end:T,strides:g}=$A(o.shape,a,i,s,l,c,u,d,p);let y;if(C)y=EU({inputs:{x:o},backend:n,attrs:{shape:f}});else if(G||m){Zu(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=BA(A,T,g),t=Pj({inputs:{x:o},backend:n,attrs:{begin:A,size:e}});y=EU({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=Fm(o.shape,o.dtype,e),r=xW(h,t,g,A);y=n.makeTensorInfo(f,o.dtype,r.values)}else{const e=new _Z(A,g,h);y=n.runWebGLProgram(e,[o],o.dtype)}}const v=EU({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(y),v}};const NZ={kernelName:If,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,p=n.readSync(u.dataId),h=n.readSync(d.dataId),[f,C]=wW(p,h,o,a,i,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",C)]}};const EZ={kernelName:_f,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[c,u,d]=kW(s,l,o),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const RZ={kernelName:Sf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),s=IW(i,o);return n.makeTensorInfo(a.shape,"int32",s)}},DZ=vU({opSnippet:"return tan(x);"}),FZ={kernelName:Ef,backendName:"webgl",kernelFunc:DZ},MZ=vU({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),OZ={kernelName:Rf,backendName:"webgl",kernelFunc:MZ};const LZ={kernelName:nf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:a,updates:i}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,a,o.shape),p=[d/c,c];if(0===d)return n.makeTensorInfo(o.shape,a.dtype);const h=EU({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),f=EU({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),C=EU({inputs:{x:o},backend:n,attrs:{shape:p}}),G=new qY(l,s,h.shape.length,f.shape.length,u,p,!1,!0),m=n.runWebGLProgram(G,[f,h,C],C.dtype),A=EU({inputs:{x:m},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(m),A}};class PZ{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;const r=pH(this.rank),o=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push("imod(".concat(n[o],", ").concat(e[o],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}}function zZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>vC(e))):e,r=Fm(o.shape,o.dtype,t),i=SW(r,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new PZ(o.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const BZ={kernelName:Df,backendName:"webgl",kernelFunc:zZ};class VZ{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class HZ{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function WZ(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function UZ(e){let t=1;for(;t<e;)t*=2;return t}const jZ={kernelName:Ff,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r,s=Nd().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Nd().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([o])||u<s||a>l){const e=n.readSync(o.dataId),[t,r]=NW(e,c,o.dtype,a,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[o,bq({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),p=null!==d&&d.isPacked,h=p?n.unpackTensor(o):o,f=$u(c)/u,C=EU({inputs:{x:h},attrs:{shape:[f,u]},backend:n});p&&WZ(n,h);const G=UZ(a),m=UZ(u);let A=null;const T=()=>null===A?[C,C]:[C,A],g=(e,t,r)=>{const o=T(),a=new VZ(r),i=[[u],[null===A?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=A;A=n.runWebGLProgram(a,o,"int32",i),WZ(n,s)};for(let w=1;w<G;w*=2){const e=2*w;for(let t=w;t>=1;t/=2)g(e,t,[f,m])}for(let w=m;w>G;w/=2){const e=T(),t=new HZ([f,w/2]),r=[[u],[null===A?1:0],[G]],o=A;A=n.runWebGLProgram(t,e,"int32",r),WZ(n,o);const a=G/2,i=2*a;for(let n=a;n>=1;n/=2)g(i,n,A.shape)}let y=A;A=Pj({inputs:{x:A},backend:n,attrs:{begin:0,size:[f,a]}}),WZ(n,y);let v=Hq({inputs:{x:C,indices:A},backend:n,attrs:{axis:1,batchDims:1}});WZ(n,C);const b=c.slice(0,-1);b.push(a),y=A,A=EU({inputs:{x:A},attrs:{shape:b},backend:n}),WZ(n,y);const x=v;return v=EU({inputs:{x:v},attrs:{shape:b},backend:n}),WZ(n,x),[v,A]}};class KZ{constructor(e,t,n,r,o,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(i," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const qZ={kernelName:Mf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:l,outputShape:c}=r,[u,d,p,h]=o.shape,[f,C]=null!=c?c:[d,p],G=new KZ(d,p,i,s,l,[u,f,C,h]);return n.runWebGLProgram(G,[o,a],"float32")}};const XZ={kernelName:Lf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;XV(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:c}=RW(i,o,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const YZ={kernelName:Pf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o,s=i.shape.length,l=o.shape[a],c=new Array(s-1);let u=0;for(let C=0;C<s;C++)C!==a&&(c[u++]=i.shape[C]);const d=[],p=new Array(s).fill(0),h=i.shape.slice();h[a]=1;const f=new Array(l);for(let C=0;C<f.length;C++){p[a]=C;const e=Pj({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),t=EU({inputs:{x:e},backend:n,attrs:{shape:c}});f[C]=t,d.push(e)}return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class ZZ{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];const s=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";o%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));let d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(a,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(a,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const JZ={kernelName:zf,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r,s=o.shape.length,l=[];let c=0;const u=Ig([c],s);let d=o;null!=u&&(d=VU({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(d),c=Sg(1,s)[0]);const p=kw(d.shape,c,i),h=$u([d.shape[c]]),f=EU({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(f);const C=ZC(o.dtype),G=(e,t,r,o,a)=>{const i=e.shape[0],s=e.shape[1],c=ww(s,a),u=new ZZ({windowSize:c,inSize:s,batchSize:i,numSegments:a},t),d=n.compileAndRun(u,[e,r],o);if(l.push(d),d.shape[1]===a)return d;const p=gY({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),h=zZ({inputs:{x:p},backend:n,attrs:{reps:[s/c]}});l.push(p),l.push(h);return G(d,t,h,o,a)},m=EU({inputs:{x:G(f,"unsortedSegmentSum",a,C,i)},backend:n,attrs:{shape:p}});let A=m;if(null!=u){l.push(m);const e=_g(u);A=VU({inputs:{x:A},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}},QZ=[jU,qU,YU,JU,ej,rj,oj,aj,dj,pj,fj,Gj,Aj,gj,vj,wj,kj,Sj,Nj,Ej,Fj,Bj,Vj,Hj,Wj,Yj,Qj,tK,fU,oK,pK,gK,wK,IK,_K,SK,NK,RK,FK,OK,HK,WK,UK,KK,YK,QK,$K,tq,rq,oq,iq,sq,cq,dq,hq,Cq,Aq,yq,xq,kq,Sq,Eq,Fq,Lq,Pq,Bq,Wq,jq,qq,pU,Xq,cK,Zq,Qq,eX,mU,nX,oX,aX,sX,cX,dX,hX,CX,AX,gX,vX,xX,wX,kX,SX,NX,EX,RX,DX,MX,PX,BX,YX,NU,JX,$X,tY,rY,jj,aY,lY,cY,hY,CY,gU,GY,mY,AY,TY,yY,qj,WX,bY,wY,IY,RU,NY,RY,MY,LY,BY,HY,UY,KY,YY,JY,$Y,tZ,rZ,aZ,sZ,cZ,zj,XX,dZ,pZ,hZ,fZ,CZ,GZ,mZ,AZ,yZ,vZ,wZ,kZ,IZ,SZ,NZ,EZ,RZ,KX,BU,FZ,OZ,LZ,BZ,jZ,qZ,HU,XZ,YZ,JZ,sY];for(const n of QZ)eC(n);const $Z=new class{fastaToDict(e){const t=e.split("\n"),n={};let r="",o="";return t.forEach((e=>{e.startsWith(">")?(r&&o&&(n[r]=o),r=e.slice(1).trim(),o=""):o+=e.trim()})),r&&o&&(n[r]=o),n}sortAndReturnDict(e){const t=this.fastaToDict(e),n=Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}),r={};return Object.keys(n).forEach(((e,t)=>{r[t]=e})),{alleleCallOHE:r,sortedDataDict:n}}processFastaContents(e,t,n){const{alleleCallOHE:r,sortedDataDict:o}=this.sortAndReturnDict(e),{alleleCallOHE:a,sortedDataDict:i}=this.sortAndReturnDict(t);a[Object.keys(a).length]="Short-D";const{alleleCallOHE:s,sortedDataDict:l}=this.sortAndReturnDict(n);return{vAlleleCallOHE:r,sortedIGHVDataDict:o,dAlleleCallOHE:a,sortedIGHDDataDict:i,jAlleleCallOHE:s,sortedIGHJDataDict:l}}},{vAlleleCallOHE:eJ,sortedIGHVDataDict:tJ,dAlleleCallOHE:nJ,sortedIGHDDataDict:rJ,jAlleleCallOHE:oJ,sortedIGHJDataDict:aJ}=$Z.processFastaContents("\n>IGHVF1-G1*01\nCAGGTCACCTTGAAGGAGTCTGGTCCTGTGCTGGTGAAACCCACAGAGACCCTCACGCTGACCTGCACCGTCTCTGGGTTCTCACTCAGCAATGCTAGAATGGGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACACATTTTTTCGAATGACGAAAAATCCTACAGCACATCTCTGAAGAGCAGGCTCACCATCTCCAAGGACACCTCCAAAAGCCAGGTGGTCCTTACCATGACCAATATGGACCCTGTGGACACAGCCACATATTACTGTGCATGGATAC\n>IGHVF1-G1*02\nCAGGTCACCTTGAAGGAGTCTGGTCCTGTGCTGGTGAAACCCACAGAGACCCTCACGCTGACCTGCACCGTCTCTGGGTTCTCACTCAGCAATGCTAGAATGGGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACACATTTTTTCGAATGACGAAAAATCCTACAGCACATCTCTGAAGAGCAGGCTCACCATCTCCAAGGACACCTCCAAAAGCCAGGTGGTCCTTACCATGACCAACATGGACCCTGTGGACACAGCCACATATTACTGTGCACGGATAC\n>IGHVF1-G1*03\nCAGGTCACCTTGAAGGAGTCTGGTCCTGTGCTGGTGAAACCCACAGAGACCCTCACGCTGACCTGCACCGTCTCTGGGTTCTCACTCAGCAATGCTAGAATGGGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACACATTTTTTCGAATGACGAAAAATCCTACAGCACATCTCTGAAGAGCAGGCTCACCATCTCCAAGGACACCTCCAAAAGCCAGGTGGTCCTTACCATGACCAATATGGACCCTGTGGACACAGCCACATATTACTGTGCACGGATAC\n>IGHVF1-G2*01\nCAGATCACCTTGAAGGAGTCTGGTCCTACGCTGGTGAAACCCACACAGACCCTCACGCTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAGTGGGTGTGGGCTGGATCCGTCAGCCCCCAGGAAAGGCCCTGGAGTGGCTTGCACTCATTTATTGGAATGATGATAAGCGCTACAGCCCATCTCTGAAGAGCAGGCTCACCATCACCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACATATTACTGTGCACACAGAC\n>IGHVF1-G2*02\nCAGATCACCTTGAAGGAGTCTGGTCCTACGCTGGTGAAACCCACACAGACCCTCACGCTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAGTGGGTGTGGGCTGGATCCGTCAGCCCCCAGGAAAGGCCCTGGAGTGGCTTGCACTCATTTATTGGGATGATGATAAGCGCTACAGCCCATCTCTGAAGAGCAGGCTCACCATCACCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACATATTACTGTGCACACAGAC\n>IGHVF1-G3*01\nCAGGTCACCTTGAGGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGTGTGTGAGCTGGGTCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACTCATTGATTGGGATGATGATAAATACTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGA\n>IGHVF1-G3*02\nCAGGTCACCTTGAGGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGTGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACTCATTGATTGGGATGATGATAAATACTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGATAC\n>IGHVF1-G3*03\nCAGGTCACCTTGAGGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGTGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACGCATTGATTGGGATGATGATAAATACTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGATAC\n>IGHVF1-G3*04\nCAGGTCACCTTGAAGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGCGTGTGAGCTGGATCCGTCAGCCCCCAGGTAAGGCCCTGGAGTGGCTTGCACGCATTGATTGGGATGATGATAAATTCTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGATAC\n>IGHVF1-G3*05\nCAGGTCACCTTGAAGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGCGTGCGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACGCATTGATTGGGATGATGATAAATTCTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGATAC\n>IGHVF1-G3*06\nCAGGTCACCTTGAAGGAGTCTGGTCCTGCGCTGGTGAAACCCACACAGACCCTCACACTGACCTGCACCTTCTCTGGGTTCTCACTCAGCACTAGTGGAATGCGTGTGAGCTGGATCCGTCAGCCCCCAGGGAAGGCCCTGGAGTGGCTTGCACGCATTGATTGGGATGATGATAAATTCTACAGCACATCTCTGAAGACCAGGCTCACCATCTCCAAGGACACCTCCAAAAACCAGGTGGTCCTTACAATGACCAACATGGACCCTGTGGACACAGCCACGTATTACTGTGCACGGATAC\n>IGHVF2-G4*01\nCAGGTACAGCTGCAGCAGTCAGGTCCAGGACTGGTGAAGCCCTCGCAGACCCTCTCACTCACCTGTGCCATCTCCGGGGACAGTGTCTCTAGCAACAGTGCTGCTTGGAACTGGATCAGGCAGTCCCCATCGAGAGGCCTTGAGTGGCTGGGAAGGACATACTACAGGTCCAAGTGGTATAATGATTATGCAGTATCTGTGAAAAGTCGAATAACCATCAACCCAGACACATCCAAGAACCAGTTCTCCCTGCAGCTGAACTCTGTGACTCCCGAGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF2-G4*02\nCAGGTACAGCTGCAGCAGTCAGGTCCAGGACTGGTGAAGCCCTCGCAGACCCTCTCACTCACCTGTGCCATCTCCGGGGACAGTGTCTCTAGCAACAGTGCTGCTTGGAACTGGATCAGGCAGTCCCCATCGAGAGGCCTTGAGTGGCTGGGAAGGACATACTACAGGTCCAAGTGGTATAATGATTATGCAGTATCTGTGAAAAGTTGAATAACCATCAACCCAGACACATCCAAGAACCAGTTCTCCCTGCAGCTGAACTCTGTGACTCCCGAGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF3-G5*01\nCAGGTGCAGCTACAGCAGTGGGGCGCAGGACTGTTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCGCTGTCTATGGTGGGTCCTTCAGTGGTTACTACTGGAGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGGAAATCAATCATAGTGGAAGCACCAACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCTGTGTATTACTGTGCGAGAGG\n>IGHVF3-G6*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCGCCGGGAAGGGACTGGAGTGGATTGGGCGTATCTATACCAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G6*02\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATACCAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCCGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G6*03\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATACCAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGA\n>IGHVF3-G6*04\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G6*05\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGACA\n>IGHVF3-G6*06\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTAAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G6*07\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G6*08\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGTAGTCACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G7*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTAGTTACTACTGGAGCTGGATCCGGCAGCCCGCCGGGAAGGGACTGGAGTGGATTGGGCGTATCTATACCAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G7*02\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTAGTTACTACTGGAGCTGGATCCGGCAGCCCGCCGGGAAGGGACTGGAGTGGATTGGGCGTATCTATACCAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G7*03\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCGTCAGCAGTGGTAGTTACTACTGGAGCTGGATCCGGCAGCCCGCCGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G7*04\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCGTCAGCAGTGGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G7*05\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAGGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCGTCAGCAGTGGTAGTTACTACTGGAGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCAACTACAACCCCTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCTGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G8*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTCCGGGGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTAGTAACTGGTGGAGTTGGGTCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGGAAATCTATCATAGTGGGAGCACCAACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAAGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTGCTGTGCGAGAGA\n>IGHVF3-G8*02\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTCCGGGGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTAGTAACTGGTGGAGTTGGGTCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGGAAATCTATCATAGTGGGAGCACCAACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAAGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G8*03\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGGGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTAGTAACTGGTGGAGTTGGGTCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGGAAATCTATCATAGTGGGAGCACCAACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAAGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G8*04\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGGGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTAACTGGTGGAGTTGGGTCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGGAAATCTATCATAGTGGGAGCACCAACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAAGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G9*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTAGTAACTGGTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATTATAGTGGGAGCATCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGTGGACACGGCCGTGTATTACTGTGCGAGAAA\n>IGHVF3-G9*02\nCAGGTACAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGACACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTAGTAACTGGTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGTGGACACGGCCGTGTATTACTGTGCGAGAAA\n>IGHVF3-G9*03\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGACACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTAGTAACTGGTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATTATAGTGGGAGCATCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGTGGACACGGCCGTGTATTACTGTGCGAGAAA\n>IGHVF3-G9*04\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGACACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTAGTAACTGGTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGTGGACACGGCCGTGTATTACTGTGCGAGAAA\n>IGHVF3-G9*04_A319G\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGACACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTAGTAACTGGTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGACTGGAGTGGATTGGGTACATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATGTCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGTGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G10*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTTACTCCATCAGCAGTGGTTACTACTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATCATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G10*02\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTTACTCCATCAGCAGTGGTTACTACTGGGGCTGGATCCGGCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATCATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G10*03\nCAGCTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTAGTAGTTACTACTGGGGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G10*04\nCAGCTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTAGTAGTTACTACTGGGGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCAGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G10*05\nCAGCTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTAGTAGTTACTACTGGGGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCCGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCTGTGTATTACTGTGCAAGAC\n>IGHVF3-G10*06\nCAGCTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTAGTAGTTACTACTGGGGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCCGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCTGTGTATTACTGTGCGAGACA\n>IGHVF3-G10*07\nCAGCTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCGGAGACCCTGTCCCTCACGTGCACTGTCTCTGGTGGCTCCATCAGCAGTAGTAGTTACTACTGGGGCTGGATCCGCCAGCCCCCAGGGAAGGGGCTGGAGTGGATTGGGAGTATCTATTATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCCGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCAGACACGGCTGTGTATTACTGTGCGAGAC\n>IGHVF3-G11*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTACTGGAGCTGGATCCGCCAGCACCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCTAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF3-G11*02\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTACTGGAGCTGGATCCGCCAGCACCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCTAGTTACCATATCAGTAGACACGTCTAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G11*03\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTACTGGAGCTGGATCCGCCAGCACCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCTAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF3-G11*04\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTACTGGAGTTGGATCCGCCAGCCCCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCAGACACGGCCGTGTATTACTGTGCCAGAG\n>IGHVF3-G11*05\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTGATTACTACTGGAGTTGGATCCGCCAGCCCCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCAGACACGGCCGTGTATTACTGTGCCAGAGA\n>IGHVF3-G11*06\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCACTGTCTCTGGTGGCTCCATCAGCAGTGGTGATTACTACTGGAGCTGGATCCGCCAGCCCCCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCAGACACGGCCGTGTATTACTGTGCCAGAG\n>IGHVF3-G12*01\nCAGGTGCAGCTGCAGGAGTCGGGCCCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTCCTGGAGCTGGATCCGGCAGCCACCAGGGAAGGGACTGGAGTGGATTGGGTATATCTATTACAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCCAGAGA\n>IGHVF3-G12*02\nCAGCTGCAGCTGCAGGAGTCCGGCTCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTCCTGGAGCTGGATCCGGCAGCCACCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATCATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTTACCATATCAGTAGACACGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACTGCCGCAGACACGGCCGTGTATTACTGTGCCAGAGA\n>IGHVF3-G12*03\nCAGCTGCAGCTGCAGGAGTCCGGCTCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTCCTGGAGCTGGATCCGGCAGCCACCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATCATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAGGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCCAGAGA\n>IGHVF3-G12*04\nCAGCTGCAGCTGCAGGAGTCCGGCTCAGGACTGGTGAAGCCTTCACAGACCCTGTCCCTCACCTGCGCTGTCTCTGGTGGCTCCATCAGCAGTGGTGGTTACTCCTGGAGCTGGATCCGGCAGTCACCAGGGAAGGGCCTGGAGTGGATTGGGTACATCTATCATAGTGGGAGCACCTACTACAACCCGTCCCTCAAGAGTCGAGTCACCATATCAGTAGACAGGTCCAAGAACCAGTTCTCCCTGAAGCTGAGCTCTGTGACCGCCGCGGACACGGCCGTGTATTACTGTGCCAGAGA\n>IGHVF4-G13*01\nGAAGTGCAGCTGGTGCAGTCTGGAGCAGAGGTGAAAAAGCCCGGGGAGTCTCTGAGGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCAGCTGGGTGCGCCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGAGGATTGATCCTAGTGACTCTTATACCAACTACAGCCCGTCCTTCCAAGGCCACGTCACCATCTCAGCTGACAAGTCCATCAGCACTGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGACA\n>IGHVF4-G13*02\nGAAGTGCAGCTGGTGCAGTCCGGAGCAGAGGTGAAAAAGCCCGGGGAGTCTCTGAGGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCAGCTGGGTGCGCCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGAGGATTGATCCTAGTGACTCTTATACCAACTACAGCCCGTCCTTCCAAGGCCACGTCACCATCTCAGCTGACAAGTCCATCAGCACTGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGACA\n>IGHVF4-G14*01\nGAGGTGCAGCTGGTGCAGTCTGGAGCAGAGGTGAAAAAGCCCGGGGAGTCTCTGAAGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCGGCTGGGTGCACCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGATCATCTATCCTGGTGACTCTGATACCAGATACAGCCCGTCCTTCCAAGGCCAGGTCACCATCTCAGCCGACAAGTCCATCAGCACCGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGACA\n>IGHVF4-G14*02\nGAGGTGCAGCTGGTGCAGTCTGGAGCAGAGGTGAAAAAGCCGGGGGAGTCTCTGAAGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCGGCTGGGTGCGCCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGATCATCTATCCTGGTGACTCTGATACCAGATACAGCCCGTCCTTCCAAGGCCAGGTTACCATCTCAGCCGACAAGTCCATCAGCACCGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGA\n>IGHVF4-G14*03\nGAGGTGCAGCTGGTGCAGTCTGGAGCAGAGGTGAAAAAGCCCGGGGAGTCTCTGAAGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCGGCTGGGTGCGCCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGATCATCTATCCTGGTGACTCTGATACCAGATACAGCCCGTCCTTCCAAGGCCAGGTCACCATCTCAGCCGACAAGTCCATCAGCACCGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGACA\n>IGHVF4-G14*04\nGAGGTGCAGCTGGTGCAGTCTGGAGCAGAGGTGAAAAAGCCGGGGGAGTCTCTGAAGATCTCCTGTAAGGGTTCTGGATACAGCTTTACCAGCTACTGGATCGGCTGGGTGCGCCAGATGCCCGGGAAAGGCCTGGAGTGGATGGGGATCATCTATCCTGGTGACTCTGATACCAGATACAGCCCGTCCTTCCAAGGCCAGGTCACCATCTCAGCCGACAAGTCCATCAGCACCGCCTACCTGCAGTGGAGCAGCCTGAAGGCCTCGGACACCGCCATGTATTACTGTGCGAGACA\n>IGHVF5-G15*01\nCAGGTGCAGCTGGTGCAGTCTGGCCATGAGGTGAAGCAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGTTACAGTTTCACCACCTATGGTATGAATTGGGTGCCACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGTTCAACACCTACACTGGGAACCCAACATATGCCCAGGGCTTCACAGGACGGTTTGTCTTCTCCATGGACACCTCTGCCAGCACAGCATACCTGCAGATCAGCAGCCTAAAGGCTGAGGACATGGCCATGTATTACTGTGCGAGATA\n>IGHVF5-G16*01\nCAGGTGCAGCTGGTGCAATCTGGGTCTGAGTTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGAATTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACACCAACACTGGGAACCCAACGTATGCCCAGGGCTTCACAGGACGGTTTGTCTTCTCCTTGGACACCTCTGTCAGCACGGCATATCTGCAGATCTGCAGCCTAAAGGCTGAGGACACTGCCGTGTATTACTGTGCGAGAGA\n>IGHVF5-G16*02\nCAGGTGCAGCTGGTGCAATCTGGGTCTGAGTTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGAATTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACACCAACACTGGGAACCCAACGTATGCCCAGGGCTTCACAGGACGGTTTGTCTTCTCCTTGGACACCTCTGTCAGCACGGCATATCTGCAGATCAGCAGCCTAAAGGCTGAGGACACTGCCGTGTATTACTGTGCGAGAGA\n>IGHVF5-G16*03\nCAGGTGCAGCTGGTGCAATCTGGGTCTGAGTTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGAATTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACACCAACACTGGGAACCCAACGTATGCCCAGGGCTTCACAGGACGGTTTGTCTTCTCCTTGGACACCTCTGTCAGCATGGCATATCTGCAGATCAGCAGCCTAAAGGCTGAGGACACTGCCGTGTATTACTGTGCGAGAGA\n>IGHVF5-G16*04\nCAGGTGCAGCTGGTGCAATCTGGGTCTGAGTTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGAATTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACACCAACACTGGGAACCCAACGTATGCCCAGGGCTTCACAGGACGGTTTGTCTTCTCCTTGGACACCTCTGTCAGCATGGCATATCTGCAGATCAGCAGCCTAAAGGCTGAGGACACTGCCGTGTGTTACTGTGCGAGAGA\n>IGHVF6-G17*01\nCAGGTCCAGCTGGTACAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGTTTCCGGATACACCCTCACTGAATTATCCATGCACTGGGTGCGACAGGCTCCTGGAAAAGGGCTTGAGTGGATGGGAGGTTTTGATCCTGAAGATGGTGAAACAATCTACGCACAGAAGTTCCAGGGCAGAGTCACCATGACCGAGGACACATCTACAGACACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCAACAGA\n>IGHVF6-G18*01\nGAGGTCCAGCTGGTACAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCTACAGTGAAAATCTCCTGCAAGGTTTCTGGATACACCTTCACCGACTACTACATGCACTGGGTGCAACAGGCCCCTGGAAAAGGGCTTGAGTGGATGGGACTTGTTGATCCTGAAGATGGTGAAACAATATACGCAGAGAAGTTCCAGGGCAGAGTCACCATAACCGCGGACACGTCTACAGACACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCAACAGA\n>IGHVF6-G19*01\nCAAATGCAGCTGGTGCAGTCTGGGCCTGAAGTGAAGAAGCCTGGGACCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATTCACCTTTACTAGCTCTGCTGTGCAGTGGGTGCGACAGGCTCGTGGACAACGCCTTGAGTGGATAGGATGGATCGTCGTTGGCAGTGGTAACACAAACTACGCACAGAAGTTCCAGGAAAGAGTCACCATTACCAGGGACATGTCCACAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCCGAGGACACGGCCGTGTATTACTGTGCGGCAG\n>IGHVF6-G19*02\nCAAATGCAGCTGGTGCAGTCTGGGCCTGAGGTGAAGAAGCCTGGGACCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATTCACCTTTACTAGCTCTGCTGTGCAGTGGGTGCGACAGGCTCGTGGACAACGCCTTGAGTGGATAGGATGGATCGTCGTTGGCAGTGGTAACACAAACTACGCACAGAAGTTCCAGGAAAGAGTCACCATTACCAGGGACATGTCCACAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCCGAGGACACGGCCGTGTATTACTGTGCGGCAGA\n>IGHVF6-G19*03\nCAAATGCAGCTGGTGCAGTCTGGGCCTGAGGTGAAGAAGCCTGGGACCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATTCACCTTTACTAGCTCTGCTATGCAGTGGGTGCGACAGGCTCGTGGACAACGCCTTGAGTGGATAGGATGGATCGTCGTTGGCAGTGGTAACACAAACTACGCACAGAAGTTCCAGGAAAGAGTCACCATTACCAGGGACATGTCCACAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCCGAGGACACGGCCGTGTATTACTGTGCGGCAGA\n>IGHVF6-G20*01\nCAGATGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGACTGGGTCCTCAGTGAAGGTTTCCTGCAAGGCTTCCGGATACACCTTCACCTACCGCTACCTGCACTGGGTGCGACAGGCCCCCGGACAAGCGCTTGAGTGGATGGGATGGATCACACCTTTCAATGGTAACACCAACTACGCACAGAAATTCCAGGACAGAGTCACCATTACCAGGGACAGGTCTATGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACAGCCATGTATTACTGTGCAAGATA\n>IGHVF6-G20*02\nCAGATGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGACTGGGTCCTCAGTGAAGGTTTCCTGCAAGGCTTCCGGATACACCTTCACCTACCGCTACCTGCACTGGGTGCGACAGGCCCCCAGACAAGCGCTTGAGTGGATGGGATGGATCACACCTTTCAATGGTAACACCAACTACGCACAGAAATTCCAGGACAGAGTCACCATTACCAGGGACAGGTCTATGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACAGCCATGTATTACTGTGCAAGATA\n>IGHVF6-G21*01\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGATGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*02\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCAGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF6-G21*03\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*04\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*05\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*06\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*07\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*08\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF6-G21*09\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*10\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCACGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*11\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCTTTGGTACAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACGAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*12\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAGGGATCATCCCTATCCTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*13\nCAGGTCCAGCTGGTGCAATCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATACTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCCTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*14\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCTTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF6-G21*15\nCAGGTCCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCCTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G21*16\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGTCCTCGGTGAAGGTCTCCTGCAAGGCTTCTGGAGGCACCTTCAGCAGCTATGCTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAAGGATCATCCCTATCCTTGGTATAGCAAACTACGCACAGAAGTTCCAGGGCAGAGTCACGATTACCGCGGACAAATCCACGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G22*01\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCAGCTATGATATCAACTGGGTGCGACAGGCCACTGGACAAGGGCTTGAGTGGATGGGATGGATGAACCCTAACAGTGGTAACACAGGCTATGCACAGAAGTTCCAGGGCAGAGTCACCATTACCAGGAACACCTCCATAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGG\n>IGHVF6-G22*02\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCAGTTATGATATCAACTGGGTGCGACAGGCCACTGGACAAGGGCTTGAGTGGATGGGATGGATGAACCCTAACAGTGGTAACACAGGCTATGCACAGAAGTTCCAGGGCAGAGTCACCATGACCAGGAACACCTCCATAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGG\n>IGHVF6-G22*03\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCAGCTATGATATCAACTGGGTGCGACAGGCCACTGGACAAGGGCTTGAGTGGATGGGATGGATGAACCCTAACAGTGGTAACACAGGCTATGCACAGAAGTTCCAGGGCAGAGTCACCATGACCAGGAACACCTCCATAAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGG\n>IGHVF6-G23*01\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCATCTGGATACACCTTCACCAGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAATAATCAACCCTAGTGGTGGTAGCACAAGCTACGCACAGAAGTTGCAGGGCAGAGTCACCATGACCAGGGACACGTCCACGAGCACAGTCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G23*02\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCATCTGGATACACCTTCACCAGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAATAATCAACCCTAGTGGTGGTAGCACAAGCTACGCACAGAAGTTCCAGGGCAGAGTCACCATGACCAGGGACACGTCCACGAGCACAGTCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G23*03\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCATCTGGATACACCTTCACCAGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGAATAATCAACCCTAGTGGTGGTAGCACAAGCTACGCACAGAAGTTCCAGGGCAGAGTCACCATGACCAGGGACACGTCCACGAGCACAGTCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACACGGCCGTGTATTACTGTGCTAGAGA\n>IGHVF6-G24*01\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCGGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGACGGATCAACCCTAACAGTGGTGGCACAAACTATGCACAGAAGTTTCAGGGCAGGGTCACCATGACCAGGGACACGTCCATCAGCACAGCCTACATGGAGCTGAGCAGGCTGAGATCTGACGACACGGTCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G24*02\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCGGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGACGGATCAACCCTAACAGTGGTGGCACAAACTATGCACAGAAGTTTCAGGGCAGGGTCACCATGACCAGGGACACGTCCATCAGCACAGCCTACATGGAGCTGAGCAGGCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF6-G24*03\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCGGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACCCTAACAGTGGTGGCACAAACTATGCACATAAGTTTCAGGGCAGGGTCACCATGACCAGGGACACGTCCATCAGCACAGCCTACATGGAGCTGAGCAGGCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G24*04\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCGGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACCCTAACAGTGGTGGCACAAACTATGCACAGAAGTTTCAGGGCAGGGTCACCATGACCAGGGACACGTCCATCAGCACAGCCTACATGGAGCTGAGCAGGCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G24*05\nCAGGTGCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGATACACCTTCACCGGCTACTATATGCACTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAACCCTAACAGTGGTGGCACAAACTATGCACAGAAGTTTCAGGGCTGGGTCACCATGACCAGGGACACGTCCATCAGCACAGCCTACATGGAGCTGAGCAGGCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G25*01\nCAGGTTCAGCTGGTGCAGTCTGGAGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGTTACACCTTTACCAGCTACGGTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAGCGCTTACAATGGTAACACAAACTATGCACAGAAGCTCCAGGGCAGAGTCACCATGACCACAGACACATCCACGAGCACAGCCTACATGGAGCTGAGGAGCCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G25*02\nCAGGTTCAGCTGGTGCAGTCTGGAGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGTTACACCTTTACCAGCTATGGTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAGCGCTTACAATGGTAACACAAACTATGCACAGAAGCTCCAGGGCAGAGTCACCATGACCACAGACACATCCACGAGCACAGCCTACATGGAGCTGAGGAGCCTGAGATCTGACGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G25*03\nCAGGTTCAGCTGGTGCAGTCTGGAGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTCTCCTGCAAGGCTTCTGGTTACACCTTTACCAGCTATGGTATCAGCTGGGTGCGACAGGCCCCTGGACAAGGGCTTGAGTGGATGGGATGGATCAGCGCTTACAATGGTAACACAAACTATGCACAGAAGCTCCAGGGCAGAGTCACCATGACCACAGACACATCCACGAGCACAGCCTACATGGAGCTGAGGAGCCTGAGATCTGACGACATGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF6-G26*01\nCAGGTTCAGCTGGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGCATTGGGTGCGCCAGGCCCCCGGACAAAGGCTTGAGTGGATGGGATGGAGCAACGCTGGCAATGGTAACACAAAATATTCACAGGAGTTCCAGGGCAGAGTCACCATTACCAGGGACACATCCGCGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAGGACATGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF6-G26*02\nCAGGTCCAGCTTGTGCAGTCTGGGGCTGAGGAGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGCATTGGGTGCGCCAGGCCCCCGGACAAAGGCTTGAGTGGATGGGATGGATCAACGCTGGCAATGGTAACACAAAATATTCACAGAAGTTCCAGGGCAGAGTCACCATTACCAGGGACACATCCGCGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAAGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF6-G26*03\nCAGGTCCAGCTTGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGCATTGGGTGCGCCAGGCCCCCGGACAAAGGCTTGAGTGGATGGGATGGATCAACGCTGGCAATGGTAACACAAAATATTCACAGAAGTTCCAGGGCAGAGTCACCATTACCAGGGACACATCCGCGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAAGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF6-G26*04\nCAGGTCCAGCTTGTGCAGTCTGGGGCTGAGGTGAAGAAGCCTGGGGCCTCAGTGAAGGTTTCCTGCAAGGCTTCTGGATACACCTTCACTAGCTATGCTATGCATTGGGTGCGCCAGGCCCCCGGACAAAGGCTTGAGTGGATGGGATGGATCAACACTGGCAATGGTAACACAAAATATTCACAGAAGTTCCAGGGCAGAGTCACCATTACCAGGGACACATCCGCGAGCACAGCCTACATGGAGCTGAGCAGCCTGAGATCTGAAGACACGGCTGTGTATTACTGTGCGAGAG\n>IGHVF7-G27*01\nGAGGCCCAGCTTACAGAGTCTGGGGGAGACTTGGTACACTTAGAGGGGCCCCTGAGGCTCTCCTGTGCAGCCTCTTGGTTCACCTTCAGTATCTATGAGATTCACTGGGTTTGCCAGGCCTCAGGGAAGGGGCTGGAATGGGTTGCAGTTATATGGCGTGGTGAAAGTCATCAATACAATGCAGACTATGTTAGGGGCAGACTCACCACTTCCAGAGACAACACCAAGTACGTGCTGTACATGCAAATGAACAGCCTGAGAACCCAGAACATGGCAGCATTTAACTGTGCAGGAAA\n>IGHVF7-G27*02\nGAGGCCCAGCTTACAGAGTCTGGGGGAGACTTGGTACACTGAGAGGGGCCCCTGAGGCTCTCCTGTGCAGCCTCTTGGTTCACCTTCAGTATCTATGAGATTCACTGGGTTTGCCAGGCCTCAGGGAAGGGGCTGGAATGGGTTGCAGTTATATGGCGTGGTGAAAGTCATCAATACAATGCAGACTATGTTAGGGGCAGACTCACCACTTCCAGAGACAACACCAAGTACATGCTGTACATGCAAATGAACAGCCTGAGAACCCAGAACATGGCAGCATTTAACTGTGCAGGAAA\n>IGHVF7-G27*03\nGAGGCCCAGCTTACAGAGTCTGGGGGAGACTTGGTACACTTAGAGGGGCCCCTGAGGCTCTCCTGTGCAGCCTCTTGGTTCACCTTCAGTATCTATGAGATTCACTGGGTTTGCCAGGCCTCAGGGAAGGGGCTGGAATGGGTTGCAGTTATATGGCGTGGTGAAAGTCATCAATACAATGCAGACTATGTTAGGGGCAGACTCACCACTTCCAGAGACAACACCAAGTACATGCTGTACATGCAAATGATCAGCCTGAGAACCCAGAACATGGCAGCATTTAACTGTGCAGGAAA\n>IGHVF7-G27*04\nGAGGCCCAGCTTACAGAGTCTGGGGGAGACTTGGTACACTTAGAGGGGCCCCTGAGGCTCTCCTGTGCAGCCTCTTGGTTCACCTTCAGTATCTATGAGATTCACTGGGTTTGCCAGGCCTCAGGGAAGGGGCTGGAATGGGTTGCAGTTATATGGCGTGGTGAAAGTCATCAATACAATGCAGACTATGTTAGGGGCAGACTCACCACTTCCAGAGACAACACCAAGTACATGCTGTACATGCAAATGAACAGCCTGAGAACCCAGAACATGGCAGCATTTAACTGTGCAGGAAA\n>IGHVF8-G28*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACCACTACATGGACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTGGCCGTACTAGAAACAAAGCTAACAGTTACACCACAGAATACGCCGCGTCTGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCAAAGAACTCACTGTATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCGTGTATTACTGTGCTAGAGA\n>IGHVF8-G29*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAAACTCTCCTGTGCAGCCTCTGGGTTCACCTTCAGTGGCTCTGCTATGCACTGGGTCCGCCAGGCTTCCGGGAAAGGGCTGGAGTGGGTTGGCCGTATTAGAAGCAAAGCTAACAGTTACGCGACAGCATATGCTGCGTCGGTGAAAGGCAGGTTCACCATCTCCAGAGATGATTCAAAGAACACGGCGTATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCGTGTATTACTGTACTAGACA\n>IGHVF8-G29*02\nGAGGTGCAGCTGGTGGAGTCCGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAAACTCTCCTGTGCAGCCTCTGGGTTCACCTTCAGTGGCTCTGCTATGCACTGGGTCCGCCAGGCTTCCGGGAAAGGGCTGGAGTGGGTTGGCCGTATTAGAAGCAAAGCTAACAGTTACGCGACAGCATATGCTGCGTCGGTGAAAGGCAGGTTCACCATCTCCAGAGATGATTCAAAGAACACGGCGTATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCGTGTATTACTGTACTAGACA\n>IGHVF8-G30*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAAAGCCAGGGCGGTCCCTGAGACTCTCCTGTACAGCTTCTGGATTCACCTTTGGTGATTATGCTATGAGCTGGTTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTAGGTTTCATTAGAAGCAAAGCTTATGGTGGGACAACAGAATACGCCGCGTCTGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCCAAAAGCATCGCCTATCTGCAAATGAACAGCCTGAAAACCGAGGACACAGCCGTGTATTACTGTACTAGAGA\n>IGHVF8-G30*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCAGGGCGGTCCCTGAGACTCTCCTGTACAGCTTCTGGATTCACCTTTGGTGATTATGCTATGAGCTGGTTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTAGGTTTCATTAGAAGCAAAGCTTATGGTGGGACAACAGAATACGCCGCGTCTGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCCAAAAGCATCGCCTATCTGCAAATGAACAGCCTGAAAACCGAGGACACAGCCGTGTATTACTGTACTAGAGA\n>IGHVF8-G30*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCAGGGCGGTCCCTGAGACTCTCCTGTACAGCTTCTGGATTCACCTTTGGTGATTATGCTATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTAGGTTTCATTAGAAGCAAAGCTTATGGTGGGACAACAGAATACGCCGCGTCTGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCCAAAAGCATCGCCTATCTGCAAATGAACAGCCTGAAAACCGAGGACACAGCCGTGTATTACTGTACTAGAGA\n>IGHVF8-G31*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAAAGCCTGGGGGGTCCCTTAGACTCTCCTGTGCAGCCTCTGGATTCACTTTCAGTAACGCCTGGATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTGGCCGTATTAAAAGCAAAACTGATGGTGGGACAACAGACTACGCTGCACCCGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCAAAAAACACGCTGTATCTGCAAATGAACAGCCTGAAAACCGAGGACACAGCCGTGTATTACTGTACCACAGA\n>IGHVF8-G31*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAAAGCCTGGGGGGTCCCTTAGACTCTCCTGTGCAGCCTCTGGTTTCACTTTCAGTAACGCCTGGATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCGGCCGTATTAAAAGCAAAACTGATGGTGGGACAACAGACTACGCTGCACCCGTGAAAGGCAGATTCACCATCTCAAGAGATGATTCAAAAAACACGCTGTATCTGCAAATGAACAGCCTGAAAACCGAGGACACAGCCGTGTATTACTGTACCACAGA\n>IGHVF9-G32*01\nGAGACGCAGCTGGTGGAGTCTGGGGGAGGCTTGGCAAAGCCTGGGCGGTCCCCGAGACTCTCCTGTGCAGCCTCTCAATTCACCTTCAGTAGCTACTACATGAACTGTGTCCGCCAGGCTCCAGGGAATGGGCTGGAGTTGGTTGGACAAGTTAATCCTAATGGGGGTAGCACATACCTCATAGACTCCGGTAAGGACCGATTCAATACCTCCAGAGATAACGCCAAGAACACACTTCATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCCTGTATTACTGTACCAGAGA\n>IGHVF9-G32*02\nGAGATGCAGCTGGTGGAGTCTGGGGGAGGCTTGGCAAAGCCTGCGTGGTCCCCGAGACTCTCCTGTGCAGCCTCTCAATTCACCTTCAGTAGCTACTACATGAACTGTGTCCGCCAGGCTCCAGGGAATGGGCTGGAGTTGGTTGGACAAGTTAATCCTAATGGGGGTAGCACATACCTCATAGACTCCGGTAAGGACCGATTCAATACCTCCAGAGATAACGCCAAGAACACACTTCATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCCTGTATTAGTGTACCAGAGA\n>IGHVF9-G32*03\nGAGATGCAGCTGGTGGAGTCTGGGGGAGGCTTGGCAAAGCCTGCGTGGTCCCCGAGACTCTCCTGTGCAGCCTCTCAATTCACCTTCAGTAGCTACTACATGAACTGTGTCCGCCAGGCTCCAGGGAATGGGCTGGAGTTGGTTTGACAAGTTAATCCTAATGGGGGTAGCACATACCTCATAGACTCCGGTAAGGACCGATTCAATACCTCCAGAGATAACGCCAAGAACACACTTCATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCCTCTATTAGTGTACCAGAGA\n>IGHVF9-G32*04\nGAGATGCAGCTGGTGGAGTCTGGGGGAGGCTTGGCAAAGCCTGCGTGGTCCCCGAGACTCTCCTGTGCAGCCTCTCAATTCACCTTCAGTAGCTACTACATGAACTGTGTCCGCCAGGCTCCAGGGAATGGGCTGGAGTTGGTTGGACAAGTTAATCCTAATGGGGGTAGCACATACCTCATAGACTCCGGTAAGGACCGATTCAATACCTCCAGAGATAACGCCAAGAACACACTTCATCTGCAAATGAACAGCCTGAAAACCGAGGACACGGCCCTCTATTAGTGTACCAGAGA\n>IGHVF10-G33*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTACGACATGCACTGGGTCCGCCAAGCTACAGGAAAAGGTCTGGAGTGGGTCTCAGCTATTGGTACTGCTGGTGACACATACTATCCAGGCTCCGTGAAGGGCCGATTCACCATCTCCAGAGAAAATGCCAAGAACTCCTTGTATCTTCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCAAGAG\n>IGHVF10-G33*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTACGACATGCACTGGGTCCGCCAAGCTACAGGAAAAGGTCTGGAGTGGGTCTCAGCTATTGGTACTGCTGGTGACCCATACTATCCAGGCTCCGTGAAGGGCCGATTCACCATCTCCAGAGAAAATGCCAAGAACTCCTTGTATCTTCAAATGAACAGCCTGAGAGCCGGGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF10-G33*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTACGACATGCACTGGGTCCGCCAAGCTACAGGAAAAGGTCTGGAGTGGGTCTCAGCTATTGGTACTGCTGGTGACACATACTATCCAGGCTCCGTGAAGGGCCGATTCACCATCTCCAGAGAAAATGCCAAGAACTCCTTGTATCTTCAAATGAACAGCCTGAGAGCCGGGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF10-G33*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTACGACATGCACTGGGTCCGCCAAGCTACAGGAAAAGGTCTGGAATGGGTCTCAGCTATTGGTACTGCTGGTGACACATACTATCCAGGCTCCGTGAAGGGCCGATTCACCATCTCCAGAGAAAATGCCAAGAACTCCTTGTATCTTCAAATGAACAGCCTGAGAGCCGGGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF10-G34*01\nGAGGATCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGCGACCCTCCTGTGCAGCCTCTGGATTCGCCTTCAGTAGCTATGCTCTGCACTGGGTTCGCCGGGCTCCAGGGAAGGGTCTGGAGTGGGTATCAGCTATTGGTACTGGTGGTGATACATACTATGCAGACTCCGTGATGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAAGTCCTTGTATCTTCATATGAACAGCCTGATAGCTGAGGACATGGCTGTGTATTATTGTGCAAGAGA\n>IGHVF10-G34*02\nGAGGATCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACCCTCCTGTGCAGCCTCTGGATTCGCCTTCAGTAGCTATGTTCTGCACTGGGTTCGCCGGGCTCCAGGGAAGGGTCCGGAGTGGGTATCAGCTATTGGTACTGGTGGTGATACATACTATGCAGACTCCGTGATGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAAGTCCTTGTATCTTCAAATGAACAGCCTGATAGCTGAGGACATGGCTGTGTATTATTGTGCAAGAGA\n>IGHVF10-G35*01\nGAGGTGCAGCTGGTGGAGTCTCGGGGAGTCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAATGAGATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGTCTGGAGTGGGTCTCATCCATTAGTGGTGGTAGCACATACTACGCAGACTCCAGGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGCATCTTCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTAAGAAAGA\n>IGHVF10-G35*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTAGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAATGAGATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGTCTGGAGTGGGTCTCATCCATTAGTGGTGGTAGCACATACTACGCAGACTCCAGGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAACCTGAGAGCTGAGGGCACGGCCGTGTATTACTGTGCCAGATATA\n>IGHVF10-G35*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTAGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAATGAGATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTGGTGGTAGCACATACTACGCAGACTCCAGGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAACCTGAGAGCTGAGGGCACGGCCGCGTATTACTGTGCCAGATATA\n>IGHVF10-G35*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTAGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAATGAGATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTGGTGGTAGCACATACTACGCAGACTCCAGGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAACCTGAGAGCTGAGGGCACGGCCGTGTATTACTGTGCCAGATATA\n>IGHVF10-G36*01\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCGTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGTAGCACATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAAAGA\n>IGHVF10-G37*01\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAAAG\n>IGHVF10-G37*02\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTAGAGTGGGTGGCAGTTATATCATATGATGGAAGTAATAAATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G37*03\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGCAATAAATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G37*04\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGTAATAAATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G37*05\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCGTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGCAATAAATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAG\n>IGHVF10-G37*06\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G37*07\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATCATATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAAAGA\n>IGHVF10-G37*08\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCGTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCATTTATACGGTATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAAAGA\n>IGHVF10-G37*09\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATGGTATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAG\n>IGHVF10-G37*10\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCGTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATGGTATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G37*11\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTCCAGCCTGGGAGGTCCCTGAGACTCTCCTGTGCAGCGTCTGGATTCACCTTCAGTAGCTATGGCATGCACTGGGTCCGCCAGGCTCCAGGCAAGGGGCTGGAGTGGGTGGCAGTTATATGGTATGATGGAAGTAATAAATACTATGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAAAGA\n>IGHVF10-G38*01\nGAGGTGCAGCTGGTGGAGTCTGGGGAAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATATTATGCAGACTCTGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGGGCAGCCTGAGAGCTGAGGACATGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G38*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATATTATGCAAACTCTGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGGGCAGCCTGAGAGCTGAGGACATGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G38*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATATTATGCAGACTCTGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGGGCAGCCTGAGAGCTGAGGACATGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G38*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTTCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATACTACGCAGACTCAGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAGCAGTCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGTGAAAGA\n>IGHVF10-G38*05\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTTCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATACTACGCAGACTCCGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAGCAGTCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGTGAAAGA\n>IGHVF10-G38*06\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTTCAGCCTCTGGATTCACCTTCAGTAGCTATGCTATGCACTGGGTCCGCCAGGCTCCAGGGAAGGGACTGGAATATGTTTCAGCTATTAGTAGTAATGGGGGTAGCACATACTACGCAGACTCCGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACTCTGTATCTTCAAATGAGCAGTCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGTGAAAGA\n>IGHVF10-G39*01\nGAGGTGCAGCTGGTGGAGTCCGGGGGAGGCTTAGTTCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTACTGGATGCACTGGGTCCGCCAAGCTCCAGGGAAGGGGCTGGTGTGGGTCTCACGTATTAATAGTGATGGGAGTAGCACAAGCTACGCGGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACACGCTGTATCTGCAAATGAACAGTCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCAAGAGA\n>IGHVF10-G40*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCAGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G40*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G40*03\nGAGGTGCAGCTGGTGGAGTCTGGAGGAGGCTTGATCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGGTTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCTGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCTGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G40*04\nGAGGTGCAGCTGGTGGAGTCTGGAGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGGTTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGACACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCTGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G40*05\nGAGGTGCAGCTGGTGGAGACTGGAGGAGGCTTGATCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGGTTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCTGAGGACACGGCCGTGTATTACTGTGCGAGAG\n>IGHVF10-G40*06\nGAGGTGCAGCTGGTGGAGTCTGGAGGAGGCTTGATCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGGTTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G40*07\nGAGGTGCAGCTGGTGGAGACTGGAGGAGGCTTGATCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGGTTCACCGTCAGTAGCAACTACATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGATTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTTCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G41*01\nGAGGTGCAGCTGTTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGCAGCTATGCCATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGTTATTTATAGCGGTGGTAGTAGCACATACTATGCAGACTCCGTGAAGGGCCGGTTCACCATCTCCAGAGATAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTATATTACTGTGCGAAAGA\n>IGHVF10-G41*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGCAGCTATGCCATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGCTATTAGTGGTAGTGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGGTTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTATATTACTGTGCGAAAGA\n>IGHVF10-G41*03\nGAGGTGCAGCTGTTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGCAGCTATGCCATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCAGCTATTAGTGGTAGTGGTGGTAGCACATACTACGCAGACTCCGTGAAGGGCCGGTTCACCATCTCCAGAGACAATTCCAAGAACACGCTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTATATTACTGTGCGAAAGA\n>IGHVF10-G42*01\nGAAATGCAGCTGGTGGAGTCTGGGGGAGTCGTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGTCAAGCTCCGGGGAAGGGTCTGGAGTGGGTCTCTCTTATTAGTTGGGATGGTGGTAGCACATACTATGCAGACTCTGTGAAGGGTCGATTCACCATCTCCAGAGACAACAGCAAAAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACCGCCTTGTATTACTGTGCAAAAGAT\n>IGHVF10-G42*02\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGTCGTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGTCAAGCTCCGGGGAAGGGTCTGGAGTGGGTCTCTCTTATTAGTTGGGATGGTGGTAGCACCTACTATGCAGACTCTGTGAAGGGTCGATTCACCATCTCCAGAGACAACAGCAAAAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACCGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G42*03\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGTCGTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGTCAAGCTCCGGGGAAGGGTCTGGAGTGGGTCTCTCTTATTAGTTGGGATGGTGGTAGCACATACTATGCAGACTCTGTGAAGGGTCGATTCACCATCTCCAGAGACAACAGCAAAAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACCGCCTTGTATTACTGTGCAAAAGAT\n>IGHVF10-G42*04\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGTCGTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATACCATGCACTGGGTCCGTCAAGCTCCGGGGAAGGGTCTGGAGTGGGTCTCTCTTATTAGTTGGGATGGTGGTAGCACATACTATGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACAGCAAAAACTCCCTGTATCTGCAAATGAACAGTCTGAGAACTGAGGACACCGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G42*05\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGGCGTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGTCAAGCTCCAGGGAAGGGTCTGGAGTGGGTCTCTCTTATTAGTGGGGATGGTGGTAGCACATACTATGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACAGCAAAAACTCCCTGTATCTGCAAATGAACAGTCTGAGAACTGAGGACACCGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G43*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGTGTGGTACGGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGGCATGAGCTGGGTCCGCCAAGCTCCAGGGAAGGGGCTGGAGTGGGTCTCTGGTATTAATTGGAATGGTGGTAGCACAGGTTATGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCCGAGGACACGGCCTTGTATTACTGTGCGAGAGA\n>IGHVF10-G43*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGTGTGGTACGGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGGCATGAGCTGGGTCCGCCAAGCTCCAGGGAAGGGGCTGGAGTGGGTCTCTGGTATTAATTGGAATGGTGGTAGCACAGGTTATGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCCGAGGACACGGCCTTGTATCACTGTGCGAGAGA\n>IGHVF10-G43*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGTGTGGTACGGCCTGGGGGGTCCCTGAGACTCTCCTTTGCAGCCTCTGGATTCACCTTTGATGATTATGGCATGAGCTGGGTCCGCCAAGCTCCAGGGAAGGGGCTGGAGTGGGTCTCTGGTATTAATTGGAATGGTGGTAGCACAGGTTATGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCCGAGGACACGGCCTTGTATCACTGTGCGAGAGA\n>IGHVF10-G44*01\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGCAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGGCAAGCTCCAGGGAAGGGCCTGGAGTGGGTCTCAGGTATTAGTTGGAATAGTGGTAGCATAGGCTATGCGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACGGCCTTGTATCACTGTGCAAAAG\n>IGHVF10-G44*02\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGCAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGGCAAGCTCCAGGGAAGGGCCTGGAGTGGGTCTCAGGTATTAGTTGGAATAGTGGTAGCATAGGCTATGCGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACATGGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G44*03\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGCAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTGATGATTATGCCATGCACTGGGTCCGGCAAGCTCCAGGGAAGGGCCTGGAGTGGGTCTCAGGTATTAGTTGGAATAGTGGTAGCATAGGCTATGCGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACGGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G44*04\nGAAGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGCAGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTCTGATGATTATGCCATGCACTGGGTCCGGCAAGCTCCAGGGAAGGGCCTGGAGTGGGTCTCAGGTATTAGTTGGAATAGTGGTAGCATAGGCTATGCGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCCCTGTATCTGCAAATGAACAGTCTGAGAGCTGAGGACACGGCCTTGTATTACTGTGCAAAAGATA\n>IGHVF10-G45*01\nGAGGTGCAGCTGGTGGAGTCTGGGGAAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTCTGCTATGCACTGGGTCCGCCAGGCTCCAAGAAAGGGTTTGTAGTGGGTCTCAGTTATTAGTACAAGTGGTGATACCGTACTCTACACAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAATGCCCAGAATTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGACGACATGGCTGTGTATTACTGTGTGAAAGA\n>IGHVF10-G46*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGATACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGCCCGCAAGGCTCCAGGAAAGGGGCTGAAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGTGGACTCCGTGAAGCGCCGATTCATCATCTCCAGAGACAATTCCAGGAACTCCCTGTATCTGCAAAAGAACAGACGGAGAGCCGAGGACATGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G46*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGCCCGCAAGGCTCCAGGAAAGGGGCTGGAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGTGGACTCCGTGAAGCGCCGATTCATCATCTCCAGAGACAATTCCAGGAACTCCCTGTATCTGCAAAAGAACAGACGGAGAGCCGAGGACATGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G46*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGCCTGCAAGGCTCCAGGAAAGGGGCTGGAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGTGGACTCCGTGAAGCGCCGATTCATCATCTCCAGAGACAATTCCAGGAACTCCCTGTATCTGCAAAAGAACAGACGGAGAGCCGAGGACATGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G47*01\nACAGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAGAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGTCCGCCAGGCTCCAGGAAAGGGGCTGGAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGCAGACTCTGTGAAGGGCCGATTCATCATCTCCAGAGACAATTCCAGGAACTTCCTGTATCAGCAAATGAACAGCCTGAGGCCCGAGGACATGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G48*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGATCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGTCCATCAGGCTCCAGGAAAGGGGCTGGAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGCAGACTCTGTGAAGGGCCGATTCATCATCTCCAGAGACAATTCCAGGAACACCCTGTATCTGCAAACGAATAGCCTGAGGGCCGAGGACACGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G48*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGATCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAACAGTGACATGAACTGGGTCCATCAGGCTCCAGGAAAGGGGCTGGAGTGGGTATCGGGTGTTAGTTGGAATGGCAGTAGGACGCACTATGCAGACTCTGTGAAGGGCCAATTCATCATCTCCAGAGACAATTCCAGGAACACCCTGTATCTGCAAACGAATAGCCTGAGGGCCGAGGACACGGCTGTGTATTACTGTGTGAGAAA\n>IGHVF10-G49*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGTAGCTATTGGATGAGCTGGGTCCGCCAGGCTCCAGGGAAAGGGCTGGAGTGGGTGGCCAACATAAAGCAAGATGGAAGTGAGAAATACTATGTGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGGG\n>IGHVF10-G49*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGTAGCTATTGGATGAGCTGGGTCCGCCAGGCTCCAGGGAAAGGGCTGGAGTGGGTGGCCAACATAAAGCAAGATGGAAGTGAGAAATACTATGTGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G49*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGTAGCTATTGGATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTGGCCAACATAAAGCAAGATGGAAGTGAGAAATACTATGTGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G49*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCCAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTTAGTAGCTATTGGATGAGCTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTGGCCAACATAAAGCAAGATGGAAGTGAGAAATACTATGTGGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G50*01\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCAAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTGGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGGGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G50*02\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCAAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTGGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGGGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G50*03\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCAAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTTACACAAACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCCGTGTATTACTGTGCGAGAGA\n>IGHVF10-G50*04\nCAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTCAAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAGCTGGATCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTTACACAAACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G51*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCCTGGTCAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTGGTAGTACCATATACTACGCAGACTCAGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G51*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCCTGGTCAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTTACATATACTACGCAGACTCAGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAG\n>IGHVF10-G51*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCCTGGTCAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTAGTAGTTACATATACTACGCAGACTCAGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAATTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G51*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCCTGGTCAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTAGTAGTTACATATACTACGCAGACTCAGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G51*05\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCCTGGTCAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTAGTAGTTACATATACTACGCAGACTCAGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACAGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G52*01\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G52*02\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTAAAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTGACTACTACATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTCTCATCCATTAGTAGTAGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTTTATTACTGTGCGAGAGA\n>IGHVF10-G52*03\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGAGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGTTATGAAATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTGGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTTTATTACTGTGCGAGAGA\n>IGHVF10-G52*04\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAACGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G52*05\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAATGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGCCGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n>IGHVF10-G52*06\nGAGGTGCAGCTGGTGGAGTCTGGGGGAGGCTTGGTACAGCCTGGGGGGTCCCTGAGACTCTCCTGTGCAGCCTCTGGATTCACCTTCAGTAGCTATAGCATGAACTGGGTCCGCCAGGCTCCAGGGAAGGGGCTGGAGTGGGTTTCATACATTAGTAGTAGTAGTAGTACCATATACTACGCAGACTCTGTGAAGGGCCGATTCACCATCTCCAGAGACAATGCCAAGAACTCACTGTATCTGCAAATGAACAGCCTGAGAGACGAGGACACGGCTGTGTATTACTGTGCGAGAGA\n","\n>IGHD1-1*01\nGGTACAACTGGAACGAC\n>IGHD1-14*01\nGGTATAACCGGAACCAC\n>IGHD1-20*01\nGGTATAACTGGAACGAC\n>IGHD1-26*01\nGGTATAGTGGGAGCTACTAC\n>IGHD1-7*01\nGGTATAACTGGAACTAC\n>IGHD2-15*01\nAGGATATTGTAGTGGTGGTAGCTGCTACTCC\n>IGHD2-2*01\nAGGATATTGTAGTAGTACCAGCTGCTATGCC\n>IGHD2-2*02\nAGGATATTGTAGTAGTACCAGCTGCTATACC\n>IGHD2-21*01\nAGCATATTGTGGTGGTGATTGCTATTCC\n>IGHD2-21*02\nAGCATATTGTGGTGGTGACTGCTATTCC\n>IGHD2-8*01\nAGGATATTGTACTAATGGTGTATGCTATACC\n>IGHD2-8*02\nAGGATATTGTACTGGTGGTGTATGCTATACC\n>IGHD3-10*01\nGTATTACTATGGTTCGGGGAGTTATTATAAC\n>IGHD3-10*03\nGTATTACTATGGTTCAGGGAGTTATTATAAC\n>IGHD3-16*02\nGTATTATGATTACGTTTGGGGGAGTTATCGTTATACC\n>IGHD3-16*03\nGTATTATGATTACATTTGGGGGAGTTATCGTTATACC\n>IGHD3-22*01\nGTATTACTATGATAGTAGTGGTTATTACTAC\n>IGHD3-3*01\nGTATTACGATTTTTGGAGTGGTTATTATACC\n>IGHD3-9*01\nGTATTACGATATTTTGACTGGTTATTATAAC\n>IGHD4-11*01\nTGACTACAGTAACTAC\n>IGHD4-17*01\nTGACTACGGTGACTAC\n>IGHD4-23*01\nTGACTACGGTGGTAACTCC\n>IGHD4-4*01\nTGACTACAGTAACTAC\n>IGHD5-12*01\nGTGGATATAGTGGCTACGATTAC\n>IGHD5-18*01\nGTGGATACAGCTATGGTTAC\n>IGHD5-18*02\nGTGAATATAGTGGCTACGATTAC\n>IGHD5-24*01\nGTAGAGATGGCTACAATTAC\n>IGHD5-5*01\nGTGGATACAGCTATGGTTAC\n>IGHD6-13*01\nGGGTATAGCAGCAGCTGGTAC\n>IGHD6-19*01\nGGGTATAGCAGTGGCTGGTAC\n>IGHD6-25*01\nGGGTATAGCAGCGGCTAC\n>IGHD6-6*01\nGAGTATAGCAGCTCGTCC\n>IGHD7-27*01\nCTAACTGGGGA\n","\n>IGHJ1*01\nGCTGAATACTTCCAGCACTGGGGCCAGGGCACCCTGGTCACCGTCTCCTCAG\n>IGHJ2*01\nCTACTGGTACTTCGATCTCTGGGGCCGTGGCACCCTGGTCACTGTCTCCTCAG\n>IGHJ3*02\nTGATGCTTTTGATATCTGGGGCCAAGGGACAATGGTCACCGTCTCTTCAG\n>IGHJ4*02\nACTACTTTGACTACTGGGGCCAGGGAACCCTGGTCACCGTCTCCTCAG\n>IGHJ5*02\nACAACTGGTTCGACCCCTGGGGCCAGGGAACCCTGGTCACCGTCTCCTCAG\n>IGHJ6*02\nATTACTACTACTACTACGGTATGGACGTCTGGGGCCAAGGGACCACGGTCACCGTCTCCTCAG\n>IGHJ6*03\nATTACTACTACTACTACTACATGGACGTCTGGGGCAAAGGGACCACGGTCACCGTCTCCTCAG\n");class iJ{constructor(){this.tokenizerDictionary={A:1,T:2,G:3,C:4,N:5,P:0}}encodeAndEqualPadSequence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;const n=e.split("").map((e=>this.tokenizerDictionary[e])),r=t-n.length,o=r%2===0,a=Math.floor(r/2);return o?(n.unshift(...Array(a).fill(0)),n.push(...Array(a).fill(0))):(n.unshift(...Array(a).fill(0)),n.push(...Array(a+1).fill(0))),n}tokenizeSingleSequence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return{tokenized_sequence:Fv([this.encodeAndEqualPadSequence(e,t)],[1,t],"int32")}}}class sJ{dynamicCumulativeConfidenceThreshold(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=Hv(e,e.length,!0).indices.arraySync(),o=[];let a=0;const i=e.reduce(((e,t)=>e+t),0),s=t*i;for(const l of r)if(a+=e[l],o.push(l),a>=s||o.length>=n)break;return o}getAlleles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;const o=this.dynamicCumulativeConfidenceThreshold(e,n,r),a=[];return o.forEach((n=>{a.push({index:t[n],prob:e[n]})})),a}}function lJ(){const e=new iJ,t=new sJ,n=["v_allele","d_allele","j_allele"],r={v_allele:eJ,d_allele:nJ,j_allele:oJ},[o,a]=(0,_.useState)(null),[i,s]=(0,_.useState)(null),[l,c]=(0,_.useState)(!0),[u,d]=(0,_.useState)(null),[p,h]=(0,_.useState)(!1),[f,C]=(0,_.useState)("0.9"),[G,m]=(0,_.useState)("0.2"),[A,T]=(0,_.useState)("0.8"),[g,y]=(0,_.useState)("3"),[v,b]=(0,_.useState)("3"),[x,w]=(0,_.useState)("3");(0,_.useEffect)((()=>{(async()=>{try{const e=await nF("tfjs/alignairr_model/model.json");console.log("Model loaded successfully"),a(e),c(!1);const t=await k(e,n);s(t)}catch(e){console.error("Error loading model:",e)}})()}),[]);const k=async(e,t)=>{if(!e)return console.error("Model not loaded yet."),null;const n={};return Object.keys(e.signature.outputs).forEach(((e,r)=>{t.includes(e)&&(n[e]=r)})),n},I=async(n,r,a,s,c)=>{if(l)console.error("Model is still loading.");else{const l=e.tokenizeSingleSequence(n);try{const e=await o.predict(l);let n={v_allele:"",d_allele:"",j_allele:""};for(let o=0;o<r.length;o++){const l=r[o],u=e[i[l]],d=await u.data(),p=t.getAlleles(d,a[l],s[l],c[l]);n[l]=p}return n}catch(u){console.log("Error predicting:",u)}}},S=e=>{let{values:t,color:n}=e;const r=t.map((e=>({x:e.index,y:e.prob,color:n})));return(0,E.jsx)(Hu,{culture:window.navigator.language,data:r,height:1200,width:300,hideLegend:!0,enableReflow:!0,hideLabels:!0,rotateXAxisLables:!0,yAxisTickFormat:e=>e.toFixed(2)})};function N(e){let{name:t,height:n="130px",width:r="200%",...o}=e;const{field:a,error:i}=B(t);return(0,E.jsx)(gl,{multiline:!0,errorMessage:i,...a,...o,styles:()=>({fieldGroup:{height:n,width:r}})})}const R=function(e,t,n){return(0,_.useCallback)(((r,o)=>{void 0!==o&&(o=Number(o),t=Number(t),o>(n=Number(n))&&(o=n),o<t&&(o=t),o=o.toString(),e(o))}),[])};function D(e){let{name:t,maxWidth:n="100px",defualtVal:r,setName:o,min:a,max:i,step:s}=e;return(0,E.jsx)(Fl,{label:t,value:r,step:s,styles:()=>({root:{maxWidth:n}}),onChange:R(o,a,i)})}return(0,E.jsx)("div",{className:"App",children:(0,E.jsxs)(z,{validate:e=>{const t={};return e.sequence||(t.sequence="Required!"),t},onSubmit:async e=>{try{const t=e.sequence.split("\n"),n={};let o="",a="";t.forEach(((e,t)=>{0!==t||e.startsWith(">")||(o="seq 1"),e.startsWith(">")?(o&&a&&(n[o]=a),o=e.slice(1).trim(),a=""):a+=e.trim()})),o&&a&&(n[o]=a);const i={v_allele:f,d_allele:G,j_allele:A},s={v_allele:g,d_allele:v,j_allele:x},l={};for(const[e,c]of Object.entries(n)){const t=await I(c.replace(/\n/g,"").toUpperCase(),["v_allele","d_allele","j_allele"],r,i,s);l[e]={vdjResults:t}}d(l),h(!0)}catch(t){console.error("Error in predictions:",t)}},children:[(0,E.jsx)(Jl,{enableScopedSelectors:!0,disableShrink:!0,tokens:{childrenGap:20},children:(0,E.jsxs)(Jl,{enableScopedSelectors:!0,horizontal:!0,disableShrink:!0,tokens:{childrenGap:300},children:[(0,E.jsxs)(Jl,{children:[(0,E.jsx)("label",{children:"Enter sequence: "}),(0,E.jsx)("br",{}),(0,E.jsx)(N,{name:"sequence",height:"130px",width:"200%"}),(0,E.jsx)("br",{}),(0,E.jsx)(fc,{type:"submit",text:"Submit"})]}),(0,E.jsxs)(Jl,{children:[(0,E.jsx)("label",{children:"Confidence level: "}),(0,E.jsx)("br",{}),(0,E.jsxs)(Jl,{enableScopedSelectors:!0,horizontal:!0,disableShrink:!0,horizontalAlign:"space-between",children:[(0,E.jsx)(D,{name:"V",maxWidth:"100px",defualtVal:f,setName:C,min:"0",max:"1",step:"0.1"}),(0,E.jsx)(D,{name:"D",maxWidth:"100px",defualtVal:G,setName:m,min:"0",max:"1",step:"0.1"}),(0,E.jsx)(D,{name:"J",maxWidth:"100px",defualtVal:A,setName:T,min:"0",max:"1",step:"0.1"})]}),(0,E.jsx)("br",{}),(0,E.jsx)("label",{children:"Max allele assignment: "}),(0,E.jsx)("br",{}),(0,E.jsxs)(Jl,{enableScopedSelectors:!0,horizontal:!0,disableShrink:!0,horizontalAlign:"space-between",children:[(0,E.jsx)(D,{name:"V",maxWidth:"100px",defualtVal:g,setName:y,min:"1",max:"10",step:"1.0"}),(0,E.jsx)(D,{name:"D",maxWidth:"100px",defualtVal:v,setName:b,min:"1",max:"10",step:"1.0"}),(0,E.jsx)(D,{name:"J",maxWidth:"100px",defualtVal:x,setName:w,min:"1",max:"10",step:"1.0"})]})]})]})}),p&&function(e){const t=Object.keys(e).length>1,n=function(e,t){return Object.entries(e).map((e=>{let[n,r]=e;return function(e,t,n){const r=[{key:"vAlleles",name:"V Alleles",fieldName:"vAlleles",minWidth:200,height:400,maxWidth:300,isResizable:!1,isMultiline:!0},{key:"dAlleles",name:"D Alleles",fieldName:"dAlleles",minWidth:200,maxWidth:300,isResizable:!1,isMultiline:!0},{key:"jAlleles",name:"J Alleles",fieldName:"jAlleles",minWidth:200,maxWidth:300,isResizable:!1,isMultiline:!0}],{v_allele:o,d_allele:a,j_allele:i}=null!==t&&void 0!==t?t:{},s=[{key:"alleles",vAlleles:null===o||void 0===o?void 0:o.map((e=>e.index)).join(", "),dAlleles:null===a||void 0===a?void 0:a.map((e=>e.index)).join(", "),jAlleles:null===i||void 0===i?void 0:i.map((e=>e.index)).join(", ")},{key:"confidence",vAlleles:(0,E.jsx)(S,{values:o,color:"#627CEF"}),dAlleles:(0,E.jsx)(S,{values:a,color:"#0E7878"}),jAlleles:(0,E.jsx)(S,{values:i,color:"#C19C00"}),height:400}],l={root:{selectors:{":hover":{background:"white"}}}};return n?(0,E.jsx)(ge,{headerText:e,children:(0,E.jsx)(ra,{items:s,columns:r,setKey:"set",selectionMode:Zn.none,layoutMode:Ke.fixedColumns,styles:l,onRenderRow:(e,t)=>{var n=40;return"confidence"==e.item.key&&(n=200),t({...e,styles:{root:{height:n,selectors:{":hover":{background:"white"}}}}})}})},e):(0,E.jsx)(ra,{items:s,columns:r,setKey:"set",selectionMode:Zn.none,layoutMode:Ke.fixedColumns,styles:l,onRenderRow:(e,t)=>{var n=40;return"confidence"==e.item.key&&(n=200),t({...e,styles:{root:{height:n,selectors:{":hover":{background:"white"}}}}})}})}(n,r.vdjResults,t)}))}(e,t);return t?(0,E.jsx)(sl,{"aria-label":"Basic Pivot Example",children:n}):n}(u)]})})}(0,n(5255).hN)([{rawString:".root_dd790ee3{display:inline-block;vertical-align:middle;speak:none;width:1em;height:1em}.svg_dd790ee3{height:100%;fill:currentColor;vertical-align:top;forced-color-adjust:auto}"}]);const cJ="root_dd790ee3",uJ="svg_dd790ee3",dJ=_.createContext(void 0),pJ=e=>{let{svg:t,displayName:n}=e;const r=e=>{var r;const{className:o,style:a={}}=e,i=_.useContext(dJ),s=Te(e,J),l=e["aria-label"]||e["aria-labelledby"]||e.title?{role:"img"}:{"aria-hidden":!0};return _.createElement("span",{...l,...s,className:ke(cJ,o),style:a},(null===(r=null===i||void 0===i?void 0:i.icons)||void 0===r?void 0:r[n])?i.icons[n]:t({classes:I,props:e}))};return r.displayName=n,r},hJ=pJ({svg:e=>{let{classes:t}=e;return _.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",className:t.svg,focusable:"false"},_.createElement("path",{d:"M1939 467l90 90-1005 1005L19 557l90-90 915 915 915-915z"}))},displayName:"ChevronDownIcon"});(0,Lt.K1)({icons:{ChevronDown:(0,E.jsx)(hJ,{})}}),N.render((0,E.jsx)(_.StrictMode,{children:(0,E.jsx)(lJ,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.8f1fae3e.js.map